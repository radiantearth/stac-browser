{"version":3,"file":"js/1109.82f8ef77.js","mappings":"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","sources":["webpack://@radiantearth/stac-browser/./src/components/maps/LayerControlGroup.vue","webpack://@radiantearth/stac-browser/src/components/maps/LayerControlGroup.vue","webpack://@radiantearth/stac-browser/./src/components/maps/LayerControlGroup.vue?aa21","webpack://@radiantearth/stac-browser/./src/components/maps/LayerControlGroup.vue?5917"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ul',_vm._l((_vm.layers),function(l){return _c('li',{key:l.id},[_c('div',{staticClass:\"d-flex justify-content-between\"},[_c('b-form-checkbox',{attrs:{\"inline\":\"\",\"name\":l.id,\"checked\":l.visible},on:{\"input\":function($event){return _vm.setVisibility(l, $event)}}},[_c('span',{staticClass:\"title\"},[_vm._v(_vm._s(l.title))])]),_c('b-button',{attrs:{\"variant\":\"light\",\"size\":\"sm\",\"title\":_vm.$t('mapping.fit')},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.fitToExtent(l)}}},[_c('b-icon-zoom-in')],1)],1),(l.group > 1)?_c('LayerControlGroup',{attrs:{\"map\":_vm.map,\"group\":l.layer,\"maxZoom\":_vm.maxZoom}}):_vm._e()],1)}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ul>\n    <li v-for=\"l in layers\" :key=\"l.id\">\n      <div class=\"d-flex justify-content-between\">\n        <b-form-checkbox inline :name=\"l.id\" :checked=\"l.visible\" @input=\"setVisibility(l, $event)\">\n          <span class=\"title\">{{ l.title }}</span>\n        </b-form-checkbox>\n        <b-button variant=\"light\" size=\"sm\" :title=\"$t('mapping.fit')\" @click.prevent.stop=\"fitToExtent(l)\">\n          <b-icon-zoom-in />\n        </b-button>\n      </div>\n      <LayerControlGroup v-if=\"l.group > 1\" :map=\"map\" :group=\"l.layer\" :maxZoom=\"maxZoom\" />\n    </li>\n  </ul>\n</template>\n\n<script>\nimport LayerControlMixin from './LayerControlMixin';\nimport { BFormCheckbox, BIconZoomIn } from 'bootstrap-vue';\nimport LayerGroup from 'ol/layer/Group';\nimport { transformExtent } from 'ol/proj';\n\nexport default {\n  name: 'LayerControlGroup',\n  components: {\n    LayerControlGroup: () => import('./LayerControlGroup.vue'),\n    BFormCheckbox,\n    BIconZoomIn\n  },\n  mixins: [\n    LayerControlMixin\n  ],\n  props: {\n    map: {\n      type: Object,\n      required: true\n    },\n    group: {\n      type: Object,\n      required: true\n    },\n    maxZoom: {\n      type: Number,\n      default: undefined\n    }\n  },\n  computed: {\n    layers() {\n      const allLayers = this.group.getLayers().getArray();\n      const layers = [];\n      for (const layer of allLayers) {\n        if (layer.get('base')) {\n          // Skip base layers from top-level layer group\n          continue;\n        }\n        const group = layer instanceof LayerGroup ? layer.getLayers().getLength() : 0;\n        const data = {\n          group,\n          layer,\n          id: layer.ol_uid,\n          visible: layer.getVisible(),\n          title: this.getTitle(layer)\n        };\n        layers.push(data);\n      }\n      return layers;\n    },\n    visibleLayers: {\n      get() {\n        return this.layers\n          .filter(data => data.layer.getVisible())\n          .map(data => data.id);\n      },\n      set(visibleLayers) {\n        for (const data of this.layers) {\n          const expected = visibleLayers.includes(data.id);\n          const current = data.layer.getVisible();\n          if (expected !== current) {\n            data.layer.setVisible(expected);\n          }\n        }\n      }\n    }\n  },\n  methods: {\n    setVisibility(data, visible) {\n      data.layer.setVisible(visible);\n      data.visible = visible;\n    },\n    fitToExtent(data) {\n      if (!data.visible) {\n        this.setVisibility(data, true);\n      }\n      let extent = data.layer.getExtent();\n      let stac = data.layer.get('stac');\n      if (stac) {\n        let bbox = stac.getBoundingBox();\n        if (!bbox) {\n          stac = stac.getContext();\n          if (stac) {\n            bbox = stac.getBoundingBox();\n          }\n        }\n        if (bbox) {\n          extent = transformExtent(bbox, 'EPSG:4326', this.map.getView().getProjection());\n        }\n      }\n      if (extent) {\n        this.map.getView().fit(extent, { padding: [10,10,10,10], maxZoom: this.maxZoom });\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.ol-layercontrol {\n  z-index: 1;\n  left: 0.5em;\n  bottom: 0.5em;\n}\n.layercontrol {\n  max-width: 300px;\n  max-height: 500px;\n  overflow: auto;\n  margin-top: -0.5rem;\n  margin-left: -0.75rem;\n  margin-right: -0.75rem;\n  padding: 0.5rem 0.75rem 0  0.75rem;\n\n  .title {\n    line-break: anywhere;\n  }\n\n  ul {\n    list-style: none;\n    padding: 0.1rem 0;\n    margin: 0;\n\n    .btn-sm {\n      padding: 0.1rem 0.5rem;\n    }\n\n    li {\n      padding-top: 0.1rem;\n      padding-bottom: 0.1rem;\n    }\n\n    li li {\n      padding-left: 0.75rem;\n    }\n  }\n}\nh5 {\n  font-weight: bold;\n  font-size: 1em;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LayerControlGroup.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LayerControlGroup.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./LayerControlGroup.vue?vue&type=template&id=6c32f2d2&scoped=true\"\nimport script from \"./LayerControlGroup.vue?vue&type=script&lang=js\"\nexport * from \"./LayerControlGroup.vue?vue&type=script&lang=js\"\nimport style0 from \"./LayerControlGroup.vue?vue&type=style&index=0&id=6c32f2d2&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c32f2d2\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","_l","layers","l","key","id","staticClass","attrs","visible","on","$event","setVisibility","_v","_s","title","$t","preventDefault","stopPropagation","fitToExtent","group","map","layer","maxZoom","_e","staticRenderFns","name","components","LayerControlGroup","BFormCheckbox","BIconZoomIn","mixins","LayerControlMixin","props","type","Object","required","Number","default","undefined","computed","allLayers","getLayers","getArray","get","LayerGroup","getLength","data","ol_uid","getVisible","getTitle","push","visibleLayers","filter","set","expected","includes","current","setVisible","methods","extent","getExtent","stac","bbox","getBoundingBox","getContext","transformExtent","getView","getProjection","fit","padding","component"],"sourceRoot":""}