"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[2192,3440,7500],{7500:function(t,e,n){n.r(e),n.d(e,{DEFAULT_VERSION:function(){return g},createLoader:function(){return _},getFeatureInfoUrl:function(){return R},getImageSrc:function(){return E},getLegendUrl:function(){return A},getRequestParams:function(){return I},getRequestUrl:function(){return d}});var i=n(43938),s=n(70915),r=n(61597),o=n(38599),a=n(82806),u=n(14465),c=n(83440),h=n(42192);const g="1.3.0",l=[101,101];function d(t,e,n,i,s){s["WIDTH"]=n[0],s["HEIGHT"]=n[1];const r=i.getAxisOrientation(),o=(0,a.Z)(s["VERSION"],"1.3")>=0;s[o?"CRS":"SRS"]=i.getCode();const c=o&&r.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return s["BBOX"]=c.join(","),(0,u.LW)(t,s)}function E(t,e,n,i,o,a,u){a=Object.assign({REQUEST:"GetMap"},a);const c=e/n,g=[(0,r.LI)((0,s.RG)(t)/c,h.DECIMALS),(0,r.LI)((0,s.Oq)(t)/c,h.DECIMALS)];if(1!=n)switch(u){case"geoserver":const t=90*n+.5|0;"FORMAT_OPTIONS"in a?a["FORMAT_OPTIONS"]+=";dpi:"+t:a["FORMAT_OPTIONS"]="dpi:"+t;break;case"mapserver":a["MAP_RESOLUTION"]=90*n;break;case"carmentaserver":case"qgis":a["DPI"]=90*n;break;default:throw new Error("Unknown `serverType` configured")}const l=d(o,t,g,i,a);return l}function I(t,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:g,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},t)}function _(t){const e=void 0===t.hidpi||t.hidpi,n=(0,o.Jt)(t.projection||"EPSG:3857"),s=t.ratio||1.5,r=t.load||i.D4,a=t.crossOrigin??null;return(i,o,u)=>{i=(0,c.getRequestExtent)(i,o,u,s),1==u||e&&void 0!==t.serverType||(u=1);const h=E(i,o,u,n,t.url,I(t.params,"GetMap"),t.serverType),g=new Image;return g.crossOrigin=a,r(g,h).then(t=>({image:t,extent:i,pixelRatio:u}))}}function R(t,e,n){if(void 0===t.url)return;const i=(0,o.Jt)(t.projection||"EPSG:3857"),u=(0,s.Bg)(e,n,0,l),c={QUERY_LAYERS:t.params["LAYERS"],INFO_FORMAT:"application/json"};Object.assign(c,I(t.params,"GetFeatureInfo"),t.params);const g=(0,r.RI)((e[0]-u[0])/n,h.DECIMALS),E=(0,r.RI)((u[3]-e[1])/n,h.DECIMALS),_=(0,a.Z)(c["VERSION"],"1.3")>=0;return c[_?"I":"X"]=g,c[_?"J":"Y"]=E,d(t.url,u,l,i,c)}function A(t,e){if(void 0===t.url)return;const n={SERVICE:"WMS",VERSION:g,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0!==e){const i=(0,o.Jt)(t.projection||"EPSG:3857").getMetersPerUnit()||1,s=28e-5;n["SCALE"]=e*i/s}if(Object.assign(n,t.params),void 0!==t.params&&void 0===n["LAYER"]){const t=n["LAYERS"],e=!Array.isArray(t)||1!==t.length;if(!e)return;n["LAYER"]=t}return(0,u.LW)(t.url,n)}},34889:function(t,e,n){function i(t){return Array.isArray(t)?Math.min(...t):t}n.d(e,{m:function(){return i}})},42192:function(t,e,n){n.r(e),n.d(e,{DECIMALS:function(){return s},DEFAULT_WMS_VERSION:function(){return i}});const i="1.3.0",s=4},83440:function(t,e,n){n.r(e),n.d(e,{ImageSourceEvent:function(){return S},ImageSourceEventType:function(){return p},default:function(){return j},defaultImageLoadFunction:function(){return O},getRequestExtent:function(){return L}});var i=n(43938),s=n(6141),r=n(66514),o=n(1685),a=n(6837),u=n(70915),c=n(61597),h=n(38599),g=n(9438),l=n(33513),d=n(34889),E=n(52913),I=n(93101);class _ extends i.Ay{constructor(t,e,n,i,r,o,a){let c=t.getExtent();c&&t.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let h=e.getExtent();h&&e.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);const g=h?(0,u._N)(n,h):n,d=(0,u.q1)(g),_=(0,l.KQ)(t,e,d,i),R=I.l,A=new E.A(t,e,g,c,_*R,i),m=A.calculateSourceExtent(),p=(0,u.Im)(m)?null:o(m,_,r),S=p?s.A.IDLE:s.A.EMPTY,f=p?p.getPixelRatio():1;super(n,i,f,S),this.targetProj_=e,this.maxSourceExtent_=c,this.triangulation_=A,this.targetResolution_=i,this.targetExtent_=n,this.sourceImage_=p,this.sourcePixelRatio_=f,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==s.A.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==s.A.LOADED){const t=(0,u.RG)(this.targetExtent_)/this.targetResolution_,e=(0,u.Oq)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,l.XX)(t,e,this.sourcePixelRatio_,(0,d.m)(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==s.A.IDLE){this.state=s.A.LOADING,this.changed();const t=this.sourceImage_.getState();t==s.A.LOADED||t==s.A.ERROR?this.reproject_():(this.sourceListenerKey_=(0,g.KT)(this.sourceImage_,a.A.CHANGE,t=>{const e=this.sourceImage_.getState();e!=s.A.LOADED&&e!=s.A.ERROR||(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){(0,g.JH)(this.sourceListenerKey_),this.sourceListenerKey_=null}}var R=_,A=n(16444),m=n(42192);const p={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class S extends o.Ay{constructor(t,e){super(t),this.image=e}}class f extends A["default"]{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!t.loader&&0===t.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){const n=(0,r.FT)(e,t,0);t=e[n]}return t}getImage(t,e,n,i){const s=this.getProjection();if(!s||!i||(0,h.tI)(s,i))return s&&(i=s),this.getImageInternal(t,e,n,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,h.tI)(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==e&&(0,u.aI)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new R(s,i,t,e,n,(t,e,n)=>this.getImageInternal(t,e,n,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,n,s){if(this.loader){const r=L(t,e,n,1),o=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===s&&(this.wantedExtent_&&(0,u.ms)(this.wantedExtent_,r)||(0,u.ms)(this.image.getExtent(),r))&&(this.wantedResolution_&&(0,d.m)(this.wantedResolution_)===o||(0,d.m)(this.image.getResolution())===o)))return this.image;this.wantedProjection_=s,this.wantedExtent_=r,this.wantedResolution_=o,this.image=new i.Ay(r,o,n,this.loader),this.image.addEventListener(a.A.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target;let n;switch(e.getState()){case s.A.LOADING:this.loading=!0,n=p.IMAGELOADSTART;break;case s.A.LOADED:this.loading=!1,n=p.IMAGELOADEND;break;case s.A.ERROR:this.loading=!1,n=p.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new S(n,e))}}function O(t,e){t.getImage().src=e}function L(t,e,n,i){const s=e/n,r=(0,u.q1)(t),o=(0,c.mk)((0,u.RG)(t)/s,m.DECIMALS),a=(0,c.mk)((0,u.Oq)(t)/s,m.DECIMALS),h=(0,c.mk)((i-1)*o/2,m.DECIMALS),g=o+2*h,l=(0,c.mk)((i-1)*a/2,m.DECIMALS),d=a+2*l;return(0,u.Bg)(r,s,0,[g,d])}var j=f}}]);
//# sourceMappingURL=7500.4bb1078b.js.map