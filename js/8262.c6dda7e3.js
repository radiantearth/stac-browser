"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[2192,3440,8262,8807],{34889:function(t,e,i){function n(t){return Array.isArray(t)?Math.min(...t):t}i.d(e,{m:function(){return n}})},42192:function(t,e,i){i.r(e),i.d(e,{DECIMALS:function(){return s},DEFAULT_WMS_VERSION:function(){return n}});const n="1.3.0",s=4},48807:function(t,e,i){i.r(e),i.d(e,{createLoader:function(){return r}});var n=i(43938),s=i(70915);function r(t){const e=t.load||n.D4,i=t.imageExtent,r=t.crossOrigin??null;return()=>{const n=new Image;return n.crossOrigin=r,e(n,t.url).then(t=>{const e=(0,s.RG)(i)/t.width,n=(0,s.Oq)(i)/t.height,r=e!==n?[e,n]:n;return{image:t,extent:i,resolution:r,pixelRatio:1}})}}},58262:function(t,e,i){i.r(e);var n=i(43938),s=i(6837),r=i(70915),a=i(38599),o=i(83440),u=i(48807);class h extends o["default"]{constructor(t){const e=void 0!==t.crossOrigin?t.crossOrigin:null,i=void 0!==t.imageLoadFunction?t.imageLoadFunction:o.defaultImageLoadFunction;super({attributions:t.attributions,interpolate:t.interpolate,projection:(0,a.Jt)(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new n.Ay(this.imageExtent_,void 0,1,(0,u.createLoader)({url:t.url,imageExtent:t.imageExtent,crossOrigin:e,load:(t,e)=>(this.image.setImage(t),i(this.image,e),(0,n.D4)(t))})),this.image.addEventListener(s.A.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,e,i,n){return(0,r.HY)(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}e["default"]=h},83440:function(t,e,i){i.r(e),i.d(e,{ImageSourceEvent:function(){return x},ImageSourceEventType:function(){return p},default:function(){return j},defaultImageLoadFunction:function(){return L},getRequestExtent:function(){return D}});var n=i(43938),s=i(6141),r=i(66514),a=i(1685),o=i(6837),u=i(70915),h=i(61597),c=i(38599),g=i(9438),l=i(33513),d=i(34889),_=i(52913),m=i(93101);class I extends n.Ay{constructor(t,e,i,n,r,a,o){let h=t.getExtent();h&&t.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);let c=e.getExtent();c&&e.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const g=c?(0,u._N)(i,c):i,d=(0,u.q1)(g),I=(0,l.KQ)(t,e,d,n),E=m.l,A=new _.A(t,e,g,h,I*E,n),R=A.calculateSourceExtent(),p=(0,u.Im)(R)?null:a(R,I,r),x=p?s.A.IDLE:s.A.EMPTY,f=p?p.getPixelRatio():1;super(i,n,f,x),this.targetProj_=e,this.maxSourceExtent_=h,this.triangulation_=A,this.targetResolution_=n,this.targetExtent_=i,this.sourceImage_=p,this.sourcePixelRatio_=f,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==s.A.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==s.A.LOADED){const t=(0,u.RG)(this.targetExtent_)/this.targetResolution_,e=(0,u.Oq)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,l.XX)(t,e,this.sourcePixelRatio_,(0,d.m)(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==s.A.IDLE){this.state=s.A.LOADING,this.changed();const t=this.sourceImage_.getState();t==s.A.LOADED||t==s.A.ERROR?this.reproject_():(this.sourceListenerKey_=(0,g.KT)(this.sourceImage_,o.A.CHANGE,t=>{const e=this.sourceImage_.getState();e!=s.A.LOADED&&e!=s.A.ERROR||(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){(0,g.JH)(this.sourceListenerKey_),this.sourceListenerKey_=null}}var E=I,A=i(16444),R=i(42192);const p={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class x extends a.Ay{constructor(t,e){super(t),this.image=e}}class f extends A["default"]{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!t.loader&&0===t.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){const i=(0,r.FT)(e,t,0);t=e[i]}return t}getImage(t,e,i,n){const s=this.getProjection();if(!s||!n||(0,c.tI)(s,n))return s&&(n=s),this.getImageInternal(t,e,i,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,c.tI)(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&(0,u.aI)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new E(s,n,t,e,i,(t,e,i)=>this.getImageInternal(t,e,i,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,i,s){if(this.loader){const r=D(t,e,i,1),a=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===s&&(this.wantedExtent_&&(0,u.ms)(this.wantedExtent_,r)||(0,u.ms)(this.image.getExtent(),r))&&(this.wantedResolution_&&(0,d.m)(this.wantedResolution_)===a||(0,d.m)(this.image.getResolution())===a)))return this.image;this.wantedProjection_=s,this.wantedExtent_=r,this.wantedResolution_=a,this.image=new n.Ay(r,a,i,this.loader),this.image.addEventListener(o.A.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target;let i;switch(e.getState()){case s.A.LOADING:this.loading=!0,i=p.IMAGELOADSTART;break;case s.A.LOADED:this.loading=!1,i=p.IMAGELOADEND;break;case s.A.ERROR:this.loading=!1,i=p.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new x(i,e))}}function L(t,e){t.getImage().src=e}function D(t,e,i,n){const s=e/i,r=(0,u.q1)(t),a=(0,h.mk)((0,u.RG)(t)/s,R.DECIMALS),o=(0,h.mk)((0,u.Oq)(t)/s,R.DECIMALS),c=(0,h.mk)((n-1)*a/2,R.DECIMALS),g=a+2*c,l=(0,h.mk)((n-1)*o/2,R.DECIMALS),d=o+2*l;return(0,u.Bg)(r,s,0,[g,d])}var j=f}}]);
//# sourceMappingURL=8262.c6dda7e3.js.map