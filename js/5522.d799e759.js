"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[5522],{75522:function(e,t,i){i.r(t),i.d(t,{default:function(){return R},defaultLoadFunction:function(){return m}});var s=i(11078),o=i(8143),r=i(68711),n=i(4087);const l=[];class a extends o.A{constructor(e,t,i,s,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=s.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=i}getContext(){return this.context_||(this.context_=(0,r.Y)(1,1,l)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=(0,n.v6)(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&((0,r.Yg)(this.context_),l.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}var u=a,c=i(88756),h=i(90588),d=i(6837),g=i(70915),T=i(21142),_=i(43530),p=i(38599),S=i(6782),x=i(56758),A=i(57115),y=i(4863),E=i(46164);class f extends E["default"]{constructor(e){const t=e.projection||"EPSG:3857",i=e.extent||(0,y.kZ)(t),s=e.tileGrid||(0,y.EN)({extent:i,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:s,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:m,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=void 0==e.overlaps||e.overlaps,this.tileClass=e.tileClass?e.tileClass:c.A,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,i){if(i.getState()===s.A.IDLE){i.setState(s.A.LOADING);const o=i.wrappedTileCoord,r=this.getTileGridForProjection(t),n=r.getTileCoordExtent(o),l=o[0],a=r.getResolution(l);(0,g.r)(n,-a,n);const u=this.tileGrid,c=u.getExtent();c&&(0,g._N)(n,c,n);const h=u.getZForResolution(a,this.zDirection);u.forEachTileCoord(n,h,o=>{const r=this.tileUrlFunction(o,e,t);this.sourceTiles_[r]||(this.sourceTiles_[r]=new this.tileClass(o,r?s.A.IDLE:s.A.EMPTY,r,this.format_,this.tileLoadFunction));const n=this.sourceTiles_[r];i.sourceTiles.push(n),this.tileKeysBySourceTileUrl_[r]||(this.tileKeysBySourceTileUrl_[r]=[]),this.tileKeysBySourceTileUrl_[r].push(i.getKey());const l=n.getState();if(l<s.A.LOADED){const e=t=>{this.handleTileChange(t);const o=n.getState();if(o===s.A.LOADED||o===s.A.ERROR){const t=n.getKey();t in i.errorTileKeys?n.getState()===s.A.LOADED&&delete i.errorTileKeys[t]:i.loadingSourceTiles--,o===s.A.ERROR?i.errorTileKeys[t]=!0:n.removeEventListener(d.A.CHANGE,e),0===i.loadingSourceTiles&&i.setState((0,_.p)(i.errorTileKeys)?s.A.LOADED:s.A.ERROR)}};n.addEventListener(d.A.CHANGE,e),i.loadingSourceTiles++}l===s.A.IDLE&&(n.extent=u.getTileCoordExtent(o),n.projection=t,n.resolution=u.getResolution(o[0]),n.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(e=>e.getState()===s.A.ERROR)?s.A.ERROR:s.A.LOADED)}return i.sourceTiles}removeSourceTiles(e){const t=e.getKey(),i=e.sourceTiles;for(let s=0,o=i.length;s<o;++s){const e=i[s].getTileUrl();if(!this.tileKeysBySourceTileUrl_[e])return;const o=this.tileKeysBySourceTileUrl_[e].indexOf(t);-1!==o&&(this.tileKeysBySourceTileUrl_[e].splice(o,1),0===this.tileKeysBySourceTileUrl_[e].length&&(delete this.tileKeysBySourceTileUrl_[e],delete this.sourceTiles_[e]))}}getTile(e,t,i,o,r){const n=[e,t,i];let l=this.getTileCoordForTileUrlFunction(n,r);const a=this.getTileGrid().getExtent(),c=this.getTileGridForProjection(r);if(l&&a){const t=c.getTileCoordExtent(l);(0,g.r)(t,-c.getResolution(e),t),(0,g.HY)(a,t)||(l=null)}let h=!0;if(null!==l){const t=this.tileGrid,i=c.getResolution(e),s=t.getZForResolution(i,1),n=c.getTileCoordExtent(l);(0,g.r)(n,-i,n),t.forEachTileCoord(n,s,e=>{h=h&&!this.tileUrlFunction(e,o,r)})}const d=new u(n,h?s.A.EMPTY:s.A.IDLE,l,this.getSourceTiles.bind(this,o,r),this.removeSourceTiles.bind(this));return d.key=this.getKey(),d}getTileGridForProjection(e){const t=e.getCode();let i=this.tileGrids_[t];if(!i){const s=this.getProjection();(0,h.v)(null===s||(0,p.tI)(s,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const o=this.tileGrid,r=o.getResolutions().slice(),n=r.map(function(e,t){return o.getOrigin(t)}),l=r.map(function(e,t){return o.getTileSize(t)}),a=A.L+1;for(let e=r.length;e<a;++e)r.push(r[e-1]/2),n.push(n[e-1]),l.push(l[e-1]);i=new x.A({extent:o.getExtent(),origins:n,resolutions:r,tileSizes:l}),this.tileGrids_[t]=i}return i}getTilePixelRatio(e){return e}getTilePixelSize(e,t,i){const s=this.getTileGridForProjection(i),o=(0,S.xq)(s.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}var R=f;function m(e,t){e.setLoader(function(i,s,o){(0,T.m8)(t,e.getFormat(),i,s,o,e.onLoad.bind(e),e.onError.bind(e))})}},88756:function(e,t,i){var s=i(8143),o=i(11078);class r extends s.A{constructor(e,t,i,s,o,r){super(e,t,r),this.extent=null,this.format_=s,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=i,this.key=i}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==o.A.IDLE&&(this.setState(o.A.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(o.A.ERROR)}setFeatures(e){this.features_=e,this.setState(o.A.LOADED)}setLoader(e){this.loader_=e}}t.A=r}}]);
//# sourceMappingURL=5522.d799e759.js.map