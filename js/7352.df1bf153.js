"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[2808,5360,7352],{18056:function(e,t,n){n.r(t);var r=n(49825),s=n(27557),i=n(75332),o=n(34835),a=n(34799),u=n(22808);function c(e,t){const n=`\n    attribute vec2 ${a.eS.TEXTURE_COORD};\n    uniform mat4 ${a.gF.TILE_TRANSFORM};\n    uniform float ${a.gF.TEXTURE_PIXEL_WIDTH};\n    uniform float ${a.gF.TEXTURE_PIXEL_HEIGHT};\n    uniform float ${a.gF.TEXTURE_RESOLUTION};\n    uniform float ${a.gF.TEXTURE_ORIGIN_X};\n    uniform float ${a.gF.TEXTURE_ORIGIN_Y};\n    uniform float ${a.gF.DEPTH};\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ${a.eS.TEXTURE_COORD};\n      v_mapCoord = vec2(\n        ${a.gF.TEXTURE_ORIGIN_X} + ${a.gF.TEXTURE_RESOLUTION} * ${a.gF.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],\n        ${a.gF.TEXTURE_ORIGIN_Y} - ${a.gF.TEXTURE_RESOLUTION} * ${a.gF.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]\n      );\n      gl_Position = ${a.gF.TILE_TRANSFORM} * vec4(${a.eS.TEXTURE_COORD}, ${a.gF.DEPTH}, 1.0);\n    }\n  `,i={...(0,s.z0)(),bandCount:t},u=[];if(void 0!==e.color){const t=(0,o.s2)(i,e.color,r.mE);u.push(`color = ${t};`)}if(void 0!==e.contrast){const t=(0,o.s2)(i,e.contrast,r.wl);u.push(`color.rgb = clamp((${t} + 1.0) * color.rgb - (${t} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==e.exposure){const t=(0,o.s2)(i,e.exposure,r.wl);u.push(`color.rgb = clamp((${t} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==e.saturation){const t=(0,o.s2)(i,e.saturation,r.wl);u.push(`\n      float saturation = ${t} + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    `)}if(void 0!==e.gamma){const t=(0,o.s2)(i,e.gamma,r.wl);u.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${t}));`)}if(void 0!==e.brightness){const t=(0,o.s2)(i,e.brightness,r.wl);u.push(`color.rgb = clamp(color.rgb + ${t}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const c={},l=Object.keys(i.variables).length;if(l>1&&!e.variables)throw new Error(`Missing variables in style (expected ${i.variables})`);for(let r=0;r<l;++r){const t=i.variables[Object.keys(i.variables)[r]];if(!(t.name in e.variables))throw new Error(`Missing '${t.name}' in style variables`);const n=(0,s.Sl)(t.name);c[n]=function(){let n=e.variables[t.name];return"string"===typeof n&&(n=(0,s.Lm)(n)),void 0!==n?n:-9999999}}const h=Object.keys(c).map(function(e){return`uniform float ${e};`}),d=Math.ceil(t/4);h.push(`uniform sampler2D ${a.gF.TILE_TEXTURE_ARRAY}[${d}];`),i.paletteTextures&&h.push(`uniform sampler2D ${s.uZ}[${i.paletteTextures.length}];`);const g=Object.keys(i.functions).map(function(e){return i.functions[e]}),m=`\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ${a.gF.RENDER_EXTENT};\n    uniform float ${a.gF.TRANSITION_ALPHA};\n    uniform float ${a.gF.TEXTURE_PIXEL_WIDTH};\n    uniform float ${a.gF.TEXTURE_PIXEL_HEIGHT};\n    uniform float ${a.gF.RESOLUTION};\n    uniform float ${a.gF.ZOOM};\n\n    ${h.join("\n")}\n\n    ${g.join("\n")}\n\n    void main() {\n      if (\n        v_mapCoord[0] < ${a.gF.RENDER_EXTENT}[0] ||\n        v_mapCoord[1] < ${a.gF.RENDER_EXTENT}[1] ||\n        v_mapCoord[0] > ${a.gF.RENDER_EXTENT}[2] ||\n        v_mapCoord[1] > ${a.gF.RENDER_EXTENT}[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(${a.gF.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);\n\n      ${u.join("\n")}\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ${a.gF.TRANSITION_ALPHA};\n    }`;return{vertexShader:n,fragmentShader:m,uniforms:c,paletteTextures:i.paletteTextures}}class l extends u["default"]{constructor(e){e=e?Object.assign({},e):{};const t=e.style||{};delete e.style,super(e),this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=t,this.styleVariables_=this.style_.variables||{},this.handleSourceUpdate_(),this.addChangeListener(i["default"].SOURCE,this.handleSourceUpdate_)}getSources(e,t){const n=this.getSource();return this.sources_?"function"===typeof this.sources_?this.sources_(e,t):this.sources_:n?[n]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();const e=this.getSource();if(e)if("loading"===e.getState()){const t=()=>{"ready"===e.getState()&&(e.removeEventListener("change",t),this.setStyle(this.style_))};e.addEventListener("change",t)}else this.setStyle(this.style_)}getSourceBandCount_(){const e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}createRenderer(){const e=c(this.style_,this.getSourceBandCount_());return new a.Ay(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.getCacheSize(),paletteTextures:e.paletteTextures})}renderSources(e,t){const n=this.getRenderer();let r;for(let s=0,i=t.length;s<i;++s)this.renderedSource_=t[s],n.prepareFrame(e)&&(r=n.renderFrame(e));return r}render(e,t){this.rendered=!0;const n=e.viewState,r=this.getSources(e.extent,n.resolution);let s=!0;for(let o=0,a=r.length;o<a;++o){const e=r[o],t=e.getState();if("loading"==t){const t=()=>{"ready"==e.getState()&&(e.removeEventListener("change",t),this.changed())};e.addEventListener("change",t)}s=s&&"ready"==t}const i=this.renderSources(e,r);if(this.getRenderer().renderComplete&&s)return this.renderedResolution_=n.resolution,i;if(this.renderedResolution_>.5*n.resolution){const t=this.getSources(e.extent,this.renderedResolution_).filter(e=>!r.includes(e));if(t.length>0)return this.renderSources(e,t)}return i}setStyle(e){if(this.styleVariables_=e.variables||{},this.style_=e,this.hasRenderer()){const e=c(this.style_,this.getSourceBandCount_()),t=this.getRenderer();t.reset({vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,paletteTextures:e.paletteTextures}),this.changed()}}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}l.prototype.dispose,t["default"]=l},22808:function(e,t,n){n.r(t);var r=n(60764),s=n(45360);class i extends r["default"]{constructor(e){e=e||{};const t=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(s["default"].PRELOAD)}setPreload(e){this.set(s["default"].PRELOAD,e)}getUseInterimTilesOnError(){return this.get(s["default"].USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(s["default"].USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}t["default"]=i},40186:function(e,t,n){function r(e,t,n,r){return void 0!==r?(r[0]=e,r[1]=t,r[2]=n,r):[e,t,n]}function s(e,t,n){return e+"/"+t+"/"+n}function i(e){return s(e[0],e[1],e[2])}function o(e){return a(e[0],e[1],e[2])}function a(e,t,n){return(t<<e)+n}function u(e,t){const n=e[0],r=e[1],s=e[2];if(t.getMinZoom()>n||n>t.getMaxZoom())return!1;const i=t.getFullTileRange(n);return!i||i.containsXY(r,s)}n.d(t,{N:function(){return r},N5:function(){return u},_T:function(){return a},dp:function(){return s},i7:function(){return i},tW:function(){return o}})},45360:function(e,t,n){n.r(t),t["default"]={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},91110:function(e,t,n){n.d(t,{N:function(){return s}});class r{constructor(e,t,n,r){this.minX=e,this.maxX=t,this.minY=n,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function s(e,t,n,s,i){return void 0!==i?(i.minX=e,i.maxX=t,i.minY=n,i.maxY=s,i):new r(e,t,n,s)}t.A=r}}]);
//# sourceMappingURL=7352.df1bf153.js.map