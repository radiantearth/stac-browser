"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[850,4794,6131,6164,8469,8512],{14794:function(t,e,i){i.r(e);var o=i(62703),r=i(70915),s=i(38599),n=i(4863),l=i(28512);const a="https://tile.googleapis.com/v1/createSession",h="https://tile.googleapis.com/v1/2dtiles",c="https://tile.googleapis.com/tile/v1/viewport",u=22;class d extends l["default"]{constructor(t){const e=!!t.highDpi;super({attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,projection:"EPSG:3857",reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:e?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.apiKey_=t.key,this.error_=null;const i={mapType:t.mapType||"roadmap",language:t.language||"en-US",region:t.region||"US"};t.imageFormat&&(i.imageFormat=t.imageFormat),t.scale&&(i.scale=t.scale),e&&(i.highDpi=!0),t.layerTypes&&(i.layerTypes=t.layerTypes),t.styles&&(i.styles=t.styles),!0===t.overlay&&(i.overlay=!0),t.apiOptions&&(i.apiOptions=t.apiOptions),this.sessionTokenRequest_=i,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_,this.createSession_()}getError(){return this.error_}fetchSessionToken(t,e){return fetch(t,e)}async createSession_(){const t=a+"?key="+this.apiKey_,e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},i=await this.fetchSessionToken(t,e);if(!i.ok){try{const t=await i.json();this.error_=new Error(t.error.message)}catch{this.error_=new Error("Error fetching session token")}return void this.setState("error")}const o=await i.json(),r=this.getTilePixelRatio(1),s=[o.tileWidth/r,o.tileHeight/r];this.tileGrid=(0,n.EN)({extent:(0,n.kZ)(this.getProjection()),maxZoom:u,tileSize:s});const l=o.session;this.sessionTokenValue_=l;const c=this.apiKey_;this.tileUrlFunction=function(t,e,i){const o=t[0],r=t[1],s=t[2],n=`${h}/${o}/${r}/${s}?session=${l}&key=${c}`;return n};const d=1e3*parseInt(o.expiry,10),p=Math.max(d-Date.now()-6e4,1);this.sessionRefreshId_=setTimeout(()=>this.createSession_(),p),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(t){if(t.viewHints[o.A.ANIMATING]||t.viewHints[o.A.INTERACTING]||t.animate)return this.previousViewportAttribution_;const[e,i]=(0,s.WP)((0,r.R)(t.extent),t.viewState.projection),[n,l]=(0,s.WP)((0,r.WU)(t.extent),t.viewState.projection),a=this.getTileGrid(),h=a.getZForResolution(t.viewState.resolution,this.zDirection),u=`zoom=${h}&north=${l}&south=${i}&east=${n}&west=${e}`;if(this.previousViewportExtent_==u)return this.previousViewportAttribution_;this.previousViewportExtent_=u;const d=this.sessionTokenValue_,p=this.apiKey_,g=`${c}?session=${d}&key=${p}&${u}`;return this.previousViewportAttribution_=await fetch(g).then(t=>t.json()).then(t=>t.copyright),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}e["default"]=d},18469:function(t,e,i){i.r(e),e["default"]={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"}},28512:function(t,e,i){i.r(e);var o=i(40190),r=i(11078),s=i(6837),n=i(38599),l=i(97404),a=i(4863),h=i(4087),c=i(46164);class u extends c["default"]{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:d,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:o.A,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!(0,n.tI)(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||(0,n.tI)(e,t)))return this.tileGrid;const i=(0,h.v6)(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=(0,a.pr)(t)),this.tileGridForProjection[i]}createTile_(t,e,i,o,n,l){const a=[t,e,i],h=this.getTileCoordForTileUrlFunction(a,n),c=h?this.tileUrlFunction(h,o,n):void 0,u=new this.tileClass(a,void 0!==c?r.A.IDLE:r.A.EMPTY,void 0!==c?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=l,u.addEventListener(s.A.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,e,i,o,r){const s=this.getProjection();if(!s||!r||(0,n.tI)(s,r))return this.getTileInternal(t,e,i,o,s||r);const a=[t,e,i],h=this.getKey(),c=this.getTileGridForProjection(s),u=this.getTileGridForProjection(r),d=this.getTileCoordForTileUrlFunction(a,r),p=new l.A(s,c,r,u,a,d,this.getTilePixelRatio(o),this.getGutter(),(t,e,i,o)=>this.getTileInternal(t,e,i,o,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=h,p}getTileInternal(t,e,i,o,r){const s=this.getKey();return this.createTile_(t,e,i,o,r,s)}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,e){const i=(0,n.Jt)(t);if(i){const t=(0,h.v6)(i);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}}function d(t,e){t.getImage().src=e}e["default"]=u},46164:function(t,e,i){i.r(e);var o=i(11078),r=i(42654),s=i(14465),n=i(4087),l=i(66017),a=i(18469);class h extends l["default"]{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===h.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=(0,n.v6)(e),r=e.getState();let s;r==o.A.LOADING?(this.tileLoadingKeys_[i]=!0,s=a["default"].TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==o.A.ERROR?a["default"].TILELOADERROR:r==o.A.LOADED?a["default"].TILELOADEND:void 0),void 0!=s&&this.dispatchEvent(new l.TileSourceEvent(s,e))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,"undefined"!==typeof e?this.setKey(e):this.changed()}setUrl(t){const e=(0,s.Uu)(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,r.Qz)(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}}e["default"]=h}}]);
//# sourceMappingURL=4794.5e1c1894.js.map