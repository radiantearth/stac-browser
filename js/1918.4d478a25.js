"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[1918,6017,6116],{4863:function(t,e,i){i.d(e,{EN:function(){return u},Li:function(){return c},kZ:function(){return g},pr:function(){return l}});var n=i(70915),r=i(38599),o=i(6782),s=i(56758),a=i(57115);function l(t){let e=t.getDefaultTileGrid();return e||(e=f(t),t.setDefaultTileGrid(e)),e}function c(t,e,i){const r=e[0],o=t.getTileCoordCenter(e),s=g(i);if(!(0,n.Ym)(s,o)){const e=(0,n.RG)(s),i=Math.ceil((s[0]-o[0])/e);return o[0]+=e*i,t.getTileCoordForCoordAndZ(o,r)}return e}function h(t,e,i,r){r=void 0!==r?r:"top-left";const o=d(t,e,i);return new s.A({extent:t,origin:(0,n.qF)(t,r),resolutions:o,tileSize:i})}function u(t){const e=t||{},i=e.extent||(0,r.Jt)("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:d(i,e.maxZoom,e.tileSize,e.maxResolution)};return new s.A(n)}function d(t,e,i,r){e=void 0!==e?e:a.L,i=(0,o.xq)(void 0!==i?i:a.R);const s=(0,n.Oq)(t),l=(0,n.RG)(t);r=r>0?r:Math.max(l/i[0],s/i[1]);const c=e+1,h=new Array(c);for(let n=0;n<c;++n)h[n]=r/Math.pow(2,n);return h}function f(t,e,i,n){const r=g(t);return h(r,e,i,n)}function g(t){t=(0,r.Jt)(t);let e=t.getExtent();if(!e){const i=180*r.Ig.degrees/t.getMetersPerUnit();e=(0,n.N)(-i,-i,i,i)}return e}},8143:function(t,e,i){var n=i(11078),r=i(93474),o=i(6837),s=i(79332),a=i(4087);class l extends s.A{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(o.A.CHANGE)}release(){this.setState(n.A.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==n.A.EMPTY){if(this.state!==n.A.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}}load(){(0,a.b0)()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;const n=e-i+1e3/60;return n>=this.transition_?1:(0,r.a6)(n/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}e.A=l},27607:function(t,e,i){i.d(e,{$r:function(){return h},bL:function(){return a},xo:function(){return s}});var n=i(8143),r=i(11078),o=i(68711);function s(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}function a(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}const l=new Error("disposed");let c=null;function h(t){c||(c=(0,o.Y)(t.width,t.height,void 0,{willReadFrequently:!0}));const e=c.canvas,i=t.width;e.width!==i&&(e.width=i);const n=t.height;return e.height!==n&&(e.height=n),c.clearRect(0,0,i,n),c.drawImage(t,0,0),c.getImageData(0,0,i,n).data}const u=[256,256];class d extends n.A{constructor(t){const e=r.A.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=s(this.data_);return t?[t.width,t.height]:u}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==r.A.IDLE&&this.state!==r.A.ERROR)return;this.state=r.A.LOADING,this.changed();const t=this;this.loader_().then(function(e){t.data_=e,t.state=r.A.LOADED,t.changed()}).catch(function(e){t.error_=e,t.state=r.A.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(l),this.controller_=null),super.disposeInternal()}}e.Ay=d},66017:function(t,e,i){i.r(e),i.d(e,{TileSourceEvent:function(){return h}});var n=i(1685),r=i(6782),o=i(40186),s=i(4863),a=i(4087),l=i(16444);class c extends l["default"]{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;const e=[256,256];this.tileGrid&&(0,r.xq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tmpSize=[0,0],this.key_=t.key||(0,a.v6)(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,n,r){return(0,a.b0)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:(0,s.pr)(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const n=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),s=(0,r.xq)(n.getTileSize(t),this.tmpSize);return 1==o?s:(0,r.hs)(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){const i=void 0!==e?e:this.getProjection(),n=void 0!==e?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=(0,s.Li)(n,t,i)),(0,o.N5)(t,n)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class h extends n.Ay{constructor(t,e){super(t),this.tile=e}}e["default"]=c},74735:function(t,e,i){i.r(e);var n=i(27630),r=i(98622),o=i(25e3),s=i(54422),a=i(70915),l=i(61597),c=i(8100),h=i(38599),u=i(56758),d=i(9703),f=i(22615);function g(t){const e=t.fileDirectory,i=e.NewSubfileType||0;return 4===(4&i)}function p(t,e){if(!t)return!1;if(!0===t)return!0;if(3!==e.getSamplesPerPixel())return!1;const i=e.fileDirectory.PhotometricInterpretation,n=r.ub;return i===n.CMYK||i===n.YCbCr||i===n.CIELab||i===n.ICCLab}const _="STATISTICS_MAXIMUM",m="STATISTICS_MINIMUM",y=256;let A;function w(){return A||(A=new n.A),A}function T(t){try{return t.getBoundingBox(!0)}catch{return[0,0,t.getWidth(),t.getHeight()]}}function G(t){try{return t.getOrigin().slice(0,2)}catch{return[0,t.getHeight()]}}function I(t,e){try{return t.getResolution(e)}catch{return[e.getWidth()/t.getWidth(),e.getHeight()/t.getHeight()]}}function b(t){const e=t.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&32767!==e.ProjectedCSTypeGeoKey){const t="EPSG:"+e.ProjectedCSTypeGeoKey;let i=(0,h.Jt)(t);if(!i){const n=(0,c.q)(e.ProjLinearUnitsGeoKey);n&&(i=new h.MF({code:t,units:n}))}return i}if(e.GeographicTypeGeoKey&&32767!==e.GeographicTypeGeoKey){const t="EPSG:"+e.GeographicTypeGeoKey;let i=(0,h.Jt)(t);if(!i){const n=(0,c.q)(e.GeogAngularUnitsGeoKey);n&&(i=new h.MF({code:t,units:n}))}return i}return null}function v(t){return t.getImageCount().then(function(e){const i=new Array(e);for(let n=0;n<e;++n)i[n]=t.getImage(n);return Promise.all(i)})}function x(t,e){let i;return i=t.blob?(0,o._F)(t.blob):t.overviews?(0,o.Vj)(t.url,t.overviews,e):(0,o.uz)(t.url,e),i.then(v)}function P(t,e,i,n,r){if(Array.isArray(t)){const o=t.length;if(!Array.isArray(e)||o!=e.length){const t=new Error(n);throw r(t),t}for(let s=0;s<o;++s)P(t[s],e[s],i,n,r);return}if(Math.abs(t-e)>i*t)throw new Error(n)}function S(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?12e-39:0}function M(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}class R extends f["default"]{constructor(t){super({state:"loading",tileGrid:null,projection:t.projection||null,transition:t.transition,interpolate:!1!==t.interpolate,wrapX:t.wrapX}),this.sourceInfo_=t.sources;const e=this.sourceInfo_.length;this.sourceOptions_=t.sourceOptions,this.sourceImagery_=new Array(e),this.sourceMasks_=new Array(e),this.resolutionFactors_=new Array(e),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=!1!==t.normalize,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=t.convertToRGB||!1,this.setKey(this.sourceInfo_.map(t=>t.url).join(","));const i=this,n=new Array(e);for(let r=0;r<e;++r)n[r]=x(this.sourceInfo_[r],this.sourceOptions_);Promise.all(n).then(function(t){i.configure_(t)}).catch(function(t){(0,s.z3)(t),i.error_=t,i.setState("error")})}getError(){return this.error_}determineProjection(t){const e=t[0];for(let i=e.length-1;i>=0;--i){const t=e[i],n=b(t);if(n){this.projection=n;break}}}determineTransformMatrix(t){const e=t[0];for(let i=e.length-1;i>=0;--i){const t=e[i],n=t.fileDirectory.ModelTransformation;if(n){const[t,e,i,r,o,s,a,l]=n,c=(0,d.lw)((0,d.lw)([1/Math.sqrt(t*t+o*o),0,0,-1/Math.sqrt(e*e+s*s),r,l],[t,o,e,s,0,0]),[1,0,0,1,-r,-l]);this.transformMatrix=c,this.addAlpha_=!0;break}}}configure_(t){let e,i,n,r,o;const s=new Array(t.length),l=new Array(t.length),c=new Array(t.length);let f=0;const p=t.length;for(let h=0;h<p;++h){const u=[],d=[];t[h].forEach(t=>{g(t)?d.push(t):u.push(t)});const p=u.length;if(d.length>0&&d.length!==p)throw new Error(`Expected one mask per image found ${d.length} masks and ${p} images`);let _,m;const A=new Array(p),w=new Array(p),b=new Array(p);l[h]=new Array(p),c[h]=new Array(p);for(let t=0;t<p;++t){const e=u[t],i=e.getGDALNoData();c[h][t]=e.getGDALMetadata(0),l[h][t]=i;const n=this.sourceInfo_[h].bands;s[h]=n?n.length:e.getSamplesPerPixel();const r=p-(t+1);_||(_=T(e)),m||(m=G(e));const o=I(e,u[0]);b[r]=o[0];const a=[e.getTileWidth(),e.getTileHeight()];a[0]!==a[1]&&a[1]<y&&(a[0]=y,a[1]=y),A[r]=a;const d=o[0]/Math.abs(o[1]);w[r]=[a[0],a[1]/d]}if(e?(0,a._N)(e,_,e):e=_,i){const t=`Origin mismatch for source ${h}, got [${m}] but expected [${i}]`;P(i,m,0,t,this.viewRejector)}else i=m;if(o){o.length-f>b.length&&(f=o.length-b.length);const t=o[o.length-1]/b[b.length-1];this.resolutionFactors_[h]=t;const e=b.map(e=>e*t),i=`Resolution mismatch for source ${h}, got [${e}] but expected [${o}]`;P(o.slice(f,o.length),e,.02,i,this.viewRejector)}else o=b,this.resolutionFactors_[h]=1;n?P(n.slice(f,n.length),w,.01,`Tile size mismatch for source ${h}`,this.viewRejector):n=w,r?P(r.slice(f,r.length),A,0,`Tile size mismatch for source ${h}`,this.viewRejector):r=A,this.sourceImagery_[h]=u.reverse(),this.sourceMasks_[h]=d.reverse()}for(let a=0,h=this.sourceImagery_.length;a<h;++a){const t=this.sourceImagery_[a];while(t.length<o.length)t.unshift(void 0)}this.getProjection()||this.determineProjection(t),this.determineTransformMatrix(t),this.samplesPerPixel_=s,this.nodataValues_=l,this.metadata_=c;t:for(let a=0;a<p;++a){if(void 0!==this.sourceInfo_[a].nodata){this.addAlpha_=!0;break}if(this.sourceMasks_[a].length){this.addAlpha_=!0;break}const t=l[a],e=this.sourceInfo_[a].bands;if(e){for(let i=0;i<e.length;++i)if(null!==t[e[i]-1]){this.addAlpha_=!0;break t}}else for(let i=0;i<t.length;++i)if(null!==t[i]){this.addAlpha_=!0;break t}}let _=this.addAlpha_?1:0;for(let a=0;a<p;++a)_+=s[a];this.bandCount=_;const m=new u.A({extent:e,minZoom:f,origin:i,resolutions:o,tileSizes:n});this.tileGrid=m,this.setTileSizes(r),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const A=1;2===o.length?o=[o[0],o[1],o[1]/2]:1===o.length&&(o=[2*o[0],o[0],o[0]/2]);let w=e;if(this.transformMatrix){const t=(0,d.T9)((0,d.vt)(),this.transformMatrix.slice()),i=(0,h.HU)(e=>(0,d.Bb)(t,e));w=(0,a.NW)(e,i)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:o,center:(0,h.te)((0,a.q1)(w),this.projection),extent:(0,h.JR)(w,this.projection),zoom:A})}loadTile_(t,e,i,n){const r=this.getTileSize(t),o=this.sourceImagery_.length,a=new Array(2*o),l=this.nodataValues_,c=this.sourceInfo_,h=w();for(let s=0;s<o;++s){const u=c[s],d=this.resolutionFactors_[s],f=[Math.round(e*(r[0]*d)),Math.round(i*(r[1]*d)),Math.round((e+1)*(r[0]*d)),Math.round((i+1)*(r[1]*d))],g=this.sourceImagery_[s][t];let _,m;u.bands&&(_=u.bands.map(function(t){return t-1})),m="nodata"in u&&null!==u.nodata?u.nodata:_?_.map(function(t){return l[s][t]}):l[s];const y={window:f,width:r[0],height:r[1],samples:_,fillValue:m,pool:h,interleave:!1,signal:n.signal};p(this.convertToRGB_,g)?a[s]=g.readRGB(y):a[s]=g.readRasters(y);const A=o+s,w=this.sourceMasks_[s][t];w?a[A]=w.readRasters({window:f,width:r[0],height:r[1],samples:[0],pool:h,interleave:!1}):a[A]=Promise.resolve(null)}return Promise.all(a).then(this.composeTile_.bind(this,r)).catch(function(t){throw(0,s.z3)(t),t})}composeTile_(t,e){const i=this.metadata_,n=this.sourceInfo_,r=this.sourceImagery_.length,o=this.bandCount,s=this.samplesPerPixel_,a=this.nodataValues_,c=this.normalize_,h=this.addAlpha_,u=t[0]*t[1],d=u*o;let f;f=c?new Uint8Array(d):new Float32Array(d);let g=0;for(let p=0;p<u;++p){let t=h;for(let o=0;o<r;++o){const u=n[o];let d,y,A=u.min,w=u.max;if(c){const t=i[o][0];void 0===A&&(A=t&&m in t?parseFloat(t[m]):S(e[o][0])),void 0===w&&(w=t&&_ in t?parseFloat(t[_]):M(e[o][0])),d=255/(w-A),y=-A*d}for(let i=0;i<s[o];++i){const n=e[o][i][p];let r;if(r=c?(0,l.qE)(d*n+y,0,255):n,h){let e=u.nodata;if(void 0===e){let t;t=u.bands?u.bands[i]-1:i,e=a[o][t]}const s=isNaN(e);(!s&&n!==e||s&&!isNaN(n))&&(t=!1,f[g]=r)}else f[g]=r;g++}if(!t){const i=r+o,n=e[i];n&&!n[0][p]&&(t=!0)}}h&&(t||(f[g]=255),g++)}return f}}R.prototype.getView,e["default"]=R},83954:function(t,e,i){function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}function o(t,e,i,r,o,s,a){a=a??n();const l=1/(t-e),c=1/(i-r),h=1/(o-s);return a[0]=-2*l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*c,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*h,a[11]=0,a[12]=(t+e)*l,a[13]=(r+i)*c,a[14]=(s+o)*h,a[15]=1,a}function s(t,e,i,r,o){return o=o??n(),o[0]=t[0]*e,o[1]=t[1]*e,o[2]=t[2]*e,o[3]=t[3]*e,o[4]=t[4]*i,o[5]=t[5]*i,o[6]=t[6]*i,o[7]=t[7]*i,o[8]=t[8]*r,o[9]=t[9]*r,o[10]=t[10]*r,o[11]=t[11]*r,o[12]=t[12],o[13]=t[13],o[14]=t[14],o[15]=t[15],o}function a(t,e,i,r,o){let s,a,l,c,h,u,d,f,g,p,_,m;return o=o??n(),t===o?(o[12]=t[0]*e+t[4]*i+t[8]*r+t[12],o[13]=t[1]*e+t[5]*i+t[9]*r+t[13],o[14]=t[2]*e+t[6]*i+t[10]*r+t[14],o[15]=t[3]*e+t[7]*i+t[11]*r+t[15]):(s=t[0],a=t[1],l=t[2],c=t[3],h=t[4],u=t[5],d=t[6],f=t[7],g=t[8],p=t[9],_=t[10],m=t[11],o[0]=s,o[1]=a,o[2]=l,o[3]=c,o[4]=h,o[5]=u,o[6]=d,o[7]=f,o[8]=g,o[9]=p,o[10]=_,o[11]=m,o[12]=s*e+h*i+g*r+t[12],o[13]=a*e+u*i+p*r+t[13],o[14]=l*e+d*i+_*r+t[14],o[15]=c*e+f*i+m*r+t[15]),o}function l(t,e,i,r){return r=r??n(),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=t,r[13]=e,r[14]=i,r[15]=1,r}i.d(e,{Tl:function(){return a},Z1:function(){return r},hs:function(){return s},j0:function(){return o},vt:function(){return n},wT:function(){return l}})}}]);
//# sourceMappingURL=1918.4d478a25.js.map