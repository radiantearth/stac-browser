{"version":3,"file":"js/143.f47cdaf8.js","mappings":"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","sources":["webpack://@radiantearth/stac-browser/./src/components/RootStats.vue","webpack://@radiantearth/stac-browser/src/components/RootStats.vue","webpack://@radiantearth/stac-browser/./src/components/RootStats.vue?2872","webpack://@radiantearth/stac-browser/./src/components/RootStats.vue?fce9"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"root-stats\"},[(_vm.hasConformances)?[_c('h4',[_vm._v(_vm._s(_vm.$t('source.conformanceClasses')))]),_vm._l((_vm.conformances),function(classes,group){return _c('dl',{key:group},[_c('dt',[_vm._v(_vm._s(group))]),_c('dd',[_c('ul',_vm._l((classes),function(conf,uri){return _c('li',{key:uri,attrs:{\"title\":uri}},[_vm._v(\" \"+_vm._s(conf.title)+\" \"),(conf.version)?_c('b-badge',{staticClass:\"ml-1\",attrs:{\"pill\":\"\",\"variant\":\"secondary\"}},[_vm._v(_vm._s(conf.version))]):_vm._e()],1)}),0)])])})]:_vm._e(),(_vm.stats)?[_c('h4',[_vm._v(_vm._s(_vm.$t('source.statistics')))]),_vm._l((_vm.stats),function(group,key){return _c('dl',{key:key},[_c('dt',[_vm._v(\" \"+_vm._s(group.label)+\" \"),_c('b-badge',{staticClass:\"ml-1\",attrs:{\"pill\":\"\",\"variant\":\"primary\"}},[_vm._v(_vm._s(group.count))]),(group.version)?_c('b-badge',{staticClass:\"ml-1\",attrs:{\"pill\":\"\",\"variant\":\"secondary\"}},[_vm._v(_vm._s(group.version))]):_vm._e()],1),_c('dd',{staticClass:\"charts\"},[(group.extensions)?_c('StatsChart',{attrs:{\"type\":\"extensions\",\"data\":group.extensions,\"count\":group.count}}):_vm._e(),(group.assets)?_c('StatsChart',{attrs:{\"type\":\"assets\",\"data\":group.assets,\"count\":group.count}}):_vm._e(),(!group.version && group.versions)?_c('StatsChart',{attrs:{\"type\":\"versions\",\"data\":group.versions,\"count\":group.count}}):_vm._e()],1)])})]:_vm._e()],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"root-stats\">\n    <template v-if=\"hasConformances\">\n      <h4>{{ $t('source.conformanceClasses') }}</h4>\n      <dl v-for=\"(classes, group) in conformances\" :key=\"group\">\n        <dt>{{ group }}</dt>\n        <dd>\n          <ul>\n            <li v-for=\"(conf, uri) in classes\" :key=\"uri\" :title=\"uri\">\n              {{ conf.title }}\n              <b-badge v-if=\"conf.version\" pill variant=\"secondary\" class=\"ml-1\">{{ conf.version }}</b-badge>\n            </li>\n          </ul>\n        </dd>\n      </dl>\n    </template>\n    <template v-if=\"stats\">\n      <h4>{{ $t('source.statistics') }}</h4>\n      <dl v-for=\"(group, key) in stats\" :key=\"key\">\n        <dt>\n          {{ group.label }}\n          <b-badge pill variant=\"primary\" class=\"ml-1\">{{ group.count }}</b-badge>\n          <b-badge v-if=\"group.version\" pill variant=\"secondary\" class=\"ml-1\">{{ group.version }}</b-badge>\n        </dt>\n        <dd class=\"charts\">\n          <StatsChart v-if=\"group.extensions\" type=\"extensions\" :data=\"group.extensions\" :count=\"group.count\" />\n          <StatsChart v-if=\"group.assets\" type=\"assets\" :data=\"group.assets\" :count=\"group.count\" />\n          <StatsChart v-if=\"!group.version && group.versions\" type=\"versions\" :data=\"group.versions\" :count=\"group.count\" />\n        </dd>\n      </dl>\n    </template>\n  </div>\n</template>\n\n<script>\nimport { formatKey } from \"@radiantearth/stac-fields/helper\";\nimport { mapGetters, mapState } from \"vuex\";\nimport Utils from \"../utils\";\n\nexport default {\n  name: \"RootStats\",\n  components: {\n    StatsChart: () => import('./metadata/StatsChart.vue')\n  },\n  computed: {\n    ...mapState(['conformsTo']),\n    ...mapGetters(['root']),\n    hasConformances() {\n      return Array.isArray(this.conformsTo) && this.conformsTo.length > 0;\n    },\n    conformances() {\n      if (!this.hasConformances) {\n        return null;\n      }\n      let obj = {\n        OGC: {},\n        STAC: {},\n        Other: {} \n      };\n      for(let uri of this.conformsTo) {\n        let confClass =  this.parseConformance(uri);\n        obj[confClass.type][uri] = confClass;\n      }\n      for (let key in obj) {\n        if (Utils.size(obj[key]) === 0) {\n          delete obj[key];\n        }\n      }\n      return obj;\n    },\n    stats() {\n      if (!this.root) {\n        return null;\n      }\n      let stats = {\n        'stats:catalogs': { label: this.$tc('stacCatalog', 2) },\n        'stats:collections': { label: this.$tc('stacCollection', 2) },\n        'stats:items': { label: this.$tc('stacItem', 2) }\n      };\n      for (let key in stats) {\n        if (Utils.isObject(this.root[key])) {\n          let entry = Object.assign(stats[key], this.root[key]);\n          if (Utils.size(entry['versions']) === 1) {\n            entry.version = Object.keys(entry['versions'])[0];\n            delete entry.versions;\n          }\n        }\n        else {\n          delete stats[key];\n        }\n      }\n      return Utils.size(stats) > 0 ? stats : null;\n    }\n  },\n  methods: {\n    parseConformance(uri) {\n      let title = uri;\n      let type = 'Other';\n      let version = null;\n      if (uri.startsWith('http://www.opengis.net/spec/')) {\n        type = 'OGC';\n        let match = uri.match(/^http:\\/\\/www\\.opengis\\.net\\/spec\\/([^/]+)\\/([^/]+)\\/conf\\/(.+)$/);\n        if (match) {\n          let [, spec, v, confClass] = match;\n          version = v;\n          let specs = spec.split('-');\n          if (specs.length === 3 && specs[0] === 'ogcapi') {\n            spec = `OGC API - ${formatKey(specs[1])} - Part ${specs[2]}`;\n          }\n          else if (spec === 'cql2') {\n            spec = 'CQL2';\n          }\n          else {\n            spec = formatKey(spec);\n          }\n          confClass = formatKey(confClass);\n          title = `${spec} - ${confClass}`;\n        }\n      }\n      else if (uri.startsWith('https://api.stacspec.org/')) {\n        type = 'STAC';\n\n        let match = uri.match(/^https?:\\/\\/api\\.stacspec\\.org\\/([^/]+)\\/([^/#]+)(?:#(.+))?$/);\n        if (match) {\n          version = match[1];\n          title = formatKey(match[2]);\n          if (match[3]) {\n            title += ' - ' + formatKey(match[3]);\n          }\n        }\n      }\n\n      return { type, title, version };\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n#stac-browser .root-stats {\n  .charts .chart {\n    max-height: 300px;\n  }\n  .metadata .card {\n    margin-top: 0;\n  }\n  .metadata .card-columns {\n    column-count: 1;\n  }\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RootStats.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./RootStats.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RootStats.vue?vue&type=template&id=5a98dfbb\"\nimport script from \"./RootStats.vue?vue&type=script&lang=js\"\nexport * from \"./RootStats.vue?vue&type=script&lang=js\"\nimport style0 from \"./RootStats.vue?vue&type=style&index=0&id=5a98dfbb&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","hasConformances","_v","_s","$t","_l","conformances","classes","group","key","conf","uri","attrs","title","version","_e","stats","label","count","extensions","assets","versions","staticRenderFns","name","components","StatsChart","computed","mapState","mapGetters","Array","isArray","conformsTo","length","obj","OGC","STAC","Other","confClass","parseConformance","type","Utils","size","root","$tc","isObject","entry","Object","assign","keys","methods","startsWith","match","spec","v","specs","split","formatKey","component"],"sourceRoot":""}