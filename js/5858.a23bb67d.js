"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[5858],{34889:function(e,t,r){function i(e){return Array.isArray(e)?Math.min(...e):e}r.d(t,{m:function(){return i}})},67238:function(e,t,r){var i=r(43938),n=r(6141);class a extends i.Ay{constructor(e,t,r,i,a){const s=void 0!==a?n.A.IDLE:n.A.LOADED;super(e,t,r,s),this.loader_=void 0!==a?a:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(e){e?(this.error_=e,this.state=n.A.ERROR):this.state=n.A.LOADED,this.changed()}load(){this.state==n.A.IDLE&&(this.state=n.A.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}t.A=a},69796:function(e,t,r){var i=r(6141),n=r(62703),a=r(70915),s=r(38599),o=r(9703),l=r(96769);class h extends l.A{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,o=e.viewState,l=o.resolution,h=this.getLayer().getSource(),c=e.viewHints;let d=e.extent;if(void 0!==t.extent&&(d=(0,a._N)(d,(0,s.SD)(t.extent,o.projection))),!c[n.A.ANIMATING]&&!c[n.A.INTERACTING]&&!(0,a.Im)(d))if(h){const e=o.projection,t=h.getImage(d,l,r,e);t&&(this.loadImage(t)?this.image=t:t.getState()===i.A.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=(0,o.Bb)(t.pixelToCoordinateTransform,e.slice()),n=r.getExtent();if(n&&!(0,a.Ym)(n,i))return null;const s=this.image.getExtent(),l=this.image.getImage(),h=(0,a.RG)(s),c=Math.floor(l.width*((i[0]-s[0])/h));if(c<0||c>=l.width)return null;const d=(0,a.Oq)(s),g=Math.floor(l.height*((s[3]-i[1])/d));return g<0||g>=l.height?null:this.getImageData(l,c,g)}renderFrame(e,t){const r=this.image,i=r.getExtent(),n=r.getResolution(),[l,h]=Array.isArray(n)?n:[n,n],c=r.getPixelRatio(),d=e.layerStatesArray[e.layerIndex],g=e.pixelRatio,u=e.viewState,m=u.center,A=u.resolution,p=g*l/(A*c),f=g*h/(A*c);this.prepareContainer(e,t);const R=this.context.canvas.width,x=this.context.canvas.height,_=this.getRenderContext(e);let I=!1,v=!0;if(d.extent){const t=(0,s.SD)(d.extent,u.projection);v=(0,a.HY)(t,e.extent),I=v&&!(0,a.ms)(t,e.extent),I&&this.clipUnrotated(_,e,t)}const y=r.getImage(),T=(0,o.Zz)(this.tempTransform,R/2,x/2,p,f,0,c*(i[0]-m[0])/l,c*(m[1]-i[3])/h);this.renderedResolution=h*g/c;const w=y.width*T[0],E=y.height*T[3];if(this.getLayer().getSource().getInterpolate()||(_.imageSmoothingEnabled=!1),this.preRender(_,e),v&&w>=.5&&E>=.5){const e=T[4],t=T[5],r=d.opacity;1!==r&&(_.save(),_.globalAlpha=r),_.drawImage(y,0,0,+y.width,+y.height,e,t,w,E),1!==r&&_.restore()}return this.postRender(this.context,e),I&&_.restore(),_.imageSmoothingEnabled=!0,this.container}}t.A=h},75858:function(e,t,r){r.r(t),r.d(t,{default:function(){return f}});var i=r(46621),n=r(67238),a=r(6141),s=r(62703),o=r(6837),l=r(70915),h=r(34889),c=r(9703),d=r(69796),g=r(32348);class u extends d.A{constructor(e){super(e),this.vectorRenderer_=new g.A(e),this.layerImageRatio_=e.getImageRatio(),this.coordinateToVectorPixelTransform_=(0,c.vt)(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(e){if(!this.vectorRenderer_)return Promise.resolve([]);const t=(0,c.Bb)(this.coordinateToVectorPixelTransform_,(0,c.Bb)(this.renderedPixelToCoordinateTransform_,e.slice()));return this.vectorRenderer_.getFeatures(t)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(e){const t=e.pixelRatio,r=e.viewState,d=r.resolution,g=e.viewHints,u=this.vectorRenderer_;let m=e.extent;1!==this.layerImageRatio_&&(m=m.slice(0),(0,l.Af)(m,this.layerImageRatio_));const A=(0,l.RG)(m)/d,p=(0,l.Oq)(m)/d;if(!g[s.A.ANIMATING]&&!g[s.A.INTERACTING]&&!(0,l.Im)(m)){u.useContainer(null,null);const s=u.context,l=e.layerStatesArray[e.layerIndex],g=Object.assign({},l,{opacity:1}),f=Object.assign({},e,{extent:m,size:[A,p],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[g],layerIndex:0,declutter:null}),R=this.getLayer().getDeclutter();R&&(f.declutter={[R]:new i.A(9)});const x=new n.A(m,d,t,s.canvas,function(e){u.prepareFrame(f)&&u.replayGroupChanged&&(u.clipping=!1,u.renderFrame(f,null),u.renderDeclutter(f),u.renderDeferred(f),e())});x.addEventListener(o.A.CHANGE,()=>{if(x.getState()!==a.A.LOADED)return;this.image=x;const e=x.getPixelRatio(),i=(0,h.m)(x.getResolution())*t/e;this.renderedResolution=i,this.coordinateToVectorPixelTransform_=(0,c.Zz)(this.coordinateToVectorPixelTransform_,A/2,p/2,1/i,-1/i,0,-r.center[0],-r.center[1])}),x.load()}return this.image&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!this.getLayer().getSource()?.loading&&!!this.image}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(e,t,r,i,n){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,r,i,n):super.forEachFeatureAtCoordinate(e,t,r,i,n)}}var m=u,A=r(8055);class p extends A["default"]{constructor(e){e=e||{};const t=Object.assign({},e);delete t.imageRatio,super(t),this.imageRatio_=void 0!==e.imageRatio?e.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new m(this)}}var f=p}}]);
//# sourceMappingURL=5858.a23bb67d.js.map