{"version":3,"file":"js/6750.7aedfad0.js","mappings":"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","sources":["webpack://@radiantearth/stac-browser/./node_modules/@radiantearth/stac-fields/interface.js","webpack://@radiantearth/stac-browser/./src/components/metadata/StatsChart.vue","webpack://@radiantearth/stac-browser/src/components/metadata/StatsChart.vue","webpack://@radiantearth/stac-browser/./src/components/metadata/StatsChart.vue?3bdb","webpack://@radiantearth/stac-browser/./src/components/metadata/StatsChart.vue?29cb"],"sourcesContent":["const Registry = require('./registry');\nconst _ = require('./helper');\nconst I18N = require('./I18N');\nconst DataTypes = require('./datatypes');\nconst Formatters = require('./formatters');\n\nfunction formatGrouped(context, data, type, filter, coreKey) {\n\t// Group fields into extensions\n\tlet groups = {};\n\tfor(let field in data) {\n\t\tlet value;\n\t\ttry {\n\t\t\tlet parts = field.split(/:(.*)/);\n\t\t\tif (parts.length === 1) {\n\t\t\t\tparts.unshift(coreKey);\n\t\t\t}\n\t\t\tlet ext = parts[0];\n\t\t\tif (typeof filter === 'function' && !filter(field, [field])) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvalue = data[field];\n\t\t\tlet spec = Registry.getSpecification(field, type);\n\n\t\t\t// Move to another extension (e.g. if no prefix is provided)\n\t\t\tif (spec.ext) {\n\t\t\t\text = spec.ext;\n\t\t\t}\n\n\t\t\t// Special handling for summaries that contain a list with keys (e.g. cube:dimensions, gee:schema)\n\t\t\t// There's usually just a single object included, so get that as value\n\t\t\tlet isSummarizedListWithKeys = false;\n\t\t\tif (type === 'summaries' && spec.listWithKeys && Array.isArray(value) && value.length > 0) {\n\t\t\t\tvalue = value[0];\n\t\t\t\tisSummarizedListWithKeys = true;\n\t\t\t}\n\n\t\t\t// Fill items with missing properties\n\t\t\tlet items = null;\n\t\t\tlet itemOrder = [];\n\t\t\tif (_.isObject(spec.items)) {\n\t\t\t\tlet temp = value;\n\t\t\t\t// Ignore keys for lists that are stored as object (e.g. cube:dimensions)\n\t\t\t\tif (spec.listWithKeys) {\n\t\t\t\t\ttemp = Object.values(temp);\n\t\t\t\t}\n\n\t\t\t\tlet itemFieldNames = [];\n\t\t\t\tif (Array.isArray(temp)) {\n\t\t\t\t\titemFieldNames = _.keysFromListOfObjects(temp);\n\t\t\t\t}\n\t\t\t\telse if (_.isObject(temp)) {\n\t\t\t\t\titemFieldNames = Object.keys(temp);\n\t\t\t\t}\n\n\t\t\t\titems = {};\n\t\t\t\t// Remove fields from list that are not available in the data\n\t\t\t\titemOrder = spec.itemOrder.filter(fieldName => itemFieldNames.includes(fieldName));\n\n\t\t\t\titemFieldNames.forEach(key => {\n\t\t\t\t\tif (typeof spec.items[key] === 'undefined') {\n\t\t\t\t\t\t// Add fields that are not specified in fields.json\n\t\t\t\t\t\titems[key] = {\n\t\t\t\t\t\t\tlabel: _.formatKey(key),\n\t\t\t\t\t\t\texplain: key\n\t\t\t\t\t\t};\n\t\t\t\t\t\t// Place non-specified fields at the end\n\t\t\t\t\t\titemOrder.push(key);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Clone field spec from fields.json\n\t\t\t\t\t\titems[key] = Object.assign({}, spec.items[key]);\n\t\t\t\t\t\titems[key].label = label(key, spec.items[key]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Format values\n\t\t\tlet formatted;\n\n\t\t\t// Handle summaries\n\t\t\tif (type === 'summaries') {\n\t\t\t\tif (!isSummarizedListWithKeys && _.isObject(value)) {\n\t\t\t\t\tif (typeof value.minimum !== 'undefined' && typeof value.maximum !== 'undefined') {\n\t\t\t\t\t\tconst formatSummaryValue = x => format(x, field, context, data, spec, filter, [field]);\n\t\t\t\t\t\tif (value.minimum === value.maximum) {\n\t\t\t\t\t\t\tformatted = formatSummaryValue(value.minimum);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (value.minimum === null) {\n\t\t\t\t\t\t\tformatted = `< ${formatSummaryValue(value.maximum)}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (value.maximum === null) {\n\t\t\t\t\t\t\tformatted = `> ${formatSummaryValue(value.minimum)}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tformatted = `${formatSummaryValue(value.minimum)} â€“ ${formatSummaryValue(value.maximum)}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tformatted = DataTypes.object(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (Registry.externalRenderer && items) {\n\t\t\t\t\tlet formatted = isSummarizedListWithKeys ? Object.assign({}, value) : value.slice(0);\n\t\t\t\t\t// Go through each field's summary\n\t\t\t\t\tfor(let i in formatted) {\n\t\t\t\t\t\tlet result = _.isObject(formatted[i]) ? {} : [];\n\t\t\t\t\t\t// Go through each entry in a field's summary (this is besically a single value as defined in the Item spec)\n\t\t\t\t\t\tfor(let key in items) {\n\t\t\t\t\t\t\tresult[key] = format(formatted[i][key], key, context, data, items[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tformatted[i] = result;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (Array.isArray(value)) {\n\t\t\t\t\tformatted = _.toList(value, !spec.custom && !spec.items, v => format(v, field, context, data, spec));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconsole.warn(`Invalid summary value: ${value}`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Fallback to \"normal\" rendering if not handled by summaries yet\n\t\t\tif (typeof formatted === 'undefined') {\n\t\t\t\tformatted = format(value, field, context, data, spec, filter, [field]);\n\t\t\t}\n\n\t\t\t// Add group if missing\n\t\t\tif (!_.isObject(groups[ext])) {\n\t\t\t\tgroups[ext] = {\n\t\t\t\t\textension: ext,\n\t\t\t\t\tlabel: extension(ext),\n\t\t\t\t\tproperties: {}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tgroups[ext].properties[field] = {\n\t\t\t\tlabel: label(field, spec),\n\t\t\t\tvalue,\n\t\t\t\tformatted,\n\t\t\t\titems,\n\t\t\t\titemOrder,\n\t\t\t\tspec\n\t\t\t};\n\t\t} catch(error) {\n\t\t\tconsole.error(`Field '${field}' with value '${value}' resulted in an error`, error);\n\t\t}\n\t}\n\treturn Object.values(groups).sort((a,b) => I18N.collator.compare(a.extension, b.extension));\n\n}\n\n// For assets (item and collection) and item-assets (extension)\nfunction formatAsset(asset, context, filter = null, coreKey = '') {\n\treturn formatGrouped(context, asset, 'assets', filter, coreKey);\n}\n\n// For links\nfunction formatLink(link, context, filter = null, coreKey = '') {\n\treturn formatGrouped(context, link, 'links', filter, coreKey);\n}\n\n// For Providers\nfunction formatProvider(provider, context, filter = null, coreKey = '') {\n\treturn formatGrouped(context, provider, 'providers', filter, coreKey);\n}\n\n// For Collection summaries\nfunction formatSummaries(collection, filter = null, coreKey = '') {\n\treturn formatGrouped(collection, collection.summaries, 'summaries', filter, coreKey);\n}\n\n// For Collections\nfunction formatCollection(collection, filter = null, coreKey = '') {\n\treturn formatGrouped(collection, collection, 'collection', filter, coreKey);\n}\n\n// For Catalogs\nfunction formatCatalog(catalog, filter = null, coreKey = '') {\n\treturn formatGrouped(catalog, catalog, 'catalog', filter, coreKey);\n}\n\n// For item properties\nfunction formatItemProperties(item, filter = null, coreKey = '') {\n\treturn formatGrouped(item, item.properties, 'metadata', filter, coreKey);\n}\n\nfunction format(value, field, context = null, parent = null, spec = null, filter = null, path = []) {\n\tif (!_.isObject(spec)) {\n\t\tspec = Registry.getSpecification(field);\n\t}\n\n\tif (typeof spec.format === 'string') {\n\t\tlet fn = Formatters[`format${spec.format}`];\n\t\tif (!fn) {\n\t\t\tconsole.warn(`Formatter '${spec.format}' not available.`);\n\t\t}\n\t\treturn fn(value, field, spec, context, parent);\n\t}\n\telse if (typeof spec.formatter === 'function') {\n\t\treturn spec.formatter(value, field, spec, context, parent);\n\t}\n\telse if (_.isObject(spec.mapping)) {\n\t\tlet key = String(value);\n\t\tif (typeof spec.mapping[key] !== 'undefined') {\n\t\t\tvalue = spec.mapping[key];\n\t\t}\n\t\telse if (typeof spec.mapping[key.toLowerCase()] !== 'undefined') {\n\t\t\tvalue = spec.mapping[key.toLowerCase()];\n\t\t}\n\t\telse if (typeof spec.mapping[key.toUpperCase()] !== 'undefined') {\n\t\t\tvalue = spec.mapping[key.toUpperCase()];\n\t\t}\n\t\treturn DataTypes.format(_.t(value), spec.unit);\n\t}\n\telse if (value === null && spec.null) {\n\t\treturn DataTypes.null(spec.null);\n\t}\n\telse if (Array.isArray(value)) {\n\t\tlet callback = (v, i) => format(v, field, context, parent, spec, filter, path.concat([i]));\n\t\tif (typeof filter === 'function' && path.length > 0) {\n\t\t\tvalue = value.filter((v, i) => filter(path[0], path.concat([i])));\n\t\t}\n\t\tif (Registry.externalRenderer && (spec.custom || spec.items)) {\n\t\t\treturn value.map(callback);\n\t\t}\n\t\telse {\n\t\t\treturn _.toList(value, false, callback);\n\t\t}\n\t}\n\telse if (_.isObject(value)) {\n\t\tlet callbackSpec = k => {\n\t\t\tif (_.isObject(spec.items)) {\n\t\t\t\treturn spec.listWithKeys ? {items: spec.items, itemOrder: spec.itemOrder} : spec.items[k];\n\t\t\t}\n\t\t\telse if (_.isObject(spec.properties)) {\n\t\t\t\treturn spec.properties[k];\n\t\t\t}\n\t\t\treturn {};\n\t\t};\n\t\tlet callbackValue = (v, k, p) => format(v, k, context, p, callbackSpec(k), filter, path.concat([k]));\n\t\tif (Registry.externalRenderer && (spec.custom || spec.items || spec.properties)) {\n\t\t\tlet formattedValues = {};\n\t\t\tfor(let key in value) {\n\t\t\t\tif (typeof filter === 'function' && path.length > 0 && !filter(path[0], path.concat([key]))) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tformattedValues[key] = callbackValue(value[key], key, value);\n\t\t\t}\n\t\t\treturn formattedValues;\n\t\t}\n\t\telse {\n\t\t\tlet callbackLabel = k => label(k, callbackSpec(k));\n\t\t\tlet itemOrder = spec.listWithKeys ? [] : spec.itemOrder;\n\t\t\treturn _.toObject(value, callbackValue, callbackLabel, itemOrder, filter, path);\n\t\t}\n\t}\n\telse {\n\t\treturn DataTypes.format(value, spec.unit);\n\t}\n}\n\nfunction label(key, spec = null) {\n\tif (!_.isObject(spec)) {\n\t\tspec = Registry.getSpecification(key);\n\t}\n\tif (_.isObject(spec) && typeof spec.label === 'string') {\n\t\tif (typeof spec.explain === 'string') {\n\t\t\tif (spec.explain.match(/^https?:\\/\\//i)) {\n\t\t\t\treturn _.toLink(spec.explain, _.t(spec.label), \"about\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn _.abbrev(_.t(spec.label), _.t(spec.explain));\n\t\t\t}\n\t\t}\n\t\telse if (typeof spec.label === 'string') {\n\t\t\treturn _.t(spec.label);\n\t\t}\n\t}\n\treturn _.formatKey(key);\n}\n\nfunction extension(key) {\n\treturn label(key, Registry.getExtension(key));\n}\n\nmodule.exports = {\n\tformat,\n\tlabel,\n\textension,\n\tformatCatalog,\n\tformatCollection,\n\tformatSummaries,\n\tformatItemProperties,\n\tformatAsset,\n\tformatLink,\n\tformatProvider,\n\tformatGrouped\n};","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chart mb-4\"},[_c(_vm.component,{tag:\"component\",attrs:{\"data\":_vm.chartData,\"options\":_vm.allOptions}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"chart mb-4\">\n    <component :is=\"component\" :data=\"chartData\" :options=\"allOptions\" />\n  </div>\n</template>\n\n<script>\nimport { formatKey } from \"@radiantearth/stac-fields/helper\";\nimport { extension } from \"@radiantearth/stac-fields/interface\";\nimport { formatMediaType } from \"@radiantearth/stac-fields/formatters\";\nimport Utils from \"../../utils\";\n\nimport { Bar, Pie } from 'vue-chartjs';\nimport {\n  Chart as ChartJS,\n  Colors,\n  Title,\n  Tooltip,\n  BarElement,\n  ArcElement,\n  CategoryScale,\n  LinearScale\n} from 'chart.js';\n\nChartJS.register(Title, Tooltip, Colors, ArcElement, BarElement, CategoryScale, LinearScale);\n\nexport default {\n  name: \"StatsChart\",\n  components: {\n    Bar,\n    Pie\n  },\n  props: {\n    data: {\n      type: Object,\n      required: true\n    },\n    type: {\n      type: String,\n      required: true\n    },\n    count: {\n      type: Number,\n      required: true\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  computed: {\n    component() {\n      switch(this.type) {\n        case 'versions':\n          return 'Pie';\n        default:\n          return 'Bar';\n      }\n    },\n    title() {\n      switch(this.type) {\n        case 'versions':\n          return this.$t('source.stacVersion');\n        case 'extensions':\n          return this.$t('source.stacExtension');\n        case 'assets':\n          return this.$t('source.fileFormat');\n        default:\n          return '';\n      }\n    },\n    allOptions() {\n      let options = {\n        responsive: true,\n        plugins: {\n          title: {\n            display: true,\n            text: this.title\n          },\n        },\n        scales: {\n          y: {\n            min: 0,\n            max: this.count,\n            title: {\n              display: false\n            }\n          }\n        }\n      };\n      return Object.assign(options, this.options);\n    },\n    chartData() {\n      let labels = [];\n      let values = [];\n      for (let id in this.data) {\n        let count = this.data[id];\n        values.push(count);\n\n        let label;\n        switch(this.type) {\n          case 'extensions': {\n            let ext = this.parseExtension(id);\n            label = `${ext.title}`;\n            if (ext.version) {\n              label += ` (${ext.version})`;\n            }\n            break;\n          }\n          case 'assets':\n            label = formatMediaType(id);\n            break;\n          default:\n            label = id;\n        }\n        labels.push(label);\n      }\n      return {\n        labels,\n        datasets: [\n          {\n            data: values\n          }\n        ]\n      };\n    }\n  },\n  methods: {\n    parseExtension(uri) {\n      let version = null;\n      let title = uri;\n      let match = uri.match(/^https?:\\/\\/stac-extensions\\.github\\.io\\/([^/]+)\\/v?([^/]+)(?:\\/([^/.]+))?\\/schema/);\n      if (match) {\n        version = match[2];\n        title = extension(match[1]);\n        if (match[3]) {\n          title += ' - ' + formatKey(match[3]);\n        }\n      }\n      else {\n        title = uri.replace(/^https?:\\/\\/(www.)?/, '').replace(/\\/schema(\\.json)?$/, '');\n        title = Utils.shortenTitle(title, 30);\n      }\n      return { title, version };\n    }\n  }\n};\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StatsChart.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StatsChart.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./StatsChart.vue?vue&type=template&id=334ae865\"\nimport script from \"./StatsChart.vue?vue&type=script&lang=js\"\nexport * from \"./StatsChart.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["Registry","_","I18N","DataTypes","Formatters","formatGrouped","context","data","type","filter","coreKey","groups","field","value","parts","split","length","unshift","ext","spec","getSpecification","isSummarizedListWithKeys","listWithKeys","Array","isArray","formatted","items","itemOrder","isObject","temp","Object","values","itemFieldNames","keysFromListOfObjects","keys","fieldName","includes","forEach","key","label","formatKey","explain","push","assign","minimum","maximum","formatSummaryValue","x","format","object","externalRenderer","slice","i","result","toList","custom","v","console","warn","extension","properties","error","sort","a","b","collator","compare","formatAsset","asset","formatLink","link","formatProvider","provider","formatSummaries","collection","summaries","formatCollection","formatCatalog","catalog","formatItemProperties","item","parent","path","fn","formatter","mapping","String","toLowerCase","toUpperCase","t","unit","null","callback","concat","map","callbackSpec","k","callbackValue","p","formattedValues","callbackLabel","toObject","match","toLink","abbrev","getExtension","module","exports","render","_vm","this","_c","_self","staticClass","component","tag","attrs","chartData","allOptions","staticRenderFns","ChartJS","register","Title","Tooltip","Colors","ArcElement","BarElement","CategoryScale","LinearScale","name","components","Bar","Pie","props","required","count","Number","options","default","computed","title","$t","responsive","plugins","display","text","scales","y","min","max","labels","id","parseExtension","version","formatMediaType","datasets","methods","uri","replace","Utils","shortenTitle"],"sourceRoot":""}