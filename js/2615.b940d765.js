"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[850,2615,8469],{18469:function(t,e,r){r.r(e),e["default"]={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"}},22615:function(t,e,r){r.r(e),r.d(e,{default:function(){return O}});var i=r(27607),o=r(11078),n=r(6837),a=r(74238),s=r(38599),l=r(68711),u=r(9438),c=r(70915),h=r(61597),_=r(33513),E=r(52913),T=r(93101),d=r(7771),f=r(83954);const g="\n  attribute vec4 a_position;\n  attribute vec4 a_texcoord;\n\n  uniform mat4 u_matrix;\n  uniform mat4 u_textureMatrix;\n\n  varying vec2 v_texcoord;\n\n  void main() {\n    gl_Position = u_matrix * a_position;\n    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;\n    v_texcoord = texcoord;\n  }\n",R="\n  precision mediump float;\n\n  varying vec2 v_texcoord;\n\n  uniform sampler2D u_texture;\n\n  void main() {\n    if (\n      v_texcoord.x < 0.0 ||\n      v_texcoord.y < 0.0 ||\n      v_texcoord.x > 1.0 ||\n      v_texcoord.y > 1.0\n    ) {\n      discard;\n    }\n    gl_FragColor = texture2D(u_texture, v_texcoord);\n  }\n";class x{constructor(t){this.gl_=t,this.program_=m(t,R,g),this.positionLocation=t.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=t.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=t.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=t.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=t.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.positions),t.STATIC_DRAW),this.texcoordBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.texcoords),t.STATIC_DRAW)}drawImage(t,e,r,i,o,n,a,s,l,u,c,h,_){const E=this.gl_;void 0===s&&(s=i),void 0===l&&(l=o),void 0===n&&(n=e),void 0===a&&(a=r),void 0===u&&(u=n),void 0===c&&(c=a),void 0===h&&(h=E.canvas.width),void 0===_&&(_=E.canvas.height),E.bindTexture(E.TEXTURE_2D,t),E.useProgram(this.program_),E.bindBuffer(E.ARRAY_BUFFER,this.positionBuffer),E.enableVertexAttribArray(this.positionLocation),E.vertexAttribPointer(this.positionLocation,2,E.FLOAT,!1,0,0),E.bindBuffer(E.ARRAY_BUFFER,this.texcoordBuffer),E.enableVertexAttribArray(this.texcoordLocation),E.vertexAttribPointer(this.texcoordLocation,2,E.FLOAT,!1,0,0);let T=f.j0(0,h,0,_,-1,1);T=f.Tl(T,s,l,0),T=f.hs(T,u,c,1),E.uniformMatrix4fv(this.matrixLocation,!1,T);let d=f.wT(i/e,o/r,0);d=f.hs(d,n/e,a/r,1),E.uniformMatrix4fv(this.textureMatrixLocation,!1,d),E.uniform1i(this.textureLocation,0),E.drawArrays(E.TRIANGLES,0,this.positions.length/2)}}function A(t,e,r){const i=t.createShader(e);if(null===i)throw new Error("Shader compilation failed");if(t.shaderSource(i,r),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(i);if(null===e)throw new Error("Shader info log creation failed");throw new Error(e)}return i}function m(t,e,r){const i=t.createProgram(),o=A(t,t.VERTEX_SHADER,r),n=A(t,t.FRAGMENT_SHADER,e);if(null===i)throw new Error("Program creation failed");if(t.attachShader(i,o),t.attachShader(i,n),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){const e=t.getProgramInfoLog(i);if(null===e)throw new Error("Program info log creation failed");throw new Error}return i}const p="\n  attribute vec4 a_position;\n\n  uniform mat4 u_matrix;\n\n  void main() {\n     gl_Position = u_matrix * a_position;\n  }\n",F="\n  precision mediump float;\n\n  uniform vec4 u_val;\n  void main() {\n     gl_FragColor = u_val;\n  }\n",L="\n  attribute vec4 a_position;\n  attribute vec2 a_texcoord;\n\n  varying vec2 v_texcoord;\n\n  uniform mat4 u_matrix;\n\n  void main() {\n     gl_Position = u_matrix * a_position;\n     v_texcoord = a_texcoord;\n  }\n",v="\n  precision mediump float;\n\n  varying vec2 v_texcoord;\n\n  uniform sampler2D u_texture;\n\n  void main() {\n    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {\n      discard;\n    }\n    gl_FragColor = texture2D(u_texture, v_texcoord);\n  }\n";function b(t,e,r,i){let o;return o=r&&r.length?r.shift():d.Wl?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(o.width=t),e&&(o.height=e),o.getContext("webgl",i)}function D(t){const e=t.canvas;e.width=1,e.height=1,t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}const S=[];function U(t,e,r,i,o,n,a,s,l,u,h,_,E,T){const d=Math.round(i*e),g=Math.round(i*r);let R,A;if(t.canvas.width=d,t.canvas.height=g,A=t.createTexture(),t.bindTexture(t.TEXTURE_2D,A),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),E?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,d,g,0,t.RGBA,h,null),R=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,R),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,A,0),null===R)throw new Error("Could not create framebuffer");if(null===A)throw new Error("Could not create texture");if(0===l.length)return{width:d,height:g,framebuffer:R,texture:A};const b=(0,c.S5)();let D,S,U;l.forEach(function(t,e,r){(0,c.X$)(b,t.extent)});const P=1/o;if(T&&1===l.length&&0===u)D=l[0].texture,S=l[0].width,U=l[0].width;else{if(D=t.createTexture(),null===A)throw new Error("Could not create texture");S=Math.round((0,c.RG)(b)*P),U=Math.round((0,c.Oq)(b)*P);const e=t.getParameter(t.MAX_TEXTURE_SIZE),r=Math.max(S,U),i=r>e?e/r:1,o=Math.round(S*i),n=Math.round(U*i);t.bindTexture(t.TEXTURE_2D,D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),E?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,o,n,0,t.RGBA,h,null);const a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,D,0);const s=new x(t);l.forEach(function(e,r,l){const h=(e.extent[0]-b[0])*P*i,_=-(e.extent[3]-b[3])*P*i,T=(0,c.RG)(e.extent)*P*i,d=(0,c.Oq)(e.extent)*P*i;if(t.bindFramebuffer(t.FRAMEBUFFER,a),t.viewport(0,0,o,n),e.clipExtent){const r=(e.clipExtent[0]-b[0])*P*i,o=-(e.clipExtent[3]-b[3])*P*i,n=(0,c.RG)(e.clipExtent)*P*i,a=(0,c.Oq)(e.clipExtent)*P*i;t.enable(t.SCISSOR_TEST),t.scissor(E?r:Math.round(r),E?o:Math.round(o),E?n:Math.round(r+n)-Math.round(r),E?a:Math.round(o+a)-Math.round(o))}s.drawImage(e.texture,e.width,e.height,u,u,e.width-2*u,e.height-2*u,E?h:Math.round(h),E?_:Math.round(_),E?T:Math.round(h+T)-Math.round(h),E?d:Math.round(_+d)-Math.round(_),o,n),t.disable(t.SCISSOR_TEST)}),t.deleteFramebuffer(a)}const M=(0,c.Py)(a),G=(0,c.Py)(b),w=t=>{const e=(t[0][0]-M[0])/n*i,r=-(t[0][1]-M[1])/n*i,o=(t[1][0]-M[0])/n*i,a=-(t[1][1]-M[1])/n*i,s=(t[2][0]-M[0])/n*i,l=-(t[2][1]-M[1])/n*i;return{u1:o,v1:a,u0:e,v0:r,u2:s,v2:l}};t.bindFramebuffer(t.FRAMEBUFFER,R),t.viewport(0,0,d,g);{const e=[],r=[],i=m(t,v,L);t.useProgram(i);const n=t.getUniformLocation(i,"u_texture");t.bindTexture(t.TEXTURE_2D,D),t.uniform1i(n,0),s.getTriangles().forEach(function(t,i,n){const a=t.source,s=t.target,{u1:l,v1:u,u0:c,v0:h,u2:_,v2:E}=w(s),T=(a[0][0]-G[0])/o/S,d=-(a[0][1]-G[1])/o/U,f=(a[1][0]-G[0])/o/S,g=-(a[1][1]-G[1])/o/U,R=(a[2][0]-G[0])/o/S,x=-(a[2][1]-G[1])/o/U;e.push(l,u,c,h,_,E),r.push(f,g,T,d,R,x)});const a=f.j0(0,d,g,0,-1,1),l=t.getUniformLocation(i,"u_matrix");t.uniformMatrix4fv(l,!1,a);const u=t.getAttribLocation(i,"a_position"),c=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.vertexAttribPointer(u,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(u);const h=t.getAttribLocation(i,"a_texcoord"),_=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.vertexAttribPointer(h,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(h),t.drawArrays(t.TRIANGLES,0,e.length/2)}if(_){const e=m(t,F,p);t.useProgram(e);const r=f.j0(0,d,g,0,-1,1),i=t.getUniformLocation(e,"u_matrix");t.uniformMatrix4fv(i,!1,r);const o=Array.isArray(_)?_:[0,0,0,255],n=t.getUniformLocation(e,"u_val"),a=!0;a?t.uniform4fv(n,o):t.uniform4iv(n,o);const l=t.getAttribLocation(e,"a_position"),u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l);const c=s.getTriangles().reduce(function(t,e){const r=e.target,{u1:i,v1:o,u0:n,v0:a,u2:s,v2:l}=w(r);return t.concat([i,o,n,a,n,a,s,l,s,l,i,o])},[]);t.bufferData(t.ARRAY_BUFFER,new Float32Array(c),t.STATIC_DRAW),t.drawArrays(t.LINES,0,c.length/2)}return{width:d,height:g,framebuffer:R,texture:A}}class P extends i.Ay{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:t.interpolate,transition:t.transition}),this.renderEdges_=void 0!==t.renderEdges&&t.renderEdges,this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const e=t.sourceProj,r=e.getExtent(),i=t.sourceTileGrid.getExtent();this.clipExtent_=e.canWrapX()?i?(0,c._N)(r,i):r:i;const n=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),a=this.targetTileGrid_.getExtent();let s=this.sourceTileGrid_.getExtent();const l=a?(0,c._N)(n,a):n;if(0===(0,c.UG)(l))return void(this.state=o.A.EMPTY);r&&(s=s?(0,c._N)(s,r):r);const u=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),d=t.targetProj,f=(0,_.aY)(e,d,l,u);if(!isFinite(f)||f<=0)return void(this.state=o.A.EMPTY);const g=void 0!==t.errorThreshold?t.errorThreshold:T.l;if(this.triangulation_=new E.A(e,d,l,s,f*g,u,t.transformMatrix),0===this.triangulation_.getTriangles().length)return void(this.state=o.A.EMPTY);this.sourceZ_=this.sourceTileGrid_.getZForResolution(f);let R=this.triangulation_.calculateSourceExtent();if(s&&(e.canWrapX()?(R[1]=(0,h.qE)(R[1],s[1],s[3]),R[3]=(0,h.qE)(R[3],s[1],s[3])):R=(0,c._N)(R,s)),(0,c.UG)(R)){let i=0,n=0;e.canWrapX()&&(i=(0,c.RG)(r),n=Math.floor((R[0]-r[0])/i));const a=(0,c.QJ)(R.slice(),e,!0);a.forEach(e=>{const r=this.sourceTileGrid_.getTileRangeForExtentAndZ(e,this.sourceZ_),o=t.getTileFunction;for(let t=r.minX;t<=r.maxX;t++)for(let e=r.minY;e<=r.maxY;e++){const r=o(this.sourceZ_,t,e,this.pixelRatio_);if(r){const t=n*i;this.sourceTiles_.push({tile:r,offset:t})}}++n}),0===this.sourceTiles_.length&&(this.state=o.A.EMPTY)}else this.state=o.A.EMPTY}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];let e=!1;if(this.sourceTiles_.forEach(r=>{const n=r.tile;if(!n||n.getState()!==o.A.LOADED)return;const a=n.getSize(),s=this.gutter_;let l;const u=(0,i.bL)(n.getData());u?l=u:(e=!0,l=(0,i.$r)((0,i.xo)(n.getData())));const c=[a[0]+2*s,a[1]+2*s],h=l instanceof Float32Array,_=c[0]*c[1],E=h?Float32Array:Uint8ClampedArray,T=new E(l.buffer),d=E.BYTES_PER_ELEMENT,f=d*T.length/_,g=T.byteLength/c[1],R=Math.floor(g/d/c[0]),x=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);x[0]+=r.offset,x[2]+=r.offset;const A=this.clipExtent_?.slice();A&&(A[0]+=r.offset,A[2]+=r.offset),t.push({extent:x,clipExtent:A,data:T,dataType:E,bytesPerPixel:f,pixelSize:c,bandCount:R})}),this.sourceTiles_.length=0,0===t.length)return this.state=o.A.ERROR,void this.changed();const r=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(r),a="number"===typeof n?n:n[0],s="number"===typeof n?n:n[1],u=a*this.pixelRatio_,c=s*this.pixelRatio_,h=this.targetTileGrid_.getResolution(r),_=this.sourceTileGrid_.getResolution(this.sourceZ_),E=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),T=t[0].bandCount,d=new t[0].dataType(T*u*c),f=b(u,c,S,{premultipliedAlpha:!1,antialias:!1});let g;const R=f.RGBA;let x;if(t[0].dataType==Float32Array){x=f.FLOAT,f.getExtension("WEBGL_color_buffer_float"),f.getExtension("OES_texture_float"),f.getExtension("EXT_float_blend");const t=f.getExtension("OES_texture_float_linear"),e=null!==t;g=e&&this.interpolate}else x=f.UNSIGNED_BYTE,g=this.interpolate;const A=4,m=Math.ceil(T/A);for(let i=m-1;i>=0;--i){const e=[];for(let a=0,s=t.length;a<s;++a){const r=t[a],o=r.pixelSize,n=o[0],s=o[1],l=new r.dataType(A*n*s),u=r.data;let c=i*A;for(let t=0,e=l.length;t<e;t+=A)l[t]=u[c],l[t+1]=u[c+1],l[t+2]=u[c+2],l[t+3]=u[c+3],c+=T;const h=f.createTexture();f.bindTexture(f.TEXTURE_2D,h),g?(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR)):(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST)),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texImage2D(f.TEXTURE_2D,0,R,n,s,0,R,x,l),e.push({extent:r.extent,clipExtent:r.clipExtent,texture:h,width:n,height:s})}const{framebuffer:r,width:o,height:n}=U(f,a,s,this.pixelRatio_,_,h,E,this.triangulation_,e,this.gutter_,x,this.renderEdges_,g),l=o,u=n*A,c=new t[0].dataType(l*u);f.bindFramebuffer(f.FRAMEBUFFER,r),f.readPixels(0,0,o,n,f.RGBA,x,c);let m=i*A;for(let t=0,i=c.length;t<i;t+=A){const e=(l-1-(t/u|0))*u+t%u;d[m]=c[e],d[m+1]=c[e+1],d[m+2]=c[e+2],d[m+3]=c[e+3],m+=T}}if(D(f),S.push(f.canvas),e){const t=(0,l.Y)(a,s),e=new ImageData(d,a);t.putImageData(e,0,0),this.reprojData_=t.canvas}else this.reprojData_=d;this.reprojSize_=[Math.round(u),Math.round(c)],this.state=o.A.LOADED,this.changed()}load(){if(this.state!==o.A.IDLE&&this.state!==o.A.ERROR)return;this.state=o.A.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:e})=>{const r=e.getState();if(r!==o.A.IDLE&&r!==o.A.LOADING)return;t++;const i=(0,u.KT)(e,n.A.CHANGE,()=>{const r=e.getState();r!=o.A.LOADED&&r!=o.A.ERROR&&r!=o.A.EMPTY||((0,u.JH)(i),t--,0===t&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){const e=t.getState();e==o.A.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(u.JH),this.sourcesListenerKeys_=null}}var M=P,G=r(6782),w=r(4863),I=r(4087),C=r(66017),y=r(18469);class X extends C["default"]{constructor(t){const e=void 0===t.projection?"EPSG:3857":t.projection;let r=t.tileGrid;void 0===r&&e&&(r=(0,w.EN)({extent:(0,w.kZ)(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:e,tileGrid:r,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.tileSize_=t.tileSize?(0,G.xq)(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=void 0===t.bandCount?4:t.bandCount,this.tileGridForProjection_={},this.crossOrigin_=t.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t];if(this.tileSize_)return this.tileSize_;const e=this.getTileGrid();return e?(0,G.xq)(e.getTileSize(t)):[256,256]}getGutterForProjection(t){const e=this.getProjection();return e&&!(0,s.tI)(e,t)||this.transformMatrix?0:this.gutter_}setLoader(t){this.loader_=t}getReprojTile_(t,e,r,i,o){const n=this.tileGrid||this.getTileGridForProjection(o||i),a=Math.max.apply(null,n.getResolutions().map((t,e)=>{const r=(0,G.xq)(n.getTileSize(e)),i=this.getTileSize(e);return Math.max(i[0]/r[0],i[1]/r[1])})),s=this.getTileGridForProjection(i),l=[t,e,r],u=this.getTileCoordForTileUrlFunction(l,i),c=Object.assign({sourceProj:o||i,sourceTileGrid:n,targetProj:i,targetTileGrid:s,tileCoord:l,wrappedTileCoord:u,pixelRatio:a,gutter:this.gutter_,getTileFunction:(t,e,r,i)=>this.getTile(t,e,r,i),transformMatrix:this.transformMatrix},this.tileOptions),h=new M(c);return h.key=this.getKey(),h}getTile(t,e,r,o,l){const u=this.getProjection();if(l&&(u&&!(0,s.tI)(u,l)||this.transformMatrix))return this.getReprojTile_(t,e,r,l,u);const c=this.getTileSize(t),h=this.loader_,_=new AbortController,E={signal:_.signal,crossOrigin:this.crossOrigin_},T=this.getTileCoordForTileUrlFunction([t,e,r]);if(!T)return null;const d=T[0],f=T[1],g=T[2],R=this.getTileGrid()?.getFullTileRange(d);function x(){return(0,a.hq)(function(){return h(d,f,g,E)})}R&&(E.maxY=R.getHeight()-1);const A=Object.assign({tileCoord:[t,e,r],loader:x,size:c,controller:_},this.tileOptions),m=new i.Ay(A);return m.key=this.getKey(),m.addEventListener(n.A.CHANGE,this.handleTileChange_),m}handleTileChange_(t){const e=t.target,r=(0,I.v6)(e),i=e.getState();let n;i==o.A.LOADING?(this.tileLoadingKeys_[r]=!0,n=y["default"].TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],n=i==o.A.ERROR?y["default"].TILELOADERROR:i==o.A.LOADED?y["default"].TILELOADEND:void 0),n&&this.dispatchEvent(new C.TileSourceEvent(n,e))}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||(0,s.tI)(e,t))&&!this.transformMatrix)return this.tileGrid;const r=(0,I.v6)(t);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=(0,w.pr)(t)),this.tileGridForProjection_[r]}setTileGridForProjection(t,e){const r=(0,s.Jt)(t);if(r){const t=(0,I.v6)(r);t in this.tileGridForProjection_||(this.tileGridForProjection_[t]=e)}}}var O=X}}]);
//# sourceMappingURL=2615.b940d765.js.map