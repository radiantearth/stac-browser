"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[2192,3440,4465,6846,7235],{14465:function(t,e,n){n.d(e,{LW:function(){return s},M:function(){return h},Uu:function(){return g},de:function(){return l}});var r=n(61597),i=n(40186);function s(t,e){const n=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&n.push(t+"="+encodeURIComponent(e[t]))});const r=n.join("&");return t=t.replace(/[?&]$/,""),t+=t.includes("?")?"&":"?",t+r}const o=/\{z\}/g,a=/\{x\}/g,u=/\{y\}/g,c=/\{-y\}/g;function h(t,e,n,r,i){return t.replace(o,e.toString()).replace(a,n.toString()).replace(u,r.toString()).replace(c,function(){if(void 0===i)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function l(t,e,n,s){const o=(0,i._T)(e,n,s),a=(0,r.xP)(o,t.length);return t[a]}function g(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const r=n[1].charCodeAt(0),i=n[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const r=parseInt(n[2],10);for(let i=parseInt(n[1],10);i<=r;i++)e.push(t.replace(n[0],i.toString()));return e}return e.push(t),e}},34889:function(t,e,n){function r(t){return Array.isArray(t)?Math.min(...t):t}n.d(e,{m:function(){return r}})},40186:function(t,e,n){function r(t,e,n,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function i(t,e,n){return t+"/"+e+"/"+n}function s(t){return i(t[0],t[1],t[2])}function o(t){return a(t[0],t[1],t[2])}function a(t,e,n){return(e<<t)+n}function u(t,e){const n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return!s||s.containsXY(r,i)}n.d(e,{N:function(){return r},N5:function(){return u},_T:function(){return a},dp:function(){return i},i7:function(){return s},tW:function(){return o}})},42192:function(t,e,n){n.r(e),n.d(e,{DECIMALS:function(){return i},DEFAULT_WMS_VERSION:function(){return r}});const r="1.3.0",i=4},83440:function(t,e,n){n.r(e),n.d(e,{ImageSourceEvent:function(){return R},ImageSourceEventType:function(){return p},default:function(){return D},defaultImageLoadFunction:function(){return S},getRequestExtent:function(){return x}});var r=n(43938),i=n(6141),s=n(66514),o=n(1685),a=n(6837),u=n(70915),c=n(61597),h=n(38599),l=n(9438),g=n(33513),d=n(34889),I=n(52913),_=n(93101);class E extends r.Ay{constructor(t,e,n,r,s,o,a){let c=t.getExtent();c&&t.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let h=e.getExtent();h&&e.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);const l=h?(0,u._N)(n,h):n,d=(0,u.q1)(l),E=(0,g.KQ)(t,e,d,r),f=_.l,m=new I.A(t,e,l,c,E*f,r),A=m.calculateSourceExtent(),p=(0,u.Im)(A)?null:o(A,E,s),R=p?i.A.IDLE:i.A.EMPTY,L=p?p.getPixelRatio():1;super(n,r,L,R),this.targetProj_=e,this.maxSourceExtent_=c,this.triangulation_=m,this.targetResolution_=r,this.targetExtent_=n,this.sourceImage_=p,this.sourcePixelRatio_=L,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==i.A.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==i.A.LOADED){const t=(0,u.RG)(this.targetExtent_)/this.targetResolution_,e=(0,u.Oq)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,g.XX)(t,e,this.sourcePixelRatio_,(0,d.m)(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==i.A.IDLE){this.state=i.A.LOADING,this.changed();const t=this.sourceImage_.getState();t==i.A.LOADED||t==i.A.ERROR?this.reproject_():(this.sourceListenerKey_=(0,l.KT)(this.sourceImage_,a.A.CHANGE,t=>{const e=this.sourceImage_.getState();e!=i.A.LOADED&&e!=i.A.ERROR||(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){(0,l.JH)(this.sourceListenerKey_),this.sourceListenerKey_=null}}var f=E,m=n(16444),A=n(42192);const p={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class R extends o.Ay{constructor(t,e){super(t),this.image=e}}class L extends m["default"]{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!t.loader&&0===t.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){const n=(0,s.FT)(e,t,0);t=e[n]}return t}getImage(t,e,n,r){const i=this.getProjection();if(!i||!r||(0,h.tI)(i,r))return i&&(r=i),this.getImageInternal(t,e,n,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,h.tI)(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==e&&(0,u.aI)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new f(i,r,t,e,n,(t,e,n)=>this.getImageInternal(t,e,n,i),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,n,i){if(this.loader){const s=x(t,e,n,1),o=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&(0,u.ms)(this.wantedExtent_,s)||(0,u.ms)(this.image.getExtent(),s))&&(this.wantedResolution_&&(0,d.m)(this.wantedResolution_)===o||(0,d.m)(this.image.getResolution())===o)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new r.Ay(s,o,n,this.loader),this.image.addEventListener(a.A.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target;let n;switch(e.getState()){case i.A.LOADING:this.loading=!0,n=p.IMAGELOADSTART;break;case i.A.LOADED:this.loading=!1,n=p.IMAGELOADEND;break;case i.A.ERROR:this.loading=!1,n=p.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new R(n,e))}}function S(t,e){t.getImage().src=e}function x(t,e,n,r){const i=e/n,s=(0,u.q1)(t),o=(0,c.mk)((0,u.RG)(t)/i,A.DECIMALS),a=(0,c.mk)((0,u.Oq)(t)/i,A.DECIMALS),h=(0,c.mk)((r-1)*o/2,A.DECIMALS),l=o+2*h,g=(0,c.mk)((r-1)*a/2,A.DECIMALS),d=a+2*g;return(0,u.Bg)(s,i,0,[l,d])}var D=L},87235:function(t,e,n){n.r(e),n.d(e,{createLoader:function(){return c}});var r=n(43938),i=n(70915),s=n(14465),o=n(83440);function a(t,e,n,r){const s=(0,i.RG)(t),o=(0,i.Oq)(t),a=e[0],u=e[1],c=.0254/r;return u*s>a*o?s*n/(a*c):o*n/(u*c)}function u(t,e,n,r,o,u,c){const h=a(n,r,u,c),l=(0,i.q1)(n),g={OPERATION:o?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:c,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:h,SETVIEWCENTERX:l[0],SETVIEWCENTERY:l[1]};return Object.assign(g,e),(0,s.LW)(t,g)}function c(t){const e=t.load||r.D4,n=t.useOverlay??!1,s=t.metersPerUnit||1,a=t.displayDpi||96,c=t.ratio??1,h=t.crossOrigin??null;return function(r,l,g){const d=new Image;d.crossOrigin=h,r=(0,o.getRequestExtent)(r,l,g,c);const I=(0,i.RG)(r)/l,_=(0,i.Oq)(r)/l,E=[I*g,_*g],f=u(t.url,t.params,r,E,n,s,a);return e(d,f).then(t=>({image:t,extent:r,pixelRatio:g}))}}}}]);
//# sourceMappingURL=7235.fc0092f4.js.map