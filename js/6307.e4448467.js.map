{"version":3,"file":"js/6307.e4448467.js","mappings":"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","sources":["webpack://@radiantearth/stac-browser/./node_modules/ol/source/TileJSON.js","webpack://@radiantearth/stac-browser/./node_modules/ol/layer/Tile.js","webpack://@radiantearth/stac-browser/./node_modules/ol/source/static.js","webpack://@radiantearth/stac-browser/./node_modules/ol/layer/Image.js","webpack://@radiantearth/stac-browser/./node_modules/ol/source/ImageStatic.js","webpack://@radiantearth/stac-browser/./node_modules/ol/renderer/canvas/ImageLayer.js","webpack://@radiantearth/stac-browser/./node_modules/ol/layer/BaseImage.js","webpack://@radiantearth/stac-browser/./node_modules/ol/net.js","webpack://@radiantearth/stac-browser/./node_modules/ol/source/TileWMS.js","webpack://@radiantearth/stac-browser/./src/components/Map.vue","webpack://@radiantearth/stac-browser/./node_modules/ol/interaction/Select.js","webpack://@radiantearth/stac-browser/./node_modules/fflate/esm/browser.js","webpack://@radiantearth/stac-browser/./node_modules/pmtiles/dist/esm/index.js","webpack://@radiantearth/stac-browser/./node_modules/ol-stac/events/ErrorEvent.js","webpack://@radiantearth/stac-browser/./node_modules/ol-stac/source/type.js","webpack://@radiantearth/stac-browser/./node_modules/ol/xml.js","webpack://@radiantearth/stac-browser/./node_modules/ol/format/XML.js","webpack://@radiantearth/stac-browser/./node_modules/ol/format/xlink.js","webpack://@radiantearth/stac-browser/./node_modules/ol/format/xsd.js","webpack://@radiantearth/stac-browser/./node_modules/ol/format/OWS.js","webpack://@radiantearth/stac-browser/./node_modules/ol/format/WMTSCapabilities.js","webpack://@radiantearth/stac-browser/./node_modules/ol-stac/util.js","webpack://@radiantearth/stac-browser/./node_modules/pbf/index.js","webpack://@radiantearth/stac-browser/./node_modules/ol/format/MVT.js","webpack://@radiantearth/stac-browser/./node_modules/ol-pmtiles/dist/esm/index.js","webpack://@radiantearth/stac-browser/./node_modules/ol-stac/layer/STAC.js","webpack://@radiantearth/stac-browser/src/components/Map.vue","webpack://@radiantearth/stac-browser/./src/components/Map.vue?e050","webpack://@radiantearth/stac-browser/./src/components/Map.vue?18ce"],"sourcesContent":["/**\n * @module ol/source/TileJSON\n */\n// FIXME check order of async callbacks\n\n/**\n * See https://mapbox.com/developers/api/.\n */\n\nimport {applyTransform, intersects} from '../extent.js';\nimport {jsonp as requestJSONP} from '../net.js';\nimport {get as getProjection, getTransformFromProjections} from '../proj.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\nimport {createFromTemplates} from '../tileurlfunction.js';\nimport TileImage from './TileImage.js';\n\n/**\n * @typedef {Object} Config\n * @property {string} [name] The name.\n * @property {string} [description] The description.\n * @property {string} [version] The version.\n * @property {string} [attribution] The attribution.\n * @property {string} [template] The template.\n * @property {string} [legend] The legend.\n * @property {string} [scheme] The scheme.\n * @property {Array<string>} tiles The tile URL templates.\n * @property {Array<string>} [grids] Optional grids.\n * @property {number} [minzoom] Minimum zoom level.\n * @property {number} [maxzoom] Maximum zoom level.\n * @property {Array<number>} [bounds] Optional bounds.\n * @property {Array<number>} [center] Optional center.\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize] Deprecated.  Use the cacheSize option on the layer instead.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {boolean} [jsonp=false] Use JSONP with callback to load the TileJSON.\n * Useful when the server does not support CORS..\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {Config} [tileJSON] TileJSON configuration for this source.\n * If not provided, `url` must be configured.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number|import(\"../size.js\").Size} [tileSize=[256, 256]] The tile size used by the tile service.\n * Note: `tileSize` and other non-standard TileJSON properties are currently ignored.\n * @property {string} [url] URL to the TileJSON file. If not provided, `tileJSON` must be configured.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0]\n * Choose whether to use tiles with a higher or lower zoom level when between integer\n * zoom levels. See {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution}.\n */\n\n/**\n * @classdesc\n * Layer source for tile data in TileJSON format.\n * @api\n */\nclass TileJSON extends TileImage {\n  /**\n   * @param {Options} options TileJSON options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      interpolate: options.interpolate,\n      projection: getProjection('EPSG:3857'),\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      state: 'loading',\n      tileLoadFunction: options.tileLoadFunction,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition,\n      zDirection: options.zDirection,\n    });\n\n    /**\n     * @type {Config}\n     * @private\n     */\n    this.tileJSON_ = null;\n\n    /**\n     * @type {number|import(\"../size.js\").Size}\n     * @private\n     */\n    this.tileSize_ = options.tileSize;\n\n    if (options.url) {\n      if (options.jsonp) {\n        requestJSONP(\n          options.url,\n          this.handleTileJSONResponse.bind(this),\n          this.handleTileJSONError.bind(this),\n        );\n      } else {\n        const client = new XMLHttpRequest();\n        client.addEventListener('load', this.onXHRLoad_.bind(this));\n        client.addEventListener('error', this.onXHRError_.bind(this));\n        client.open('GET', options.url);\n        client.send();\n      }\n    } else if (options.tileJSON) {\n      this.handleTileJSONResponse(options.tileJSON);\n    } else {\n      throw new Error('Either `url` or `tileJSON` options must be provided');\n    }\n  }\n\n  /**\n   * @private\n   * @param {Event} event The load event.\n   */\n  onXHRLoad_(event) {\n    const client = /** @type {XMLHttpRequest} */ (event.target);\n    // status will be 0 for file:// urls\n    if (!client.status || (client.status >= 200 && client.status < 300)) {\n      let response;\n      try {\n        response = /** @type {Config} */ (JSON.parse(client.responseText));\n      } catch {\n        this.handleTileJSONError();\n        return;\n      }\n      this.handleTileJSONResponse(response);\n    } else {\n      this.handleTileJSONError();\n    }\n  }\n\n  /**\n   * @private\n   * @param {Event} event The error event.\n   */\n  onXHRError_(event) {\n    this.handleTileJSONError();\n  }\n\n  /**\n   * @return {Config} The tilejson object.\n   * @api\n   */\n  getTileJSON() {\n    return this.tileJSON_;\n  }\n\n  /**\n   * @protected\n   * @param {Config} tileJSON Tile JSON.\n   */\n  handleTileJSONResponse(tileJSON) {\n    const epsg4326Projection = getProjection('EPSG:4326');\n\n    const sourceProjection = this.getProjection();\n    let extent;\n    if (tileJSON['bounds'] !== undefined) {\n      const transform = getTransformFromProjections(\n        epsg4326Projection,\n        sourceProjection,\n      );\n      extent = applyTransform(tileJSON['bounds'], transform);\n    }\n\n    const gridExtent = extentFromProjection(sourceProjection);\n    const minZoom = tileJSON['minzoom'] || 0;\n    const maxZoom = tileJSON['maxzoom'] || 22;\n    const tileGrid = createXYZ({\n      extent: gridExtent,\n      maxZoom: maxZoom,\n      minZoom: minZoom,\n      tileSize: this.tileSize_,\n    });\n    this.tileGrid = tileGrid;\n\n    this.tileUrlFunction = createFromTemplates(tileJSON['tiles'], tileGrid);\n\n    if (tileJSON['attribution'] && !this.getAttributions()) {\n      const attributionExtent = extent !== undefined ? extent : gridExtent;\n      this.setAttributions(function (frameState) {\n        if (intersects(attributionExtent, frameState.extent)) {\n          return [tileJSON['attribution']];\n        }\n        return null;\n      });\n    }\n    this.tileJSON_ = tileJSON;\n    this.setState('ready');\n  }\n\n  /**\n   * @protected\n   */\n  handleTileJSONError() {\n    this.setState('error');\n  }\n}\n\nexport default TileJSON;\n","/**\n * @module ol/layer/Tile\n */\nimport CanvasTileLayerRenderer from '../renderer/canvas/TileLayer.js';\nimport BaseTileLayer from './BaseTile.js';\n\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Tile.js\").default} [TileSourceType=import(\"../source/Tile.js\").default]\n * @extends BaseTileLayer<TileSourceType, CanvasTileLayerRenderer>\n * @api\n */\nclass TileLayer extends BaseTileLayer {\n  /**\n   * @param {import(\"./BaseTile.js\").Options<TileSourceType>} [options] Tile layer options.\n   */\n  constructor(options) {\n    super(options);\n  }\n\n  /**\n   * @override\n   */\n  createRenderer() {\n    return new CanvasTileLayerRenderer(this, {\n      cacheSize: this.getCacheSize(),\n    });\n  }\n}\n\nexport default TileLayer;\n","/**\n * @module ol/source/static\n */\n\nimport {decode} from '../Image.js';\nimport {getHeight, getWidth} from '../extent.js';\n\n/**\n * @typedef {Object} LoaderOptions\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {import(\"../extent.js\").Extent} imageExtent Extent of the image in map coordinates.\n * This is the [left, bottom, right, top] map coordinates of your image. When using this loader with an\n * `ol/source/Image`, the same extent must be set as `extent` of the `ol/layer/Image`.\n * @property {string} url Image URL.\n * @property {function(HTMLImageElement, string): Promise<import('../DataTile.js').ImageLike>} [load] Function\n * to perform loading of the image. Receives the created `HTMLImageElement` and the desired `src` as argument and\n * returns a promise resolving to the loaded or decoded image. Default is {@link module:ol/Image.decode}.\n */\n\n/**\n * Creates a loader for static images.\n * @param {LoaderOptions} options Loader options.\n * @return {import(\"../Image.js\").ImageObjectPromiseLoader} Loader.\n * @api\n */\nexport function createLoader(options) {\n  const load = options.load || decode;\n  const extent = options.imageExtent;\n  const crossOrigin = options.crossOrigin ?? null;\n\n  return () => {\n    const image = new Image();\n    image.crossOrigin = crossOrigin;\n    return load(image, options.url).then((image) => {\n      const resolutionX = getWidth(extent) / image.width;\n      const resolutionY = getHeight(extent) / image.height;\n      const resolution =\n        resolutionX !== resolutionY ? [resolutionX, resolutionY] : resolutionY;\n      return {image, extent, resolution, pixelRatio: 1};\n    });\n  };\n}\n","/**\n * @module ol/layer/Image\n */\nimport CanvasImageLayerRenderer from '../renderer/canvas/ImageLayer.js';\nimport BaseImageLayer from './BaseImage.js';\n\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Image.js\").default} ImageSourceType\n * @extends {BaseImageLayer<ImageSourceType, CanvasImageLayerRenderer>}\n * @api\n */\nclass ImageLayer extends BaseImageLayer {\n  /**\n   * @param {import(\"./BaseImage.js\").Options<ImageSourceType>} [options] Layer options.\n   */\n  constructor(options) {\n    super(options);\n  }\n\n  /**\n   * @override\n   */\n  createRenderer() {\n    return new CanvasImageLayerRenderer(this);\n  }\n\n  /**\n   * Get data for a pixel location.  A four element RGBA array will be returned.  For requests outside the\n   * layer extent, `null` will be returned.  Data for an image can only be retrieved if the\n   * source's `crossOrigin` property is set.\n   *\n   * ```js\n   * // display layer data on every pointer move\n   * map.on('pointermove', (event) => {\n   *   console.log(layer.getData(event.pixel));\n   * });\n   * ```\n   * @param {import(\"../pixel\").Pixel} pixel Pixel.\n   * @return {Uint8ClampedArray|Uint8Array|Float32Array|DataView|null} Pixel data.\n   * @api\n   * @override\n   */\n  getData(pixel) {\n    return super.getData(pixel);\n  }\n}\n\nexport default ImageLayer;\n","/**\n * @module ol/source/ImageStatic\n */\n\nimport ImageWrapper, {decode} from '../Image.js';\nimport EventType from '../events/EventType.js';\nimport {intersects} from '../extent.js';\nimport {get as getProjection} from '../proj.js';\nimport ImageSource, {defaultImageLoadFunction} from './Image.js';\nimport {createLoader} from './static.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {import(\"../extent.js\").Extent} imageExtent Extent of the image in map coordinates.\n * This is the [left, bottom, right, top] map coordinates of your image.\n * @property {import(\"../Image.js\").LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {string} url Image URL.\n */\n\n/**\n * @classdesc\n * A layer source for displaying a single, static image.\n * @api\n */\nclass Static extends ImageSource {\n  /**\n   * @param {Options} options ImageStatic options.\n   */\n  constructor(options) {\n    const crossOrigin =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    const /** @type {import(\"../Image.js\").LoadFunction} */ imageLoadFunction =\n        options.imageLoadFunction !== undefined\n          ? options.imageLoadFunction\n          : defaultImageLoadFunction;\n\n    super({\n      attributions: options.attributions,\n      interpolate: options.interpolate,\n      projection: getProjection(options.projection),\n    });\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.url_ = options.url;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.imageExtent_ = options.imageExtent;\n\n    /**\n     * @private\n     * @type {import(\"../Image.js\").default}\n     */\n    this.image = null;\n\n    this.image = new ImageWrapper(\n      this.imageExtent_,\n      undefined,\n      1,\n      createLoader({\n        url: options.url,\n        imageExtent: options.imageExtent,\n        crossOrigin,\n        load: (image, src) => {\n          this.image.setImage(image);\n          imageLoadFunction(this.image, src);\n          return decode(image);\n        },\n      }),\n    );\n\n    this.image.addEventListener(\n      EventType.CHANGE,\n      this.handleImageChange.bind(this),\n    );\n  }\n\n  /**\n   * Returns the image extent\n   * @return {import(\"../extent.js\").Extent} image extent.\n   * @api\n   */\n  getImageExtent() {\n    return this.imageExtent_;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../Image.js\").default} Single image.\n   * @override\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n    if (intersects(extent, this.image.getExtent())) {\n      return this.image;\n    }\n    return null;\n  }\n\n  /**\n   * Return the URL used for this image source.\n   * @return {string} URL.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n}\n\nexport default Static;\n","/**\n * @module ol/renderer/canvas/ImageLayer\n */\nimport ImageState from '../../ImageState.js';\nimport ViewHint from '../../ViewHint.js';\nimport {\n  containsCoordinate,\n  containsExtent,\n  getHeight,\n  getIntersection,\n  getWidth,\n  intersects as intersectsExtent,\n  isEmpty,\n} from '../../extent.js';\nimport {fromUserExtent} from '../../proj.js';\nimport {\n  apply as applyTransform,\n  compose as composeTransform,\n} from '../../transform.js';\nimport CanvasLayerRenderer from './Layer.js';\n\n/**\n * @classdesc\n * Canvas renderer for image layers.\n * @api\n */\nclass CanvasImageLayerRenderer extends CanvasLayerRenderer {\n  /**\n   * @param {import(\"../../layer/Image.js\").default} imageLayer Image layer.\n   */\n  constructor(imageLayer) {\n    super(imageLayer);\n\n    /**\n     * @protected\n     * @type {?import(\"../../Image.js\").default}\n     */\n    this.image = null;\n  }\n\n  /**\n   * @return {import('../../DataTile.js').ImageLike} Image.\n   */\n  getImage() {\n    return !this.image ? null : this.image.getImage();\n  }\n\n  /**\n   * Determine whether render should be called.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @return {boolean} Layer is ready to be rendered.\n   * @override\n   */\n  prepareFrame(frameState) {\n    const layerState = frameState.layerStatesArray[frameState.layerIndex];\n    const pixelRatio = frameState.pixelRatio;\n    const viewState = frameState.viewState;\n    const viewResolution = viewState.resolution;\n\n    const imageSource = this.getLayer().getSource();\n\n    const hints = frameState.viewHints;\n\n    let renderedExtent = frameState.extent;\n    if (layerState.extent !== undefined) {\n      renderedExtent = getIntersection(\n        renderedExtent,\n        fromUserExtent(layerState.extent, viewState.projection),\n      );\n    }\n\n    if (\n      !hints[ViewHint.ANIMATING] &&\n      !hints[ViewHint.INTERACTING] &&\n      !isEmpty(renderedExtent)\n    ) {\n      if (imageSource) {\n        const projection = viewState.projection;\n        const image = imageSource.getImage(\n          renderedExtent,\n          viewResolution,\n          pixelRatio,\n          projection,\n        );\n        if (image) {\n          if (this.loadImage(image)) {\n            this.image = image;\n          } else if (image.getState() === ImageState.EMPTY) {\n            this.image = null;\n          }\n        }\n      } else {\n        this.image = null;\n      }\n    }\n\n    return !!this.image;\n  }\n\n  /**\n   * @param {import(\"../../pixel.js\").Pixel} pixel Pixel.\n   * @return {Uint8ClampedArray} Data at the pixel location.\n   * @override\n   */\n  getData(pixel) {\n    const frameState = this.frameState;\n    if (!frameState) {\n      return null;\n    }\n\n    const layer = this.getLayer();\n    const coordinate = applyTransform(\n      frameState.pixelToCoordinateTransform,\n      pixel.slice(),\n    );\n\n    const layerExtent = layer.getExtent();\n    if (layerExtent) {\n      if (!containsCoordinate(layerExtent, coordinate)) {\n        return null;\n      }\n    }\n\n    const imageExtent = this.image.getExtent();\n    const img = this.image.getImage();\n\n    const imageMapWidth = getWidth(imageExtent);\n    const col = Math.floor(\n      img.width * ((coordinate[0] - imageExtent[0]) / imageMapWidth),\n    );\n    if (col < 0 || col >= img.width) {\n      return null;\n    }\n\n    const imageMapHeight = getHeight(imageExtent);\n    const row = Math.floor(\n      img.height * ((imageExtent[3] - coordinate[1]) / imageMapHeight),\n    );\n    if (row < 0 || row >= img.height) {\n      return null;\n    }\n\n    return this.getImageData(img, col, row);\n  }\n\n  /**\n   * Render the layer.\n   * @param {import(\"../../Map.js\").FrameState} frameState Frame state.\n   * @param {HTMLElement} target Target that may be used to render content to.\n   * @return {HTMLElement} The rendered element.\n   * @override\n   */\n  renderFrame(frameState, target) {\n    const image = this.image;\n    const imageExtent = image.getExtent();\n    const imageResolution = image.getResolution();\n    const [imageResolutionX, imageResolutionY] = Array.isArray(imageResolution)\n      ? imageResolution\n      : [imageResolution, imageResolution];\n    const imagePixelRatio = image.getPixelRatio();\n    const layerState = frameState.layerStatesArray[frameState.layerIndex];\n    const pixelRatio = frameState.pixelRatio;\n    const viewState = frameState.viewState;\n    const viewCenter = viewState.center;\n    const viewResolution = viewState.resolution;\n    const scaleX =\n      (pixelRatio * imageResolutionX) / (viewResolution * imagePixelRatio);\n    const scaleY =\n      (pixelRatio * imageResolutionY) / (viewResolution * imagePixelRatio);\n\n    this.prepareContainer(frameState, target);\n\n    // desired dimensions of the canvas in pixels\n    const width = this.context.canvas.width;\n    const height = this.context.canvas.height;\n\n    const context = this.getRenderContext(frameState);\n\n    // clipped rendering if layer extent is set\n    let clipped = false;\n    let render = true;\n    if (layerState.extent) {\n      const layerExtent = fromUserExtent(\n        layerState.extent,\n        viewState.projection,\n      );\n      render = intersectsExtent(layerExtent, frameState.extent);\n      clipped = render && !containsExtent(layerExtent, frameState.extent);\n      if (clipped) {\n        this.clipUnrotated(context, frameState, layerExtent);\n      }\n    }\n\n    const img = image.getImage();\n\n    const transform = composeTransform(\n      this.tempTransform,\n      width / 2,\n      height / 2,\n      scaleX,\n      scaleY,\n      0,\n      (imagePixelRatio * (imageExtent[0] - viewCenter[0])) / imageResolutionX,\n      (imagePixelRatio * (viewCenter[1] - imageExtent[3])) / imageResolutionY,\n    );\n\n    this.renderedResolution = (imageResolutionY * pixelRatio) / imagePixelRatio;\n\n    const dw = img.width * transform[0];\n    const dh = img.height * transform[3];\n\n    if (!this.getLayer().getSource().getInterpolate()) {\n      context.imageSmoothingEnabled = false;\n    }\n\n    this.preRender(context, frameState);\n    if (render && dw >= 0.5 && dh >= 0.5) {\n      const dx = transform[4];\n      const dy = transform[5];\n      const opacity = layerState.opacity;\n      if (opacity !== 1) {\n        context.save();\n        context.globalAlpha = opacity;\n      }\n      context.drawImage(img, 0, 0, +img.width, +img.height, dx, dy, dw, dh);\n      if (opacity !== 1) {\n        context.restore();\n      }\n    }\n    this.postRender(this.context, frameState);\n\n    if (clipped) {\n      context.restore();\n    }\n    context.imageSmoothingEnabled = true;\n\n    return this.container;\n  }\n}\n\nexport default CanvasImageLayerRenderer;\n","/**\n * @module ol/layer/BaseImage\n */\nimport Layer from './Layer.js';\n\n/**\n * @template {import(\"../source/Image.js\").default} ImageSourceType\n * @typedef {Object} Options\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {import(\"../Map.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link import(\"../Map.js\").default#addLayer map.addLayer()}.\n * @property {ImageSourceType} [source] Source for this layer.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @template {import(\"../source/Image.js\").default} ImageSourceType\n * @template {import(\"../renderer/Layer.js\").default} RendererType\n * @extends {Layer<ImageSourceType, RendererType>}\n * @api\n */\nclass BaseImageLayer extends Layer {\n  /**\n   * @param {Options<ImageSourceType>} [options] Layer options.\n   */\n  constructor(options) {\n    options = options ? options : {};\n    super(options);\n  }\n}\n\nexport default BaseImageLayer;\n","/**\n * @module ol/net\n */\nimport {getUid} from './util.js';\n\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {Function} [errback] Callback on error.\n * @param {string} [callbackParam] Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\nexport function jsonp(url, callback, errback, callbackParam) {\n  const script = document.createElement('script');\n  const key = 'olc_' + getUid(callback);\n  function cleanup() {\n    delete window[key];\n    script.parentNode.removeChild(script);\n  }\n  script.async = true;\n  script.src =\n    url +\n    (url.includes('?') ? '&' : '?') +\n    (callbackParam || 'callback') +\n    '=' +\n    key;\n  const timer = setTimeout(function () {\n    cleanup();\n    if (errback) {\n      errback();\n    }\n  }, 10000);\n  window[key] = function (data) {\n    clearTimeout(timer);\n    cleanup();\n    callback(data);\n  };\n  document.head.appendChild(script);\n}\n\nexport class ResponseError extends Error {\n  /**\n   * @param {XMLHttpRequest} response The XHR object.\n   */\n  constructor(response) {\n    const message = 'Unexpected response status: ' + response.status;\n    super(message);\n\n    /**\n     * @type {string}\n     */\n    this.name = 'ResponseError';\n\n    /**\n     * @type {XMLHttpRequest}\n     */\n    this.response = response;\n  }\n}\n\nexport class ClientError extends Error {\n  /**\n   * @param {XMLHttpRequest} client The XHR object.\n   */\n  constructor(client) {\n    super('Failed to issue request');\n\n    /**\n     * @type {string}\n     */\n    this.name = 'ClientError';\n\n    /**\n     * @type {XMLHttpRequest}\n     */\n    this.client = client;\n  }\n}\n\n/**\n * @param {string} url The URL.\n * @return {Promise<Object>} A promise that resolves to the JSON response.\n */\nexport function getJSON(url) {\n  return new Promise(function (resolve, reject) {\n    /**\n     * @param {ProgressEvent<XMLHttpRequest>} event The load event.\n     */\n    function onLoad(event) {\n      const client = event.target;\n      // status will be 0 for file:// urls\n      if (!client.status || (client.status >= 200 && client.status < 300)) {\n        let data;\n        try {\n          data = JSON.parse(client.responseText);\n        } catch (err) {\n          const message = 'Error parsing response text as JSON: ' + err.message;\n          reject(new Error(message));\n          return;\n        }\n        resolve(data);\n        return;\n      }\n\n      reject(new ResponseError(client));\n    }\n\n    /**\n     * @param {ProgressEvent<XMLHttpRequest>} event The error event.\n     */\n    function onError(event) {\n      reject(new ClientError(event.target));\n    }\n\n    const client = new XMLHttpRequest();\n    client.addEventListener('load', onLoad);\n    client.addEventListener('error', onError);\n    client.open('GET', url);\n    client.setRequestHeader('Accept', 'application/json');\n    client.send();\n  });\n}\n\n/**\n * @param {string} base The base URL.\n * @param {string} url The potentially relative URL.\n * @return {string} The full URL.\n */\nexport function resolveUrl(base, url) {\n  if (url.includes('://')) {\n    return url;\n  }\n  return new URL(url, base).href;\n}\n\nlet originalXHR;\nexport function overrideXHR(xhr) {\n  if (typeof XMLHttpRequest !== 'undefined') {\n    originalXHR = XMLHttpRequest;\n  }\n  global.XMLHttpRequest = xhr;\n}\n\nexport function restoreXHR() {\n  global.XMLHttpRequest = originalXHR;\n}\n","/**\n * @module ol/source/TileWMS\n */\n\nimport {buffer, createEmpty} from '../extent.js';\nimport {modulo} from '../math.js';\nimport {get as getProjection, transform} from '../proj.js';\nimport {calculateSourceResolution} from '../reproj.js';\nimport {compareVersions} from '../string.js';\nimport {hash as tileCoordHash} from '../tilecoord.js';\nimport {appendParams} from '../uri.js';\nimport TileImage from './TileImage.js';\nimport {DEFAULT_VERSION, getImageSrc, getRequestParams} from './wms.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize] Deprecated.  Use the cacheSize option on the layer instead.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {Object<string,*>} params WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {number} [gutter=0]\n * The size in pixels of the gutter around image tiles to ignore. By setting\n * this property to a non-zero value, images will be requested that are wider\n * and taller than the tile size by a value of `2 x gutter`.\n * Using a non-zero value allows artifacts of rendering at tile edges to be\n * ignored. If you control the WMS service it is recommended to address\n * \"artifacts at tile edges\" issues by properly configuring the WMS service. For\n * example, MapServer has a `tile_map_edge_buffer` configuration parameter for\n * this. See https://mapserver.org/output/tile_mode.html.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {typeof import(\"../ImageTile.js\").default} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid. Base this on the resolutions,\n * tilesize and extent supported by the server.\n * If this is not defined, a default grid will be used: if there is a projection\n * extent, the grid will be based on that; if not, a grid based on a global\n * extent with origin at 0,0 will be used.\n * @property {import(\"./wms.js\").ServerType} [serverType] The type of\n * the remote WMS server: `mapserver`, `geoserver`, `carmentaserver`, or `qgis`.\n * Only needed if `hidpi` is `true`.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] WMS service URL.\n * @property {Array<string>} [urls] WMS service urls.\n * Use this instead of `url` when the WMS supports multiple urls for GetMap requests.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * When set to `false`, only one world\n * will be rendered. When `true`, tiles will be requested for one world only,\n * but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0]\n * Choose whether to use tiles with a higher or lower zoom level when between integer\n * zoom levels. See {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution}.\n */\n\n/**\n * @classdesc\n * Layer source for tile data from WMS servers.\n * @api\n */\nclass TileWMS extends TileImage {\n  /**\n   * @param {Options} [options] Tile WMS options.\n   */\n  constructor(options) {\n    options = options ? options : /** @type {Options} */ ({});\n\n    const params = Object.assign({}, options.params);\n\n    super({\n      attributions: options.attributions,\n      attributionsCollapsible: options.attributionsCollapsible,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      interpolate: options.interpolate,\n      projection: options.projection,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileClass: options.tileClass,\n      tileGrid: options.tileGrid,\n      tileLoadFunction: options.tileLoadFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition,\n      zDirection: options.zDirection,\n    });\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.gutter_ = options.gutter !== undefined ? options.gutter : 0;\n\n    /**\n     * @private\n     * @type {!Object}\n     */\n    this.params_ = params;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.v13_ = true;\n\n    /**\n     * @private\n     * @type {import(\"./wms.js\").ServerType}\n     */\n    this.serverType_ = options.serverType;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.tmpExtent_ = createEmpty();\n\n    this.updateV13_();\n    this.setKey(this.getKeyForParams_());\n  }\n\n  /**\n   * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n   * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n   * constructed.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n   * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n   *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n   *     in the `LAYERS` parameter will be used. `VERSION` should not be\n   *     specified here.\n   * @return {string|undefined} GetFeatureInfo URL.\n   * @api\n   */\n  getFeatureInfoUrl(coordinate, resolution, projection, params) {\n    const projectionObj = getProjection(projection);\n    const sourceProjectionObj = this.getProjection() || projectionObj;\n\n    let tileGrid = this.getTileGrid();\n    if (!tileGrid) {\n      tileGrid = this.getTileGridForProjection(sourceProjectionObj);\n    }\n\n    const sourceProjCoord = transform(\n      coordinate,\n      projectionObj,\n      sourceProjectionObj,\n    );\n    const sourceResolution = calculateSourceResolution(\n      sourceProjectionObj,\n      projectionObj,\n      coordinate,\n      resolution,\n    );\n\n    const z = tileGrid.getZForResolution(sourceResolution, this.zDirection);\n    const tileResolution = tileGrid.getResolution(z);\n    const tileCoord = tileGrid.getTileCoordForCoordAndZ(sourceProjCoord, z);\n\n    if (tileGrid.getResolutions().length <= tileCoord[0]) {\n      return undefined;\n    }\n\n    let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n\n    const gutter = this.gutter_;\n    if (gutter !== 0) {\n      tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n    }\n\n    const baseParams = {\n      'QUERY_LAYERS': this.params_['LAYERS'],\n    };\n    Object.assign(\n      baseParams,\n      getRequestParams(this.params_, 'GetFeatureInfo'),\n      params,\n    );\n\n    const x = Math.floor((sourceProjCoord[0] - tileExtent[0]) / tileResolution);\n    const y = Math.floor((tileExtent[3] - sourceProjCoord[1]) / tileResolution);\n\n    baseParams[this.v13_ ? 'I' : 'X'] = x;\n    baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n    return this.getRequestUrl_(\n      tileCoord,\n      tileExtent,\n      1,\n      sourceProjectionObj || projectionObj,\n      baseParams,\n    );\n  }\n\n  /**\n   * Return the GetLegendGraphic URL, optionally optimized for the passed\n   * resolution and possibly including any passed specific parameters. Returns\n   * `undefined` if the GetLegendGraphic URL cannot be constructed.\n   *\n   * @param {number} [resolution] Resolution. If set to undefined, `SCALE`\n   *     will not be calculated and included in URL.\n   * @param {Object} [params] GetLegendGraphic params. If `LAYER` is set, the\n   *     request is generated for this wms layer, else it will try to use the\n   *     configured wms layer. Default `FORMAT` is `image/png`.\n   *     `VERSION` should not be specified here.\n   * @return {string|undefined} GetLegendGraphic URL.\n   * @api\n   */\n  getLegendUrl(resolution, params) {\n    if (this.urls[0] === undefined) {\n      return undefined;\n    }\n\n    const baseParams = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_VERSION,\n      'REQUEST': 'GetLegendGraphic',\n      'FORMAT': 'image/png',\n    };\n\n    if (params === undefined || params['LAYER'] === undefined) {\n      const layers = this.params_.LAYERS;\n      const isSingleLayer = !Array.isArray(layers) || layers.length === 1;\n      if (!isSingleLayer) {\n        return undefined;\n      }\n      baseParams['LAYER'] = layers;\n    }\n\n    if (resolution !== undefined) {\n      const mpu = this.getProjection()\n        ? this.getProjection().getMetersPerUnit()\n        : 1;\n      const pixelSize = 0.00028;\n      baseParams['SCALE'] = (resolution * mpu) / pixelSize;\n    }\n\n    Object.assign(baseParams, params);\n\n    return appendParams(/** @type {string} */ (this.urls[0]), baseParams);\n  }\n\n  /**\n   * @return {number} Gutter.\n   * @override\n   */\n  getGutter() {\n    return this.gutter_;\n  }\n\n  /**\n   * Get the user-provided params, i.e. those passed to the constructor through\n   * the \"params\" option, and possibly updated using the updateParams method.\n   * @return {Object} Params.\n   * @api\n   */\n  getParams() {\n    return this.params_;\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../extent.js\").Extent} tileExtent Tile extent.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {Object} params Params.\n   * @return {string|undefined} Request URL.\n   * @private\n   */\n  getRequestUrl_(tileCoord, tileExtent, pixelRatio, projection, params) {\n    const urls = this.urls;\n    if (!urls) {\n      return undefined;\n    }\n    let url;\n    if (urls.length == 1) {\n      url = urls[0];\n    } else {\n      const index = modulo(tileCoordHash(tileCoord), urls.length);\n      url = urls[index];\n    }\n\n    return getImageSrc(\n      tileExtent,\n      (\n        this.tileGrid || this.getTileGridForProjection(projection)\n      ).getResolution(tileCoord[0]),\n      pixelRatio,\n      projection,\n      url,\n      params,\n      this.serverType_,\n    );\n  }\n\n  /**\n   * Get the tile pixel ratio for this source.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Tile pixel ratio.\n   * @override\n   */\n  getTilePixelRatio(pixelRatio) {\n    return !this.hidpi_ || this.serverType_ === undefined ? 1 : pixelRatio;\n  }\n\n  /**\n   * @private\n   * @return {string} The key for the current params.\n   */\n  getKeyForParams_() {\n    let i = 0;\n    const res = [];\n    for (const key in this.params_) {\n      res[i++] = key + '-' + this.params_[key];\n    }\n    return res.join('/');\n  }\n\n  /**\n   * @param {Object} params New URL paremeters.\n   * @private\n   */\n  setParams_(params) {\n    this.params_ = params;\n    this.updateV13_();\n    this.setKey(this.getKeyForParams_());\n  }\n\n  /**\n   * Set the URL parameters passed to the WMS source.\n   * @param {Object} params New URL paremeters.\n   * @api\n   */\n  setParams(params) {\n    this.setParams_(Object.assign({}, params));\n  }\n\n  /**\n   * Update the URL parameters. This method can be used to update a subset of the WMS\n   * parameters. Call `setParams` to set all of the parameters.\n   * @param {Object} params Updated URL parameters.\n   * @api\n   */\n  updateParams(params) {\n    this.setParams_(Object.assign(this.params_, params));\n  }\n\n  /**\n   * @private\n   */\n  updateV13_() {\n    const version = this.params_['VERSION'] || DEFAULT_VERSION;\n    this.v13_ = compareVersions(version, '1.3') >= 0;\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord The tile coordinate\n   * @param {number} pixelRatio The pixel ratio\n   * @param {import(\"../proj/Projection.js\").default} projection The projection\n   * @return {string|undefined} The tile URL\n   * @override\n   */\n  tileUrlFunction(tileCoord, pixelRatio, projection) {\n    let tileGrid = this.getTileGrid();\n    if (!tileGrid) {\n      tileGrid = this.getTileGridForProjection(projection);\n    }\n\n    if (tileGrid.getResolutions().length <= tileCoord[0]) {\n      return undefined;\n    }\n\n    if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n      pixelRatio = 1;\n    }\n\n    const tileResolution = tileGrid.getResolution(tileCoord[0]);\n    let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n\n    const gutter = this.gutter_;\n    if (gutter !== 0) {\n      tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n    }\n\n    const baseParams = Object.assign(\n      {},\n      getRequestParams(this.params_, 'GetMap'),\n    );\n\n    return this.getRequestUrl_(\n      tileCoord,\n      tileExtent,\n      pixelRatio,\n      projection,\n      baseParams,\n    );\n  }\n}\n\nexport default TileWMS;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"map-container\"},[_c('div',{ref:\"map\",staticClass:\"map\",attrs:{\"id\":_vm.mapId}},[_c('LayerControl',{attrs:{\"map\":_vm.map}}),(_vm.empty)?_c('TextControl',{attrs:{\"map\":_vm.map,\"text\":_vm.$t('mapping.nodata')}}):(!_vm.hasBasemap)?_c('TextControl',{attrs:{\"map\":_vm.map,\"text\":_vm.$t('mapping.nobasemap')}}):_vm._e()],1),_c('div',{ref:\"target\",staticClass:\"popover-target\"}),(_vm.popover && _vm.selectedItems)?_c('b-popover',{attrs:{\"show\":\"\",\"placement\":\"auto\",\"triggers\":\"manual\",\"target\":_vm.selectedItems.target,\"container\":_vm.container}},[_c('section',{staticClass:\"popover-items\"},[_c('Items',{attrs:{\"stac\":_vm.stac,\"items\":_vm.selectedItems.items}})],1),_c('div',{staticClass:\"text-center\"},[_c('b-button',{attrs:{\"target\":\"_blank\",\"variant\":\"danger\"},on:{\"click\":_vm.resetSelectedItems}},[_vm._v(_vm._s(_vm.$t('mapping.close')))])],1)]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @module ol/interaction/Select\n */\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport Feature from '../Feature.js';\nimport {extend} from '../array.js';\nimport Event from '../events/Event.js';\nimport {never, shiftKeyOnly, singleClick} from '../events/condition.js';\nimport {TRUE} from '../functions.js';\nimport VectorLayer from '../layer/Vector.js';\nimport {clear} from '../obj.js';\nimport {createEditingStyle} from '../style/Style.js';\nimport {getUid} from '../util.js';\nimport Interaction from './Interaction.js';\n\n/**\n * @enum {string}\n */\nconst SelectEventType = {\n  /**\n   * Triggered when feature(s) has been (de)selected.\n   * @event SelectEvent#select\n   * @api\n   */\n  SELECT: 'select',\n};\n\n/**\n * A function that takes a {@link module:ol/Feature~Feature} and returns `true` if the feature may be\n * selected or `false` otherwise.\n * @typedef {function(import(\"../Feature.js\").default, import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>):boolean} FilterFunction\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [addCondition] A function\n * that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default, this is {@link module:ol/events/condition.never}. Use this if you\n * want to use different events for add and remove instead of `toggle`.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. This is the event\n * for the selected features as a whole. By default, this is\n * {@link module:ol/events/condition.singleClick}. Clicking on a feature selects that\n * feature and removes any that were in the selection. Clicking outside any\n * feature removes all from the selection.\n * See `toggle`, `add`, `remove` options for adding/removing extra features to/\n * from the selection.\n * @property {Array<import(\"../layer/Layer.js\").default>|function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} [layers]\n * A list of layers from which features should be selected. Alternatively, a\n * filter function can be provided. The function will be called for each layer\n * in the map and should return `true` for layers that you want to be\n * selectable. If the option is absent, all visible layers will be considered\n * selectable.\n * @property {import(\"../style/Style.js\").StyleLike|null} [style]\n * Style for the selected features. By default the default edit style is used\n * (see {@link module:ol/style/Style~Style}). Set to `null` if this interaction should not apply\n * any style changes for selected features.\n * If set to a falsey value, the selected feature's style will not change.\n * @property {import(\"../events/condition.js\").Condition} [removeCondition] A function\n * that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * By default, this is {@link module:ol/events/condition.never}. Use this if you\n * want to use different events for add and remove instead of `toggle`.\n * @property {import(\"../events/condition.js\").Condition} [toggleCondition] A function\n * that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. This is in addition\n * to the `condition` event. By default,\n * {@link module:ol/events/condition.shiftKeyOnly}, i.e. pressing `shift` as\n * well as the `condition` event, adds that feature to the current selection if\n * it is not currently selected, and removes it if it is. See `add` and `remove`\n * if you want to use different events instead of a toggle.\n * @property {boolean} [multi=false] A boolean that determines if the default\n * behaviour should select only single features or all (overlapping) features at\n * the clicked map position. The default of `false` means single select.\n * @property {Collection<Feature>} [features]\n * Collection where the interaction will place selected features. Optional. If\n * not set the interaction will create a collection. In any case the collection\n * used by the interaction is returned by\n * {@link module:ol/interaction/Select~Select#getFeatures}.\n * @property {FilterFunction} [filter] A function\n * that takes a {@link module:ol/Feature~Feature} and a\n * {@link module:ol/layer/Layer~Layer} and returns `true` if the feature may be\n * selected or `false` otherwise.\n * @property {number} [hitTolerance=0] Hit-detection tolerance. Pixels inside\n * the radius around the given position will be checked for features.\n */\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Select~Select} instances are instances of\n * this type.\n */\nexport class SelectEvent extends Event {\n  /**\n   * @param {SelectEventType} type The event type.\n   * @param {Array<import(\"../Feature.js\").default>} selected Selected features.\n   * @param {Array<import(\"../Feature.js\").default>} deselected Deselected features.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Associated\n   *     {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n   */\n  constructor(type, selected, deselected, mapBrowserEvent) {\n    super(type);\n\n    /**\n     * Selected features array.\n     * @type {Array<import(\"../Feature.js\").default>}\n     * @api\n     */\n    this.selected = selected;\n\n    /**\n     * Deselected features array.\n     * @type {Array<import(\"../Feature.js\").default>}\n     * @api\n     */\n    this.deselected = deselected;\n\n    /**\n     * Associated {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n     * @type {import(\"../MapBrowserEvent.js\").default}\n     * @api\n     */\n    this.mapBrowserEvent = mapBrowserEvent;\n  }\n}\n\n/**\n * Original feature styles to reset to when features are no longer selected.\n * @type {Object<number, import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction>}\n */\nconst originalFeatureStyles = {};\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<'select', SelectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active'|'select', Return>} SelectOnSignature\n */\n\n/**\n * @classdesc\n * Interaction for selecting vector features. By default, selected features are\n * styled differently, so this interaction can be used for visual highlighting,\n * as well as selecting features for other actions, such as modification or\n * output. There are three ways of controlling which features are selected:\n * using the browser event as defined by the `condition` and optionally the\n * `toggle`, `add`/`remove`, and `multi` options; a `layers` filter; and a\n * further feature filter using the `filter` option.\n *\n * @fires SelectEvent\n * @api\n */\nclass Select extends Interaction {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    super();\n\n    /***\n     * @type {SelectOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {SelectOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {SelectOnSignature<void>}\n     */\n    this.un;\n\n    options = options ? options : {};\n\n    /**\n     * @private\n     */\n    this.boundAddFeature_ = this.addFeature_.bind(this);\n\n    /**\n     * @private\n     */\n    this.boundRemoveFeature_ = this.removeFeature_.bind(this);\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : singleClick;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.addCondition_ = options.addCondition ? options.addCondition : never;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.removeCondition_ = options.removeCondition\n      ? options.removeCondition\n      : never;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.toggleCondition_ = options.toggleCondition\n      ? options.toggleCondition\n      : shiftKeyOnly;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.multi_ = options.multi ? options.multi : false;\n\n    /**\n     * @private\n     * @type {FilterFunction}\n     */\n    this.filter_ = options.filter ? options.filter : TRUE;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.hitTolerance_ = options.hitTolerance ? options.hitTolerance : 0;\n\n    /**\n     * @private\n     * @type {import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction|null}\n     */\n    this.style_ =\n      options.style !== undefined ? options.style : getDefaultStyleFunction();\n\n    /**\n     * @private\n     * @type {Collection<Feature>}\n     */\n    this.features_ = options.features || new Collection();\n\n    /** @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean} */\n    let layerFilter;\n    if (options.layers) {\n      if (typeof options.layers === 'function') {\n        layerFilter = options.layers;\n      } else {\n        const layers = options.layers;\n        layerFilter = function (layer) {\n          return layers.includes(layer);\n        };\n      }\n    } else {\n      layerFilter = TRUE;\n    }\n\n    /**\n     * @private\n     * @type {function(import(\"../layer/Layer.js\").default<import(\"../source/Source\").default>): boolean}\n     */\n    this.layerFilter_ = layerFilter;\n\n    /**\n     * An association between selected feature (key)\n     * and layer (value)\n     * @private\n     * @type {Object<string, import(\"../layer/Layer.js\").default>}\n     */\n    this.featureLayerAssociation_ = {};\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"../layer/Layer.js\").default} layer Layer.\n   * @private\n   */\n  addFeatureLayerAssociation_(feature, layer) {\n    this.featureLayerAssociation_[getUid(feature)] = layer;\n  }\n\n  /**\n   * Get the selected features.\n   * @return {Collection<Feature>} Features collection.\n   * @api\n   */\n  getFeatures() {\n    return this.features_;\n  }\n\n  /**\n   * Returns the Hit-detection tolerance.\n   * @return {number} Hit tolerance in pixels.\n   * @api\n   */\n  getHitTolerance() {\n    return this.hitTolerance_;\n  }\n\n  /**\n   * Returns the associated {@link module:ol/layer/Vector~VectorLayer vector layer} of\n   * a selected feature.\n   * @param {import(\"../Feature.js\").default} feature Feature\n   * @return {import('../layer/Vector.js').default} Layer.\n   * @api\n   */\n  getLayer(feature) {\n    return /** @type {import('../layer/Vector.js').default} */ (\n      this.featureLayerAssociation_[getUid(feature)]\n    );\n  }\n\n  /**\n   * Hit-detection tolerance. Pixels inside the radius around the given position\n   * will be checked for features.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @api\n   */\n  setHitTolerance(hitTolerance) {\n    this.hitTolerance_ = hitTolerance;\n  }\n\n  /**\n   * Remove the interaction from its current map, if any,  and attach it to a new\n   * map, if any. Pass `null` to just remove the interaction from the current map.\n   * @param {import(\"../Map.js\").default|null} map Map.\n   * @api\n   * @override\n   */\n  setMap(map) {\n    const currentMap = this.getMap();\n    if (currentMap && this.style_) {\n      this.features_.forEach(this.restorePreviousStyle_.bind(this));\n    }\n    super.setMap(map);\n    if (map) {\n      this.features_.addEventListener(\n        CollectionEventType.ADD,\n        this.boundAddFeature_,\n      );\n      this.features_.addEventListener(\n        CollectionEventType.REMOVE,\n        this.boundRemoveFeature_,\n      );\n\n      if (this.style_) {\n        this.features_.forEach(this.applySelectedStyle_.bind(this));\n      }\n    } else {\n      this.features_.removeEventListener(\n        CollectionEventType.ADD,\n        this.boundAddFeature_,\n      );\n      this.features_.removeEventListener(\n        CollectionEventType.REMOVE,\n        this.boundRemoveFeature_,\n      );\n    }\n  }\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent<Feature>} evt Event.\n   * @private\n   */\n  addFeature_(evt) {\n    const feature = evt.element;\n    if (this.style_) {\n      this.applySelectedStyle_(feature);\n    }\n    if (!this.getLayer(feature)) {\n      const layer = /** @type {VectorLayer} */ (\n        this.getMap()\n          .getAllLayers()\n          .find(function (layer) {\n            if (\n              layer instanceof VectorLayer &&\n              layer.getSource() &&\n              layer.getSource().hasFeature(feature)\n            ) {\n              return layer;\n            }\n          })\n      );\n      if (layer) {\n        this.addFeatureLayerAssociation_(feature, layer);\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent<Feature>} evt Event.\n   * @private\n   */\n  removeFeature_(evt) {\n    if (this.style_) {\n      this.restorePreviousStyle_(evt.element);\n    }\n  }\n\n  /**\n   * @return {import(\"../style/Style.js\").StyleLike|null} Select style.\n   */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n   * @param {Feature} feature Feature\n   * @private\n   */\n  applySelectedStyle_(feature) {\n    const key = getUid(feature);\n    if (!(key in originalFeatureStyles)) {\n      originalFeatureStyles[key] = feature.getStyle();\n    }\n    feature.setStyle(this.style_);\n  }\n\n  /**\n   * @param {Feature} feature Feature\n   * @private\n   */\n  restorePreviousStyle_(feature) {\n    const interactions = this.getMap().getInteractions().getArray();\n    for (let i = interactions.length - 1; i >= 0; --i) {\n      const interaction = interactions[i];\n      if (\n        interaction !== this &&\n        interaction instanceof Select &&\n        interaction.getStyle() &&\n        interaction.getFeatures().getArray().lastIndexOf(feature) !== -1\n      ) {\n        feature.setStyle(interaction.getStyle());\n        return;\n      }\n    }\n\n    const key = getUid(feature);\n    feature.setStyle(originalFeatureStyles[key]);\n    delete originalFeatureStyles[key];\n  }\n\n  /**\n   * @param {Feature} feature Feature.\n   * @private\n   */\n  removeFeatureLayerAssociation_(feature) {\n    delete this.featureLayerAssociation_[getUid(feature)];\n  }\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent~MapBrowserEvent map browser event} and may change the\n   * selected state of features.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   * @return {boolean} `false` to stop event propagation.\n   * @override\n   */\n  handleEvent(mapBrowserEvent) {\n    if (!this.condition_(mapBrowserEvent)) {\n      return true;\n    }\n    const add = this.addCondition_(mapBrowserEvent);\n    const remove = this.removeCondition_(mapBrowserEvent);\n    const toggle = this.toggleCondition_(mapBrowserEvent);\n    const set = !add && !remove && !toggle;\n    const map = mapBrowserEvent.map;\n    const features = this.getFeatures();\n\n    /**\n     * @type {Array<Feature>}\n     */\n    const deselected = [];\n\n    /**\n     * @type {Array<Feature>}\n     */\n    const selected = [];\n\n    if (set) {\n      // Replace the currently selected feature(s) with the feature(s) at the\n      // pixel, or clear the selected feature(s) if there is no feature at\n      // the pixel.\n      clear(this.featureLayerAssociation_);\n      map.forEachFeatureAtPixel(\n        mapBrowserEvent.pixel,\n        /**\n         * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n         * @param {import(\"../layer/Layer.js\").default} layer Layer.\n         * @return {boolean|undefined} Continue to iterate over the features.\n         */\n        (feature, layer) => {\n          if (!(feature instanceof Feature) || !this.filter_(feature, layer)) {\n            return;\n          }\n          this.addFeatureLayerAssociation_(feature, layer);\n          selected.push(feature);\n          return !this.multi_;\n        },\n        {\n          layerFilter: this.layerFilter_,\n          hitTolerance: this.hitTolerance_,\n        },\n      );\n      for (let i = features.getLength() - 1; i >= 0; --i) {\n        const feature = features.item(i);\n        const index = selected.indexOf(feature);\n        if (index > -1) {\n          // feature is already selected\n          selected.splice(index, 1);\n        } else {\n          features.remove(feature);\n          deselected.push(feature);\n        }\n      }\n      if (selected.length !== 0) {\n        features.extend(selected);\n      }\n    } else {\n      // Modify the currently selected feature(s).\n      map.forEachFeatureAtPixel(\n        mapBrowserEvent.pixel,\n        /**\n         * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n         * @param {import(\"../layer/Layer.js\").default} layer Layer.\n         * @return {boolean|undefined} Continue to iterate over the features.\n         */\n        (feature, layer) => {\n          if (!(feature instanceof Feature) || !this.filter_(feature, layer)) {\n            return;\n          }\n          if ((add || toggle) && !features.getArray().includes(feature)) {\n            this.addFeatureLayerAssociation_(feature, layer);\n            selected.push(feature);\n          } else if (\n            (remove || toggle) &&\n            features.getArray().includes(feature)\n          ) {\n            deselected.push(feature);\n            this.removeFeatureLayerAssociation_(feature);\n          }\n          return !this.multi_;\n        },\n        {\n          layerFilter: this.layerFilter_,\n          hitTolerance: this.hitTolerance_,\n        },\n      );\n      for (let j = deselected.length - 1; j >= 0; --j) {\n        features.remove(deselected[j]);\n      }\n      features.extend(selected);\n    }\n    if (selected.length > 0 || deselected.length > 0) {\n      this.dispatchEvent(\n        new SelectEvent(\n          SelectEventType.SELECT,\n          selected,\n          deselected,\n          mapBrowserEvent,\n        ),\n      );\n    }\n    return true;\n  }\n}\n\n/**\n * @return {import(\"../style/Style.js\").StyleFunction} Styles.\n */\nfunction getDefaultStyleFunction() {\n  const styles = createEditingStyle();\n  extend(styles['Polygon'], styles['LineString']);\n  extend(styles['GeometryCollection'], styles['LineString']);\n\n  return function (feature) {\n    if (!feature.getGeometry()) {\n      return null;\n    }\n    return styles[feature.getGeometry().getType()];\n  };\n}\n\nexport default Select;\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = (function (c, id, msg, transfer, cb) {\n    var w = new Worker(ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([\n        c + ';addEventListener(\"error\",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'\n    ], { type: 'text/javascript' }))));\n    w.onmessage = function (e) {\n        var d = e.data, ed = d.$e$;\n        if (ed) {\n            var err = new Error(ed[0]);\n            err['code'] = ed[1];\n            err.stack = ed[2];\n            cb(err, null);\n        }\n        else\n            cb(null, d);\n    };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, i32 = Int32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new i32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return { b: b, r: r };\n};\nvar _a = freb(fleb, 2), fl = _a.b, revfl = _a.r;\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b.b, revfd = _b.r;\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >> 8) | ((x & 0x00FF) << 8)) >> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i) {\n        if (cd[i])\n            ++l[cd[i] - 1];\n    }\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 1; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i) {\n            if (cd[i]) {\n                co[i] = rev[le[cd[i] - 1]++] >> (15 - cd[i]);\n            }\n        }\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p + 7) / 8) | 0; };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    return new u8(v.subarray(s, e));\n};\n/**\n * Codes for errors generated within this library\n */\nexport var FlateErrorCode = {\n    UnexpectedEOF: 0,\n    InvalidBlockType: 1,\n    InvalidLengthLiteral: 2,\n    InvalidDistance: 3,\n    StreamFinished: 4,\n    NoStreamHandler: 5,\n    InvalidHeader: 6,\n    NoCallback: 7,\n    InvalidUTF8: 8,\n    ExtraFieldTooLong: 9,\n    InvalidDate: 10,\n    FilenameTooLong: 11,\n    StreamFinishing: 12,\n    InvalidZipData: 13,\n    UnknownCompressionMethod: 14\n};\n// error codes\nvar ec = [\n    'unexpected EOF',\n    'invalid block type',\n    'invalid length/literal',\n    'invalid distance',\n    'stream finished',\n    'no stream handler',\n    ,\n    'no callback',\n    'invalid UTF-8 data',\n    'extra field too long',\n    'date not in range 1980-2099',\n    'filename too long',\n    'stream finishing',\n    'invalid zip data'\n    // determined by unknown compression method\n];\n;\nvar err = function (ind, msg, nt) {\n    var e = new Error(msg || ec[ind]);\n    e.code = ind;\n    if (Error.captureStackTrace)\n        Error.captureStackTrace(e, err);\n    if (!nt)\n        throw e;\n    return e;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, st, buf, dict) {\n    // source length       dict length\n    var sl = dat.length, dl = dict ? dict.length : 0;\n    if (!sl || st.f && !st.l)\n        return buf || new u8(0);\n    var noBuf = !buf;\n    // have to estimate size\n    var resize = noBuf || st.i != 2;\n    // no state\n    var noSt = st.i;\n    // Assumes roughly 33% compression ratio average\n    if (noBuf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                // ensure size\n                if (resize)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8, st.f = final;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                err(1);\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17\n        if (resize)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var lpos = pos;\n        for (;; lpos = pos) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >> 4;\n            pos += c & 15;\n            if (pos > tbts) {\n                if (noSt)\n                    err(0);\n                break;\n            }\n            if (!c)\n                err(2);\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lpos = pos, lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >> 4;\n                if (!d)\n                    err(3);\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n                }\n                if (pos > tbts) {\n                    if (noSt)\n                        err(0);\n                    break;\n                }\n                if (resize)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                if (bt < dt) {\n                    var shift = dl - dt, dend = Math.min(dt, end);\n                    if (shift + bt < 0)\n                        err(3);\n                    for (; bt < dend; ++bt)\n                        buf[bt] = dict[shift + bt];\n                }\n                for (; bt < end; ++bt)\n                    buf[bt] = buf[bt - dt];\n            }\n        }\n        st.l = lm, st.p = lpos, st.b = bt, st.f = final;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    // don't reallocate for streams or user buffers\n    return bt != buf.length && noBuf ? slc(buf, 0, bt) : buf.subarray(0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >> 8;\n    d[o + 2] |= v >> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return { t: et, l: 0 };\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return { t: v, l: 1 };\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return { t: new u8(tr), l: mbt };\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return { c: cl.subarray(0, cli), n: s };\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a.t, mlb = _a.l;\n    var _b = hTree(df, 15), ddt = _b.t, mdb = _b.l;\n    var _c = lc(dlt), lclt = _c.c, nlc = _c.n;\n    var _d = lc(ddt), lcdt = _d.c, ndc = _d.n;\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        ++lcfreq[lclt[i] & 31];\n    for (var i = 0; i < lcdt.length; ++i)\n        ++lcfreq[lcdt[i] & 31];\n    var _e = hTree(lcfreq, 7), lct = _e.t, mlcb = _e.l;\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + 2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18];\n    if (bs >= 0 && flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >> 5) & 127), p += clct[i] >> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        var sym = syms[i];\n        if (sym > 255) {\n            var len = (sym >> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (sym >> 23) & 31), p += fleb[len];\n            var dst = sym & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (sym >> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[sym]), p += ll[sym];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new i32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, st) {\n    var s = st.z || dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var lst = st.l;\n    var pos = (st.r || 0) & 7;\n    if (lvl) {\n        if (pos)\n            w[0] = st.r >> 3;\n        var opt = deo[lvl - 1];\n        var n = opt >> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = st.p || new u16(32768), head = st.h || new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new i32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index          l/lind  waitdx          blkpos\n        var lc_1 = 0, eb = 0, i = st.i || 0, li = 0, wi = st.w || 0, bs = 0;\n        for (; i + 2 < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768    previous index mod\n            var imod = i & 32767, pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && (rem > 423 || !lst)) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = imod - pimod & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = i - dif + j & 32767;\n                                    var pti = prev[ti];\n                                    var cd = ti - pti & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += imod - pimod & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one int32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        for (i = Math.max(i, wi); i < s; ++i) {\n            syms[li++] = dat[i];\n            ++lf[dat[i]];\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        if (!lst) {\n            st.r = (pos & 7) | w[(pos / 8) | 0] << 3;\n            // shft(pos) now 1 less if pos & 7 != 0\n            pos -= 7;\n            st.h = head, st.p = prev, st.i = i, st.w = wi;\n        }\n    }\n    else {\n        for (var i = st.w || 0; i < s + lst; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e >= s) {\n                // write final block\n                w[(pos / 8) | 0] = lst;\n                e = s;\n            }\n            pos = wfblk(w, pos + 1, dat.subarray(i, e));\n        }\n        st.i = s;\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new Int32Array(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && -306674912) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = -1;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return ~c; }\n    };\n};\n// Adler32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length | 0;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 2655, l);\n                for (; i < e; ++i)\n                    m += n += d[i];\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n            }\n            a = n, b = m;\n        },\n        d: function () {\n            a %= 65521, b %= 65521;\n            return (a & 255) << 24 | (a & 0xFF00) << 8 | (b & 255) << 8 | (b >> 8);\n        }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    if (!st) {\n        st = { l: 1 };\n        if (opt.dictionary) {\n            var dict = opt.dictionary.subarray(-32768);\n            var newDat = new u8(dict.length + dat.length);\n            newDat.set(dict);\n            newDat.set(dat, dict.length);\n            dat = newDat;\n            st.w = dict.length;\n        }\n    }\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? (st.l ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : 20) : (12 + opt.mem), pre, post, st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/\\s+/g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return fnStr;\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k].buffer) {\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n        }\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            fnStr = wcln(fns[i], fnStr, td_1);\n        ch[id] = { c: wcln(fns[m], fnStr, td_1), e: td_1 };\n    }\n    var td = mrg({}, ch[id].e);\n    return wk(ch[id].c + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, i32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, ec, hMap, max, bits, bits16, shft, slc, err, inflt, inflateSync, pbf, gopt]; };\nvar bDflt = function () { return [u8, u16, i32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zls]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get opts\nvar gopt = function (o) { return o && {\n    out: o.size && new u8(o.size),\n    dictionary: o.dictionary\n}; };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) {\n        if (ev.data.length) {\n            strm.push(ev.data[0], ev.data[1]);\n            postMessage([ev.data[0].length]);\n        }\n        else\n            strm.flush();\n    };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id, flush, ext) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else if (!Array.isArray(dat))\n            ext(dat);\n        else if (dat.length == 1) {\n            strm.queuedSize -= dat[0];\n            if (strm.ondrain)\n                strm.ondrain(dat[0]);\n        }\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.queuedSize = 0;\n    strm.push = function (d, f) {\n        if (!strm.ondata)\n            err(5);\n        if (t)\n            strm.ondata(err(4, 0, 1), null, !!f);\n        strm.queuedSize += d.length;\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n    if (flush) {\n        strm.flush = function () { w.postMessage([]); };\n    }\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        err(6, 'invalid gzip data');\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += (d[10] | d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16 | d[l - 1] << 24) >>> 0;\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + (o.filename ? o.filename.length + 1 : 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (o.dictionary && 32);\n    c[1] |= 31 - ((c[0] << 8) | c[1]) % 31;\n    if (o.dictionary) {\n        var h = adler();\n        h.p(o.dictionary);\n        wbytes(c, 2, h.d());\n    }\n};\n// zlib start\nvar zls = function (d, dict) {\n    if ((d[0] & 15) != 8 || (d[0] >> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        err(6, 'invalid zlib data');\n    if ((d[1] >> 5 & 1) == +!dict)\n        err(6, 'invalid zlib data: ' + (d[1] & 32 ? 'need' : 'unexpected') + ' dictionary');\n    return (d[1] >> 3 & 4) + 2;\n};\nfunction StrmOpt(opts, cb) {\n    if (typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n        this.s = { l: 0, i: 32768, w: 32768, z: 32768 };\n        // Buffer length must always be 0 mod 32768 for index calculations to be correct when modifying head and prev\n        // 98304 = 32768 (lookback) + 65536 (common chunk size)\n        this.b = new u8(98304);\n        if (this.o.dictionary) {\n            var dict = this.o.dictionary.subarray(-32768);\n            this.b.set(dict, 32768 - dict.length);\n            this.s.i = 32768 - dict.length;\n        }\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, this.s), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        var endLen = chunk.length + this.s.z;\n        if (endLen > this.b.length) {\n            if (endLen > 2 * this.b.length - 32768) {\n                var newBuf = new u8(endLen & -32768);\n                newBuf.set(this.b.subarray(0, this.s.z));\n                this.b = newBuf;\n            }\n            var split = this.b.length - this.s.z;\n            this.b.set(chunk.subarray(0, split), this.s.z);\n            this.s.z = this.b.length;\n            this.p(this.b, false);\n            this.b.set(this.b.subarray(-32768));\n            this.b.set(chunk.subarray(split), 32768);\n            this.s.z = chunk.length - split + 32768;\n            this.s.i = 32766, this.s.w = 32768;\n        }\n        else {\n            this.b.set(chunk, this.s.z);\n            this.s.z += chunk.length;\n        }\n        this.s.l = final & 1;\n        if (this.s.z > this.s.w + 8191 || final) {\n            this.p(this.b, final || false);\n            this.s.w = this.s.i, this.s.i -= 2;\n        }\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * deflated output for small inputs.\n     */\n    Deflate.prototype.flush = function () {\n        if (!this.ondata)\n            err(5);\n        if (this.s.l)\n            err(4);\n        this.p(this.b, false);\n        this.s.w = this.s.i, this.s.i -= 2;\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6, 1);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    return dopt(data, opts || {}, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    function Inflate(opts, cb) {\n        // no StrmOpt here to avoid adding to workerizer\n        if (typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        var dict = opts && opts.dictionary && opts.dictionary.subarray(-32768);\n        this.s = { i: 0, b: dict ? dict.length : 0 };\n        this.o = new u8(32768);\n        this.p = new u8(0);\n        if (dict)\n            this.o.set(dict);\n    }\n    Inflate.prototype.e = function (c) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        if (!this.p.length)\n            this.p = c;\n        else if (c.length) {\n            var n = new u8(this.p.length + c.length);\n            n.set(this.p), n.set(c, this.p.length), this.p = n;\n        }\n    };\n    Inflate.prototype.c = function (final) {\n        this.s.i = +(this.d = final || false);\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.s, this.o);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    function AsyncInflate(opts, cb) {\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Inflate(ev.data);\n            onmessage = astrm(strm);\n        }, 7, 0);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gopt(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, opts) {\n    return inflt(data, { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        this.l += chunk.length;\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, this.s);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * GZIPped output for small inputs.\n     */\n    Gzip.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8, 1);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming single or multi-member GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    function Gunzip(opts, cb) {\n        this.v = 1;\n        this.r = 0;\n        Inflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        this.r += chunk.length;\n        if (this.v) {\n            var p = this.p.subarray(this.v - 1);\n            var s = p.length > 3 ? gzs(p) : 4;\n            if (s > p.length) {\n                if (!final)\n                    return;\n            }\n            else if (this.v > 1 && this.onmember) {\n                this.onmember(this.r - p.length);\n            }\n            this.p = p.subarray(s), this.v = 0;\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n        // process concatenated GZIP\n        if (this.s.f && !this.s.l && !final) {\n            this.v = shft(this.s.p) + 9;\n            this.s = { i: 0 };\n            this.o = new u8(0);\n            this.push(new u8(0), final);\n        }\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming single or multi-member GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    function AsyncGunzip(opts, cb) {\n        var _this = this;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Gunzip(ev.data);\n            strm.onmember = function (offset) { return postMessage(offset); };\n            onmessage = astrm(strm);\n        }, 9, 0, function (offset) { return _this.onmember && _this.onmember(offset); });\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0], ev.data[1])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, opts) {\n    var st = gzs(data);\n    if (st + 8 > data.length)\n        err(6, 'invalid gzip data');\n    return inflt(data.subarray(st, -8), { i: 2 }, opts && opts.out || new u8(gzl(data)), opts && opts.dictionary);\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        this.c.p(chunk);\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        var raw = dopt(c, this.o, this.v && (this.o.dictionary ? 6 : 2), f && 4, this.s);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    /**\n     * Flushes buffered uncompressed data. Useful to immediately retrieve the\n     * zlibbed output for small inputs.\n     */\n    Zlib.prototype.flush = function () {\n        Deflate.prototype.flush.call(this);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10, 1);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, opts.dictionary ? 6 : 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    function Unzlib(opts, cb) {\n        Inflate.call(this, opts, cb);\n        this.v = opts && opts.dictionary ? 2 : 1;\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 6 && !final)\n                return;\n            this.p = this.p.subarray(zls(this.p, this.v - 1)), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                err(6, 'invalid zlib data');\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    function AsyncUnzlib(opts, cb) {\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, StrmOpt.call(this, opts, cb), function (ev) {\n            var strm = new Unzlib(ev.data);\n            onmessage = astrm(strm);\n        }, 11, 0);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gopt(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, opts) {\n    return inflt(data.subarray(zls(data, opts && opts.dictionary), -4), { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    function Decompress(opts, cb) {\n        this.o = StrmOpt.call(this, opts, cb) || {};\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n    }\n    // init substream\n    // overriden by AsyncDecompress\n    Decompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (dat, final) {\n            _this.ondata(dat, final);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(this.o)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(this.o)\n                        : new this.Z(this.o);\n                this.i();\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    function AsyncDecompress(opts, cb) {\n        Decompress.call(this, opts, cb);\n        this.queuedSize = 0;\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n    }\n    AsyncDecompress.prototype.i = function () {\n        var _this = this;\n        this.s.ondata = function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        };\n        this.s.ondrain = function (size) {\n            _this.queuedSize -= size;\n            if (_this.ondrain)\n                _this.ondrain(size);\n        };\n    };\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        this.queuedSize += chunk.length;\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param opts The decompression options\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, opts) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, opts)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, opts)\n            : unzlibSync(data, opts);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k, op = o;\n        if (Array.isArray(val))\n            op = mrg(o, val[1]), val = val[0];\n        if (val instanceof u8)\n            t[n] = [val, op];\n        else {\n            t[n += '/'] = [new u8(0), op];\n            fltn(val, n, t, o);\n        }\n    }\n};\n// text encoder\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n// decode UTF8\nvar dutf8 = function (d) {\n    for (var r = '', i = 0;;) {\n        var c = d[i++];\n        var eb = (c > 127) + (c > 223) + (c > 239);\n        if (i + eb > d.length)\n            return { s: r, r: slc(d, i - 1) };\n        if (!eb)\n            r += String.fromCharCode(c);\n        else if (eb == 3) {\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n        }\n        else if (eb & 1)\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\n        else\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\n    }\n};\n/**\n * Streaming UTF-8 decoding\n */\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is decoded\n     */\n    function DecodeUTF8(cb) {\n        this.ondata = cb;\n        if (tds)\n            this.t = new TextDecoder();\n        else\n            this.p = et;\n    }\n    /**\n     * Pushes a chunk to be decoded from UTF-8 binary\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    DecodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        final = !!final;\n        if (this.t) {\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\n            if (final) {\n                if (this.t.decode().length)\n                    err(8);\n                this.t = null;\n            }\n            return;\n        }\n        if (!this.p)\n            err(4);\n        var dat = new u8(this.p.length + chunk.length);\n        dat.set(this.p);\n        dat.set(chunk, this.p.length);\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (final) {\n            if (r.length)\n                err(8);\n            this.p = null;\n        }\n        else\n            this.p = r;\n        this.ondata(s, final);\n    };\n    return DecodeUTF8;\n}());\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is encoded\n     */\n    function EncodeUTF8(cb) {\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be encoded to UTF-8\n     * @param chunk The string data to push\n     * @param final Whether this is the last chunk\n     */\n    EncodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        if (this.d)\n            err(4);\n        this.ondata(strToU8(chunk), this.d = final || false);\n    };\n    return EncodeUTF8;\n}());\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    if (latin1) {\n        var ar_1 = new u8(str.length);\n        for (var i = 0; i < str.length; ++i)\n            ar_1[i] = str.charCodeAt(i);\n        return ar_1;\n    }\n    if (te)\n        return te.encode(str);\n    var l = str.length;\n    var ar = new u8(str.length + (str.length >> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    if (latin1) {\n        var r = '';\n        for (var i = 0; i < dat.length; i += 16384)\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n        return r;\n    }\n    else if (td) {\n        return td.decode(dat);\n    }\n    else {\n        var _a = dutf8(dat), s = _a.s, r = _a.r;\n        if (r.length)\n            err(8);\n        return s;\n    }\n}\n;\n// deflate bit flag\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n};\n// extra field length\nvar exfl = function (ex) {\n    var le = 0;\n    if (ex) {\n        for (var k in ex) {\n            var l = ex[k].length;\n            if (l > 65535)\n                err(9);\n            le += l + 4;\n        }\n    }\n    return le;\n};\n// write zip header\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\n    var fl = fn.length, ex = f.extra, col = co && co.length;\n    var exl = exfl(ex);\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b++] = 20, d[b++] = f.os;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (f.flag << 1) | (c < 0 && 8), d[b++] = u && 8;\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        err(10);\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >> 1)), b += 4;\n    if (c != -1) {\n        wbytes(d, b, f.crc);\n        wbytes(d, b + 4, c < 0 ? -c - 2 : c);\n        wbytes(d, b + 8, f.size);\n    }\n    wbytes(d, b + 12, fl);\n    wbytes(d, b + 14, exl), b += 16;\n    if (ce != null) {\n        wbytes(d, b, col);\n        wbytes(d, b + 6, f.attrs);\n        wbytes(d, b + 10, ce), b += 14;\n    }\n    d.set(fn, b);\n    b += fl;\n    if (exl) {\n        for (var k in ex) {\n            var exf = ex[k], l = exf.length;\n            wbytes(d, b, +k);\n            wbytes(d, b + 2, l);\n            d.set(exf, b + 4), b += 4 + l;\n        }\n    }\n    if (col)\n        d.set(co, b), b += col;\n    return b;\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\nvar ZipPassThrough = /*#__PURE__*/ (function () {\n    /**\n     * Creates a pass-through stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     */\n    function ZipPassThrough(filename) {\n        this.filename = filename;\n        this.c = crc();\n        this.size = 0;\n        this.compression = 0;\n    }\n    /**\n     * Processes a chunk and pushes to the output stream. You can override this\n     * method in a subclass for custom behavior, but by default this passes\n     * the data through. You must call this.ondata(err, chunk, final) at some\n     * point in this method.\n     * @param chunk The chunk to process\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.process = function (chunk, final) {\n        this.ondata(null, chunk, final);\n    };\n    /**\n     * Pushes a chunk to be added. If you are subclassing this with a custom\n     * compression algorithm, note that you must push data from the source\n     * file only, pre-compression.\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            err(5);\n        this.c.p(chunk);\n        this.size += chunk.length;\n        if (final)\n            this.crc = this.c.d();\n        this.process(chunk, final || false);\n    };\n    return ZipPassThrough;\n}());\nexport { ZipPassThrough };\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\nvar ZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function ZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new Deflate(opts, function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n    }\n    ZipDeflate.prototype.process = function (chunk, final) {\n        try {\n            this.d.push(chunk, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return ZipDeflate;\n}());\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function AsyncZipDeflate(filename, opts) {\n        var _this = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\n            _this.ondata(err, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n        this.terminate = this.d.terminate;\n    }\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\n        this.d.push(chunk, final);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return AsyncZipDeflate;\n}());\nexport { AsyncZipDeflate };\n// TODO: Better tree shaking\n/**\n * A zippable archive to which files can incrementally be added\n */\nvar Zip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an empty ZIP archive to which files can be added\n     * @param cb The callback to call whenever data for the generated ZIP archive\n     *           is available\n     */\n    function Zip(cb) {\n        this.ondata = cb;\n        this.u = [];\n        this.d = 1;\n    }\n    /**\n     * Adds a file to the ZIP archive\n     * @param file The file stream to add\n     */\n    Zip.prototype.add = function (file) {\n        var _this = this;\n        if (!this.ondata)\n            err(5);\n        // finishing or finished\n        if (this.d & 2)\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, false);\n        else {\n            var f = strToU8(file.filename), fl_1 = f.length;\n            var com = file.comment, o = com && strToU8(com);\n            var u = fl_1 != file.filename.length || (o && (com.length != o.length));\n            var hl_1 = fl_1 + exfl(file.extra) + 30;\n            if (fl_1 > 65535)\n                this.ondata(err(11, 0, 1), null, false);\n            var header = new u8(hl_1);\n            wzh(header, 0, file, f, u, -1);\n            var chks_1 = [header];\n            var pAll_1 = function () {\n                for (var _i = 0, chks_2 = chks_1; _i < chks_2.length; _i++) {\n                    var chk = chks_2[_i];\n                    _this.ondata(null, chk, false);\n                }\n                chks_1 = [];\n            };\n            var tr_1 = this.d;\n            this.d = 0;\n            var ind_1 = this.u.length;\n            var uf_1 = mrg(file, {\n                f: f,\n                u: u,\n                o: o,\n                t: function () {\n                    if (file.terminate)\n                        file.terminate();\n                },\n                r: function () {\n                    pAll_1();\n                    if (tr_1) {\n                        var nxt = _this.u[ind_1 + 1];\n                        if (nxt)\n                            nxt.r();\n                        else\n                            _this.d = 1;\n                    }\n                    tr_1 = 1;\n                }\n            });\n            var cl_1 = 0;\n            file.ondata = function (err, dat, final) {\n                if (err) {\n                    _this.ondata(err, dat, final);\n                    _this.terminate();\n                }\n                else {\n                    cl_1 += dat.length;\n                    chks_1.push(dat);\n                    if (final) {\n                        var dd = new u8(16);\n                        wbytes(dd, 0, 0x8074B50);\n                        wbytes(dd, 4, file.crc);\n                        wbytes(dd, 8, cl_1);\n                        wbytes(dd, 12, file.size);\n                        chks_1.push(dd);\n                        uf_1.c = cl_1, uf_1.b = hl_1 + cl_1 + 16, uf_1.crc = file.crc, uf_1.size = file.size;\n                        if (tr_1)\n                            uf_1.r();\n                        tr_1 = 1;\n                    }\n                    else if (tr_1)\n                        pAll_1();\n                }\n            };\n            this.u.push(uf_1);\n        }\n    };\n    /**\n     * Ends the process of adding files and prepares to emit the final chunks.\n     * This *must* be called after adding all desired files for the resulting\n     * ZIP file to work properly.\n     */\n    Zip.prototype.end = function () {\n        var _this = this;\n        if (this.d & 2) {\n            this.ondata(err(4 + (this.d & 1) * 8, 0, 1), null, true);\n            return;\n        }\n        if (this.d)\n            this.e();\n        else\n            this.u.push({\n                r: function () {\n                    if (!(_this.d & 1))\n                        return;\n                    _this.u.splice(-1, 1);\n                    _this.e();\n                },\n                t: function () { }\n            });\n        this.d = 3;\n    };\n    Zip.prototype.e = function () {\n        var bt = 0, l = 0, tl = 0;\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n        }\n        var out = new u8(tl + 22);\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n            var f = _c[_b];\n            wzh(out, bt, f, f.f, f.u, -f.c - 2, l, f.o);\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n        }\n        wzf(out, bt, this.u.length, tl, l);\n        this.ondata(null, out, true);\n        this.d = 2;\n    };\n    /**\n     * A method to terminate any internal workers used by the stream. Subsequent\n     * calls to add() will fail.\n     */\n    Zip.prototype.terminate = function () {\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            f.t();\n        }\n        this.d = 2;\n    };\n    return Zip;\n}());\nexport { Zip };\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                var l = f.c.length;\n                wzh(out, tot, f, f.f, f.u, l);\n                var badd = 30 + f.f.length + exfl(f.extra);\n                var loc = tot + badd;\n                out.set(f.c, loc);\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n            }\n            catch (e) {\n                return cbd(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cbd(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), size = file.length;\n        c.p(file);\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        var compression = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cbd(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = mrg(p, {\n                    size: size,\n                    crc: c.d(),\n                    c: d,\n                    f: f,\n                    m: m,\n                    u: s != fn.length || (m && (com.length != ms)),\n                    compression: compression\n                });\n                o += 30 + s + exl + l;\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (s > 65535)\n            cbl(err(11, 0, 1), null);\n        if (!compression)\n            cbl(null, file);\n        else if (size < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var compression = p.level == 0 ? 0 : 8;\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        if (s > 65535)\n            err(11);\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push(mrg(p, {\n            size: file.length,\n            crc: c.d(),\n            c: d,\n            f: f,\n            m: m,\n            u: s != fn.length || (m && (com.length != ms)),\n            o: o,\n            compression: compression\n        }));\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        out.set(f.c, f.o + badd);\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\n    function UnzipPassThrough() {\n    }\n    UnzipPassThrough.prototype.push = function (data, final) {\n        this.ondata(null, data, final);\n    };\n    UnzipPassThrough.compression = 0;\n    return UnzipPassThrough;\n}());\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\nvar UnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function UnzipInflate() {\n        var _this = this;\n        this.i = new Inflate(function (dat, final) {\n            _this.ondata(null, dat, final);\n        });\n    }\n    UnzipInflate.prototype.push = function (data, final) {\n        try {\n            this.i.push(data, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    UnzipInflate.compression = 8;\n    return UnzipInflate;\n}());\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function AsyncUnzipInflate(_, sz) {\n        var _this = this;\n        if (sz < 320000) {\n            this.i = new Inflate(function (dat, final) {\n                _this.ondata(null, dat, final);\n            });\n        }\n        else {\n            this.i = new AsyncInflate(function (err, dat, final) {\n                _this.ondata(err, dat, final);\n            });\n            this.terminate = this.i.terminate;\n        }\n    }\n    AsyncUnzipInflate.prototype.push = function (data, final) {\n        if (this.i.terminate)\n            data = slc(data, 0);\n        this.i.push(data, final);\n    };\n    AsyncUnzipInflate.compression = 8;\n    return AsyncUnzipInflate;\n}());\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\nvar Unzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a ZIP decompression stream\n     * @param cb The callback to call whenever a file in the ZIP archive is found\n     */\n    function Unzip(cb) {\n        this.onfile = cb;\n        this.k = [];\n        this.o = {\n            0: UnzipPassThrough\n        };\n        this.p = et;\n    }\n    /**\n     * Pushes a chunk to be unzipped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzip.prototype.push = function (chunk, final) {\n        var _this = this;\n        if (!this.onfile)\n            err(5);\n        if (!this.p)\n            err(4);\n        if (this.c > 0) {\n            var len = Math.min(this.c, chunk.length);\n            var toAdd = chunk.subarray(0, len);\n            this.c -= len;\n            if (this.d)\n                this.d.push(toAdd, !this.c);\n            else\n                this.k[0].push(toAdd);\n            chunk = chunk.subarray(len);\n            if (chunk.length)\n                return this.push(chunk, final);\n        }\n        else {\n            var f = 0, i = 0, is = void 0, buf = void 0;\n            if (!this.p.length)\n                buf = chunk;\n            else if (!chunk.length)\n                buf = this.p;\n            else {\n                buf = new u8(this.p.length + chunk.length);\n                buf.set(this.p), buf.set(chunk, this.p.length);\n            }\n            var l = buf.length, oc = this.c, add = oc && this.d;\n            var _loop_2 = function () {\n                var _a;\n                var sig = b4(buf, i);\n                if (sig == 0x4034B50) {\n                    f = 1, is = i;\n                    this_1.d = null;\n                    this_1.c = 0;\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\n                    if (l > i + 30 + fnl + es) {\n                        var chks_3 = [];\n                        this_1.k.unshift(chks_3);\n                        f = 2;\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n                        if (sc_1 == 4294967295) {\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n                        }\n                        else if (dd)\n                            sc_1 = -1;\n                        i += es;\n                        this_1.c = sc_1;\n                        var d_1;\n                        var file_1 = {\n                            name: fn_1,\n                            compression: cmp_1,\n                            start: function () {\n                                if (!file_1.ondata)\n                                    err(5);\n                                if (!sc_1)\n                                    file_1.ondata(null, et, true);\n                                else {\n                                    var ctr = _this.o[cmp_1];\n                                    if (!ctr)\n                                        file_1.ondata(err(14, 'unknown compression type ' + cmp_1, 1), null, false);\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\n                                    for (var _i = 0, chks_4 = chks_3; _i < chks_4.length; _i++) {\n                                        var dat = chks_4[_i];\n                                        d_1.push(dat, false);\n                                    }\n                                    if (_this.k[0] == chks_3 && _this.c)\n                                        _this.d = d_1;\n                                    else\n                                        d_1.push(et, true);\n                                }\n                            },\n                            terminate: function () {\n                                if (d_1 && d_1.terminate)\n                                    d_1.terminate();\n                            }\n                        };\n                        if (sc_1 >= 0)\n                            file_1.size = sc_1, file_1.originalSize = su_1;\n                        this_1.onfile(file_1);\n                    }\n                    return \"break\";\n                }\n                else if (oc) {\n                    if (sig == 0x8074B50) {\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                    else if (sig == 0x2014B50) {\n                        is = i -= 4, f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                }\n            };\n            var this_1 = this;\n            for (; i < l - 4; ++i) {\n                var state_1 = _loop_2();\n                if (state_1 === \"break\")\n                    break;\n            }\n            this.p = et;\n            if (oc < 0) {\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n                if (add)\n                    add.push(dat, !!f);\n                else\n                    this.k[+(f == 2)].push(dat);\n            }\n            if (f & 2)\n                return this.push(buf.subarray(i), final);\n            this.p = buf.subarray(i);\n        }\n        if (final) {\n            if (this.c)\n                err(13);\n            this.p = null;\n        }\n    };\n    /**\n     * Registers a decoder with the stream, allowing for files compressed with\n     * the compression type provided to be expanded correctly\n     * @param decoder The decoder constructor\n     */\n    Unzip.prototype.register = function (decoder) {\n        this.o[decoder.compression] = decoder;\n    };\n    return Unzip;\n}());\nexport { Unzip };\nvar mt = typeof queueMicrotask == 'function' ? queueMicrotask : typeof setTimeout == 'function' ? setTimeout : function (fn) { fn(); };\nexport function unzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        err(7);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var cbd = function (a, b) {\n        mt(function () { cb(a, b); });\n    };\n    mt(function () { cbd = cb; });\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cbd(err(13, 0, 1), null);\n            return tAll;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (lft) {\n        var c = lft;\n        var o = b4(data, e + 16);\n        var z = o == 4294967295 || c == 65535;\n        if (z) {\n            var ze = b4(data, e - 12);\n            z = b4(data, ze) == 0x6064B50;\n            if (z) {\n                c = lft = b4(data, ze + 32);\n                o = b4(data, ze + 48);\n            }\n        }\n        var fltr = opts && opts.filter;\n        var _loop_3 = function (i) {\n            var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n            o = no;\n            var cbl = function (e, d) {\n                if (e) {\n                    tAll();\n                    cbd(e, null);\n                }\n                else {\n                    if (d)\n                        files[fn] = d;\n                    if (!--lft)\n                        cbd(null, files);\n                }\n            };\n            if (!fltr || fltr({\n                name: fn,\n                size: sc,\n                originalSize: su,\n                compression: c_1\n            })) {\n                if (!c_1)\n                    cbl(null, slc(data, b, b + sc));\n                else if (c_1 == 8) {\n                    var infl = data.subarray(b, b + sc);\n                    // Synchronously decompress under 512KB, or barely-compressed data\n                    if (su < 524288 || sc > 0.8 * su) {\n                        try {\n                            cbl(null, inflateSync(infl, { out: new u8(su) }));\n                        }\n                        catch (e) {\n                            cbl(e, null);\n                        }\n                    }\n                    else\n                        term.push(inflate(infl, { size: su }, cbl));\n                }\n                else\n                    cbl(err(14, 'unknown compression type ' + c_1, 1), null);\n            }\n            else\n                cbl(null, null);\n        };\n        for (var i = 0; i < c; ++i) {\n            _loop_3(i);\n        }\n    }\n    else\n        cbd(null, {});\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @param opts The ZIP extraction options\n * @returns The decompressed files\n */\nexport function unzipSync(data, opts) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            err(13);\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295 || c == 65535;\n    if (z) {\n        var ze = b4(data, e - 12);\n        z = b4(data, ze) == 0x6064B50;\n        if (z) {\n            c = b4(data, ze + 32);\n            o = b4(data, ze + 48);\n        }\n    }\n    var fltr = opts && opts.filter;\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!fltr || fltr({\n            name: fn,\n            size: sc,\n            originalSize: su,\n            compression: c_2\n        })) {\n            if (!c_2)\n                files[fn] = slc(data, b, b + sc);\n            else if (c_2 == 8)\n                files[fn] = inflateSync(data.subarray(b, b + sc), { out: new u8(su) });\n            else\n                err(14, 'unknown compression type ' + c_2);\n        }\n    }\n    return files;\n}\n","var z=Object.defineProperty;var b=Math.pow;var l=(i,e)=>z(i,\"name\",{value:e,configurable:!0});var m=(i,e,t)=>new Promise((r,n)=>{var s=u=>{try{a(t.next(u))}catch(c){n(c)}},o=u=>{try{a(t.throw(u))}catch(c){n(c)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((t=t.apply(i,e)).next())});import{decompressSync as W}from\"fflate\";var re=l((i,e)=>{let t=!1,r=\"\",n=L.GridLayer.extend({createTile:l((s,o)=>{let a=document.createElement(\"img\"),u=new AbortController,c=u.signal;return a.cancel=()=>{u.abort()},t||(i.getHeader().then(d=>{d.tileType===1?console.error(\"Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details.\"):d.tileType===2?r=\"image/png\":d.tileType===3?r=\"image/jpeg\":d.tileType===4?r=\"image/webp\":d.tileType===5&&(r=\"image/avif\")}),t=!0),i.getZxy(s.z,s.x,s.y,c).then(d=>{if(d){let h=new Blob([d.data],{type:r}),p=window.URL.createObjectURL(h);a.src=p,a.cancel=void 0,o(void 0,a)}}).catch(d=>{if(d.name!==\"AbortError\")throw d}),a},\"createTile\"),_removeTile:l(function(s){let o=this._tiles[s];o&&(o.el.cancel&&o.el.cancel(),o.el.width=0,o.el.height=0,o.el.deleted=!0,L.DomUtil.remove(o.el),delete this._tiles[s],this.fire(\"tileunload\",{tile:o.el,coords:this._keyToTileCoords(s)}))},\"_removeTile\")});return new n(e)},\"leafletRasterLayer\"),j=l(i=>(e,t)=>{if(t instanceof AbortController)return i(e,t);let r=new AbortController;return i(e,r).then(n=>t(void 0,n.data,n.cacheControl||\"\",n.expires||\"\"),n=>t(n)).catch(n=>t(n)),{cancel:l(()=>r.abort(),\"cancel\")}},\"v3compat\"),T=class T{constructor(e){this.tilev4=l((e,t)=>m(this,null,function*(){if(e.type===\"json\"){let p=e.url.substr(10),y=this.tiles.get(p);if(y||(y=new x(p),this.tiles.set(p,y)),this.metadata)return{data:yield y.getTileJson(e.url)};let f=yield y.getHeader();return(f.minLon>=f.maxLon||f.minLat>=f.maxLat)&&console.error(`Bounds of PMTiles archive ${f.minLon},${f.minLat},${f.maxLon},${f.maxLat} are not valid.`),{data:{tiles:[`${e.url}/{z}/{x}/{y}`],minzoom:f.minZoom,maxzoom:f.maxZoom,bounds:[f.minLon,f.minLat,f.maxLon,f.maxLat]}}}let r=new RegExp(/pmtiles:\\/\\/(.+)\\/(\\d+)\\/(\\d+)\\/(\\d+)/),n=e.url.match(r);if(!n)throw new Error(\"Invalid PMTiles protocol URL\");let s=n[1],o=this.tiles.get(s);o||(o=new x(s),this.tiles.set(s,o));let a=n[2],u=n[3],c=n[4],d=yield o.getHeader(),h=yield o==null?void 0:o.getZxy(+a,+u,+c,t.signal);if(h)return{data:new Uint8Array(h.data),cacheControl:h.cacheControl,expires:h.expires};if(d.tileType===1){if(this.errorOnMissingTile)throw new Error(\"Tile not found.\");return{data:new Uint8Array}}return{data:null}}),\"tilev4\");this.tile=j(this.tilev4);this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1,this.errorOnMissingTile=(e==null?void 0:e.errorOnMissingTile)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};l(T,\"Protocol\");var S=T;function w(i,e){return(e>>>0)*4294967296+(i>>>0)}l(w,\"toNum\");function F(i,e){let t=e.buf,r=t[e.pos++],n=(r&112)>>4;if(r<128||(r=t[e.pos++],n|=(r&127)<<3,r<128)||(r=t[e.pos++],n|=(r&127)<<10,r<128)||(r=t[e.pos++],n|=(r&127)<<17,r<128)||(r=t[e.pos++],n|=(r&127)<<24,r<128)||(r=t[e.pos++],n|=(r&1)<<31,r<128))return w(i,n);throw new Error(\"Expected varint not more than 10 bytes\")}l(F,\"readVarintRemainder\");function v(i){let e=i.buf,t=e[i.pos++],r=t&127;return t<128||(t=e[i.pos++],r|=(t&127)<<7,t<128)||(t=e[i.pos++],r|=(t&127)<<14,t<128)||(t=e[i.pos++],r|=(t&127)<<21,t<128)?r:(t=e[i.pos],r|=(t&15)<<28,F(r,i))}l(v,\"readVarint\");function k(i,e,t,r){if(r===0){t===1&&(e[0]=i-1-e[0],e[1]=i-1-e[1]);let n=e[0];e[0]=e[1],e[1]=n}}l(k,\"rotate\");function N(i,e){let t=b(2,i),r=e,n=e,s=e,o=[0,0],a=1;for(;a<t;)r=1&s/2,n=1&(s^r),k(a,o,r,n),o[0]+=a*r,o[1]+=a*n,s=s/4,a*=2;return[i,o[0],o[1]]}l(N,\"idOnLevel\");var q=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function G(i,e,t){if(i>26)throw new Error(\"Tile zoom level exceeds max safe number limit (26)\");if(e>b(2,i)-1||t>b(2,i)-1)throw new Error(\"tile x/y outside zoom level bounds\");let r=q[i],n=b(2,i),s=0,o=0,a=0,u=[e,t],c=n/2;for(;c>0;)s=(u[0]&c)>0?1:0,o=(u[1]&c)>0?1:0,a+=c*c*(3*s^o),k(c,u,s,o),c=c/2;return r+a}l(G,\"zxyToTileId\");function ie(i){let e=0,t=0;for(let r=0;r<27;r++){let n=(1<<r)*(1<<r);if(e+n>i)return N(r,i-e);e+=n}throw new Error(\"Tile zoom level exceeds max safe number limit (26)\")}l(ie,\"tileIdToZxy\");var J=(s=>(s[s.Unknown=0]=\"Unknown\",s[s.None=1]=\"None\",s[s.Gzip=2]=\"Gzip\",s[s.Brotli=3]=\"Brotli\",s[s.Zstd=4]=\"Zstd\",s))(J||{});function D(i,e){return m(this,null,function*(){if(e===1||e===0)return i;if(e===2){if(typeof globalThis.DecompressionStream==\"undefined\")return W(new Uint8Array(i));let t=new Response(i).body;if(!t)throw new Error(\"Failed to read response stream\");let r=t.pipeThrough(new globalThis.DecompressionStream(\"gzip\"));return new Response(r).arrayBuffer()}throw new Error(\"Compression method not supported\")})}l(D,\"defaultDecompress\");var O=(o=>(o[o.Unknown=0]=\"Unknown\",o[o.Mvt=1]=\"Mvt\",o[o.Png=2]=\"Png\",o[o.Jpeg=3]=\"Jpeg\",o[o.Webp=4]=\"Webp\",o[o.Avif=5]=\"Avif\",o))(O||{});function _(i){return i===1?\".mvt\":i===2?\".png\":i===3?\".jpg\":i===4?\".webp\":i===5?\".avif\":\"\"}l(_,\"tileTypeExt\");var Y=127;function Q(i,e){let t=0,r=i.length-1;for(;t<=r;){let n=r+t>>1,s=e-i[n].tileId;if(s>0)t=n+1;else if(s<0)r=n-1;else return i[n]}return r>=0&&(i[r].runLength===0||e-i[r].tileId<i[r].runLength)?i[r]:null}l(Q,\"findTile\");var A=class A{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return m(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};l(A,\"FileSource\");var V=A,U=class U{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r=\"\";\"navigator\"in globalThis&&(r=globalThis.navigator.userAgent||\"\");let n=r.indexOf(\"Windows\")>-1,s=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,n&&s&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,n){return m(this,null,function*(){let s,o;r?o=r:(s=new AbortController,o=s.signal);let a=new Headers(this.customHeaders);a.set(\"range\",`bytes=${e}-${e+t-1}`);let u;this.mustReload?u=\"reload\":this.chromeWindowsNoCache&&(u=\"no-store\");let c=yield fetch(this.url,{signal:o,cache:u,headers:a});if(e===0&&c.status===416){let y=c.headers.get(\"Content-Range\");if(!y||!y.startsWith(\"bytes */\"))throw new Error(\"Missing content-length on 416 response\");let f=+y.substr(8);c=yield fetch(this.url,{signal:o,cache:\"reload\",headers:{range:`bytes=0-${f-1}`}})}let d=c.headers.get(\"Etag\");if(d!=null&&d.startsWith(\"W/\")&&(d=null),c.status===416||n&&d&&d!==n)throw this.mustReload=!0,new E(`Server returned non-matching ETag ${n} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(c.status>=300)throw new Error(`Bad response code: ${c.status}`);let h=c.headers.get(\"Content-Length\");if(c.status===200&&(!h||+h>t))throw s&&s.abort(),new Error(\"Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.\");return{data:yield c.arrayBuffer(),etag:d||void 0,cacheControl:c.headers.get(\"Cache-Control\")||void 0,expires:c.headers.get(\"Expires\")||void 0}})}};l(U,\"FetchSource\");var C=U;function g(i,e){let t=i.getUint32(e+4,!0),r=i.getUint32(e+0,!0);return t*b(2,32)+r}l(g,\"getUint64\");function X(i,e){let t=new DataView(i),r=t.getUint8(7);if(r>3)throw new Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:g(t,8),rootDirectoryLength:g(t,16),jsonMetadataOffset:g(t,24),jsonMetadataLength:g(t,32),leafDirectoryOffset:g(t,40),leafDirectoryLength:g(t,48),tileDataOffset:g(t,56),tileDataLength:g(t,64),numAddressedTiles:g(t,72),numTileEntries:g(t,80),numTileContents:g(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}l(X,\"bytesToHeader\");function Z(i){let e={buf:new Uint8Array(i),pos:0},t=v(e),r=[],n=0;for(let s=0;s<t;s++){let o=v(e);r.push({tileId:n+o,offset:0,length:0,runLength:1}),n+=o}for(let s=0;s<t;s++)r[s].runLength=v(e);for(let s=0;s<t;s++)r[s].length=v(e);for(let s=0;s<t;s++){let o=v(e);o===0&&s>0?r[s].offset=r[s-1].offset+r[s-1].length:r[s].offset=o-1}return r}l(Z,\"deserializeIndex\");var R=class R extends Error{};l(R,\"EtagMismatch\");var E=R;function K(i,e){return m(this,null,function*(){let t=yield i.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error(\"Wrong magic number for PMTiles archive\");let n=t.data.slice(0,Y),s=X(n,t.etag),o=t.data.slice(s.rootDirectoryOffset,s.rootDirectoryOffset+s.rootDirectoryLength),a=`${i.getKey()}|${s.etag||\"\"}|${s.rootDirectoryOffset}|${s.rootDirectoryLength}`,u=Z(yield e(o,s.internalCompression));return[s,[a,u.length,u]]})}l(K,\"getHeaderAndRoot\");function I(i,e,t,r,n){return m(this,null,function*(){let s=yield i.getBytes(t,r,void 0,n.etag),o=yield e(s.data,n.internalCompression),a=Z(o);if(a.length===0)throw new Error(\"Empty directory is invalid\");return a})}l(I,\"getDirectory\");var H=class H{constructor(e=100,t=!0,r=D){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return m(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,r.data;let n=yield K(e,this.decompress);return n[1]&&this.cache.set(n[1][0],{lastUsed:this.counter++,data:n[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:n[0]}),this.prune(),n[0]})}getDirectory(e,t,r,n){return m(this,null,function*(){let s=`${e.getKey()}|${n.etag||\"\"}|${t}|${r}`,o=this.cache.get(s);if(o)return o.lastUsed=this.counter++,o.data;let a=yield I(e,this.decompress,t,r,n);return this.cache.set(s,{lastUsed:this.counter++,data:a}),this.prune(),a})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,n)=>{r.lastUsed<e&&(e=r.lastUsed,t=n)}),t&&this.cache.delete(t)}}invalidate(e){return m(this,null,function*(){this.cache.delete(e.getKey())})}};l(H,\"ResolvedValueCache\");var $=H,M=class M{constructor(e=100,t=!0,r=D){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return m(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;let n=new Promise((s,o)=>{K(e,this.decompress).then(a=>{a[1]&&this.cache.set(a[1][0],{lastUsed:this.counter++,data:Promise.resolve(a[1][2])}),s(a[0]),this.prune()}).catch(a=>{o(a)})});return this.cache.set(t,{lastUsed:this.counter++,data:n}),n})}getDirectory(e,t,r,n){return m(this,null,function*(){let s=`${e.getKey()}|${n.etag||\"\"}|${t}|${r}`,o=this.cache.get(s);if(o)return o.lastUsed=this.counter++,yield o.data;let a=new Promise((u,c)=>{I(e,this.decompress,t,r,n).then(d=>{u(d),this.prune()}).catch(d=>{c(d)})});return this.cache.set(s,{lastUsed:this.counter++,data:a}),a})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,n)=>{r.lastUsed<e&&(e=r.lastUsed,t=n)}),t&&this.cache.delete(t)}}invalidate(e){return m(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let r=new Promise((n,s)=>{this.getHeader(e).then(o=>{n(),this.invalidations.delete(t)}).catch(o=>{s(o)})});this.invalidations.set(t,r)})}};l(M,\"SharedPromiseCache\");var P=M,B=class B{constructor(e,t,r){typeof e==\"string\"?this.source=new C(e):this.source=e,r?this.decompress=r:this.decompress=D,t?this.cache=t:this.cache=new P}getHeader(){return m(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,n){return m(this,null,function*(){let s=G(e,t,r),o=yield this.cache.getHeader(this.source);if(e<o.minZoom||e>o.maxZoom)return;let a=o.rootDirectoryOffset,u=o.rootDirectoryLength;for(let c=0;c<=3;c++){let d=yield this.cache.getDirectory(this.source,a,u,o),h=Q(d,s);if(h){if(h.runLength>0){let p=yield this.source.getBytes(o.tileDataOffset+h.offset,h.length,n,o.etag);return{data:yield this.decompress(p.data,o.tileCompression),cacheControl:p.cacheControl,expires:p.expires}}a=o.leafDirectoryOffset+h.offset,u=h.length}else return}throw new Error(\"Maximum directory depth exceeded\")})}getZxy(e,t,r,n){return m(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,n)}catch(s){if(s instanceof E)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,n);throw s}})}getMetadataAttempt(){return m(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),n=new TextDecoder(\"utf-8\");return JSON.parse(n.decode(r))})}getMetadata(){return m(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof E)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return m(this,null,function*(){let t=yield this.getHeader(),r=yield this.getMetadata(),n=_(t.tileType);return{tilejson:\"3.0.0\",scheme:\"xyz\",tiles:[`${e}/{z}/{x}/{y}${n}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};l(B,\"PMTiles\");var x=B;export{J as Compression,E as EtagMismatch,C as FetchSource,V as FileSource,x as PMTiles,S as Protocol,$ as ResolvedValueCache,P as SharedPromiseCache,O as TileType,X as bytesToHeader,Q as findTile,g as getUint64,re as leafletRasterLayer,v as readVarint,ie as tileIdToZxy,_ as tileTypeExt,G as zxyToTileId};\n//# sourceMappingURL=index.js.map","/**\n * @module ol/events/ErrorEvent\n */\nimport BaseEvent from 'ol/events/Event.js';\nimport EventType from 'ol/events/EventType.js';\n/**\n * @classdesc\n * Event emitted on configuration or loading error.\n * @api\n */\nclass ErrorEvent extends BaseEvent {\n    /**\n     * @param {Error} error error object.\n     * @api\n     */\n    constructor(error) {\n        super(EventType.ERROR);\n        /**\n         * @type {Error}\n         * @api\n         */\n        this.error = error;\n    }\n}\nexport default ErrorEvent;\n//# sourceMappingURL=ErrorEvent.js.map","/**\n * @module ol/source/type\n */\n/**\n * @typedef {import(\"ol/source/GeoTIFF.js\").Options} GeoTIFFOptions\n * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_source_GeoTIFF-GeoTIFFSource.html}\n */\n/**\n * @typedef {import(\"ol/source/ImageStatic.js\").Options} ImageStaticOptions\n * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_source_ImageStatic-Static.html}\n */\n/**\n * @typedef {import(\"ol/source/TileJSON.js\").Options} TileJSONOptions\n * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_source_TileJSON-TileJSON.html}\n */\n/**\n * @typedef {import(\"ol/source/TileWMS.js\").Options} TileWMSOptions\n * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_source_TileWMS-TileWMS.html}\n */\n/**\n * @typedef {import(\"ol/source/WMTS.js\").Options} WMTSOptions\n * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_source_WMTS-WMTS.html}\n */\n/**\n * @typedef {import(\"ol/source/XYZ.js\").Options} XYZOptions\n * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_source_XYZ-XYZ.html}\n */\n/**\n * @typedef {GeoTIFFOptions|ImageStaticOptions|TileJSONOptions|TileWMSOptions|WMTSOptions|XYZOptions|Object<string, *>} SourceOptions\n */\n/**\n * @classdesc\n * The source type for `getSourceOptions`.\n * @api\n */\nclass SourceType {\n    /**\n     * Creates a new SourceType.\n     * @param {string} name The internal string identifier.\n     * @protected\n     * @api\n     */\n    constructor(name) {\n        this.name = name;\n    }\n    /**\n     * Converts to a string.\n     * @return {string} The internal string identifier.\n     * @api\n     */\n    toString() {\n        return this.name;\n    }\n}\n/**\n * GeoTiff\n * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_source_GeoTIFF.html}\n * @api\n */\nSourceType.GeoTIFF = new SourceType('GeoTIFF');\n/**\n * Static Image (`ImageStatic`)\n * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_source_ImageStatic.html}\n * @api\n */\nSourceType.ImageStatic = new SourceType('ImageStatic');\n/**\n * PMTilesRaster\n * @see {@link https://protomaps.com/docs/pmtiles/}\n * @api\n */\nSourceType.PMTilesRaster = new SourceType('PMTilesRaster');\n/**\n * GeoTiff\n * @see {@link https://protomaps.com/docs/pmtiles/}\n * @api\n */\nSourceType.PMTilesVector = new SourceType('PMTilesVector');\n/**\n * TileJSON\n * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_source_TileJSON.html}\n * @api\n */\nSourceType.TileJSON = new SourceType('TileJSON');\n/**\n * WMS (`TileWMS`)\n * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_source_TileWMS.html}\n * @api\n */\nSourceType.TileWMS = new SourceType('TileWMS');\n/**\n * WMTS\n * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_source_WMTS.html}\n * @api\n */\nSourceType.WMTS = new SourceType('WMTS');\n/**\n * XYZ\n * @see {@link https://openlayers.org/en/latest/apidoc/module-ol_source_XYZ.html}\n * @api\n */\nSourceType.XYZ = new SourceType('XYZ');\nexport default SourceType;\n//# sourceMappingURL=type.js.map","/**\n * @module ol/xml\n */\nimport {extend} from './array.js';\n\n/**\n * When using {@link module:ol/xml.makeChildAppender} or\n * {@link module:ol/xml.makeSimpleNodeFactory}, the top `objectStack` item needs\n * to have this structure.\n * @typedef {Object} NodeStackItem\n * @property {Element} node Node.\n */\n\n/**\n * @typedef {function(Element, Array<*>): void} Parser\n */\n\n/**\n * @typedef {function(Element, *, Array<*>): void} Serializer\n */\n\n/**\n * @type {string}\n */\nexport const XML_SCHEMA_INSTANCE_URI =\n  'http://www.w3.org/2001/XMLSchema-instance';\n\n/**\n * @param {string} namespaceURI Namespace URI.\n * @param {string} qualifiedName Qualified name.\n * @return {Element} Node.\n */\nexport function createElementNS(namespaceURI, qualifiedName) {\n  return getDocument().createElementNS(namespaceURI, qualifiedName);\n}\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @return {string} All text content.\n * @api\n */\nexport function getAllTextContent(node, normalizeWhitespace) {\n  return getAllTextContent_(node, normalizeWhitespace, []).join('');\n}\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @param {Array<string>} accumulator Accumulator.\n * @private\n * @return {Array<string>} Accumulator.\n */\nexport function getAllTextContent_(node, normalizeWhitespace, accumulator) {\n  if (\n    node.nodeType == Node.CDATA_SECTION_NODE ||\n    node.nodeType == Node.TEXT_NODE\n  ) {\n    if (normalizeWhitespace) {\n      accumulator.push(String(node.nodeValue).replace(/(\\r\\n|\\r|\\n)/g, ''));\n    } else {\n      accumulator.push(node.nodeValue);\n    }\n  } else {\n    let n;\n    for (n = node.firstChild; n; n = n.nextSibling) {\n      getAllTextContent_(n, normalizeWhitespace, accumulator);\n    }\n  }\n  return accumulator;\n}\n\n/**\n * @param {Object} object Object.\n * @return {boolean} Is a document.\n */\nexport function isDocument(object) {\n  return 'documentElement' in object;\n}\n\n/**\n * @param {Element} node Node.\n * @param {?string} namespaceURI Namespace URI.\n * @param {string} name Attribute name.\n * @return {string} Value\n */\nexport function getAttributeNS(node, namespaceURI, name) {\n  return node.getAttributeNS(namespaceURI, name) || '';\n}\n\n/**\n * Parse an XML string to an XML Document.\n * @param {string} xml XML.\n * @return {Document} Document.\n * @api\n */\nexport function parse(xml) {\n  return new DOMParser().parseFromString(xml, 'application/xml');\n}\n\n/**\n * Make an array extender function for extending the array at the top of the\n * object stack.\n * @param {function(this: T, Node, Array<*>): (Array<*>|undefined)} valueReader Value reader.\n * @param {T} [thisArg] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeArrayExtender(valueReader, thisArg) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     * @this {*}\n     */\n    function (node, objectStack) {\n      const value = valueReader.call(thisArg ?? this, node, objectStack);\n      if (value !== undefined) {\n        const array = /** @type {Array<*>} */ (\n          objectStack[objectStack.length - 1]\n        );\n        extend(array, value);\n      }\n    }\n  );\n}\n\n/**\n * Make an array pusher function for pushing to the array at the top of the\n * object stack.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {T} [thisArg] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeArrayPusher(valueReader, thisArg) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     * @this {*}\n     */\n    function (node, objectStack) {\n      const value = valueReader.call(thisArg ?? this, node, objectStack);\n      if (value !== undefined) {\n        const array = /** @type {Array<*>} */ (\n          objectStack[objectStack.length - 1]\n        );\n        array.push(value);\n      }\n    }\n  );\n}\n\n/**\n * Make an object stack replacer function for replacing the object at the\n * top of the stack.\n * @param {function(this: T, Node, Array<*>): *} valueReader Value reader.\n * @param {T} [thisArg] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeReplacer(valueReader, thisArg) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     * @this {*}\n     */\n    function (node, objectStack) {\n      const value = valueReader.call(thisArg ?? this, node, objectStack);\n      if (value !== undefined) {\n        objectStack[objectStack.length - 1] = value;\n      }\n    }\n  );\n}\n\n/**\n * Make an object property pusher function for adding a property to the\n * object at the top of the stack.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {string} [property] Property.\n * @param {T} [thisArg] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertyPusher(valueReader, property, thisArg) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     * @this {*}\n     */\n    function (node, objectStack) {\n      const value = valueReader.call(thisArg ?? this, node, objectStack);\n      if (value !== undefined) {\n        const object = /** @type {!Object} */ (\n          objectStack[objectStack.length - 1]\n        );\n        const name = property !== undefined ? property : node.localName;\n        let array;\n        if (name in object) {\n          array = object[name];\n        } else {\n          array = [];\n          object[name] = array;\n        }\n        array.push(value);\n      }\n    }\n  );\n}\n\n/**\n * Make an object property setter function.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {string} [property] Property.\n * @param {T} [thisArg] The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertySetter(valueReader, property, thisArg) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     * @this {*}\n     */\n    function (node, objectStack) {\n      const value = valueReader.call(thisArg ?? this, node, objectStack);\n      if (value !== undefined) {\n        const object = /** @type {!Object} */ (\n          objectStack[objectStack.length - 1]\n        );\n        const name = property !== undefined ? property : node.localName;\n        object[name] = value;\n      }\n    }\n  );\n}\n\n/**\n * Create a serializer that appends nodes written by its `nodeWriter` to its\n * designated parent. The parent is the `node` of the\n * {@link module:ol/xml~NodeStackItem} at the top of the `objectStack`.\n * @param {function(this: T, Node, V, Array<*>): void} nodeWriter Node writer.\n * @param {T} [thisArg] The object to use as `this` in `nodeWriter`.\n * @return {Serializer} Serializer.\n * @template T, V\n */\nexport function makeChildAppender(nodeWriter, thisArg) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {*} value Value to be written.\n     * @param {Array<*>} objectStack Object stack.\n     * @this {*}\n     */\n    function (node, value, objectStack) {\n      nodeWriter.call(thisArg ?? this, node, value, objectStack);\n      const parent = /** @type {NodeStackItem} */ (\n        objectStack[objectStack.length - 1]\n      );\n      const parentNode = parent.node;\n      parentNode.appendChild(node);\n    }\n  );\n}\n\n/**\n * Create a serializer that calls the provided `nodeWriter` from\n * {@link module:ol/xml.serialize}. This can be used by the parent writer to have the\n * `nodeWriter` called with an array of values when the `nodeWriter` was\n * designed to serialize a single item. An example would be a LineString\n * geometry writer, which could be reused for writing MultiLineString\n * geometries.\n * @param {function(this: T, Element, V, Array<*>): void} nodeWriter Node writer.\n * @param {T} [thisArg] The object to use as `this` in `nodeWriter`.\n * @return {Serializer} Serializer.\n * @template T, V\n */\nexport function makeArraySerializer(nodeWriter, thisArg) {\n  let serializersNS, nodeFactory;\n  return function (node, value, objectStack) {\n    if (serializersNS === undefined) {\n      serializersNS = {};\n      const serializers = {};\n      serializers[node.localName] = nodeWriter;\n      serializersNS[node.namespaceURI] = serializers;\n      nodeFactory = makeSimpleNodeFactory(node.localName);\n    }\n    serialize(serializersNS, nodeFactory, value, objectStack);\n  };\n}\n\n/**\n * Create a node factory which can use the `keys` passed to\n * {@link module:ol/xml.serialize} or {@link module:ol/xml.pushSerializeAndPop} as node names,\n * or a fixed node name. The namespace of the created nodes can either be fixed,\n * or the parent namespace will be used.\n * @param {string} [fixedNodeName] Fixed node name which will be used for all\n *     created nodes. If not provided, the 3rd argument to the resulting node\n *     factory needs to be provided and will be the nodeName.\n * @param {string} [fixedNamespaceURI] Fixed namespace URI which will be used for\n *     all created nodes. If not provided, the namespace of the parent node will\n *     be used.\n * @return {function(*, Array<*>, string=): (Node|undefined)} Node factory.\n */\nexport function makeSimpleNodeFactory(fixedNodeName, fixedNamespaceURI) {\n  return (\n    /**\n     * @param {*} value Value.\n     * @param {Array<*>} objectStack Object stack.\n     * @param {string} [newNodeName] Node name.\n     * @return {Node} Node.\n     */\n    function (value, objectStack, newNodeName) {\n      const context = /** @type {NodeStackItem} */ (\n        objectStack[objectStack.length - 1]\n      );\n      const node = context.node;\n      let nodeName = fixedNodeName;\n      if (nodeName === undefined) {\n        nodeName = newNodeName;\n      }\n\n      const namespaceURI =\n        fixedNamespaceURI !== undefined ? fixedNamespaceURI : node.namespaceURI;\n      return createElementNS(namespaceURI, /** @type {string} */ (nodeName));\n    }\n  );\n}\n\n/**\n * A node factory that creates a node using the parent's `namespaceURI` and the\n * `nodeName` passed by {@link module:ol/xml.serialize} or\n * {@link module:ol/xml.pushSerializeAndPop} to the node factory.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nexport const OBJECT_PROPERTY_NODE_FACTORY = makeSimpleNodeFactory();\n\n/**\n * Create an array of `values` to be used with {@link module:ol/xml.serialize} or\n * {@link module:ol/xml.pushSerializeAndPop}, where `orderedKeys` has to be provided as\n * `key` argument.\n * @param {Object<string, *>} object Key-value pairs for the sequence. Keys can\n *     be a subset of the `orderedKeys`.\n * @param {Array<string>} orderedKeys Keys in the order of the sequence.\n * @return {Array<*>} Values in the order of the sequence. The resulting array\n *     has the same length as the `orderedKeys` array. Values that are not\n *     present in `object` will be `undefined` in the resulting array.\n */\nexport function makeSequence(object, orderedKeys) {\n  const length = orderedKeys.length;\n  const sequence = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    sequence[i] = object[orderedKeys[i]];\n  }\n  return sequence;\n}\n\n/**\n * Create a namespaced structure, using the same values for each namespace.\n * This can be used as a starting point for versioned parsers, when only a few\n * values are version specific.\n * @param {Array<string>} namespaceURIs Namespace URIs.\n * @param {T} structure Structure.\n * @param {Object<string, T>} [structureNS] Namespaced structure to add to.\n * @return {Object<string, T>} Namespaced structure.\n * @template T\n */\nexport function makeStructureNS(namespaceURIs, structure, structureNS) {\n  structureNS = structureNS !== undefined ? structureNS : {};\n  let i, ii;\n  for (i = 0, ii = namespaceURIs.length; i < ii; ++i) {\n    structureNS[namespaceURIs[i]] = structure;\n  }\n  return structureNS;\n}\n\n/**\n * Parse a node using the parsers and object stack.\n * @param {Object<string, Object<string, Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*} [thisArg] The object to use as `this`.\n */\nexport function parseNode(parsersNS, node, objectStack, thisArg) {\n  let n;\n  for (n = node.firstElementChild; n; n = n.nextElementSibling) {\n    const parsers = parsersNS[n.namespaceURI];\n    if (parsers !== undefined) {\n      const parser = parsers[n.localName];\n      if (parser !== undefined) {\n        parser.call(thisArg, n, objectStack);\n      }\n    }\n  }\n}\n\n/**\n * Push an object on top of the stack, parse and return the popped object.\n * @param {T} object Object.\n * @param {Object<string, Object<string, Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*} [thisArg] The object to use as `this`.\n * @return {T} Object.\n * @template T\n */\nexport function pushParseAndPop(object, parsersNS, node, objectStack, thisArg) {\n  objectStack.push(object);\n  parseNode(parsersNS, node, objectStack, thisArg);\n  return /** @type {T} */ (objectStack.pop());\n}\n\n/**\n * Walk through an array of `values` and call a serializer for each value.\n * @param {Object<string, Object<string, Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>} [keys] Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `keys` has\n *     to match the length of `values`. For serializing a sequence, `keys`\n *     determines the order of the sequence.\n * @param {T} [thisArg] The object to use as `this` for the node factory and\n *     serializers.\n * @template T\n */\nexport function serialize(\n  serializersNS,\n  nodeFactory,\n  values,\n  objectStack,\n  keys,\n  thisArg,\n) {\n  const length = (keys !== undefined ? keys : values).length;\n  let value, node;\n  for (let i = 0; i < length; ++i) {\n    value = values[i];\n    if (value !== undefined) {\n      node = nodeFactory.call(\n        thisArg,\n        value,\n        objectStack,\n        keys !== undefined ? keys[i] : undefined,\n      );\n      if (node !== undefined) {\n        serializersNS[node.namespaceURI][node.localName].call(\n          thisArg,\n          node,\n          value,\n          objectStack,\n        );\n      }\n    }\n  }\n}\n\n/**\n * @param {O} object Object.\n * @param {Object<string, Object<string, Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>} [keys] Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `keys` has\n *     to match the length of `values`. For serializing a sequence, `keys`\n *     determines the order of the sequence.\n * @param {T} [thisArg] The object to use as `this` for the node factory and\n *     serializers.\n * @return {O|undefined} Object.\n * @template O, T\n */\nexport function pushSerializeAndPop(\n  object,\n  serializersNS,\n  nodeFactory,\n  values,\n  objectStack,\n  keys,\n  thisArg,\n) {\n  objectStack.push(object);\n  serialize(serializersNS, nodeFactory, values, objectStack, keys, thisArg);\n  return /** @type {O|undefined} */ (objectStack.pop());\n}\n\nlet xmlSerializer_ = undefined;\n\n/**\n * Register a XMLSerializer. Can be used  to inject a XMLSerializer\n * where there is no globally available implementation.\n *\n * @param {XMLSerializer} xmlSerializer A XMLSerializer.\n * @api\n */\nexport function registerXMLSerializer(xmlSerializer) {\n  xmlSerializer_ = xmlSerializer;\n}\n\n/**\n * @return {XMLSerializer} The XMLSerializer.\n */\nexport function getXMLSerializer() {\n  if (xmlSerializer_ === undefined && typeof XMLSerializer !== 'undefined') {\n    xmlSerializer_ = new XMLSerializer();\n  }\n  return xmlSerializer_;\n}\n\nlet document_ = undefined;\n\n/**\n * Register a Document to use when creating nodes for XML serializations. Can be used\n * to inject a Document where there is no globally available implementation.\n *\n * @param {Document} document A Document.\n * @api\n */\nexport function registerDocument(document) {\n  document_ = document;\n}\n\n/**\n * Get a document that should be used when creating nodes for XML serializations.\n * @return {Document} The document.\n */\nexport function getDocument() {\n  if (document_ === undefined && typeof document !== 'undefined') {\n    document_ = document.implementation.createDocument('', '', null);\n  }\n  return document_;\n}\n","/**\n * @module ol/format/XML\n */\nimport {abstract} from '../util.js';\nimport {isDocument, parse} from '../xml.js';\n\n/**\n * @classdesc\n * Generic format for reading non-feature XML data\n *\n * @abstract\n */\nclass XML {\n  /**\n   * Read the source document.\n   *\n   * @param {Document|Element|string} source The XML source.\n   * @return {Object|null} An object representing the source.\n   * @api\n   */\n  read(source) {\n    if (!source) {\n      return null;\n    }\n    if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readFromDocument(doc);\n    }\n    if (isDocument(source)) {\n      return this.readFromDocument(/** @type {Document} */ (source));\n    }\n    return this.readFromNode(/** @type {Element} */ (source));\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {Object|null} Object\n   */\n  readFromDocument(doc) {\n    for (let n = doc.firstChild; n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        return this.readFromNode(/** @type {Element} */ (n));\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @abstract\n   * @param {Element} node Node.\n   * @return {Object|null} Object\n   */\n  readFromNode(node) {\n    abstract();\n  }\n}\n\nexport default XML;\n","/**\n * @module ol/format/xlink\n */\n\n/**\n * @const\n * @type {string}\n */\nconst NAMESPACE_URI = 'http://www.w3.org/1999/xlink';\n\n/**\n * @param {Element} node Node.\n * @return {string|null} href.\n */\nexport function readHref(node) {\n  return node.getAttributeNS(NAMESPACE_URI, 'href');\n}\n","/**\n * @module ol/format/xsd\n */\nimport {padNumber} from '../string.js';\nimport {getAllTextContent, getDocument} from '../xml.js';\n\n/**\n * @param {Node} node Node.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBoolean(node) {\n  const s = getAllTextContent(node, false);\n  return readBooleanString(s);\n}\n\n/**\n * @param {string} string String.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBooleanString(string) {\n  const m = /^\\s*(true|1)|(false|0)\\s*$/.exec(string);\n  if (m) {\n    return m[1] !== undefined || false;\n  }\n  return undefined;\n}\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} DateTime in seconds.\n */\nexport function readDateTime(node) {\n  const s = getAllTextContent(node, false);\n  const dateTime = Date.parse(s);\n  return isNaN(dateTime) ? undefined : dateTime / 1000;\n}\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimal(node) {\n  const s = getAllTextContent(node, false);\n  return readDecimalString(s);\n}\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimalString(string) {\n  // FIXME check spec\n  const m = /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*$/i.exec(string);\n  if (m) {\n    return parseFloat(m[1]);\n  }\n  return undefined;\n}\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Non negative integer.\n */\nexport function readPositiveInteger(node) {\n  const s = getAllTextContent(node, false);\n  return readNonNegativeIntegerString(s);\n}\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeIntegerString(string) {\n  const m = /^\\s*(\\d+)\\s*$/.exec(string);\n  if (m) {\n    return parseInt(m[1], 10);\n  }\n  return undefined;\n}\n\n/**\n * @param {Node} node Node.\n * @return {string|undefined} String.\n */\nexport function readString(node) {\n  return getAllTextContent(node, false).trim();\n}\n\n/**\n * @param {Node} node Node to append a TextNode with the boolean to.\n * @param {boolean} bool Boolean.\n */\nexport function writeBooleanTextNode(node, bool) {\n  writeStringTextNode(node, bool ? '1' : '0');\n}\n\n/**\n * @param {Node} node Node to append a CDATA Section with the string to.\n * @param {string} string String.\n */\nexport function writeCDATASection(node, string) {\n  node.appendChild(getDocument().createCDATASection(string));\n}\n\n/**\n * @param {Node} node Node to append a TextNode with the dateTime to.\n * @param {number} dateTime DateTime in seconds.\n */\nexport function writeDateTimeTextNode(node, dateTime) {\n  const date = new Date(dateTime * 1000);\n  const string =\n    date.getUTCFullYear() +\n    '-' +\n    padNumber(date.getUTCMonth() + 1, 2) +\n    '-' +\n    padNumber(date.getUTCDate(), 2) +\n    'T' +\n    padNumber(date.getUTCHours(), 2) +\n    ':' +\n    padNumber(date.getUTCMinutes(), 2) +\n    ':' +\n    padNumber(date.getUTCSeconds(), 2) +\n    'Z';\n  node.appendChild(getDocument().createTextNode(string));\n}\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} decimal Decimal.\n */\nexport function writeDecimalTextNode(node, decimal) {\n  const string = decimal.toPrecision();\n  node.appendChild(getDocument().createTextNode(string));\n}\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} nonNegativeInteger Non negative integer.\n */\nexport function writeNonNegativeIntegerTextNode(node, nonNegativeInteger) {\n  const string = nonNegativeInteger.toString();\n  node.appendChild(getDocument().createTextNode(string));\n}\n\nconst whiteSpaceStart = /^\\s/;\nconst whiteSpaceEnd = /\\s$/;\nconst cdataCharacters = /(\\n|\\t|\\r|<|&| {2})/;\n\n/**\n * @param {Node} node Node to append a TextNode with the string to.\n * @param {string} string String.\n */\nexport function writeStringTextNode(node, string) {\n  if (\n    typeof string === 'string' &&\n    (whiteSpaceStart.test(string) ||\n      whiteSpaceEnd.test(string) ||\n      cdataCharacters.test(string))\n  ) {\n    string.split(']]>').forEach((part, i, a) => {\n      if (i < a.length - 1) {\n        part += ']]';\n      }\n      if (i > 0) {\n        part = '>' + part;\n      }\n      writeCDATASection(node, part);\n    });\n  } else {\n    node.appendChild(getDocument().createTextNode(string));\n  }\n}\n","/**\n * @module ol/format/OWS\n */\nimport {\n  makeObjectPropertyPusher,\n  makeObjectPropertySetter,\n  makeStructureNS,\n  pushParseAndPop,\n} from '../xml.js';\nimport XML from './XML.js';\nimport {readHref} from './xlink.js';\nimport {readString} from './xsd.js';\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [null, 'http://www.opengis.net/ows/1.1'];\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'ServiceIdentification': makeObjectPropertySetter(readServiceIdentification),\n  'ServiceProvider': makeObjectPropertySetter(readServiceProvider),\n  'OperationsMetadata': makeObjectPropertySetter(readOperationsMetadata),\n});\n\nclass OWS extends XML {\n  constructor() {\n    super();\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {Object|null} Object\n   * @override\n   */\n  readFromNode(node) {\n    const owsObject = pushParseAndPop({}, PARSERS, node, []);\n    return owsObject ? owsObject : null;\n  }\n}\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst ADDRESS_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'DeliveryPoint': makeObjectPropertySetter(readString),\n  'City': makeObjectPropertySetter(readString),\n  'AdministrativeArea': makeObjectPropertySetter(readString),\n  'PostalCode': makeObjectPropertySetter(readString),\n  'Country': makeObjectPropertySetter(readString),\n  'ElectronicMailAddress': makeObjectPropertySetter(readString),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst ALLOWED_VALUES_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Value': makeObjectPropertyPusher(readValue),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst CONSTRAINT_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'AllowedValues': makeObjectPropertySetter(readAllowedValues),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst CONTACT_INFO_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Phone': makeObjectPropertySetter(readPhone),\n  'Address': makeObjectPropertySetter(readAddress),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst DCP_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'HTTP': makeObjectPropertySetter(readHttp),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst HTTP_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Get': makeObjectPropertyPusher(readGet),\n  'Post': undefined, // TODO\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst OPERATION_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'DCP': makeObjectPropertySetter(readDcp),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst OPERATIONS_METADATA_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Operation': readOperation,\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst PHONE_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Voice': makeObjectPropertySetter(readString),\n  'Facsimile': makeObjectPropertySetter(readString),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst REQUEST_METHOD_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Constraint': makeObjectPropertyPusher(readConstraint),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst SERVICE_CONTACT_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'IndividualName': makeObjectPropertySetter(readString),\n  'PositionName': makeObjectPropertySetter(readString),\n  'ContactInfo': makeObjectPropertySetter(readContactInfo),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst SERVICE_IDENTIFICATION_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Abstract': makeObjectPropertySetter(readString),\n  'AccessConstraints': makeObjectPropertySetter(readString),\n  'Fees': makeObjectPropertySetter(readString),\n  'Title': makeObjectPropertySetter(readString),\n  'ServiceTypeVersion': makeObjectPropertySetter(readString),\n  'ServiceType': makeObjectPropertySetter(readString),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst SERVICE_PROVIDER_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'ProviderName': makeObjectPropertySetter(readString),\n  'ProviderSite': makeObjectPropertySetter(readHref),\n  'ServiceContact': makeObjectPropertySetter(readServiceContact),\n});\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The address.\n */\nfunction readAddress(node, objectStack) {\n  return pushParseAndPop({}, ADDRESS_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The values.\n */\nfunction readAllowedValues(node, objectStack) {\n  return pushParseAndPop({}, ALLOWED_VALUES_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The constraint.\n */\nfunction readConstraint(node, objectStack) {\n  const name = node.getAttribute('name');\n  if (!name) {\n    return undefined;\n  }\n  return pushParseAndPop({'name': name}, CONSTRAINT_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The contact info.\n */\nfunction readContactInfo(node, objectStack) {\n  return pushParseAndPop({}, CONTACT_INFO_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The DCP.\n */\nfunction readDcp(node, objectStack) {\n  return pushParseAndPop({}, DCP_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The GET object.\n */\nfunction readGet(node, objectStack) {\n  const href = readHref(node);\n  if (!href) {\n    return undefined;\n  }\n  return pushParseAndPop(\n    {'href': href},\n    REQUEST_METHOD_PARSERS,\n    node,\n    objectStack,\n  );\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The HTTP object.\n */\nfunction readHttp(node, objectStack) {\n  return pushParseAndPop({}, HTTP_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The operation.\n */\nfunction readOperation(node, objectStack) {\n  const name = node.getAttribute('name');\n  const value = pushParseAndPop({}, OPERATION_PARSERS, node, objectStack);\n  if (!value) {\n    return undefined;\n  }\n  const object = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  object[name] = value;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The operations metadata.\n */\nfunction readOperationsMetadata(node, objectStack) {\n  return pushParseAndPop({}, OPERATIONS_METADATA_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The phone.\n */\nfunction readPhone(node, objectStack) {\n  return pushParseAndPop({}, PHONE_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The service identification.\n */\nfunction readServiceIdentification(node, objectStack) {\n  return pushParseAndPop({}, SERVICE_IDENTIFICATION_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The service contact.\n */\nfunction readServiceContact(node, objectStack) {\n  return pushParseAndPop({}, SERVICE_CONTACT_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} The service provider.\n */\nfunction readServiceProvider(node, objectStack) {\n  return pushParseAndPop({}, SERVICE_PROVIDER_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {string|undefined} The value.\n */\nfunction readValue(node, objectStack) {\n  return readString(node);\n}\n\nexport default OWS;\n","/**\n * @module ol/format/WMTSCapabilities\n */\nimport {boundingExtent} from '../extent.js';\nimport {\n  makeArrayPusher,\n  makeObjectPropertyPusher,\n  makeObjectPropertySetter,\n  makeStructureNS,\n  pushParseAndPop,\n} from '../xml.js';\nimport OWS from './OWS.js';\nimport XML from './XML.js';\nimport {readHref} from './xlink.js';\nimport {readDecimal, readPositiveInteger, readString} from './xsd.js';\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [null, 'http://www.opengis.net/wmts/1.0'];\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst OWS_NAMESPACE_URIS = [null, 'http://www.opengis.net/ows/1.1'];\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Contents': makeObjectPropertySetter(readContents),\n});\n\n/**\n * @classdesc\n * Format for reading WMTS capabilities data.\n *\n * @api\n */\nclass WMTSCapabilities extends XML {\n  constructor() {\n    super();\n\n    /**\n     * @type {OWS}\n     * @private\n     */\n    this.owsParser_ = new OWS();\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {Object|null} Object\n   * @override\n   */\n  readFromNode(node) {\n    let version = node.getAttribute('version');\n    if (version) {\n      version = version.trim();\n    }\n    let WMTSCapabilityObject = this.owsParser_.readFromNode(node);\n    if (!WMTSCapabilityObject) {\n      return null;\n    }\n    WMTSCapabilityObject['version'] = version;\n    WMTSCapabilityObject = pushParseAndPop(\n      WMTSCapabilityObject,\n      PARSERS,\n      node,\n      [],\n    );\n    return WMTSCapabilityObject ? WMTSCapabilityObject : null;\n  }\n}\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst CONTENTS_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'Layer': makeObjectPropertyPusher(readLayer),\n  'TileMatrixSet': makeObjectPropertyPusher(readTileMatrixSet),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst LAYER_PARSERS = makeStructureNS(\n  NAMESPACE_URIS,\n  {\n    'Style': makeObjectPropertyPusher(readStyle),\n    'Format': makeObjectPropertyPusher(readString),\n    'TileMatrixSetLink': makeObjectPropertyPusher(readTileMatrixSetLink),\n    'Dimension': makeObjectPropertyPusher(readDimensions),\n    'ResourceURL': makeObjectPropertyPusher(readResourceUrl),\n  },\n  makeStructureNS(OWS_NAMESPACE_URIS, {\n    'Title': makeObjectPropertySetter(readString),\n    'Abstract': makeObjectPropertySetter(readString),\n    'WGS84BoundingBox': makeObjectPropertySetter(readBoundingBox),\n    'BoundingBox': makeObjectPropertyPusher(readBoundingBoxWithCrs),\n    'Identifier': makeObjectPropertySetter(readString),\n  }),\n);\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS,\n  {\n    'LegendURL': makeObjectPropertyPusher(readLegendUrl),\n  },\n  makeStructureNS(OWS_NAMESPACE_URIS, {\n    'Title': makeObjectPropertySetter(readString),\n    'Identifier': makeObjectPropertySetter(readString),\n  }),\n);\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TMS_LINKS_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'TileMatrixSet': makeObjectPropertySetter(readString),\n  'TileMatrixSetLimits': makeObjectPropertySetter(readTileMatrixLimitsList),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TMS_LIMITS_LIST_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'TileMatrixLimits': makeArrayPusher(readTileMatrixLimits),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TMS_LIMITS_PARSERS = makeStructureNS(NAMESPACE_URIS, {\n  'TileMatrix': makeObjectPropertySetter(readString),\n  'MinTileRow': makeObjectPropertySetter(readPositiveInteger),\n  'MaxTileRow': makeObjectPropertySetter(readPositiveInteger),\n  'MinTileCol': makeObjectPropertySetter(readPositiveInteger),\n  'MaxTileCol': makeObjectPropertySetter(readPositiveInteger),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst DIMENSION_PARSERS = makeStructureNS(\n  NAMESPACE_URIS,\n  {\n    'Default': makeObjectPropertySetter(readString),\n    'Value': makeObjectPropertyPusher(readString),\n  },\n  makeStructureNS(OWS_NAMESPACE_URIS, {\n    'Identifier': makeObjectPropertySetter(readString),\n  }),\n);\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst WGS84_BBOX_READERS = makeStructureNS(OWS_NAMESPACE_URIS, {\n  'LowerCorner': makeArrayPusher(readCoordinates),\n  'UpperCorner': makeArrayPusher(readCoordinates),\n});\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TMS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS,\n  {\n    'WellKnownScaleSet': makeObjectPropertySetter(readString),\n    'TileMatrix': makeObjectPropertyPusher(readTileMatrix),\n  },\n  makeStructureNS(OWS_NAMESPACE_URIS, {\n    'SupportedCRS': makeObjectPropertySetter(readString),\n    'Identifier': makeObjectPropertySetter(readString),\n    'BoundingBox': makeObjectPropertySetter(readBoundingBox),\n  }),\n);\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\n// @ts-ignore\nconst TM_PARSERS = makeStructureNS(\n  NAMESPACE_URIS,\n  {\n    'TopLeftCorner': makeObjectPropertySetter(readCoordinates),\n    'ScaleDenominator': makeObjectPropertySetter(readDecimal),\n    'TileWidth': makeObjectPropertySetter(readPositiveInteger),\n    'TileHeight': makeObjectPropertySetter(readPositiveInteger),\n    'MatrixWidth': makeObjectPropertySetter(readPositiveInteger),\n    'MatrixHeight': makeObjectPropertySetter(readPositiveInteger),\n  },\n  makeStructureNS(OWS_NAMESPACE_URIS, {\n    'Identifier': makeObjectPropertySetter(readString),\n  }),\n);\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Attribution object.\n */\nfunction readContents(node, objectStack) {\n  return pushParseAndPop({}, CONTENTS_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Layers object.\n */\nfunction readLayer(node, objectStack) {\n  return pushParseAndPop({}, LAYER_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Tile Matrix Set object.\n */\nfunction readTileMatrixSet(node, objectStack) {\n  return pushParseAndPop({}, TMS_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Style object.\n */\nfunction readStyle(node, objectStack) {\n  const style = pushParseAndPop({}, STYLE_PARSERS, node, objectStack);\n  if (!style) {\n    return undefined;\n  }\n  const isDefault = node.getAttribute('isDefault') === 'true';\n  style['isDefault'] = isDefault;\n  return style;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Tile Matrix Set Link object.\n */\nfunction readTileMatrixSetLink(node, objectStack) {\n  return pushParseAndPop({}, TMS_LINKS_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Dimension object.\n */\nfunction readDimensions(node, objectStack) {\n  return pushParseAndPop({}, DIMENSION_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Resource URL object.\n */\nfunction readResourceUrl(node, objectStack) {\n  const format = node.getAttribute('format');\n  const template = node.getAttribute('template');\n  const resourceType = node.getAttribute('resourceType');\n  const resource = {};\n  if (format) {\n    resource['format'] = format;\n  }\n  if (template) {\n    resource['template'] = template;\n  }\n  if (resourceType) {\n    resource['resourceType'] = resourceType;\n  }\n  return resource;\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} BBox object.\n */\nfunction readBoundingBox(node, objectStack) {\n  const coordinates = pushParseAndPop(\n    [],\n    WGS84_BBOX_READERS,\n    node,\n    objectStack,\n  );\n  if (coordinates.length != 2) {\n    return undefined;\n  }\n  return boundingExtent(coordinates);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} BBox object.\n */\nfunction readBoundingBoxWithCrs(node, objectStack) {\n  const crs = node.getAttribute('crs');\n  const coordinates = pushParseAndPop(\n    [],\n    WGS84_BBOX_READERS,\n    node,\n    objectStack,\n  );\n  if (coordinates.length != 2) {\n    return undefined;\n  }\n  return {extent: boundingExtent(coordinates), crs: crs};\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Legend object.\n */\nfunction readLegendUrl(node, objectStack) {\n  const legend = {};\n  legend['format'] = node.getAttribute('format');\n  legend['href'] = readHref(node);\n  return legend;\n}\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} Coordinates object.\n */\nfunction readCoordinates(node, objectStack) {\n  const coordinates = readString(node).split(/\\s+/);\n  if (!coordinates || coordinates.length != 2) {\n    return undefined;\n  }\n  const x = +coordinates[0];\n  const y = +coordinates[1];\n  if (isNaN(x) || isNaN(y)) {\n    return undefined;\n  }\n  return [x, y];\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} TileMatrix object.\n */\nfunction readTileMatrix(node, objectStack) {\n  return pushParseAndPop({}, TM_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} TileMatrixSetLimits Object.\n */\nfunction readTileMatrixLimitsList(node, objectStack) {\n  return pushParseAndPop([], TMS_LIMITS_LIST_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object|undefined} TileMatrixLimits Array.\n */\nfunction readTileMatrixLimits(node, objectStack) {\n  return pushParseAndPop({}, TMS_LIMITS_PARSERS, node, objectStack);\n}\n\nexport default WMTSCapabilities;\n","/**\n * @module ol/util\n */\nimport Circle from 'ol/style/Circle.js';\nimport Fill from 'ol/style/Fill.js';\nimport Stroke from 'ol/style/Stroke.js';\nimport Style from 'ol/style/Style.js';\nimport VectorLayer from 'ol/layer/Vector.js';\nimport { STAC } from 'stac-js';\nimport { fromEPSGCode, isRegistered as isProj4Registered, } from 'ol/proj/proj4.js';\n/**\n * @typedef {import('ol/colorlike.js').ColorLike} ColorLike\n */\n/**\n * @typedef {import('ol/Collection.js').default} Collection\n * @template T\n */\n/**\n * @typedef {import('ol/Feature.js').default} Feature\n */\n/**\n * The pattern for the supported versions of the label extension.\n * @type {string}\n */\nexport const LABEL_EXTENSION = 'https://stac-extensions.github.io/label/v1.*/schema.json';\nconst transparentFill = new Fill({ color: 'rgba(0,0,0,0)' });\n/**\n * Creates a style for visualization.\n *\n * @param {ColorLike} strokeColor Stroke color\n * @param {number} strokeWidth Stroke with\n * @param {ColorLike} fillColor Fill color\n * @param {number} circleRadius Circle/Point radius\n * @return {Style} The style for visualization.\n * @api\n */\nexport function getStyle(strokeColor, strokeWidth, fillColor = 'rgba(255,255,255,0.4)', circleRadius = 5) {\n    let fill = transparentFill;\n    if (fillColor) {\n        fill = new Fill({\n            color: fillColor,\n        });\n    }\n    const stroke = new Stroke({\n        color: strokeColor,\n        width: strokeWidth,\n    });\n    return new Style({\n        image: new Circle({\n            fill,\n            stroke,\n            radius: circleRadius,\n        }),\n        fill,\n        stroke,\n    });\n}\n/**\n * The default style for rendering bounds of the STAC main entities.\n * @type {Style}\n * @api\n */\nexport const defaultBoundsStyle = getStyle('#3399CC', 3);\n/**\n * The default style for rendering collection list children.\n * @type {Style}\n * @api\n */\nexport const defaultCollectionStyle = getStyle('#ff9933', 2, null);\n/**\n * Get the STAC objects associated with this event, if any. Excludes API Collections.\n * @param {import('ol/MapBrowserEvent.js').default} event The asset to read the information from.\n * @param {STAC} [exclude=null] Excludes the given STAC entity from the list.\n * @param {Collection<Feature>} [selectedFeatures=null] A collection to add the selected features to.\n * @param {number} [hitTolerance=0] The hit tolerance in pixels.\n * @return {Promise<Array<STAC>>} A list of STAC objects\n * @api\n */\nexport async function getStacObjectsForEvent(event, exclude = null, selectedFeatures = null, hitTolerance = 0) {\n    const objects = new Set();\n    event.map.forEachFeatureAtPixel(event.pixel, \n    // Callback for all features that were found\n    (feature, layer) => {\n        if (selectedFeatures) {\n            selectedFeatures.push(feature);\n        }\n        objects.add(layer.get('stac'));\n    }, {\n        // Options for forEachFeatureAtPixel\n        hitTolerance,\n        // Filter the layers upfront, this ensures the presence of a STAC object\n        // so that we don't need to check in the callback above\n        layerFilter(layer) {\n            if (layer instanceof VectorLayer && layer.get('bounds') === true) {\n                const stac = layer.get('stac');\n                if (stac instanceof STAC && (!exclude || !stac.equals(exclude))) {\n                    return true;\n                }\n            }\n            return false;\n        },\n    });\n    return [...objects];\n}\n/**\n * Get the source info for the GeoTiff from the asset.\n * @param {import('stac-js').Asset} asset The asset to read the information from.\n * @param {Array<number>} bands The (one-based) bands to show.\n * @return {import('ol/source/GeoTIFF.js').SourceInfo} The source info for the GeoTiff asset\n */\nexport function getGeoTiffSourceInfoFromAsset(asset, bands) {\n    const sourceInfo = {\n        url: asset.getAbsoluteUrl(),\n    };\n    let source = asset;\n    // If there's just one band, we can also read the information from there.\n    if (asset.getBands().length === 1) {\n        source = asset.getBand(0);\n    }\n    // TODO: It would be useful if OL would allow min/max values per band\n    const { minimum, maximum } = source.getMinMaxValues();\n    if (typeof minimum === 'number') {\n        sourceInfo.min = minimum;\n    }\n    if (typeof maximum === 'number') {\n        sourceInfo.max = maximum;\n    }\n    // TODO: It would be useful if OL would allow multiple no-data values\n    const nodata = source.getNoDataValues();\n    if (nodata.length > 0) {\n        sourceInfo.nodata = nodata[0];\n    }\n    if (bands.length > 0) {\n        sourceInfo.bands = bands;\n    }\n    return sourceInfo;\n}\n/**\n * Gets the projection from the asset or link.\n * @param {import('stac-js').STACReference} reference The asset or link to read the information from.\n * @param {import('ol/proj.js').ProjectionLike} defaultProjection A default projection to use.\n * @return {Promise<import('ol/proj.js').ProjectionLike>} The projection, if any.\n */\nexport async function getProjection(reference, defaultProjection = undefined) {\n    let projection = defaultProjection;\n    if (isProj4Registered()) {\n        // TODO: It would be great to handle WKT2 and PROJJSON, but is not supported yet by proj4js.\n        const code = reference.getMetadata('proj:code');\n        if (code) {\n            try {\n                if (code.startsWith('EPSG:')) {\n                    const id = parseInt(code.replace('EPSG:', ''), 10);\n                    projection = await fromEPSGCode(id);\n                }\n            }\n            catch (_) {\n                // pass\n            }\n        }\n    }\n    return projection;\n}\n/**\n * Returns the style for the footprint.\n * Removes the fill if anything is meant to be shown in the bounds.\n *\n * @param {Style} [originalStyle] The original style for the footprint.\n * @param {import('./layer/STAC.js').default} [layerGroup] The associated STAC layergroup to check.\n * @return {Style} The adapted style for the footprint.\n * @api\n */\nexport function getBoundsStyle(originalStyle, layerGroup) {\n    const style = originalStyle.clone();\n    if (!layerGroup.hasOnlyBounds()) {\n        style.setFill(transparentFill);\n    }\n    return style;\n}\n/**\n * Get a URL from a web-map-link that is specific enough, i.e.\n * replaces any occurances of {s} if possible, otherwise returns null.\n * @param {import('./layer/STAC.js').Link} link The web map link.\n * @return {string|null} Specific URL\n */\nexport function getSpecificWebMapUrl(link) {\n    let url = link.href;\n    if (url.includes('{s}')) {\n        if (Array.isArray(link['href:servers']) &&\n            link['href:servers'].length > 0) {\n            const i = (Math.random() * link['href:servers'].length) | 0;\n            url = url.replace('{s}', link['href:servers'][i]);\n        }\n        else {\n            return null;\n        }\n    }\n    return url;\n}\n//# sourceMappingURL=util.js.map","\nconst SHIFT_LEFT_32 = (1 << 16) * (1 << 16);\nconst SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;\n\n// Threshold chosen based on both benchmarking and knowledge about browser string\n// data structures (which currently switch structure types at 12 bytes or more)\nconst TEXT_DECODER_MIN_LENGTH = 12;\nconst utf8TextDecoder = typeof TextDecoder === 'undefined' ? null : new TextDecoder('utf-8');\n\nconst PBF_VARINT  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\nconst PBF_FIXED64 = 1; // 64-bit: double, fixed64, sfixed64\nconst PBF_BYTES   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\nconst PBF_FIXED32 = 5; // 32-bit: float, fixed32, sfixed32\n\nexport default class Pbf {\n    /**\n     * @param {Uint8Array | ArrayBuffer} [buf]\n     */\n    constructor(buf = new Uint8Array(16)) {\n        this.buf = ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf);\n        this.dataView = new DataView(this.buf.buffer);\n        this.pos = 0;\n        this.type = 0;\n        this.length = this.buf.length;\n    }\n\n    // === READING =================================================================\n\n    /**\n     * @template T\n     * @param {(tag: number, result: T, pbf: Pbf) => void} readField\n     * @param {T} result\n     * @param {number} [end]\n     */\n    readFields(readField, result, end = this.length) {\n        while (this.pos < end) {\n            const val = this.readVarint(),\n                tag = val >> 3,\n                startPos = this.pos;\n\n            this.type = val & 0x7;\n            readField(tag, result, this);\n\n            if (this.pos === startPos) this.skip(val);\n        }\n        return result;\n    }\n\n    /**\n     * @template T\n     * @param {(tag: number, result: T, pbf: Pbf) => void} readField\n     * @param {T} result\n     */\n    readMessage(readField, result) {\n        return this.readFields(readField, result, this.readVarint() + this.pos);\n    }\n\n    readFixed32() {\n        const val = this.dataView.getUint32(this.pos, true);\n        this.pos += 4;\n        return val;\n    }\n\n    readSFixed32() {\n        const val = this.dataView.getInt32(this.pos, true);\n        this.pos += 4;\n        return val;\n    }\n\n    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n    readFixed64() {\n        const val = this.dataView.getUint32(this.pos, true) + this.dataView.getUint32(this.pos + 4, true) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    }\n\n    readSFixed64() {\n        const val = this.dataView.getUint32(this.pos, true) + this.dataView.getInt32(this.pos + 4, true) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    }\n\n    readFloat() {\n        const val = this.dataView.getFloat32(this.pos, true);\n        this.pos += 4;\n        return val;\n    }\n\n    readDouble() {\n        const val = this.dataView.getFloat64(this.pos, true);\n        this.pos += 8;\n        return val;\n    }\n\n    /**\n     * @param {boolean} [isSigned]\n     */\n    readVarint(isSigned) {\n        const buf = this.buf;\n        let val, b;\n\n        b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;\n        b = buf[this.pos];   val |= (b & 0x0f) << 28;\n\n        return readVarintRemainder(val, isSigned, this);\n    }\n\n    readVarint64() { // for compatibility with v2.0.1\n        return this.readVarint(true);\n    }\n\n    readSVarint() {\n        const num = this.readVarint();\n        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n    }\n\n    readBoolean() {\n        return Boolean(this.readVarint());\n    }\n\n    readString() {\n        const end = this.readVarint() + this.pos;\n        const pos = this.pos;\n        this.pos = end;\n\n        if (end - pos >= TEXT_DECODER_MIN_LENGTH && utf8TextDecoder) {\n            // longer strings are fast with the built-in browser TextDecoder API\n            return utf8TextDecoder.decode(this.buf.subarray(pos, end));\n        }\n        // short strings are fast with our custom implementation\n        return readUtf8(this.buf, pos, end);\n    }\n\n    readBytes() {\n        const end = this.readVarint() + this.pos,\n            buffer = this.buf.subarray(this.pos, end);\n        this.pos = end;\n        return buffer;\n    }\n\n    // verbose for performance reasons; doesn't affect gzipped size\n\n    /**\n     * @param {number[]} [arr]\n     * @param {boolean} [isSigned]\n     */\n    readPackedVarint(arr = [], isSigned) {\n        const end = this.readPackedEnd();\n        while (this.pos < end) arr.push(this.readVarint(isSigned));\n        return arr;\n    }\n    /** @param {number[]} [arr] */\n    readPackedSVarint(arr = []) {\n        const end = this.readPackedEnd();\n        while (this.pos < end) arr.push(this.readSVarint());\n        return arr;\n    }\n    /** @param {boolean[]} [arr] */\n    readPackedBoolean(arr = []) {\n        const end = this.readPackedEnd();\n        while (this.pos < end) arr.push(this.readBoolean());\n        return arr;\n    }\n    /** @param {number[]} [arr] */\n    readPackedFloat(arr = []) {\n        const end = this.readPackedEnd();\n        while (this.pos < end) arr.push(this.readFloat());\n        return arr;\n    }\n    /** @param {number[]} [arr] */\n    readPackedDouble(arr = []) {\n        const end = this.readPackedEnd();\n        while (this.pos < end) arr.push(this.readDouble());\n        return arr;\n    }\n    /** @param {number[]} [arr] */\n    readPackedFixed32(arr = []) {\n        const end = this.readPackedEnd();\n        while (this.pos < end) arr.push(this.readFixed32());\n        return arr;\n    }\n    /** @param {number[]} [arr] */\n    readPackedSFixed32(arr = []) {\n        const end = this.readPackedEnd();\n        while (this.pos < end) arr.push(this.readSFixed32());\n        return arr;\n    }\n    /** @param {number[]} [arr] */\n    readPackedFixed64(arr = []) {\n        const end = this.readPackedEnd();\n        while (this.pos < end) arr.push(this.readFixed64());\n        return arr;\n    }\n    /** @param {number[]} [arr] */\n    readPackedSFixed64(arr = []) {\n        const end = this.readPackedEnd();\n        while (this.pos < end) arr.push(this.readSFixed64());\n        return arr;\n    }\n    readPackedEnd() {\n        return this.type === PBF_BYTES ? this.readVarint() + this.pos : this.pos + 1;\n    }\n\n    /** @param {number} val */\n    skip(val) {\n        const type = val & 0x7;\n        if (type === PBF_VARINT) while (this.buf[this.pos++] > 0x7f) {}\n        else if (type === PBF_BYTES) this.pos = this.readVarint() + this.pos;\n        else if (type === PBF_FIXED32) this.pos += 4;\n        else if (type === PBF_FIXED64) this.pos += 8;\n        else throw new Error(`Unimplemented type: ${type}`);\n    }\n\n    // === WRITING =================================================================\n\n    /**\n     * @param {number} tag\n     * @param {number} type\n     */\n    writeTag(tag, type) {\n        this.writeVarint((tag << 3) | type);\n    }\n\n    /** @param {number} min */\n    realloc(min) {\n        let length = this.length || 16;\n\n        while (length < this.pos + min) length *= 2;\n\n        if (length !== this.length) {\n            const buf = new Uint8Array(length);\n            buf.set(this.buf);\n            this.buf = buf;\n            this.dataView = new DataView(buf.buffer);\n            this.length = length;\n        }\n    }\n\n    finish() {\n        this.length = this.pos;\n        this.pos = 0;\n        return this.buf.subarray(0, this.length);\n    }\n\n    /** @param {number} val */\n    writeFixed32(val) {\n        this.realloc(4);\n        this.dataView.setInt32(this.pos, val, true);\n        this.pos += 4;\n    }\n\n    /** @param {number} val */\n    writeSFixed32(val) {\n        this.realloc(4);\n        this.dataView.setInt32(this.pos, val, true);\n        this.pos += 4;\n    }\n\n    /** @param {number} val */\n    writeFixed64(val) {\n        this.realloc(8);\n        this.dataView.setInt32(this.pos, val & -1, true);\n        this.dataView.setInt32(this.pos + 4, Math.floor(val * SHIFT_RIGHT_32), true);\n        this.pos += 8;\n    }\n\n    /** @param {number} val */\n    writeSFixed64(val) {\n        this.realloc(8);\n        this.dataView.setInt32(this.pos, val & -1, true);\n        this.dataView.setInt32(this.pos + 4, Math.floor(val * SHIFT_RIGHT_32), true);\n        this.pos += 8;\n    }\n\n    /** @param {number} val */\n    writeVarint(val) {\n        val = +val || 0;\n\n        if (val > 0xfffffff || val < 0) {\n            writeBigVarint(val, this);\n            return;\n        }\n\n        this.realloc(4);\n\n        this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] =   (val >>> 7) & 0x7f;\n    }\n\n    /** @param {number} val */\n    writeSVarint(val) {\n        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n    }\n\n    /** @param {boolean} val */\n    writeBoolean(val) {\n        this.writeVarint(+val);\n    }\n\n    /** @param {string} str */\n    writeString(str) {\n        str = String(str);\n        this.realloc(str.length * 4);\n\n        this.pos++; // reserve 1 byte for short string length\n\n        const startPos = this.pos;\n        // write the string directly to the buffer and see how much was written\n        this.pos = writeUtf8(this.buf, str, this.pos);\n        const len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    }\n\n    /** @param {number} val */\n    writeFloat(val) {\n        this.realloc(4);\n        this.dataView.setFloat32(this.pos, val, true);\n        this.pos += 4;\n    }\n\n    /** @param {number} val */\n    writeDouble(val) {\n        this.realloc(8);\n        this.dataView.setFloat64(this.pos, val, true);\n        this.pos += 8;\n    }\n\n    /** @param {Uint8Array} buffer */\n    writeBytes(buffer) {\n        const len = buffer.length;\n        this.writeVarint(len);\n        this.realloc(len);\n        for (let i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n    }\n\n    /**\n     * @template T\n     * @param {(obj: T, pbf: Pbf) => void} fn\n     * @param {T} obj\n     */\n    writeRawMessage(fn, obj) {\n        this.pos++; // reserve 1 byte for short message length\n\n        // write the message directly to the buffer and see how much was written\n        const startPos = this.pos;\n        fn(obj, this);\n        const len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    }\n\n    /**\n     * @template T\n     * @param {number} tag\n     * @param {(obj: T, pbf: Pbf) => void} fn\n     * @param {T} obj\n     */\n    writeMessage(tag, fn, obj) {\n        this.writeTag(tag, PBF_BYTES);\n        this.writeRawMessage(fn, obj);\n    }\n\n    /**\n     * @param {number} tag\n     * @param {number[]} arr\n     */\n    writePackedVarint(tag, arr) {\n        if (arr.length) this.writeMessage(tag, writePackedVarint, arr);\n    }\n    /**\n     * @param {number} tag\n     * @param {number[]} arr\n     */\n    writePackedSVarint(tag, arr) {\n        if (arr.length) this.writeMessage(tag, writePackedSVarint, arr);\n    }\n    /**\n     * @param {number} tag\n     * @param {boolean[]} arr\n     */\n    writePackedBoolean(tag, arr) {\n        if (arr.length) this.writeMessage(tag, writePackedBoolean, arr);\n    }\n    /**\n     * @param {number} tag\n     * @param {number[]} arr\n     */\n    writePackedFloat(tag, arr) {\n        if (arr.length) this.writeMessage(tag, writePackedFloat, arr);\n    }\n    /**\n     * @param {number} tag\n     * @param {number[]} arr\n     */\n    writePackedDouble(tag, arr) {\n        if (arr.length) this.writeMessage(tag, writePackedDouble, arr);\n    }\n    /**\n     * @param {number} tag\n     * @param {number[]} arr\n     */\n    writePackedFixed32(tag, arr) {\n        if (arr.length) this.writeMessage(tag, writePackedFixed32, arr);\n    }\n    /**\n     * @param {number} tag\n     * @param {number[]} arr\n     */\n    writePackedSFixed32(tag, arr) {\n        if (arr.length) this.writeMessage(tag, writePackedSFixed32, arr);\n    }\n    /**\n     * @param {number} tag\n     * @param {number[]} arr\n     */\n    writePackedFixed64(tag, arr) {\n        if (arr.length) this.writeMessage(tag, writePackedFixed64, arr);\n    }\n    /**\n     * @param {number} tag\n     * @param {number[]} arr\n     */\n    writePackedSFixed64(tag, arr) {\n        if (arr.length) this.writeMessage(tag, writePackedSFixed64, arr);\n    }\n\n    /**\n     * @param {number} tag\n     * @param {Uint8Array} buffer\n     */\n    writeBytesField(tag, buffer) {\n        this.writeTag(tag, PBF_BYTES);\n        this.writeBytes(buffer);\n    }\n    /**\n     * @param {number} tag\n     * @param {number} val\n     */\n    writeFixed32Field(tag, val) {\n        this.writeTag(tag, PBF_FIXED32);\n        this.writeFixed32(val);\n    }\n    /**\n     * @param {number} tag\n     * @param {number} val\n     */\n    writeSFixed32Field(tag, val) {\n        this.writeTag(tag, PBF_FIXED32);\n        this.writeSFixed32(val);\n    }\n    /**\n     * @param {number} tag\n     * @param {number} val\n     */\n    writeFixed64Field(tag, val) {\n        this.writeTag(tag, PBF_FIXED64);\n        this.writeFixed64(val);\n    }\n    /**\n     * @param {number} tag\n     * @param {number} val\n     */\n    writeSFixed64Field(tag, val) {\n        this.writeTag(tag, PBF_FIXED64);\n        this.writeSFixed64(val);\n    }\n    /**\n     * @param {number} tag\n     * @param {number} val\n     */\n    writeVarintField(tag, val) {\n        this.writeTag(tag, PBF_VARINT);\n        this.writeVarint(val);\n    }\n    /**\n     * @param {number} tag\n     * @param {number} val\n     */\n    writeSVarintField(tag, val) {\n        this.writeTag(tag, PBF_VARINT);\n        this.writeSVarint(val);\n    }\n    /**\n     * @param {number} tag\n     * @param {string} str\n     */\n    writeStringField(tag, str) {\n        this.writeTag(tag, PBF_BYTES);\n        this.writeString(str);\n    }\n    /**\n     * @param {number} tag\n     * @param {number} val\n     */\n    writeFloatField(tag, val) {\n        this.writeTag(tag, PBF_FIXED32);\n        this.writeFloat(val);\n    }\n    /**\n     * @param {number} tag\n     * @param {number} val\n     */\n    writeDoubleField(tag, val) {\n        this.writeTag(tag, PBF_FIXED64);\n        this.writeDouble(val);\n    }\n    /**\n     * @param {number} tag\n     * @param {boolean} val\n     */\n    writeBooleanField(tag, val) {\n        this.writeVarintField(tag, +val);\n    }\n};\n\n/**\n * @param {number} l\n * @param {boolean | undefined} s\n * @param {Pbf} p\n */\nfunction readVarintRemainder(l, s, p) {\n    const buf = p.buf;\n    let h, b;\n\n    b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum(l, h, s);\n\n    throw new Error('Expected varint not more than 10 bytes');\n}\n\n/**\n * @param {number} low\n * @param {number} high\n * @param {boolean} [isSigned]\n */\nfunction toNum(low, high, isSigned) {\n    return isSigned ? high * 0x100000000 + (low >>> 0) : ((high >>> 0) * 0x100000000) + (low >>> 0);\n}\n\n/**\n * @param {number} val\n * @param {Pbf} pbf\n */\nfunction writeBigVarint(val, pbf) {\n    let low, high;\n\n    if (val >= 0) {\n        low  = (val % 0x100000000) | 0;\n        high = (val / 0x100000000) | 0;\n    } else {\n        low  = ~(-val % 0x100000000);\n        high = ~(-val / 0x100000000);\n\n        if (low ^ 0xffffffff) {\n            low = (low + 1) | 0;\n        } else {\n            low = 0;\n            high = (high + 1) | 0;\n        }\n    }\n\n    if (val >= 0x10000000000000000 || val < -0x10000000000000000) {\n        throw new Error('Given varint doesn\\'t fit into 10 bytes');\n    }\n\n    pbf.realloc(10);\n\n    writeBigVarintLow(low, high, pbf);\n    writeBigVarintHigh(high, pbf);\n}\n\n/**\n * @param {number} high\n * @param {number} low\n * @param {Pbf} pbf\n */\nfunction writeBigVarintLow(low, high, pbf) {\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos]   = low & 0x7f;\n}\n\n/**\n * @param {number} high\n * @param {Pbf} pbf\n */\nfunction writeBigVarintHigh(high, pbf) {\n    const lsb = (high & 0x07) << 4;\n\n    pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f;\n}\n\n/**\n * @param {number} startPos\n * @param {number} len\n * @param {Pbf} pbf\n */\nfunction makeRoomForExtraLength(startPos, len, pbf) {\n    const extraLen =\n        len <= 0x3fff ? 1 :\n        len <= 0x1fffff ? 2 :\n        len <= 0xfffffff ? 3 : Math.floor(Math.log(len) / (Math.LN2 * 7));\n\n    // if 1 byte isn't enough for encoding message length, shift the data to the right\n    pbf.realloc(extraLen);\n    for (let i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];\n}\n\n/**\n * @param {number[]} arr\n * @param {Pbf} pbf\n */\nfunction writePackedVarint(arr, pbf) {\n    for (let i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);\n}\n/**\n * @param {number[]} arr\n * @param {Pbf} pbf\n */\nfunction writePackedSVarint(arr, pbf) {\n    for (let i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);\n}\n/**\n * @param {number[]} arr\n * @param {Pbf} pbf\n */\nfunction writePackedFloat(arr, pbf) {\n    for (let i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);\n}\n/**\n * @param {number[]} arr\n * @param {Pbf} pbf\n */\nfunction writePackedDouble(arr, pbf) {\n    for (let i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);\n}\n/**\n * @param {boolean[]} arr\n * @param {Pbf} pbf\n */\nfunction writePackedBoolean(arr, pbf) {\n    for (let i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);\n}\n/**\n * @param {number[]} arr\n * @param {Pbf} pbf\n */\nfunction writePackedFixed32(arr, pbf) {\n    for (let i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);\n}\n/**\n * @param {number[]} arr\n * @param {Pbf} pbf\n */\nfunction writePackedSFixed32(arr, pbf) {\n    for (let i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]);\n}\n/**\n * @param {number[]} arr\n * @param {Pbf} pbf\n */\nfunction writePackedFixed64(arr, pbf) {\n    for (let i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);\n}\n/**\n * @param {number[]} arr\n * @param {Pbf} pbf\n */\nfunction writePackedSFixed64(arr, pbf) {\n    for (let i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]);\n}\n\n// Buffer code below from https://github.com/feross/buffer, MIT-licensed\n\n/**\n * @param {Uint8Array} buf\n * @param {number} pos\n * @param {number} end\n */\nfunction readUtf8(buf, pos, end) {\n    let str = '';\n    let i = pos;\n\n    while (i < end) {\n        const b0 = buf[i];\n        let c = null; // codepoint\n        let bytesPerSequence =\n            b0 > 0xEF ? 4 :\n            b0 > 0xDF ? 3 :\n            b0 > 0xBF ? 2 : 1;\n\n        if (i + bytesPerSequence > end) break;\n\n        let b1, b2, b3;\n\n        if (bytesPerSequence === 1) {\n            if (b0 < 0x80) {\n                c = b0;\n            }\n        } else if (bytesPerSequence === 2) {\n            b1 = buf[i + 1];\n            if ((b1 & 0xC0) === 0x80) {\n                c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);\n                if (c <= 0x7F) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 3) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);\n                if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 4) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            b3 = buf[i + 3];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);\n                if (c <= 0xFFFF || c >= 0x110000) {\n                    c = null;\n                }\n            }\n        }\n\n        if (c === null) {\n            c = 0xFFFD;\n            bytesPerSequence = 1;\n\n        } else if (c > 0xFFFF) {\n            c -= 0x10000;\n            str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);\n            c = 0xDC00 | c & 0x3FF;\n        }\n\n        str += String.fromCharCode(c);\n        i += bytesPerSequence;\n    }\n\n    return str;\n}\n\n/**\n * @param {Uint8Array} buf\n * @param {string} str\n * @param {number} pos\n */\nfunction writeUtf8(buf, str, pos) {\n    for (let i = 0, c, lead; i < str.length; i++) {\n        c = str.charCodeAt(i); // code point\n\n        if (c > 0xD7FF && c < 0xE000) {\n            if (lead) {\n                if (c < 0xDC00) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                    lead = c;\n                    continue;\n                } else {\n                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                    lead = null;\n                }\n            } else {\n                if (c > 0xDBFF || (i + 1 === str.length)) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                } else {\n                    lead = c;\n                }\n                continue;\n            }\n        } else if (lead) {\n            buf[pos++] = 0xEF;\n            buf[pos++] = 0xBF;\n            buf[pos++] = 0xBD;\n            lead = null;\n        }\n\n        if (c < 0x80) {\n            buf[pos++] = c;\n        } else {\n            if (c < 0x800) {\n                buf[pos++] = c >> 0x6 | 0xC0;\n            } else {\n                if (c < 0x10000) {\n                    buf[pos++] = c >> 0xC | 0xE0;\n                } else {\n                    buf[pos++] = c >> 0x12 | 0xF0;\n                    buf[pos++] = c >> 0xC & 0x3F | 0x80;\n                }\n                buf[pos++] = c >> 0x6 & 0x3F | 0x80;\n            }\n            buf[pos++] = c & 0x3F | 0x80;\n        }\n    }\n    return pos;\n}\n","/**\n * @module ol/format/MVT\n */\n//FIXME Implement projection handling\n\nimport PBF from 'pbf';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {inflateEnds} from '../geom/flat/orient.js';\nimport Projection from '../proj/Projection.js';\nimport {get} from '../proj.js';\nimport RenderFeature from '../render/Feature.js';\nimport FeatureFormat, {transformGeometryWithOptions} from './Feature.js';\n\n/**\n * @template {import(\"../Feature.js\").FeatureLike} [FeatureType=import(\"../render/Feature.js\").default]\n * @typedef {Object} Options\n * @property {import('./Feature.js').FeatureToFeatureClass<FeatureType>} [featureClass] Class for features returned by\n * {@link module:ol/format/MVT~MVT#readFeatures}. Set to {@link module:ol/Feature~Feature} to get full editing and geometry\n * support at the cost of decreased rendering performance. The default is\n * {@link module:ol/render/Feature~RenderFeature}, which is optimized for rendering and hit detection.\n * @property {string} [geometryName='geometry'] Geometry name to use when creating features.\n * @property {string} [layerName='layer'] Name of the feature attribute that holds the layer name.\n * @property {Array<string>} [layers] Layers to read features from. If not provided, features will be read from all\n * @property {string} [idProperty] Optional property that will be assigned as the feature id and removed from the properties.\n * layers.\n */\n\n/**\n * @classdesc\n * Feature format for reading data in the Mapbox MVT format.\n *\n * @template {import('../Feature.js').FeatureLike} [FeatureType=RenderFeature]\n * @extends {FeatureFormat<FeatureType>}\n * @api\n */\nclass MVT extends FeatureFormat {\n  /**\n   * @param {Options<FeatureType>} [options] Options.\n   */\n  constructor(options) {\n    super();\n\n    options = options ? options : {};\n\n    /**\n     * @type {Projection}\n     */\n    this.dataProjection = new Projection({\n      code: '',\n      units: 'tile-pixels',\n    });\n\n    this.featureClass = options.featureClass\n      ? options.featureClass\n      : /** @type {import('./Feature.js').FeatureToFeatureClass<FeatureType>} */ (\n          RenderFeature\n        );\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.geometryName_ = options.geometryName;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.layerName_ = options.layerName ? options.layerName : 'layer';\n\n    /**\n     * @private\n     * @type {Array<string>|null}\n     */\n    this.layers_ = options.layers ? options.layers : null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.idProperty_ = options.idProperty;\n\n    this.supportedMediaTypes = [\n      'application/vnd.mapbox-vector-tile',\n      'application/x-protobuf',\n    ];\n  }\n\n  /**\n   * Read the raw geometry from the pbf offset stored in a raw feature's geometry\n   * property.\n   * @param {PBF} pbf PBF.\n   * @param {Object} feature Raw feature.\n   * @param {Array<number>} flatCoordinates Array to store flat coordinates in.\n   * @param {Array<number>} ends Array to store ends in.\n   * @private\n   */\n  readRawGeometry_(pbf, feature, flatCoordinates, ends) {\n    pbf.pos = feature.geometry;\n\n    const end = pbf.readVarint() + pbf.pos;\n    let cmd = 1;\n    let length = 0;\n    let x = 0;\n    let y = 0;\n    let coordsLen = 0;\n    let currentEnd = 0;\n\n    while (pbf.pos < end) {\n      if (!length) {\n        const cmdLen = pbf.readVarint();\n        cmd = cmdLen & 0x7;\n        length = cmdLen >> 3;\n      }\n\n      length--;\n\n      if (cmd === 1 || cmd === 2) {\n        x += pbf.readSVarint();\n        y += pbf.readSVarint();\n\n        if (cmd === 1) {\n          // moveTo\n          if (coordsLen > currentEnd) {\n            ends.push(coordsLen);\n            currentEnd = coordsLen;\n          }\n        }\n\n        flatCoordinates.push(x, y);\n        coordsLen += 2;\n      } else if (cmd === 7) {\n        if (coordsLen > currentEnd) {\n          // close polygon\n          flatCoordinates.push(\n            flatCoordinates[currentEnd],\n            flatCoordinates[currentEnd + 1],\n          );\n          coordsLen += 2;\n        }\n      } else {\n        throw new Error('Invalid command found in the PBF');\n      }\n    }\n\n    if (coordsLen > currentEnd) {\n      ends.push(coordsLen);\n      currentEnd = coordsLen;\n    }\n  }\n\n  /**\n   * @private\n   * @param {PBF} pbf PBF\n   * @param {Object} rawFeature Raw Mapbox feature.\n   * @param {import(\"./Feature.js\").ReadOptions} options Read options.\n   * @return {FeatureType|null} Feature.\n   */\n  createFeature_(pbf, rawFeature, options) {\n    const type = rawFeature.type;\n    if (type === 0) {\n      return null;\n    }\n\n    let feature;\n    const values = rawFeature.properties;\n\n    let id;\n    if (!this.idProperty_) {\n      id = rawFeature.id;\n    } else {\n      id = values[this.idProperty_];\n      delete values[this.idProperty_];\n    }\n\n    values[this.layerName_] = rawFeature.layer.name;\n\n    const flatCoordinates = /** @type {Array<number>} */ ([]);\n    const ends = /** @type {Array<number>} */ ([]);\n    this.readRawGeometry_(pbf, rawFeature, flatCoordinates, ends);\n\n    const geometryType = getGeometryType(type, ends.length);\n\n    if (this.featureClass === RenderFeature) {\n      feature =\n        new /** @type {import('./Feature.js').FeatureToFeatureClass<RenderFeature>} */ (\n          this.featureClass\n        )(geometryType, flatCoordinates, ends, 2, values, id);\n      feature.transform(options.dataProjection);\n    } else {\n      let geom;\n      if (geometryType == 'Polygon') {\n        const endss = inflateEnds(flatCoordinates, ends);\n        geom =\n          endss.length > 1\n            ? new MultiPolygon(flatCoordinates, 'XY', endss)\n            : new Polygon(flatCoordinates, 'XY', ends);\n      } else {\n        geom =\n          geometryType === 'Point'\n            ? new Point(flatCoordinates, 'XY')\n            : geometryType === 'LineString'\n              ? new LineString(flatCoordinates, 'XY')\n              : geometryType === 'MultiPoint'\n                ? new MultiPoint(flatCoordinates, 'XY')\n                : geometryType === 'MultiLineString'\n                  ? new MultiLineString(flatCoordinates, 'XY', ends)\n                  : null;\n      }\n      const ctor = /** @type {typeof import(\"../Feature.js\").default} */ (\n        this.featureClass\n      );\n      feature = new ctor();\n      if (this.geometryName_) {\n        feature.setGeometryName(this.geometryName_);\n      }\n      const geometry = transformGeometryWithOptions(geom, false, options);\n      feature.setGeometry(geometry);\n      if (id !== undefined) {\n        feature.setId(id);\n      }\n      feature.setProperties(values, true);\n    }\n\n    return /** @type {FeatureType} */ (feature);\n  }\n\n  /**\n   * @return {import(\"./Feature.js\").Type} Format.\n   * @override\n   */\n  getType() {\n    return 'arraybuffer';\n  }\n\n  /**\n   * Read all features.\n   *\n   * @param {ArrayBuffer} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions} [options] Read options.\n   * @return {Array<FeatureType>} Features.\n   * @api\n   * @override\n   */\n  readFeatures(source, options) {\n    const layers = this.layers_;\n    options = this.adaptOptions(options);\n    const dataProjection = get(options.dataProjection);\n    dataProjection.setWorldExtent(options.extent);\n    options.dataProjection = dataProjection;\n\n    const pbf = new PBF(/** @type {ArrayBuffer} */ (source));\n    const pbfLayers = pbf.readFields(layersPBFReader, {});\n    const features = [];\n    for (const name in pbfLayers) {\n      if (layers && !layers.includes(name)) {\n        continue;\n      }\n      const pbfLayer = pbfLayers[name];\n\n      const extent = pbfLayer ? [0, 0, pbfLayer.extent, pbfLayer.extent] : null;\n      dataProjection.setExtent(extent);\n\n      for (let i = 0, ii = pbfLayer.length; i < ii; ++i) {\n        const rawFeature = readRawFeature(pbf, pbfLayer, i);\n        const feature = this.createFeature_(pbf, rawFeature, options);\n        if (feature !== null) {\n          features.push(feature);\n        }\n      }\n    }\n\n    return /** @type {Array<FeatureType>} */ (features);\n  }\n\n  /**\n   * Read the projection from the source.\n   *\n   * @param {Document|Element|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   * @override\n   */\n  readProjection(source) {\n    return this.dataProjection;\n  }\n\n  /**\n   * Sets the layers that features will be read from.\n   * @param {Array<string>} layers Layers.\n   * @api\n   */\n  setLayers(layers) {\n    this.layers_ = layers;\n  }\n}\n\n/**\n * Reader callback for parsing layers.\n * @param {number} tag The tag.\n * @param {Object} layers The layers object.\n * @param {PBF} pbf The PBF.\n */\nfunction layersPBFReader(tag, layers, pbf) {\n  if (tag === 3) {\n    const layer = {\n      keys: [],\n      values: [],\n      features: [],\n    };\n    const end = pbf.readVarint() + pbf.pos;\n    pbf.readFields(layerPBFReader, layer, end);\n    layer.length = layer.features.length;\n    if (layer.length) {\n      layers[layer.name] = layer;\n    }\n  }\n}\n\n/**\n * Reader callback for parsing layer.\n * @param {number} tag The tag.\n * @param {Object} layer The layer object.\n * @param {PBF} pbf The PBF.\n */\nfunction layerPBFReader(tag, layer, pbf) {\n  if (tag === 15) {\n    layer.version = pbf.readVarint();\n  } else if (tag === 1) {\n    layer.name = pbf.readString();\n  } else if (tag === 5) {\n    layer.extent = pbf.readVarint();\n  } else if (tag === 2) {\n    layer.features.push(pbf.pos);\n  } else if (tag === 3) {\n    layer.keys.push(pbf.readString());\n  } else if (tag === 4) {\n    let value = null;\n    const end = pbf.readVarint() + pbf.pos;\n    while (pbf.pos < end) {\n      tag = pbf.readVarint() >> 3;\n      value =\n        tag === 1\n          ? pbf.readString()\n          : tag === 2\n            ? pbf.readFloat()\n            : tag === 3\n              ? pbf.readDouble()\n              : tag === 4\n                ? pbf.readVarint64()\n                : tag === 5\n                  ? pbf.readVarint()\n                  : tag === 6\n                    ? pbf.readSVarint()\n                    : tag === 7\n                      ? pbf.readBoolean()\n                      : null;\n    }\n    layer.values.push(value);\n  }\n}\n\n/**\n * Reader callback for parsing feature.\n * @param {number} tag The tag.\n * @param {Object} feature The feature object.\n * @param {PBF} pbf The PBF.\n */\nfunction featurePBFReader(tag, feature, pbf) {\n  if (tag == 1) {\n    feature.id = pbf.readVarint();\n  } else if (tag == 2) {\n    const end = pbf.readVarint() + pbf.pos;\n    while (pbf.pos < end) {\n      const key = feature.layer.keys[pbf.readVarint()];\n      const value = feature.layer.values[pbf.readVarint()];\n      feature.properties[key] = value;\n    }\n  } else if (tag == 3) {\n    feature.type = pbf.readVarint();\n  } else if (tag == 4) {\n    feature.geometry = pbf.pos;\n  }\n}\n\n/**\n * Read a raw feature from the pbf offset stored at index `i` in the raw layer.\n * @param {PBF} pbf PBF.\n * @param {Object} layer Raw layer.\n * @param {number} i Index of the feature in the raw layer's `features` array.\n * @return {Object} Raw feature.\n */\nfunction readRawFeature(pbf, layer, i) {\n  pbf.pos = layer.features[i];\n  const end = pbf.readVarint() + pbf.pos;\n\n  const feature = {\n    layer: layer,\n    type: 0,\n    properties: {},\n  };\n  pbf.readFields(featurePBFReader, feature, end);\n  return feature;\n}\n\n/**\n * @param {number} type The raw feature's geometry type\n * @param {number} numEnds Number of ends of the flat coordinates of the\n * geometry.\n * @return {import(\"../render/Feature.js\").Type} The geometry type.\n */\nfunction getGeometryType(type, numEnds) {\n  /** @type {import(\"../render/Feature.js\").Type} */\n  let geometryType;\n  if (type === 1) {\n    geometryType = numEnds === 1 ? 'Point' : 'MultiPoint';\n  } else if (type === 2) {\n    geometryType = numEnds === 1 ? 'LineString' : 'MultiLineString';\n  } else if (type === 3) {\n    geometryType = 'Polygon';\n    // MultiPolygon not relevant for rendering - winding order determines\n    // outer rings of polygons.\n  }\n  return geometryType;\n}\n\nexport default MVT;\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/index.ts\nimport {\n  default as DataTileSource\n} from \"ol/source/DataTile.js\";\nimport TileState from \"ol/TileState.js\";\nimport { MVT } from \"ol/format.js\";\nimport {\n  default as VectorTileSource\n} from \"ol/source/VectorTile.js\";\nimport { createXYZ, extentFromProjection } from \"ol/tilegrid.js\";\nimport { PMTiles } from \"pmtiles\";\nvar _PMTilesRasterSource = class _PMTilesRasterSource extends DataTileSource {\n  constructor(options) {\n    super(__spreadValues(__spreadValues({}, options), {\n      state: \"loading\"\n    }));\n    this.loadImage = /* @__PURE__ */ __name((src) => {\n      return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.addEventListener(\"load\", () => resolve(img));\n        img.addEventListener(\"error\", () => reject(new Error(\"load failed\")));\n        img.src = src;\n      });\n    }, \"loadImage\");\n    const p = new PMTiles(options.url);\n    p.getHeader().then((h) => {\n      const projection = options.projection === void 0 ? \"EPSG:3857\" : options.projection;\n      this.tileGrid = options.tileGrid || createXYZ({\n        extent: extentFromProjection(projection),\n        maxResolution: options.maxResolution,\n        minZoom: h.minZoom,\n        maxZoom: h.maxZoom,\n        tileSize: options.tileSize\n      });\n      this.setLoader((z, x, y) => __async(this, null, function* () {\n        const response = yield p.getZxy(z, x, y);\n        if (!response) {\n          return new Uint8Array();\n        }\n        const src = URL.createObjectURL(new Blob([response.data]));\n        const image = yield this.loadImage(src);\n        URL.revokeObjectURL(src);\n        return image;\n      }));\n      this.setState(\"ready\");\n    });\n  }\n};\n__name(_PMTilesRasterSource, \"PMTilesRasterSource\");\nvar PMTilesRasterSource = _PMTilesRasterSource;\nvar _PMTilesVectorSource = class _PMTilesVectorSource extends VectorTileSource {\n  constructor(options) {\n    super(__spreadValues(__spreadValues({}, options), {\n      state: \"loading\",\n      url: \"pmtiles://{z}/{x}/{y}\",\n      format: options.format || new MVT()\n    }));\n    this.tileLoadFunction = /* @__PURE__ */ __name((tile, url) => {\n      const vtile = tile;\n      const re = new RegExp(/pmtiles:\\/\\/(\\d+)\\/(\\d+)\\/(\\d+)/);\n      const result = url.match(re);\n      if (!(result && result.length >= 4)) {\n        throw Error(\"Could not parse tile URL\");\n      }\n      const z = +result[1];\n      const x = +result[2];\n      const y = +result[3];\n      vtile.setLoader(\n        (extent, resolution, projection) => {\n          this.pmtiles_.getZxy(z, x, y).then((tile_result) => {\n            if (tile_result) {\n              const format = vtile.getFormat();\n              vtile.setFeatures(\n                format.readFeatures(tile_result.data, {\n                  extent,\n                  featureProjection: projection\n                })\n              );\n              vtile.setState(TileState.LOADED);\n            } else {\n              vtile.setFeatures([]);\n              vtile.setState(TileState.EMPTY);\n            }\n          }).catch((err) => {\n            vtile.setFeatures([]);\n            vtile.setState(TileState.ERROR);\n          });\n        }\n      );\n    }, \"tileLoadFunction\");\n    this.pmtiles_ = new PMTiles(options.url);\n    this.pmtiles_.getHeader().then((h) => {\n      const projection = options.projection || \"EPSG:3857\";\n      const extent = options.extent || extentFromProjection(projection);\n      this.tileGrid = options.tileGrid || createXYZ({\n        extent,\n        maxResolution: options.maxResolution,\n        maxZoom: options.maxZoom !== void 0 ? options.maxZoom : h.maxZoom,\n        minZoom: h.minZoom,\n        tileSize: options.tileSize || 512\n      });\n      this.setTileLoadFunction(this.tileLoadFunction);\n      this.setState(\"ready\");\n    });\n  }\n};\n__name(_PMTilesVectorSource, \"PMTilesVectorSource\");\nvar PMTilesVectorSource = _PMTilesVectorSource;\nexport {\n  PMTilesRasterSource,\n  PMTilesVectorSource\n};\n//# sourceMappingURL=index.js.map","/**\n * @module ol/layer/STAC\n */\nimport * as pmtiles from 'pmtiles';\nimport ErrorEvent from '../events/ErrorEvent.js';\nimport GeoJSON from 'ol/format/GeoJSON.js';\nimport GeoTIFF from 'ol/source/GeoTIFF.js';\nimport ImageLayer from 'ol/layer/Image.js';\nimport LayerGroup from 'ol/layer/Group.js';\nimport SourceType from '../source/type.js';\nimport StaticImage from 'ol/source/ImageStatic.js';\nimport TileJSON from 'ol/source/TileJSON.js';\nimport TileLayer from 'ol/layer/Tile.js';\nimport VectorLayer from 'ol/layer/Vector.js';\nimport VectorSource from 'ol/source/Vector.js';\nimport VectorTileLayer from 'ol/layer/VectorTile.js';\nimport VectorTileSource from 'ol/source/VectorTile.js';\nimport WMS from 'ol/source/TileWMS.js';\nimport WMTS, { optionsFromCapabilities } from 'ol/source/WMTS.js';\nimport WMTSCapabilities from 'ol/format/WMTSCapabilities.js';\nimport WebGLTileLayer from 'ol/layer/WebGLTile.js';\nimport XYZ from 'ol/source/XYZ.js';\nimport create, { APICollection, Asset, Item, ItemCollection, STAC, } from 'stac-js';\nimport { LABEL_EXTENSION, defaultBoundsStyle, defaultCollectionStyle, getBoundsStyle, getGeoTiffSourceInfoFromAsset, getProjection, getSpecificWebMapUrl, } from '../util.js';\nimport { PMTilesRasterSource, PMTilesVectorSource } from 'ol-pmtiles';\nimport { fixGeoJson, toGeoJSON, unionBoundingBox } from 'stac-js/src/geo.js';\nimport { geojsonMediaType } from 'stac-js/src/mediatypes.js';\nimport { isEmpty } from 'ol/extent.js';\nimport { isObject } from 'stac-js/src/utils.js';\nimport { transformExtent } from 'ol/proj.js';\n/**\n * @typedef {import(\"ol/extent.js\").Extent} Extent\n */\n/**\n * @typedef {import(\"ol/layer/Layer.js\").default} Layer\n */\n/**\n * @typedef {import(\"stac-js\").Link} Link\n */\n/**\n * @typedef {import(\"ol/Map.js\").default} Map\n */\n/**\n * @typedef {import('ol/style/Style.js').default} Style\n */\n/**\n * @typedef {import('../source/type.js').SourceOptions} SourceOptions\n */\n/**\n * @typedef {Object} Options\n * @property {string} [url] The STAC URL. Any of `url` and `data` must be provided.\n * Can also be used as url for data, if it is absolute and doesn't contain a self link.\n * Don't use this is you pass in a stac-js object as `data`, set the url manually through\n * `setAbsoluteUrl` on the stac-js object before passing it in.\n * @property {STAC|Asset|Object} [data] The STAC metadata. Any of `url` and `data` must be provided.\n * `data` take precedence over `url`.\n * @property {ItemCollection|Object|Array<STAC|Object>|null} [children=null] For STAC Catalogs and Collections, any child entites\n * to show. Can be STAC ItemCollections (as ItemCollection or GeoJSON FeatureCollection) or a list of STAC entities.\n * @property {Options} [childrenOptions={}] The the given children, apply the given options.\n * @property {Array<string|Asset>|null} [assets=null] The selector for the assets to be rendered,\n * only for STAC Items and Collections.\n * This can be an array of strings corresponding to asset keys or Asset objects.\n * null shows the default asset, an empty array shows no asset.\n * @property {Array<number>} [bands] The (one-based) bands to show.\n * @property {function(SourceType, SourceOptions, (Asset|Link)):(SourceOptions|Promise<SourceOptions>)} [getSourceOptions]\n * Optional function that can be used to configure the underlying sources. The function can do any additional work\n * and return the completed options or a promise for the same. The function will be called with the current source options\n * and the STAC Asset or Link.\n * This can be useful for adding auth information such as an API token, either via query parameter or HTTP headers.\n * Please be aware that sending HTTP headers may not be supported by all sources.\n * @property {boolean} [displayFootprint=true] Allows to hide the footprints (bounding box/geometry) of the STAC object\n * by default.\n * @property {boolean} [displayGeoTiffByDefault=false] Allow to choose non-cloud-optimized GeoTiffs as default image to show,\n * which might not work well for larger files or larger amounts of files.\n * @property {boolean} [displayPreview=false] Allow to display preview images that a browser can display (e.g. PNG, JPEG),\n * i.e. assets with any of the roles `thumbnail`, `overview`, or a link with relation type `preview`.\n * The previews are usually not covering the full extents and as such may be placed incorrectly on the map.\n * For performance reasons, it is recommended to enable this option if you pass in STAC API Items instead of `displayOverview`.\n * @property {boolean} [displayOverview=true] Allow to display COGs and, if `displayGeoTiffByDefault` is enabled, GeoTiffs,\n * usually an asset with role `overview` or `visual`.\n * @property {string|boolean|Array<Link|string>} [displayWebMapLink=false] Allow to display a layer\n * based on the information provided through the web map links extension.\n * If an array of links or link ids (property `id` in a Link Object) is provided, all corresponding layers will be shown.\n * If set to true or to a specific type of web map link (`pmtiles`, `tilejson`, `wms`, `wmts`, `xyz`),\n * it lets this library choose a web map link to show, but only if no other data is shown.\n * To disable the functionality set this to `false`.\n * @property {Style} [boundsStyle] The style for the overall bounds / footprint.\n * @property {Style} [collectionStyle] The style for individual children in a list of STAC Items or Collections.\n * @property {null|string} [crossOrigin] For thumbnails: The `crossOrigin` attribute for loaded images / tiles.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {function((Asset|Link)):Promise<string>|string|null} [buildTileUrlTemplate=null] A function that generates a URL template for a tile server (XYZ),\n * which will be used instead of the client-side GeoTIFF rendering (except if `useTileLayerAsFallback` is `true`).\n * The function provided can return a promise (i.e. be async) or a string.\n * @property {boolean} [useTileLayerAsFallback=false] Uses the given URL template only when the client-side GeoTIFF rendering fails.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will be\n * visible.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`. `stac` and `bounds` are reserved and may be overridden.\n * @property {boolean} [disableMigration=false] Disable the migration of the STAC object to the latest version.\n * Only enable this if you are sure that the STAC object is already in the latest version.\n * @property {function(string,string):(*)} [httpRequestFn=null] Sets a custom function to make HTTP requests with.\n * The first parameter is the URL to request and the output is a promise that resolves with the response body.\n * The second parameter is the return type, either `json` (default) or `text`.\n */\n/**\n * @classdesc\n * Renders STAC entities such as STAC Items, Collectons or lists of them as returned by APIs.\n * The layers created by this LayerGroup all have a 'stac' value that can be retrieved using `layer.get('stac')`.\n *\n * @extends LayerGroup\n * @fires sourceready\n * @fires layersready\n * @fires ErorEvent#event:error\n * @api\n */\nclass STACLayer extends LayerGroup {\n    /**\n     * @param {Options} options Layer options.\n     * @api\n     */\n    constructor(options) {\n        const superOptions = {};\n        [\n            'opacity',\n            'visible',\n            'zIndex',\n            'minResolution',\n            'maxResolution',\n            'minZoom',\n            'maxZoom',\n            'properties',\n        ].forEach((key) => (superOptions[key] = options[key]));\n        super(superOptions);\n        /**\n         * @type {function(SourceType, SourceOptions, (Asset|Link)):(SourceOptions|Promise<SourceOptions>)}\n         * @private\n         */\n        this.getSourceOptions_ = options.getSourceOptions;\n        /**\n         * @type {Array<STAC>|null}\n         * @private\n         */\n        this.children_ = null;\n        /**\n         * @type {Options}\n         * @private\n         */\n        this.childrenOptions_ = options.childrenOptions || {};\n        /**\n         * @type {Array<Asset>|null}\n         * @private\n         */\n        this.assets_ = null;\n        /**\n         * @type {Array<number>}\n         * @private\n         */\n        this.bands_ = [];\n        /**\n         * @type {string|null}\n         * @private\n         */\n        this.crossOrigin_ = options.crossOrigin || null;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.displayFootprint_ = options.displayFootprint === false ? false : true;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.displayGeoTiffByDefault_ = Boolean(options.displayGeoTiffByDefault);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.displayPreview_ = Boolean(options.displayPreview);\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.displayOverview_ = options.displayOverview === false ? false : true;\n        /**\n         * @type {string|boolean|Array<Link|string>}\n         */\n        this.displayWebMapLink_ = options.displayWebMapLink || false;\n        /**\n         * @type {function((Asset|Link)):Promise<string>|string|null}\n         * @private\n         */\n        this.buildTileUrlTemplate_ = options.buildTileUrlTemplate || null;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.useTileLayerAsFallback_ = options.useTileLayerAsFallback || false;\n        /**\n         * @type {Style}\n         * @private\n         */\n        this.boundsStyle_ = options.boundsStyle || defaultBoundsStyle;\n        /**\n         * @type {Style}\n         * @private\n         */\n        this.collectionStyle_ = options.collectionStyle || defaultCollectionStyle;\n        /**\n         * @type {VectorLayer|null}\n         * @private\n         */\n        this.boundsLayer_ = null;\n        /**\n         * @type {boolean}\n         * @private\n         */\n        this.disableMigration_ = options.disableMigration || false;\n        /**\n         * @type {Map|null}\n         * @private\n         */\n        this.map_ = null;\n        /**\n         * @type {Array<string|ErrorEvent>}\n         * @private\n         */\n        this.eventQueue_ = [];\n        if (options.httpRequestFn) {\n            this.fetch_ = options.httpRequestFn;\n        }\n        if (options.data) {\n            try {\n                this.configure_(options.data, options.url, options.children, options.assets, options.bands);\n            }\n            catch (error) {\n                this.handleError_(error);\n            }\n            return;\n        }\n        if (!options.url) {\n            throw new Error('Either url or data must be provided');\n        }\n        this.fetch_(options.url)\n            .then((data) => this.configure_(data, options.url, options.children, options.assets, options.bands))\n            .catch((error) => this.handleError_(error));\n    }\n    /**\n     * Default function make HTTP requests with.\n     *\n     * @param {string} url The URL to request and the output is a promise that resolves with the response body.\n     * @param {string} responseType The return type, either `json` (default) or `text`.\n     * @return {Promise<*>} The (parsed) response body.\n     */\n    async fetch_(url, responseType = 'json') {\n        const response = await fetch(url);\n        if (!response.ok) {\n            throw new Error(`Unexpected response from ${url}: ${response.status}`);\n        }\n        if (responseType === 'json') {\n            return await response.json();\n        }\n        if (responseType === 'text') {\n            return await response.text();\n        }\n        return null;\n    }\n    /**\n     * Returns the vector layer that visualizes the bounds / footprint.\n     * @return {VectorLayer|null} The vector layer for the bounds\n     * @api\n     */\n    getBoundsLayer() {\n        return this.boundsLayer_;\n    }\n    /**\n     * Returns `true` if the layer shows nothing.\n     *\n     * This method should be called after the layersready event only.\n     *\n     * @return {boolean} Is the layer empty?\n     * @api\n     */\n    isEmpty() {\n        var _a;\n        const count = this.getLayers().getLength();\n        if (count > 1) {\n            return false;\n        }\n        const bbox = (_a = this.getData()) === null || _a === void 0 ? void 0 : _a.getBoundingBox();\n        if (!bbox || isEmpty(bbox)) {\n            return true;\n        }\n        return !this.boundsLayer_ || !this.displayFootprint_;\n    }\n    /**\n     * @param {Error} error The error.\n     * @private\n     */\n    handleError_(error) {\n        /**\n         * Error event.\n         *\n         * @event ErorEvent#event:error\n         * @type {Object}\n         * @property {Error} error - Provides the original error.\n         */\n        this.dispatch_(new ErrorEvent(error));\n    }\n    /**\n     * @param {STAC|Asset|Object} data The STAC data.\n     * @param {string} url The url to the data.\n     * @param {ItemCollection|Object|Array<STAC>|string|null} children The child STAC entities to show.\n     * @param {Array<Asset|string>|null} assets The assets to show.\n     * @param {Array<number>} bands The (one-based) bands to show.\n     * @private\n     */\n    configure_(data, url = null, children = null, assets = null, bands = []) {\n        let stac;\n        if (data instanceof Asset || data instanceof STAC) {\n            stac = data;\n        }\n        else {\n            stac = create(data, !this.disableMigration_);\n            if (url && url.includes('://')) {\n                stac.setAbsoluteUrl(url);\n            }\n        }\n        this.set('stac', stac);\n        this.bands_ = bands;\n        this.boundsLayer_ = this.addFootprint_();\n        const updateBoundsStyle = () => {\n            if (this.boundsLayer_) {\n                this.boundsLayer_.setStyle(getBoundsStyle(this.boundsStyle_, this));\n            }\n        };\n        this.getLayers().on('add', updateBoundsStyle);\n        this.getLayers().on('remove', updateBoundsStyle);\n        const errorHandler = (error) => this.handleError_(error);\n        const promises = [];\n        if (children) {\n            promises.push(this.setChildren(children).catch(errorHandler));\n        }\n        if (assets) {\n            promises.push(this.setAssets(assets).catch(errorHandler));\n        }\n        if (promises.length === 0) {\n            promises.push(this.updateLayers_().catch(errorHandler));\n        }\n        Promise.all(promises).then(() => {\n            /**\n             * Invoked once all layers are shown on the map.\n             *\n             * @event layersready\n             */\n            return this.dispatch_('layersready');\n        });\n        /**\n         * Invoked once the STAC entity is loaded and available.\n         *\n         * @event sourceready\n         */\n        this.dispatch_('sourceready');\n    }\n    /**\n     * Dispatch an event.\n     * Move it to the queue if the map is not yet set.\n     * This is necessary as otherwise some events would be\n     * dispatched before someone could listen to them.\n     *\n     * @param {string|ErrorEvent} event The event.\n     * @private\n     */\n    dispatch_(event) {\n        this.eventQueue_.push(event);\n        this.flush_();\n    }\n    /**\n     * Flush all events.\n     * @private\n     */\n    flush_() {\n        if (this.map_) {\n            for (const event of this.eventQueue_) {\n                this.dispatchEvent(event);\n            }\n            this.eventQueue_ = [];\n        }\n    }\n    /**\n     * Set the map and flush all events.\n     * The events should only be flushed once the map is set, otherwise some\n     * functions such as getExtent() return no meaningul values.\n     *\n     * @param {Map} map The map\n     */\n    setMap_(map) {\n        if (this.map_ === map) {\n            return;\n        }\n        this.map_ = map;\n        this.flush_();\n    }\n    /**\n     * @param {Array<STAC>} collection The list of STAC entities to show.\n     * @param {Options} [options] Options for the children.\n     * @return {Promise} Resolves when complete.\n     * @private\n     */\n    async addChildren_(collection, options = {}) {\n        const promises = collection.map((obj) => {\n            const defaultOptions = {\n                data: obj,\n                crossOrigin: this.crossOrigin_,\n                boundsStyle: this.collectionStyle_,\n                displayGeoTiffByDefault: this.displayGeoTiffByDefault_,\n                displayOverview: this.displayOverview_,\n                displayPreview: this.displayPreview_,\n                displayFootprint: this.displayFootprint_,\n                useTileLayerAsFallback: this.useTileLayerAsFallback_,\n                buildTileUrlTemplate: this.buildTileUrlTemplate_,\n            };\n            const subgroup = new STACLayer(Object.assign(defaultOptions, options));\n            // If no data is given, but items are provided, then we don't get a map from the\n            // footprint layer so we need to get it from this new STAC Layer so that extent\n            // calculations etc. work.\n            // @ts-ignore\n            subgroup.on('sourceready', () => {\n                if (subgroup.map_) {\n                    this.setMap_(subgroup.map_);\n                }\n            });\n            this.addLayer_(subgroup, null);\n            return subgroup;\n        });\n        return await Promise.all(promises);\n    }\n    /**\n     * @param {Asset|Link} [image] A STAC Link or Asset\n     * @return {Promise<ImageLayer|undefined>} Resolves with am ImageLayer or udnefined when complete.\n     * @private\n     */\n    async addPreviewImage_(image) {\n        const projection = await getProjection(image, 'EPSG:4326');\n        const bboxes = image.getContext().getBoundingBoxes();\n        if (bboxes.length !== 1) {\n            return;\n        }\n        const bbox = bboxes[0];\n        /**\n         * @type {import(\"ol/source/ImageStatic.js\").Options}\n         */\n        let options = {\n            url: image.getAbsoluteUrl(),\n            projection,\n            imageExtent: transformExtent(bbox, 'EPSG:4326', projection),\n            crossOrigin: this.crossOrigin_,\n        };\n        if (this.getSourceOptions_) {\n            // @ts-ignore\n            options = await this.getSourceOptions_(SourceType.ImageStatic, options, image);\n        }\n        const layer = new ImageLayer({\n            source: new StaticImage(options),\n        });\n        this.addLayer_(layer, image);\n        return layer;\n    }\n    /**\n     * Adds a layer for a link that implements the web-map-links extension.\n     * Supports: PMTiles, TileJSON, WMS, WMTS, XYZ\n     * @see https://github.com/stac-extensions/web-map-links\n     * @param {Link} link A web map link\n     * @return {Promise<Array<Layer>|undefined>} Resolves with a list of layers or undefined when complete.\n     * @api\n     */\n    async addLayerForLink(link) {\n        // Replace any occurances of {s} if possible, otherwise return\n        const url = getSpecificWebMapUrl(link);\n        if (!url) {\n            return;\n        }\n        const options = {\n            attributions: link.getMetadata('attribution') ||\n                this.getData().getMetadata('attribution'),\n            crossOrigin: this.crossOrigin_,\n            url,\n        };\n        const updateOptions = async (type, options) => {\n            if (this.getSourceOptions_) {\n                options = await this.getSourceOptions_(type, options, link);\n            }\n            return options;\n        };\n        const sources = [];\n        switch (link.rel) {\n            case 'pmtiles':\n                const p = new pmtiles.PMTiles(options.url);\n                const headers = await p.getHeader();\n                let source;\n                switch (headers.tileType) {\n                    case pmtiles.TileType.Mvt:\n                        source = new PMTilesVectorSource(await updateOptions(SourceType.PMTilesVector, options));\n                        break;\n                    case pmtiles.TileType.Avif:\n                    case pmtiles.TileType.Jpeg:\n                    case pmtiles.TileType.Png:\n                    case pmtiles.TileType.Webp:\n                        source = new PMTilesRasterSource(await updateOptions(SourceType.PMTilesRaster, options));\n                        break;\n                    default:\n                        return; // Unsupported\n                }\n                sources.push(source);\n                break;\n            case 'tilejson':\n                sources.push(new TileJSON(await updateOptions(SourceType.TileJSON, options)));\n                break;\n            case 'wms':\n                if (!Array.isArray(link['wms:layers'])) {\n                    break;\n                }\n                for (const i in link['wms:layers']) {\n                    const layers = link['wms:layers'][i] || '';\n                    let styles = '';\n                    if (Array.isArray(link['wms:styles']) &&\n                        typeof link['wms:styles'][i] === 'string') {\n                        styles = link['wms:styles'][i];\n                    }\n                    const params = Object.assign({\n                        LAYERS: layers,\n                        STYLES: styles,\n                    }, link['wms:dimensions']);\n                    if (typeof link['wms:transparent'] === 'boolean') {\n                        params.TRANSPARENT = String(link['wms:transparent']);\n                    }\n                    if (typeof link['type'] === 'string' &&\n                        link['type'].startsWith('image/')) {\n                        params.FORMAT = link['type'];\n                    }\n                    const wmsOptions = await updateOptions(SourceType.TileWMS, Object.assign({}, options, { params }));\n                    sources.push(new WMS(wmsOptions));\n                }\n                break;\n            case 'wmts':\n                const wmtsCapabilities = await this.getWmtsCapabilities_(url);\n                if (!wmtsCapabilities) {\n                    return;\n                }\n                let layers = [];\n                if (Array.isArray(link['wmts:layer'])) {\n                    layers = link['wmts:layer'];\n                }\n                else if (typeof link['wmts:layer'] === 'string') {\n                    layers = [link['wmts:layer']];\n                }\n                for (const layer of layers) {\n                    let wmtsOptions = Object.assign({}, options, { layer });\n                    if (typeof link['type'] === 'string' &&\n                        link['type'].startsWith('image/')) {\n                        wmtsOptions.format = link['type'];\n                    }\n                    wmtsOptions = await updateOptions(SourceType.WMTS, wmtsOptions);\n                    const opts = optionsFromCapabilities(wmtsCapabilities, wmtsOptions);\n                    if (opts !== null) {\n                        sources.push(new WMTS(opts));\n                    }\n                }\n                break;\n            case 'xyz':\n                sources.push(new XYZ(await updateOptions(SourceType.XYZ, options)));\n                break;\n            default:\n                return;\n        }\n        return sources.map((source) => {\n            let layer;\n            if (source instanceof VectorTileSource) {\n                layer = new VectorTileLayer({\n                    source,\n                    declutter: true,\n                });\n            }\n            else if (source instanceof PMTilesRasterSource) {\n                layer = new WebGLTileLayer({ source });\n            }\n            else {\n                layer = new TileLayer({ source });\n            }\n            this.addLayer_(layer, link);\n            return layer;\n        });\n    }\n    /**\n     * @param {Asset} [asset] A STAC Asset\n     * @return {Promise<Layer|undefined>} Resolves with a Layer or undefined when complete.\n     * @private\n     */\n    async addGeoTiff_(asset) {\n        if (this.buildTileUrlTemplate_ && !this.useTileLayerAsFallback_) {\n            return await this.addTileLayerForImagery_(asset);\n        }\n        const sourceInfo = getGeoTiffSourceInfoFromAsset(asset, this.bands_);\n        /**\n         * @type {import(\"ol/source/GeoTIFF.js\").Options}\n         */\n        let options = {\n            sources: [sourceInfo],\n            convertToRGB: 'auto',\n        };\n        const projection = await getProjection(asset);\n        if (projection) {\n            options.projection = projection;\n        }\n        if (this.getSourceOptions_) {\n            // @ts-ignore\n            options = await this.getSourceOptions_(SourceType.GeoTIFF, options, asset);\n        }\n        const source = new GeoTIFF(options);\n        const status = new Promise((resolve, reject) => {\n            source.on('error', reject);\n            source.on('change', () => {\n                // see https://github.com/openlayers/openlayers/issues/14926\n                if (source.getState() === 'error') {\n                    reject(source.getError());\n                }\n                else {\n                    resolve();\n                }\n            });\n        });\n        try {\n            await status;\n            const layer = new WebGLTileLayer({ source });\n            this.addLayer_(layer, asset);\n            return layer;\n        }\n        catch (error) {\n            if (this.useTileLayerAsFallback_) {\n                return await this.addTileLayerForImagery_(asset);\n            }\n            this.handleError_(error);\n        }\n    }\n    /**\n     * @param {Asset|Link} [data] A STAC Asset or Link\n     * @return {Promise<TileLayer>} Resolves with a TileLayer when complete.\n     * @private\n     */\n    async addTileLayerForImagery_(data) {\n        let url = this.buildTileUrlTemplate_(data);\n        if (url instanceof Promise) {\n            url = await url;\n        }\n        /**\n         * @type {import(\"ol/source/XYZ.js\").Options}\n         */\n        let options = {\n            crossOrigin: this.crossOrigin_,\n            url,\n        };\n        if (this.getSourceOptions_) {\n            options = await this.getSourceOptions_(SourceType.XYZ, options, data);\n        }\n        const layer = new TileLayer({\n            source: new XYZ(options),\n        });\n        this.addLayer_(layer, data);\n        return layer;\n    }\n    /**\n     * @param {Layer|LayerGroup} [layer] A Layer to add to the LayerGroup\n     * @param {import(\"stac-js\").STACObject} [data] The STAC object, can be any class exposed by stac-js\n     * @param {number} [zIndex=0] The z-index for the layer\n     * @private\n     */\n    addLayer_(layer, data = null, zIndex = 0) {\n        if (data) {\n            layer.set('stac', data);\n        }\n        layer.setZIndex(zIndex);\n        this.getLayers().push(layer);\n    }\n    /**\n     * @return {VectorLayer|null} The vector layer showing the geometry/bbox.\n     * @private\n     */\n    addFootprint_() {\n        let geojson = null;\n        const data = this.getData();\n        if (data.isItemCollection() || data.isCollectionCollection()) {\n            geojson = toGeoJSON(data.getBoundingBox());\n        }\n        else {\n            geojson = data.toGeoJSON();\n        }\n        if (geojson) {\n            const layer = this.createGeoJsonLayer_(geojson, getBoundsStyle(this.boundsStyle_, this), this.displayFootprint_);\n            layer.set('bounds', true);\n            layer.on('change', () => this.setMap_(layer.getMapInternal()));\n            this.addLayer_(layer, data, 1);\n            return layer;\n        }\n        return null;\n    }\n    /**\n     * @param {Asset} [asset] A STAC Asset\n     * @return {Promise<Layer|undefined>} Resolves with a Layer or undefined when complete.\n     * @private\n     */\n    async addGeoJson_(asset) {\n        try {\n            const geojson = await this.fetch_(asset.getAbsoluteUrl());\n            const layer = this.createGeoJsonLayer_(geojson);\n            this.addLayer_(layer, asset);\n            return layer;\n        }\n        catch (error) {\n            this.handleError_(error);\n        }\n    }\n    /**\n     * Creates a GeoJSON vector layer from the given GeoJSON object.\n     *\n     * @param {GeoJSON} [geojson] The GeoJSON object.\n     * @param {Style} [style] The style for the layer.\n     * @param {boolean} [visible] Whether the layer is visible.\n     * @return {VectorLayer} The new vector layer.\n     * @private\n     */\n    createGeoJsonLayer_(geojson, style = null, visible = true) {\n        const format = new GeoJSON();\n        const source = new VectorSource({\n            format,\n            loader: (extent, resolution, projection) => {\n                geojson = fixGeoJson(geojson);\n                const features = format.readFeatures(geojson, {\n                    featureProjection: projection,\n                });\n                source.addFeatures(features);\n            },\n        });\n        if (!style) {\n            style = defaultCollectionStyle;\n        }\n        return new VectorLayer({ source, style, visible });\n    }\n    /**\n     * Adds GeoJSON labels and GeoTIFF source imagery to the map based on the label extension.\n     *\n     * @return {Promise<Layer|undefined>} The layer added to the map.\n     * @private\n     */\n    async addLabelExtension_() {\n        const data = this.getData();\n        if (!(data instanceof Item)) {\n            return;\n        }\n        // determine the asset with the geojson labels\n        let assets = data.getAssetsWithRoles(['labels', 'labels-vector'], true);\n        let labelAsset;\n        if (assets.length > 1) {\n            labelAsset = assets.find((asset) => asset.roles.includes('labels-vector'));\n        }\n        if (!labelAsset) {\n            labelAsset = data.getAsset('vector_labels');\n        }\n        if (!labelAsset) {\n            assets = data\n                .getAssets()\n                .filter((asset) => asset.type === geojsonMediaType && !asset.roles);\n            if (assets.length === 1) {\n                labelAsset = assets[0];\n            }\n        }\n        // Add the source imagery\n        const sourceLinks = data.getLinksWithRels(['source']);\n        if (labelAsset && sourceLinks.length > 0) {\n            const promises = sourceLinks.map(async (link) => {\n                try {\n                    const response = await this.fetch_(link.getAbsoluteUrl());\n                    const stac = create(response);\n                    return stac;\n                }\n                catch (error) {\n                    this.handleError_(error);\n                    return null;\n                }\n            });\n            const items = (await Promise.all(promises)).filter((item) => item instanceof STAC);\n            await this.addChildren_(items, { displayFootprint: false });\n        }\n        // Add the GeoJSON labels\n        try {\n            await this.addGeoJson_(labelAsset);\n        }\n        catch (error) {\n            this.handleError_(error);\n        }\n    }\n    /**\n     * @private\n     */\n    async updateLayers_() {\n        // Remove old layers\n        const oldLayers = this.getLayers();\n        for (let i = oldLayers.getLength() - 1; i >= 0; i--) {\n            const layer = oldLayers.item(i);\n            if (layer.get('stac') && !layer.get('bounds')) {\n                oldLayers.removeAt(i);\n            }\n        }\n        // Add layers by priority\n        const data = this.getData();\n        // Show the web map links provided by the user\n        if (Array.isArray(this.displayWebMapLink_)) {\n            const promises = this.getWebMapLinks().map(async (link) => await this.addLayerForLink(link));\n            await Promise.all(promises);\n        }\n        // Show children if provided\n        if (this.children_) {\n            await this.addChildren_(this.children_, this.childrenOptions_);\n        }\n        // Show the assets provided by the user\n        const assets = this.getAssets();\n        if (assets) {\n            const promises = assets.map(async (ref) => {\n                if (!ref) {\n                    return;\n                }\n                if (ref.type === geojsonMediaType) {\n                    return await this.addGeoJson_(ref);\n                }\n                if (ref.isGeoTIFF()) {\n                    return await this.addGeoTiff_(ref);\n                }\n                if (ref.canBrowserDisplayImage()) {\n                    return await this.addPreviewImage_(ref);\n                }\n            });\n            await Promise.all(promises);\n        }\n        // If the user didn't provide any specific asset/map link/children to show,\n        // choose a sensible default visualization\n        if (this.hasOnlyBounds()) {\n            // Show the ItemCollection/CollectionCollection entries\n            if (data instanceof APICollection) {\n                await this.addChildren_(data.getAll(), this.childrenOptions_);\n            }\n            else if (data instanceof STAC) {\n                // Show label extension\n                if (data.isItem() &&\n                    data.supportsExtension(LABEL_EXTENSION) &&\n                    data.getMetadata('label:type') === 'vector') {\n                    await this.addLabelExtension_();\n                    return;\n                }\n                // Show web map links\n                const links = this.getWebMapLinks();\n                if (links.length > 0) {\n                    await this.addLayerForLink(links[0]);\n                }\n                else {\n                    // Find an asset that we can visualize\n                    const geotiff = data.getDefaultGeoTIFF(true, !this.displayGeoTiffByDefault_);\n                    let layer;\n                    // Try to visualize the default GeoTIFF first\n                    if (geotiff && this.displayOverview_) {\n                        layer = await this.addGeoTiff_(geotiff);\n                    }\n                    // If no GeoTIFF is available or it can't be shown (e.g. error),\n                    // try to visualize the default thumbnail\n                    if (this.displayPreview_ && (!geotiff || !layer)) {\n                        // This may return Links or Assets\n                        const thumbnails = data.getThumbnails(true, 'overview');\n                        if (thumbnails.length > 0) {\n                            await this.addPreviewImage_(thumbnails[0]);\n                        }\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Indicates whether the LayerGroup shows only the bounds layer (i.e. no imagery/tile layers).\n     * @return {boolean} `true` if only the bounds layer is shown, `false` otherwise.\n     * @api\n     */\n    hasOnlyBounds() {\n        const boundsLayer = this.getBoundsLayer();\n        const imgLayer = this.getLayersArray().find((layer) => layer !== boundsLayer);\n        return typeof imgLayer === 'undefined';\n    }\n    /**\n     * Returns all potential web map links based on the given value for `displayWebMapLink`.\n     * @return {Array<Link>} An array of links.\n     * @api\n     */\n    getWebMapLinks() {\n        const data = this.getData();\n        if (data instanceof Asset) {\n            return [];\n        }\n        let types = ['xyz', 'tilejson', 'pmtiles', 'wmts', 'wms']; // This also defines the priority\n        if (typeof this.displayWebMapLink_ === 'string') {\n            types = [this.displayWebMapLink_];\n        }\n        let mapLinks = data.getLinksWithRels(types);\n        if (Array.isArray(this.displayWebMapLink_)) {\n            mapLinks = this.displayWebMapLink_\n                .map((link) => {\n                if (typeof link === 'string') {\n                    const match = mapLinks.find((candidate) => candidate.id === link);\n                    if (match) {\n                        return match;\n                    }\n                    return null;\n                }\n                return link;\n            })\n                .filter((link) => !!link);\n        }\n        else {\n            mapLinks.sort((a, b) => {\n                const prioA = types.indexOf(a.rel);\n                const prioB = types.indexOf(b.rel);\n                return prioA - prioB;\n            });\n        }\n        return mapLinks;\n    }\n    /**\n     * Update the assets to be rendered.\n     * @param {Array<string|Asset>|null} assets The assets to show.\n     * @return {Promise} Resolves when all assets are rendered.\n     * @api\n     */\n    async setAssets(assets) {\n        if (assets === this.assets_) {\n            return;\n        }\n        if (Array.isArray(assets)) {\n            const data = this.getData();\n            this.assets_ = assets.map((asset) => {\n                if (data instanceof STAC && typeof asset === 'string') {\n                    return data.getAsset(asset);\n                }\n                if (!(asset instanceof Asset)) {\n                    return new Asset(asset);\n                }\n                return asset;\n            });\n        }\n        else {\n            this.assets_ = null;\n        }\n        await this.updateLayers_();\n    }\n    /**\n     * Updates the children STAC entities to be rendered.\n     *\n     * If an object is passed, it must be a GeoJSON FeatureCollection.\n     *\n     * @param {ItemCollection|Object|Array<STAC|Object>|null} childs The children to show.\n     * @param {Options|null} [options=null] Optionally, new STACLayer options for the children. Only applies if `children` are given.\n     * @return {Promise} Resolves when all items are rendered.\n     * @api\n     */\n    async setChildren(childs, options = null) {\n        if (childs instanceof ItemCollection) {\n            this.children_ = childs.getAll();\n        }\n        else if (isObject(childs) && childs.type === 'FeatureCollection') {\n            this.children_ = create(childs, !this.disableMigration_).getAll();\n        }\n        else if (Array.isArray(childs)) {\n            this.children_ = childs.map((child) => {\n                if (child instanceof STAC) {\n                    return child;\n                }\n                return create(child, !this.disableMigration_);\n            });\n        }\n        else {\n            this.children_ = null; // Invalid input\n        }\n        if (this.children_ && this.children_.length === 0) {\n            this.children_ = null;\n        }\n        if (this.children_ && isObject(options)) {\n            this.childrenOptions_ = options;\n        }\n        await this.updateLayers_();\n    }\n    /**\n     * Get the STAC object.\n     *\n     * @return {STAC|Asset} The STAC object.\n     * @api\n     */\n    getData() {\n        return this.get('stac');\n    }\n    /**\n     * Get the children STAC entities.\n     *\n     * @return {Array<STAC>} The STAC child entities.\n     * @api\n     */\n    getChildren() {\n        return this.children_;\n    }\n    /**\n     * Get the STAC assets shown.\n     *\n     * @return {Array<Asset>} The STAC assets.\n     * @api\n     */\n    getAssets() {\n        return this.assets_;\n    }\n    /**\n     * Get the extent of the layer.\n     * If `displayFootprint` is set to `false`, the extent is always returned in\n     * EPSG:4326 instead of the map projection. Make sure to transform it with the\n     * ol.proj.transformExtent function if needed.\n     *\n     * @return {Extent|undefined} The layer extent.\n     * @api\n     */\n    getExtent() {\n        if (!this.map_) {\n            return;\n        }\n        const view = this.map_.getView();\n        if (!view) {\n            return;\n        }\n        // todo: In general it might be better to get the actual extent of the layers/sources.\n        // Unfortunately, the extent is requested before it is available\n        // at least for the footprint layer due to the use of the GeoJSON loader.\n        // So we stick to the bounding box of the STAC entity for now,\n        // which sometimes is too small.\n        // See https://github.com/radiantearth/stac-browser/issues/634 for details.\n        let bbox;\n        const data = this.getData();\n        if (data) {\n            bbox = data.getBoundingBox();\n        }\n        const items = this.getChildren();\n        if (items) {\n            const bboxes = items.map((item) => item.getBoundingBox());\n            bbox = unionBoundingBox(bboxes);\n        }\n        if (bbox) {\n            return transformExtent(bbox, 'EPSG:4326', view.getProjection());\n        }\n    }\n    getLayerState() {\n        const state = super.getLayerState();\n        // Fixes the issue that the view is clipped based on the extent of the layer.\n        // The extent is usually the bbox, but sometimes there are even items outside of the bbox.\n        // See https://github.com/radiantearth/stac-browser/issues/634 for details.\n        state.extent = undefined;\n        return state;\n    }\n    /**\n     * Get the attributions of the STAC entity assigned to this layer.\n     *\n     * @return {Array<string>} Attributions for this layer.\n     * @api\n     */\n    getAttributions() {\n        const attribution = [];\n        const stac = this.getData();\n        if (stac) {\n            const attribution = stac.getMetadata('attribution');\n            if (attribution) {\n                attribution.push(attribution);\n            }\n        }\n        return attribution;\n    }\n    /**\n     * Get the layer source.\n     * @return {SourceType|null} The layer source (or `null` if not yet set).\n     */\n    getSource() {\n        return null;\n    }\n    /**\n     * Gets the WMTS capabilities from the given web-map-links URL.\n     * @param {string} url Base URL for the WMTS\n     * @return {Promise<Object|null>} Resolves with the WMTS Capabilities object\n     * @private\n     */\n    async getWmtsCapabilities_(url) {\n        try {\n            const urlObj = new URL(url);\n            urlObj.searchParams.set('service', 'wmts');\n            urlObj.searchParams.set('request', 'GetCapabilities');\n            const response = await this.fetch_(urlObj.toString(), 'text');\n            return new WMTSCapabilities().read(response);\n        }\n        catch (error) {\n            return null;\n        }\n    }\n}\nexport default STACLayer;\n//# sourceMappingURL=STAC.js.map","<template>\n  <div class=\"map-container\">\n    <div ref=\"map\" class=\"map\" :id=\"mapId\">\n      <!-- this will be filled by OpenLayers -->\n      <LayerControl :map=\"map\" />\n      <TextControl v-if=\"empty\" :map=\"map\" :text=\"$t('mapping.nodata')\" />\n      <TextControl v-else-if=\"!hasBasemap\" :map=\"map\" :text=\"$t('mapping.nobasemap')\" />\n    </div>\n    <div ref=\"target\" class=\"popover-target\" />\n    <b-popover\n      v-if=\"popover && selectedItems\" show placement=\"auto\" triggers=\"manual\"\n      :target=\"selectedItems.target\" :container=\"container\"\n    >\n      <section class=\"popover-items\">\n        <Items :stac=\"stac\" :items=\"selectedItems.items\" />\n      </section>\n      <div class=\"text-center\">\n        <b-button target=\"_blank\" variant=\"danger\" @click=\"resetSelectedItems\">{{ $t('mapping.close') }}</b-button>\n      </div>\n    </b-popover>\n  </div>\n</template>\n\n<script>\nimport MapMixin from './maps/MapMixin.js';\nimport LayerControl from './maps/LayerControl.vue';\nimport TextControl from './maps/TextControl.vue';\nimport { mapGetters } from 'vuex';\nimport { BPopover } from 'bootstrap-vue';\nimport Select from 'ol/interaction/Select';\nimport StacLayer from 'ol-stac';\nimport { getStacObjectsForEvent, getStyle } from 'ol-stac/util.js';\n\nconst selectStyle = getStyle('#ff0000', 2, null);\nlet mapId = 0;\n\nexport default {\n  name: 'Map',\n  components: {\n    BPopover,\n    Items: () => import('../components/Items.vue'),\n    LayerControl,\n    TextControl\n  },\n  mixins: [\n    MapMixin\n  ],\n  props: {\n    stac: {\n      type: Object,\n      default: null\n    },\n    assets: {\n      type: Array,\n      default: null\n    },\n    items: {\n      type: Object,\n      default: null\n    },\n    onfocusOnly: {\n      type: Boolean,\n      default: false\n    },\n    popover: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      stacLayer: null,\n      selectedItems: null,\n      empty: false,\n      selector: null,\n      mapId: `map-${++mapId}`,\n    };\n  },\n  computed: {\n    ...mapGetters(['getStac']),\n    container() {\n      if (this.isFullScreen) {\n        return '#' + this.mapId;\n      }\n      else {\n        return '#stac-browser';\n      }\n    },\n  },\n  watch: {\n    async stac() {\n      await this.showStacLayer();\n    },\n    async assets() {\n      if (!this.stacLayer) {\n        return;\n      }\n      await this.stacLayer.setAssets(this.assets);\n    },\n    async items() {\n      if (!this.stacLayer) {\n        return;\n      }\n      await this.stacLayer.setAssets(null);\n      await this.stacLayer.setChildren(this.items, {displayPreview: true});\n      this.fit();\n    },\n    empty(empty) {\n      if (empty) {\n        this.$emit('empty');\n      }\n    },\n    selectedItems(selectedItems) {\n      if (!selectedItems && this.selector) {\n        this.selector.getFeatures().clear();\n      }\n    }\n  },\n  async mounted() {\n    await this.showStacLayer();\n  },\n  methods: {\n    async showStacLayer() {\n      this.map = null;\n      this.stacLayer = null;\n\n      await this.createMap(this.$refs.map, this.stac, this.onfocusOnly);\n\n      if (this.stac) {\n        await this.addStacLayer();\n      }\n    },\n    async addStacLayer() {\n      let options = Object.assign({}, this.stacLayerOptions, {\n        // Don't set the URL here, as it is already set in the STAC object and is read-only.\n        // url: this.stac.getAbsoluteUrl(),\n        data: this.stac,\n        children: this.items,\n        assets: this.assets || null,\n        displayWebMapLink: true,\n        disableMigration: true,\n      });\n      this.stacLayer = new StacLayer(options);\n      this.stacLayer.on('error', error => {\n        console.warn(error);\n        this.fit();\n      });\n      this.stacLayer.on('sourceready', this.fit);\n      this.stacLayer.on('layersready', () => {\n        this.empty = this.stacLayer.isEmpty();\n        this.$emit('assets', this.stacLayer.getAssets());\n      });\n      this.map.addLayer(this.stacLayer);\n\n      if (this.popover) {\n        this.selector = new Select({\n          toggleCondition: () => false, // Only add features manually\n          condition: () => false, // Only add features manually\n          style: selectStyle\n        });\n        this.map.addInteraction(this.selector);\n        this.map.on('singleclick', async (event) => {\n          // The event doesn't contain a target element for the popover to attach to.\n          // Thus we move a hidden target element to the click position and attach the popover to it.\n          // See also https://github.com/bootstrap-vue/bootstrap-vue/issues/5285\n          this.$refs.target.style.left = event.pixel[0] + 'px';\n          this.$refs.target.style.top = event.pixel[1] + 'px';\n\n          this.selector.getFeatures().clear();\n          const features = this.selector.getFeatures();\n          const container = this.stacLayer.getData();\n          const objects = await getStacObjectsForEvent(event, container, features, 5);\n          if (objects.length > 0) {\n            this.selectedItems = {\n              target: this.$refs.target,\n              items: objects\n            };\n          }\n          else {\n            this.selectedItems = null;\n          }\n        });\n        this.map.on('change', () => this.selectedItems = null);\n        this.map.on('movestart', () => this.selectedItems = null);\n      }\n    },\n    fit() {\n      const extent = this.stacLayer.getExtent();\n      if (extent) {\n        // Update the sizes, otherwise the fit will not work properly and compute a wrong zoom level\n        this.map.updateSize();\n        this.map.getView().fit(extent, { padding: [50,50,50,50] });\n      }\n    },\n    resetSelectedItems() {\n      this.selectedItems = null;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../../node_modules/ol/ol.css\";\n\n#stac-browser {\n  .popover-target {\n    width: 1px;\n    height: 1px;\n    opacity: 0;\n    position: absolute;\n    top: -1px;\n    left: -1px;\n  }\n  \n  .popover-items {\n    max-height: 500px;\n    overflow: auto;\n    margin-top: -0.5rem;\n    margin-left: -0.75rem;\n    margin-right: -0.75rem;\n    padding: 0.5rem 0.75rem 0  0.75rem;\n\n    .items {\n      margin-bottom: 0 !important;\n    }\n\n    .card-columns {\n      column-count: 1;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=0f56fcd6\"\nimport script from \"./Map.vue?vue&type=script&lang=js\"\nexport * from \"./Map.vue?vue&type=script&lang=js\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&id=0f56fcd6&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["TileJSON","constructor","options","super","attributions","cacheSize","crossOrigin","interpolate","projection","reprojectionErrorThreshold","state","tileLoadFunction","wrapX","undefined","transition","zDirection","this","tileJSON_","tileSize_","tileSize","url","jsonp","handleTileJSONResponse","bind","handleTileJSONError","client","XMLHttpRequest","addEventListener","onXHRLoad_","onXHRError_","open","send","tileJSON","Error","event","status","response","JSON","parse","responseText","getTileJSON","epsg4326Projection","sourceProjection","getProjection","extent","transform","gridExtent","minZoom","maxZoom","tileGrid","tileUrlFunction","getAttributions","attributionExtent","setAttributions","frameState","setState","TileLayer","createRenderer","getCacheSize","createLoader","load","imageExtent","image","Image","then","resolutionX","width","resolutionY","height","resolution","pixelRatio","ImageLayer","getData","pixel","Static","imageLoadFunction","defaultImageLoadFunction","url_","imageExtent_","src","setImage","CHANGE","handleImageChange","getImageExtent","getImageInternal","getExtent","getUrl","CanvasImageLayerRenderer","imageLayer","getImage","prepareFrame","layerState","layerStatesArray","layerIndex","viewState","viewResolution","imageSource","getLayer","getSource","hints","viewHints","renderedExtent","ANIMATING","INTERACTING","loadImage","getState","EMPTY","layer","coordinate","pixelToCoordinateTransform","slice","layerExtent","img","imageMapWidth","col","Math","floor","imageMapHeight","row","getImageData","renderFrame","target","imageResolution","getResolution","imageResolutionX","imageResolutionY","Array","isArray","imagePixelRatio","getPixelRatio","viewCenter","center","scaleX","scaleY","prepareContainer","context","canvas","getRenderContext","clipped","render","clipUnrotated","tempTransform","renderedResolution","dw","dh","getInterpolate","imageSmoothingEnabled","preRender","dx","dy","opacity","save","globalAlpha","drawImage","restore","postRender","container","BaseImageLayer","callback","errback","callbackParam","script","document","createElement","key","cleanup","window","parentNode","removeChild","async","includes","timer","setTimeout","data","clearTimeout","head","appendChild","ResponseError","message","name","ClientError","getJSON","Promise","resolve","reject","onLoad","err","onError","setRequestHeader","resolveUrl","base","URL","href","TileWMS","params","Object","assign","attributionsCollapsible","tileClass","urls","gutter_","gutter","params_","v13_","serverType_","serverType","hidpi_","hidpi","tmpExtent_","updateV13_","setKey","getKeyForParams_","getFeatureInfoUrl","projectionObj","sourceProjectionObj","getTileGrid","getTileGridForProjection","sourceProjCoord","sourceResolution","z","getZForResolution","tileResolution","tileCoord","getTileCoordForCoordAndZ","getResolutions","length","tileExtent","getTileCoordExtent","baseParams","getRequestParams","x","y","getRequestUrl_","getLegendUrl","DEFAULT_VERSION","layers","LAYERS","isSingleLayer","mpu","getMetersPerUnit","pixelSize","getGutter","getParams","index","getImageSrc","getTilePixelRatio","i","res","join","setParams_","setParams","updateParams","version","_vm","_c","_self","staticClass","ref","attrs","mapId","map","empty","$t","hasBasemap","_e","popover","selectedItems","stac","items","on","resetSelectedItems","_v","_s","staticRenderFns","SelectEventType","SELECT","SelectEvent","Event","type","selected","deselected","mapBrowserEvent","originalFeatureStyles","Select","Interaction","layerFilter","once","un","boundAddFeature_","addFeature_","boundRemoveFeature_","removeFeature_","condition_","condition","addCondition_","addCondition","removeCondition_","removeCondition","toggleCondition_","toggleCondition","multi_","multi","filter_","filter","hitTolerance_","hitTolerance","style_","style","getDefaultStyleFunction","features_","features","Collection","layerFilter_","featureLayerAssociation_","addFeatureLayerAssociation_","feature","getFeatures","getHitTolerance","setHitTolerance","setMap","currentMap","getMap","forEach","restorePreviousStyle_","CollectionEventType","ADD","REMOVE","applySelectedStyle_","removeEventListener","evt","element","getAllLayers","find","Vector","hasFeature","getStyle","setStyle","interactions","getInteractions","getArray","interaction","lastIndexOf","removeFeatureLayerAssociation_","handleEvent","add","remove","toggle","set","forEachFeatureAtPixel","Feature","push","getLength","item","indexOf","splice","extend","j","dispatchEvent","styles","getGeometry","getType","u8","Uint8Array","u16","Uint16Array","i32","Int32Array","fleb","fdeb","clim","freb","eb","start","b","r","_a","fl","revfl","_b","fd","rev","hMap","cd","mb","s","l","co","le","rvb","sv","r_1","v","m","flt","fdt","max","a","bits","d","p","o","bits16","shft","slc","e","subarray","ec","ind","msg","nt","code","captureStackTrace","inflt","dat","st","buf","dict","sl","dl","f","noBuf","resize","noSt","cbuf","bl","nbuf","final","pos","bt","lm","dm","lbt","dbt","n","tbts","t","flrm","fdrm","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","c","lt","dt","lms","dms","lpos","sym","dsym","end","shift","dend","min","et","gzs","flg","zs","gzl","zls","inflateSync","opts","out","dictionary","gunzipSync","unzlibSync","decompressSync","td","TextDecoder","decode","stream","queueMicrotask","defineProperty","pow","value","configurable","u","next","throw","done","apply","L","GridLayer","createTile","AbortController","signal","cancel","abort","getHeader","tileType","console","error","getZxy","h","Blob","createObjectURL","catch","_removeTile","_tiles","el","deleted","DomUtil","fire","tile","coords","_keyToTileCoords","cacheControl","expires","T","tilev4","substr","tiles","get","metadata","getTileJson","minLon","maxLon","minLat","maxLat","minzoom","maxzoom","bounds","RegExp","match","errorOnMissingTile","Map","source","getKey","w","F","k","N","q","G","ie","J","Unknown","None","Gzip","Brotli","Zstd","D","globalThis","DecompressionStream","Response","body","pipeThrough","arrayBuffer","O","Mvt","Png","Jpeg","Webp","Avif","_","Y","Q","tileId","runLength","A","file","getBytes","Headers","customHeaders","mustReload","navigator","userAgent","test","chromeWindowsNoCache","setHeaders","fetch","cache","headers","startsWith","range","E","etag","U","C","g","getUint32","X","DataView","getUint8","specVersion","rootDirectoryOffset","rootDirectoryLength","jsonMetadataOffset","jsonMetadataLength","leafDirectoryOffset","leafDirectoryLength","tileDataOffset","tileDataLength","numAddressedTiles","numTileEntries","numTileContents","clustered","internalCompression","tileCompression","getInt32","centerZoom","centerLon","centerLat","Z","offset","R","K","getUint16","I","H","maxCacheEntries","counter","decompress","lastUsed","prune","getDirectory","size","delete","invalidate","invalidations","M","P","B","getZxyAttempt","getMetadataAttempt","getMetadata","tilejson","scheme","vector_layers","attribution","description","ErrorEvent","EventType","ERROR","SourceType","toString","GeoTIFF","ImageStatic","PMTilesRaster","PMTilesVector","WMTS","XYZ","createElementNS","namespaceURI","qualifiedName","node","normalizeWhitespace","getAllTextContent_","accumulator","nodeType","Node","CDATA_SECTION_NODE","TEXT_NODE","String","nodeValue","replace","firstChild","nextSibling","isDocument","object","xml","DOMParser","parseFromString","makeArrayPusher","valueReader","thisArg","objectStack","call","array","makeObjectPropertyPusher","property","localName","makeObjectPropertySetter","makeSimpleNodeFactory","fixedNodeName","fixedNamespaceURI","newNodeName","nodeName","makeStructureNS","namespaceURIs","structure","structureNS","ii","parseNode","parsersNS","firstElementChild","nextElementSibling","parsers","parser","pushParseAndPop","pop","document_","implementation","createDocument","XML","read","doc","readFromDocument","readFromNode","ELEMENT_NODE","NAMESPACE_URI","readHref","getAttributeNS","readDecimal","readDecimalString","string","exec","parseFloat","readPositiveInteger","readNonNegativeIntegerString","parseInt","readString","trim","NAMESPACE_URIS","PARSERS","readServiceIdentification","readServiceProvider","readOperationsMetadata","OWS","owsObject","ADDRESS_PARSERS","ALLOWED_VALUES_PARSERS","readValue","CONSTRAINT_PARSERS","readAllowedValues","CONTACT_INFO_PARSERS","readPhone","readAddress","DCP_PARSERS","readHttp","HTTP_PARSERS","readGet","OPERATION_PARSERS","readDcp","OPERATIONS_METADATA_PARSERS","readOperation","PHONE_PARSERS","REQUEST_METHOD_PARSERS","readConstraint","SERVICE_CONTACT_PARSERS","readContactInfo","SERVICE_IDENTIFICATION_PARSERS","SERVICE_PROVIDER_PARSERS","readServiceContact","getAttribute","OWS_NAMESPACE_URIS","readContents","WMTSCapabilities","owsParser_","WMTSCapabilityObject","CONTENTS_PARSERS","readLayer","readTileMatrixSet","LAYER_PARSERS","readStyle","readTileMatrixSetLink","readDimensions","readResourceUrl","readBoundingBox","readBoundingBoxWithCrs","STYLE_PARSERS","readLegendUrl","TMS_LINKS_PARSERS","readTileMatrixLimitsList","TMS_LIMITS_LIST_PARSERS","readTileMatrixLimits","TMS_LIMITS_PARSERS","DIMENSION_PARSERS","WGS84_BBOX_READERS","readCoordinates","TMS_PARSERS","readTileMatrix","TM_PARSERS","isDefault","format","template","resourceType","resource","coordinates","crs","legend","split","isNaN","LABEL_EXTENSION","transparentFill","Fill","color","strokeColor","strokeWidth","fillColor","circleRadius","fill","stroke","Stroke","Style","Circle","radius","defaultBoundsStyle","defaultCollectionStyle","getStacObjectsForEvent","exclude","selectedFeatures","objects","Set","equals","getGeoTiffSourceInfoFromAsset","asset","bands","sourceInfo","getAbsoluteUrl","getBands","getBand","minimum","maximum","getMinMaxValues","nodata","getNoDataValues","reference","defaultProjection","id","getBoundsStyle","originalStyle","layerGroup","clone","hasOnlyBounds","setFill","getSpecificWebMapUrl","link","random","SHIFT_LEFT_32","SHIFT_RIGHT_32","TEXT_DECODER_MIN_LENGTH","utf8TextDecoder","PBF_VARINT","PBF_FIXED64","PBF_BYTES","PBF_FIXED32","Pbf","ArrayBuffer","isView","dataView","buffer","readFields","readField","result","val","readVarint","tag","startPos","skip","readMessage","readFixed32","readSFixed32","readFixed64","readSFixed64","readFloat","getFloat32","readDouble","getFloat64","isSigned","readVarintRemainder","readVarint64","readSVarint","num","readBoolean","Boolean","readUtf8","readBytes","readPackedVarint","arr","readPackedEnd","readPackedSVarint","readPackedBoolean","readPackedFloat","readPackedDouble","readPackedFixed32","readPackedSFixed32","readPackedFixed64","readPackedSFixed64","writeTag","writeVarint","realloc","finish","writeFixed32","setInt32","writeSFixed32","writeFixed64","writeSFixed64","writeBigVarint","writeSVarint","writeBoolean","writeString","str","writeUtf8","len","makeRoomForExtraLength","writeFloat","setFloat32","writeDouble","setFloat64","writeBytes","writeRawMessage","fn","obj","writeMessage","writePackedVarint","writePackedSVarint","writePackedBoolean","writePackedFloat","writePackedDouble","writePackedFixed32","writePackedSFixed32","writePackedFixed64","writePackedSFixed64","writeBytesField","writeFixed32Field","writeSFixed32Field","writeFixed64Field","writeSFixed64Field","writeVarintField","writeSVarintField","writeStringField","writeFloatField","writeDoubleField","writeBooleanField","toNum","low","high","pbf","writeBigVarintLow","writeBigVarintHigh","lsb","extraLen","log","LN2","b0","b1","b2","b3","bytesPerSequence","fromCharCode","lead","charCodeAt","MVT","dataProjection","Projection","units","featureClass","geometryName_","geometryName","layerName_","layerName","layers_","idProperty_","idProperty","supportedMediaTypes","readRawGeometry_","flatCoordinates","ends","geometry","cmd","coordsLen","currentEnd","cmdLen","createFeature_","rawFeature","values","properties","geometryType","getGeometryType","geom","endss","MultiPolygon","Polygon","Point","LineString","MultiPoint","MultiLineString","ctor","setGeometryName","setGeometry","setId","setProperties","readFeatures","adaptOptions","setWorldExtent","pbfLayers","layersPBFReader","pbfLayer","setExtent","readRawFeature","readProjection","setLayers","keys","layerPBFReader","featurePBFReader","numEnds","__defProp","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","enumerable","writable","__spreadValues","prop","__name","__async","__this","__arguments","generator","fulfilled","step","rejected","_PMTilesRasterSource","DataTile","maxResolution","setLoader","revokeObjectURL","PMTilesRasterSource","_PMTilesVectorSource","vtile","re","pmtiles_","tile_result","getFormat","setFeatures","featureProjection","TileState","LOADED","setTileLoadFunction","PMTilesVectorSource","STACLayer","superOptions","getSourceOptions_","getSourceOptions","children_","childrenOptions_","childrenOptions","assets_","bands_","crossOrigin_","displayFootprint_","displayFootprint","displayGeoTiffByDefault_","displayGeoTiffByDefault","displayPreview_","displayPreview","displayOverview_","displayOverview","displayWebMapLink_","displayWebMapLink","buildTileUrlTemplate_","buildTileUrlTemplate","useTileLayerAsFallback_","useTileLayerAsFallback","boundsStyle_","boundsStyle","collectionStyle_","collectionStyle","boundsLayer_","disableMigration_","disableMigration","map_","eventQueue_","httpRequestFn","fetch_","configure_","children","assets","handleError_","responseType","ok","json","text","getBoundsLayer","isEmpty","count","getLayers","bbox","getBoundingBox","dispatch_","setAbsoluteUrl","addFootprint_","updateBoundsStyle","errorHandler","promises","setChildren","setAssets","updateLayers_","all","flush_","setMap_","addChildren_","collection","defaultOptions","subgroup","addLayer_","addPreviewImage_","bboxes","getContext","getBoundingBoxes","addLayerForLink","updateOptions","sources","rel","STYLES","TRANSPARENT","FORMAT","wmsOptions","wmtsCapabilities","getWmtsCapabilities_","wmtsOptions","optionsFromCapabilities","VectorTile","declutter","WebGLTile","Tile","addGeoTiff_","addTileLayerForImagery_","convertToRGB","getError","zIndex","setZIndex","geojson","isItemCollection","isCollectionCollection","toGeoJSON","createGeoJsonLayer_","getMapInternal","addGeoJson_","visible","GeoJSON","loader","addFeatures","addLabelExtension_","labelAsset","getAssetsWithRoles","roles","getAsset","getAssets","sourceLinks","getLinksWithRels","oldLayers","removeAt","getWebMapLinks","isGeoTIFF","canBrowserDisplayImage","getAll","isItem","supportsExtension","links","geotiff","getDefaultGeoTIFF","thumbnails","getThumbnails","boundsLayer","imgLayer","getLayersArray","types","mapLinks","candidate","sort","prioA","prioB","childs","child","getChildren","view","getView","getLayerState","urlObj","searchParams","selectStyle","components","BPopover","Items","LayerControl","TextControl","mixins","MapMixin","props","default","onfocusOnly","stacLayer","selector","computed","mapGetters","isFullScreen","watch","showStacLayer","fit","$emit","clear","mounted","methods","createMap","$refs","addStacLayer","stacLayerOptions","StacLayer","warn","addLayer","addInteraction","left","top","updateSize","padding","component"],"sourceRoot":""}