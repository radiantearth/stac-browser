{"version":3,"file":"js/6481.2da48a38.js","mappings":"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","sources":["webpack://@radiantearth/stac-browser/./node_modules/@radiantearth/stac-fields/interface.js","webpack://@radiantearth/stac-browser/./src/components/metadata/StatsChart.vue","webpack://@radiantearth/stac-browser/src/components/metadata/StatsChart.vue","webpack://@radiantearth/stac-browser/./src/components/metadata/StatsChart.vue?1619","webpack://@radiantearth/stac-browser/./src/components/metadata/StatsChart.vue?29cb"],"sourcesContent":["const Registry = require('./registry');\nconst _ = require('./helper');\nconst I18N = require('./I18N');\nconst DataTypes = require('./datatypes');\nconst Formatters = require('./formatters');\n\nfunction formatGrouped(context, data, type, filter, coreKey) {\n\t// Group fields into extensions\n\tlet groups = {};\n\tfor(let field in data) {\n\t\tlet value;\n\t\ttry {\n\t\t\tlet parts = field.split(/:(.*)/);\n\t\t\tif (parts.length === 1) {\n\t\t\t\tparts.unshift(coreKey);\n\t\t\t}\n\t\t\tlet ext = parts[0];\n\t\t\tif (typeof filter === 'function' && !filter(field, [field])) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvalue = data[field];\n\t\t\tlet spec = Registry.getSpecification(field, type);\n\n\t\t\t// Move to another extension (e.g. if no prefix is provided)\n\t\t\tif (spec.ext) {\n\t\t\t\text = spec.ext;\n\t\t\t}\n\n\t\t\t// Special handling for summaries that contain a list with keys (e.g. cube:dimensions, gee:schema)\n\t\t\t// There's usually just a single object included, so get that as value\n\t\t\tlet isSummarizedListWithKeys = false;\n\t\t\tif (type === 'summaries' && spec.listWithKeys && Array.isArray(value) && value.length > 0) {\n\t\t\t\tvalue = value[0];\n\t\t\t\tisSummarizedListWithKeys = true;\n\t\t\t}\n\n\t\t\t// Fill items with missing properties\n\t\t\tlet items = null;\n\t\t\tlet itemOrder = [];\n\t\t\tif (_.isObject(spec.items)) {\n\t\t\t\tlet temp = value;\n\t\t\t\t// Ignore keys for lists that are stored as object (e.g. cube:dimensions)\n\t\t\t\tif (spec.listWithKeys) {\n\t\t\t\t\ttemp = Object.values(temp);\n\t\t\t\t}\n\n\t\t\t\tlet itemFieldNames = [];\n\t\t\t\tif (Array.isArray(temp)) {\n\t\t\t\t\titemFieldNames = _.keysFromListOfObjects(temp);\n\t\t\t\t}\n\t\t\t\telse if (_.isObject(temp)) {\n\t\t\t\t\titemFieldNames = Object.keys(temp);\n\t\t\t\t}\n\n\t\t\t\titems = {};\n\t\t\t\t// Remove fields from list that are not available in the data\n\t\t\t\titemOrder = spec.itemOrder.filter(fieldName => itemFieldNames.includes(fieldName));\n\n\t\t\t\titemFieldNames.forEach(key => {\n\t\t\t\t\tif (typeof spec.items[key] === 'undefined') {\n\t\t\t\t\t\t// Add fields that are not specified in fields.json\n\t\t\t\t\t\titems[key] = {\n\t\t\t\t\t\t\tlabel: _.formatKey(key),\n\t\t\t\t\t\t\texplain: key\n\t\t\t\t\t\t};\n\t\t\t\t\t\t// Place non-specified fields at the end\n\t\t\t\t\t\titemOrder.push(key);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Clone field spec from fields.json\n\t\t\t\t\t\titems[key] = Object.assign({}, spec.items[key]);\n\t\t\t\t\t\titems[key].label = label(key, spec.items[key]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Format values\n\t\t\tlet formatted;\n\n\t\t\t// Handle summaries\n\t\t\tif (type === 'summaries') {\n\t\t\t\tif (!isSummarizedListWithKeys && _.isObject(value)) {\n\t\t\t\t\tif (typeof value.minimum !== 'undefined' && typeof value.minimum !== 'undefined') {\n\t\t\t\t\t\tformatted = Formatters.formatExtent([value.minimum, value.maximum], field, spec);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tformatted = DataTypes.object(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (Registry.externalRenderer && items) {\n\t\t\t\t\tlet formatted = isSummarizedListWithKeys ? Object.assign({}, value) : value.slice(0);\n\t\t\t\t\t// Go through each field's summary\n\t\t\t\t\tfor(let i in formatted) {\n\t\t\t\t\t\tlet result = _.isObject(formatted[i]) ? {} : [];\n\t\t\t\t\t\t// Go through each entry in a field's summary (this is besically a single value as defined in the Item spec)\n\t\t\t\t\t\tfor(let key in items) {\n\t\t\t\t\t\t\tresult[key] = format(formatted[i][key], key, context, data, items[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tformatted[i] = result;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (Array.isArray(value)) {\n\t\t\t\t\tformatted = _.toList(value, !spec.custom && !spec.items, v => format(v, field, context, data, spec));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconsole.warn(`Invalid summary value: ${value}`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Fallback to \"normal\" rendering if not handled by summaries yet\n\t\t\tif (typeof formatted === 'undefined') {\n\t\t\t\tformatted = format(value, field, context, data, spec, filter, [field]);\n\t\t\t}\n\n\t\t\t// Add group if missing\n\t\t\tif (!_.isObject(groups[ext])) {\n\t\t\t\tgroups[ext] = {\n\t\t\t\t\textension: ext,\n\t\t\t\t\tlabel: extension(ext),\n\t\t\t\t\tproperties: {}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tgroups[ext].properties[field] = {\n\t\t\t\tlabel: label(field, spec),\n\t\t\t\tvalue,\n\t\t\t\tformatted,\n\t\t\t\titems,\n\t\t\t\titemOrder,\n\t\t\t\tspec\n\t\t\t};\n\t\t} catch(error) {\n\t\t\tconsole.error(`Field '${field}' with value '${value}' resulted in an error`, error);\n\t\t}\n\t}\n\treturn Object.values(groups).sort((a,b) => a.extension.localeCompare(b.extension, I18N.locales));\n\n}\n\n// For assets (item and collection) and item-assets (extension)\nfunction formatAsset(asset, context, filter = null, coreKey = '') {\n\treturn formatGrouped(context, asset, 'assets', filter, coreKey);\n}\n\n// For links\nfunction formatLink(link, context, filter = null, coreKey = '') {\n\treturn formatGrouped(context, link, 'links', filter, coreKey);\n}\n\n// For Providers\nfunction formatProvider(provider, context, filter = null, coreKey = '') {\n\treturn formatGrouped(context, provider, 'providers', filter, coreKey);\n}\n\n// For Collection summaries\nfunction formatSummaries(collection, filter = null, coreKey = '') {\n\treturn formatGrouped(collection, collection.summaries, 'summaries', filter, coreKey);\n}\n\n// For Collections\nfunction formatCollection(collection, filter = null, coreKey = '') {\n\treturn formatGrouped(collection, collection, 'collection', filter, coreKey);\n}\n\n// For Catalogs\nfunction formatCatalog(catalog, filter = null, coreKey = '') {\n\treturn formatGrouped(catalog, catalog, 'catalog', filter, coreKey);\n}\n\n// For item properties\nfunction formatItemProperties(item, filter = null, coreKey = '') {\n\treturn formatGrouped(item, item.properties, 'metadata', filter, coreKey);\n}\n\nfunction format(value, field, context = null, parent = null, spec = null, filter = null, path = []) {\n\tif (!_.isObject(spec)) {\n\t\tspec = Registry.getSpecification(field);\n\t}\n\n\tif (typeof spec.format === 'string') {\n\t\tlet fn = Formatters[`format${spec.format}`];\n\t\tif (!fn) {\n\t\t\tconsole.warn(`Formatter '${spec.format}' not available.`);\n\t\t}\n\t\treturn fn(value, field, spec, context, parent);\n\t}\n\telse if (typeof spec.formatter === 'function') {\n\t\treturn spec.formatter(value, field, spec, context, parent);\n\t}\n\telse if (_.isObject(spec.mapping)) {\n\t\tlet key = String(value);\n\t\tif (typeof spec.mapping[key] !== 'undefined') {\n\t\t\tvalue = spec.mapping[key];\n\t\t}\n\t\telse if (typeof spec.mapping[key.toLowerCase()] !== 'undefined') {\n\t\t\tvalue = spec.mapping[key.toLowerCase()];\n\t\t}\n\t\telse if (typeof spec.mapping[key.toUpperCase()] !== 'undefined') {\n\t\t\tvalue = spec.mapping[key.toUpperCase()];\n\t\t}\n\t\treturn DataTypes.format(_.t(value), spec.unit);\n\t}\n\telse if (value === null && spec.null) {\n\t\treturn DataTypes.null(spec.null);\n\t}\n\telse if (Array.isArray(value)) {\n\t\tlet callback = (v, i) => format(v, field, context, parent, spec, filter, path.concat([i]));\n\t\tif (typeof filter === 'function' && path.length > 0) {\n\t\t\tvalue = value.filter((v, i) => filter(path[0], path.concat([i])));\n\t\t}\n\t\tif (Registry.externalRenderer && (spec.custom || spec.items)) {\n\t\t\treturn value.map(callback);\n\t\t}\n\t\telse {\n\t\t\treturn _.toList(value, false, callback);\n\t\t}\n\t}\n\telse if (_.isObject(value)) {\n\t\tlet callbackSpec = k => {\n\t\t\tif (_.isObject(spec.items)) {\n\t\t\t\treturn spec.listWithKeys ? {items: spec.items} : spec.items[k];\n\t\t\t}\n\t\t\telse if (_.isObject(spec.properties)) {\n\t\t\t\treturn spec.properties[k];\n\t\t\t}\n\t\t\treturn {};\n\t\t};\n\t\tlet callbackValue = (v, k, p) => format(v, k, context, p, callbackSpec(k), filter, path.concat([k]));\n\t\tif (Registry.externalRenderer && (spec.custom || spec.items || spec.properties)) {\n\t\t\tlet formattedValues = {};\n\t\t\tfor(let key in value) {\n\t\t\t\tif (typeof filter === 'function' && path.length > 0 && !filter(path[0], path.concat([k]))) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tformattedValues[key] = callbackValue(value[key], key, value);\n\t\t\t}\n\t\t\treturn formattedValues;\n\t\t}\n\t\telse {\n\t\t\tlet callbackLabel = k => label(k, callbackSpec(k));\n\t\t\treturn _.toObject(value, callbackValue, callbackLabel, spec.itemOrder, filter, path);\n\t\t}\n\t}\n\telse {\n\t\treturn DataTypes.format(value, spec.unit);\n\t}\n}\n\nfunction label(key, spec = null) {\n\tif (!_.isObject(spec)) {\n\t\tspec = Registry.getSpecification(key);\n\t}\n\tif (_.isObject(spec) && typeof spec.label === 'string') {\n\t\tif (typeof spec.explain === 'string') {\n\t\t\tif (spec.explain.match(/^https?:\\/\\//i)) {\n\t\t\t\treturn _.toLink(spec.explain, _.t(spec.label), \"about\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn _.abbrev(_.t(spec.label), _.t(spec.explain));\n\t\t\t}\n\t\t}\n\t\telse if (typeof spec.label === 'string') {\n\t\t\treturn _.t(spec.label);\n\t\t}\n\t}\n\treturn _.formatKey(key);\n}\n\nfunction extension(key) {\n\treturn label(key, Registry.getExtension(key));\n}\n\nmodule.exports = {\n\tformat,\n\tlabel,\n\textension,\n\tformatCatalog,\n\tformatCollection,\n\tformatSummaries,\n\tformatItemProperties,\n\tformatAsset,\n\tformatLink,\n\tformatProvider,\n\tformatGrouped\n};","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chart mb-4\"},[_c(_vm.component,{tag:\"component\",attrs:{\"data\":_vm.chartData,\"options\":_vm.allOptions}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"chart mb-4\">\n    <component :is=\"component\" :data=\"chartData\" :options=\"allOptions\" />\n  </div>\n</template>\n\n<script>\nimport { formatKey } from \"@radiantearth/stac-fields/helper\";\nimport { extension } from \"@radiantearth/stac-fields/interface\";\nimport { formatMediaType } from \"@radiantearth/stac-fields/formatters\";\nimport Utils from \"../../utils\";\n\nimport { Bar, Pie } from 'vue-chartjs';\nimport {\n  Chart as ChartJS,\n  Colors,\n  Title,\n  Tooltip,\n  BarElement,\n  ArcElement,\n  CategoryScale,\n  LinearScale\n} from 'chart.js';\n\nChartJS.register(Title, Tooltip, Colors, ArcElement, BarElement, CategoryScale, LinearScale);\n\nexport default {\n  name: \"StatsChart\",\n  components: {\n    Bar,\n    Pie\n  },\n  props: {\n    data: {\n      type: Object,\n      required: true\n    },\n    type: {\n      type: String,\n      required: true\n    },\n    count: {\n      type: Number,\n      required: true\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  computed: {\n    component() {\n      switch(this.type) {\n        case 'versions':\n          return 'Pie';\n        default:\n          return 'Bar';\n      }\n    },\n    title() {\n      switch(this.type) {\n        case 'versions':\n          return this.$t('source.stacVersion');\n        case 'extensions':\n          return this.$t('source.stacExtension');\n        case 'assets':\n          return this.$t('source.fileFormat');\n        default:\n          return '';\n      }\n    },\n    allOptions() {\n      let options = {\n        responsive: true,\n        plugins: {\n          title: {\n            display: true,\n            text: this.title\n          },\n        },\n        scales: {\n          y: {\n            min: 0,\n            max: this.count,\n            title: {\n              display: false\n            }\n          }\n        }\n      };\n      return Object.assign(options, this.options);\n    },\n    chartData() {\n      let labels = [];\n      let values = [];\n      for (let id in this.data) {\n        let count = this.data[id];\n        values.push(count);\n\n        let label;\n        switch(this.type) {\n          case 'extensions': {\n            let ext = this.parseExtension(id);\n            label = `${ext.title}`;\n            if (ext.version) {\n              label += ` (${ext.version})`;\n            }\n            break;\n          }\n          case 'assets':\n            label = formatMediaType(id);\n            break;\n          default:\n            label = id;\n        }\n        labels.push(label);\n      }\n      return {\n        labels,\n        datasets: [\n          {\n            data: values\n          }\n        ]\n      };\n    }\n  },\n  methods: {\n    parseExtension(uri) {\n      let version = null;\n      let title = uri;\n      let match = uri.match(/^https?:\\/\\/stac-extensions\\.github\\.io\\/([^/]+)\\/v?([^/]+)(?:\\/([^/.]+))?\\/schema/);\n      if (match) {\n        version = match[2];\n        title = extension(match[1]);\n        if (match[3]) {\n          title += ' - ' + formatKey(match[3]);\n        }\n      }\n      else {\n        title = uri.replace(/^https?:\\/\\/(www.)?/, '').replace(/\\/schema(\\.json)?$/, '');\n        title = Utils.shortenTitle(title, 30);\n      }\n      return { title, version };\n    }\n  }\n};\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StatsChart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StatsChart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StatsChart.vue?vue&type=template&id=334ae865&\"\nimport script from \"./StatsChart.vue?vue&type=script&lang=js&\"\nexport * from \"./StatsChart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["Registry","_","I18N","DataTypes","Formatters","formatGrouped","context","data","type","filter","coreKey","groups","field","value","parts","split","length","unshift","ext","spec","getSpecification","isSummarizedListWithKeys","listWithKeys","Array","isArray","formatted","items","itemOrder","isObject","temp","Object","values","itemFieldNames","keysFromListOfObjects","keys","fieldName","includes","forEach","key","label","formatKey","explain","push","assign","minimum","formatExtent","maximum","object","externalRenderer","slice","i","result","format","toList","custom","v","console","warn","extension","properties","error","sort","a","b","localeCompare","locales","formatAsset","asset","formatLink","link","formatProvider","provider","formatSummaries","collection","summaries","formatCollection","formatCatalog","catalog","formatItemProperties","item","parent","path","fn","formatter","mapping","String","toLowerCase","toUpperCase","t","unit","null","callback","concat","map","callbackSpec","k","callbackValue","p","formattedValues","callbackLabel","toObject","match","toLink","abbrev","getExtension","module","exports","render","_vm","this","_c","_self","staticClass","component","tag","attrs","chartData","allOptions","staticRenderFns","ChartJS","register","Title","Tooltip","Colors","ArcElement","BarElement","CategoryScale","LinearScale","name","components","Bar","Pie","props","required","count","Number","options","default","computed","title","$t","responsive","plugins","display","text","scales","y","min","max","labels","id","parseExtension","version","formatMediaType","datasets","methods","uri","replace","Utils","shortenTitle"],"sourceRoot":""}