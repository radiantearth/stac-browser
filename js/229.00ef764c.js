"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[229,2192,3440],{34889:function(t,e,i){function s(t){return Array.isArray(t)?Math.min(...t):t}i.d(e,{m:function(){return s}})},42192:function(t,e,i){i.r(e),i.d(e,{DECIMALS:function(){return n},DEFAULT_WMS_VERSION:function(){return s}});const s="1.3.0",n=4},83440:function(t,e,i){i.r(e),i.d(e,{ImageSourceEvent:function(){return f},ImageSourceEventType:function(){return p},default:function(){return x},defaultImageLoadFunction:function(){return D},getRequestExtent:function(){return S}});var s=i(43938),n=i(6141),r=i(66514),o=i(1685),a=i(6837),u=i(70915),c=i(61597),h=i(38599),g=i(9438),l=i(33513),_=i(34889),d=i(52913),I=i(93101);class m extends s.Ay{constructor(t,e,i,s,r,o,a){let c=t.getExtent();c&&t.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let h=e.getExtent();h&&e.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);const g=h?(0,u._N)(i,h):i,_=(0,u.q1)(g),m=(0,l.KQ)(t,e,_,s),E=I.l,A=new d.A(t,e,g,c,m*E,s),R=A.calculateSourceExtent(),p=(0,u.Im)(R)?null:o(R,m,r),f=p?n.A.IDLE:n.A.EMPTY,L=p?p.getPixelRatio():1;super(i,s,L,f),this.targetProj_=e,this.maxSourceExtent_=c,this.triangulation_=A,this.targetResolution_=s,this.targetExtent_=i,this.sourceImage_=p,this.sourcePixelRatio_=L,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==n.A.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==n.A.LOADED){const t=(0,u.RG)(this.targetExtent_)/this.targetResolution_,e=(0,u.Oq)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,l.XX)(t,e,this.sourcePixelRatio_,(0,_.m)(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==n.A.IDLE){this.state=n.A.LOADING,this.changed();const t=this.sourceImage_.getState();t==n.A.LOADED||t==n.A.ERROR?this.reproject_():(this.sourceListenerKey_=(0,g.KT)(this.sourceImage_,a.A.CHANGE,t=>{const e=this.sourceImage_.getState();e!=n.A.LOADED&&e!=n.A.ERROR||(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){(0,g.JH)(this.sourceListenerKey_),this.sourceListenerKey_=null}}var E=m,A=i(16444),R=i(42192);const p={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class f extends o.Ay{constructor(t,e){super(t),this.image=e}}class L extends A["default"]{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!t.loader&&0===t.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){const i=(0,r.FT)(e,t,0);t=e[i]}return t}getImage(t,e,i,s){const n=this.getProjection();if(!n||!s||(0,h.tI)(n,s))return n&&(s=n),this.getImageInternal(t,e,i,s);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,h.tI)(this.reprojectedImage_.getProjection(),s)&&this.reprojectedImage_.getResolution()==e&&(0,u.aI)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new E(n,s,t,e,i,(t,e,i)=>this.getImageInternal(t,e,i,n),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,i,n){if(this.loader){const r=S(t,e,i,1),o=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&(0,u.ms)(this.wantedExtent_,r)||(0,u.ms)(this.image.getExtent(),r))&&(this.wantedResolution_&&(0,_.m)(this.wantedResolution_)===o||(0,_.m)(this.image.getResolution())===o)))return this.image;this.wantedProjection_=n,this.wantedExtent_=r,this.wantedResolution_=o,this.image=new s.Ay(r,o,i,this.loader),this.image.addEventListener(a.A.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target;let i;switch(e.getState()){case n.A.LOADING:this.loading=!0,i=p.IMAGELOADSTART;break;case n.A.LOADED:this.loading=!1,i=p.IMAGELOADEND;break;case n.A.ERROR:this.loading=!1,i=p.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new f(i,e))}}function D(t,e){t.getImage().src=e}function S(t,e,i,s){const n=e/i,r=(0,u.q1)(t),o=(0,c.mk)((0,u.RG)(t)/n,R.DECIMALS),a=(0,c.mk)((0,u.Oq)(t)/n,R.DECIMALS),h=(0,c.mk)((s-1)*o/2,R.DECIMALS),g=o+2*h,l=(0,c.mk)((s-1)*a/2,R.DECIMALS),_=a+2*l;return(0,u.Bg)(r,n,0,[g,_])}var x=L},90229:function(t,e,i){i.r(e),i.d(e,{createLoader:function(){return g},getRequestUrl:function(){return h}});var s=i(43938),n=i(70915),r=i(61597),o=i(38599),a=i(14465),u=i(83440),c=i(42192);function h(t,e,i,s,o,u){const h=o.getCode().split(/:(?=\d+$)/).pop(),g=i/s,l=[(0,r.LI)((0,n.RG)(e)/g,c.DECIMALS),(0,r.LI)((0,n.Oq)(e)/g,c.DECIMALS)];u["SIZE"]=l[0]+","+l[1],u["BBOX"]=e.join(","),u["BBOXSR"]=h,u["IMAGESR"]=h,u["DPI"]=Math.round(u["DPI"]?u["DPI"]*s:90*s);const _=t.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return(0,a.LW)(_,u)}function g(t){const e=t.load?t.load:s.D4,i=(0,o.Jt)(t.projection||"EPSG:3857"),r=t.ratio??1.5,a=t.crossOrigin??null;return function(s,o,c){c=t.hidpi?c:1;const g={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(g,t.params),s=(0,u.getRequestExtent)(s,o,c,r);const l=h(t.url,s,o,c,i,g),_=new Image;return _.crossOrigin=a,e(_,l).then(t=>{const e=(0,n.RG)(s)/t.width*c;return{image:t,extent:s,resolution:e,pixelRatio:c}})}}}}]);
//# sourceMappingURL=229.00ef764c.js.map