"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[7936],{8143:function(t,e,s){var i=s(11078),n=s(93474),r=s(6837),o=s(79332),a=s(4087);class h extends o.A{constructor(t,e,s){super(),s=s||{},this.tileCoord=t,this.state=e,this.key="",this.transition_=void 0===s.transition?250:s.transition,this.transitionStarts_={},this.interpolate=!!s.interpolate}changed(){this.dispatchEvent(r.A.CHANGE)}release(){this.setState(i.A.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==i.A.EMPTY){if(this.state!==i.A.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}}load(){(0,a.b0)()}getAlpha(t,e){if(!this.transition_)return 1;let s=this.transitionStarts_[t];if(s){if(-1===s)return 1}else s=e,this.transitionStarts_[t]=s;const i=e-s+1e3/60;return i>=this.transition_?1:(0,n.a6)(i/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}e.A=h},77076:function(t,e,s){s.d(e,{FQ:function(){return n},O2:function(){return h},hm:function(){return a}});var i=s(4087);function n(t,e,s,n){const r=document.createElement("script"),o="olc_"+(0,i.v6)(e);function a(){delete window[o],r.parentNode.removeChild(r)}r.async=!0,r.src=t+(t.includes("?")?"&":"?")+(n||"callback")+"="+o;const h=setTimeout(function(){a(),s&&s()},1e4);window[o]=function(t){clearTimeout(h),a(),e(t)},document.head.appendChild(r)}class r extends Error{constructor(t){const e="Unexpected response status: "+t.status;super(e),this.name="ResponseError",this.response=t}}class o extends Error{constructor(t){super("Failed to issue request"),this.name="ClientError",this.client=t}}function a(t){return new Promise(function(e,s){function i(t){const i=t.target;if(!i.status||i.status>=200&&i.status<300){let t;try{t=JSON.parse(i.responseText)}catch(n){const t="Error parsing response text as JSON: "+n.message;return void s(new Error(t))}return void e(t)}s(new r(i))}function n(t){s(new o(t.target))}const a=new XMLHttpRequest;a.addEventListener("load",i),a.addEventListener("error",n),a.open("GET",t),a.setRequestHeader("Accept","application/json"),a.send()})}function h(t,e){return e.includes("://")?e:new URL(e,t).href}},87936:function(t,e,s){s.r(e),s.d(e,{CustomTile:function(){return _}});var i=s(8143),n=s(11078),r=s(6837),o=s(9438),a=s(70915),h=s(77076),l=s(38599),d=s(4863),u=s(42654),c=s(66017);class _ extends i.A{constructor(t,e,s,i,n,r){super(t,e),this.src_=s,this.extent_=i,this.preemptive_=n,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=r}getImage(){return null}getData(t){if(!this.grid_||!this.keys_)return null;const e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),s=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),i=this.grid_[Math.floor((1-s)*this.grid_.length)];if("string"!==typeof i)return null;let n=i.charCodeAt(Math.floor(e*i.length));n>=93&&n--,n>=35&&n--,n-=32;let r=null;if(n in this.keys_){const t=this.keys_[n];r=this.data_&&t in this.data_?this.data_[t]:t}return r}forDataAtCoordinate(t,e,s){this.state==n.A.EMPTY&&!0===s?(this.state=n.A.IDLE,(0,o.Jz)(this,r.A.CHANGE,s=>{e(this.getData(t))}),this.loadInternal_()):!0===s?setTimeout(()=>{e(this.getData(t))},0):e(this.getData(t))}getKey(){return this.src_}handleError_(){this.state=n.A.ERROR,this.changed()}handleLoad_(t){this.grid_=t["grid"],this.keys_=t["keys"],this.data_=t["data"],this.state=n.A.LOADED,this.changed()}loadInternal_(){if(this.state==n.A.IDLE)if(this.state=n.A.LOADING,this.jsonp_)(0,h.FQ)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch{return void this.handleError_()}this.handleLoad_(t)}else this.handleError_()}onXHRError_(t){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(n.A.EMPTY)}}class p extends c["default"]{constructor(t){if(super({projection:(0,l.Jt)("EPSG:3857"),state:"loading",wrapX:void 0===t.wrapX||t.wrapX,zDirection:t.zDirection}),this.preemptive_=void 0===t.preemptive||t.preemptive,this.tileUrlFunction_=u.lg,this.template_=void 0,this.jsonp_=t.jsonp||!1,t.url)if(this.jsonp_)(0,h.FQ)(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else{if(!t.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");this.handleTileJSONResponse(t.tileJSON)}}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(t)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(t,e,s,i){if(this.tileGrid){const n=this.tileGrid.getZForResolution(e,this.zDirection),r=this.tileGrid.getTileCoordForCoordAndZ(t,n),o=this.getTile(r[0],r[1],r[2],1,this.getProjection());o.forDataAtCoordinate(t,s,i)}else!0===i?setTimeout(function(){s(null)},0):s(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(t){const e=(0,l.Jt)("EPSG:4326"),s=this.getProjection();let i;if(void 0!==t["bounds"]){const n=(0,l.FO)(e,s);i=(0,a.NW)(t["bounds"],n)}const n=(0,d.kZ)(s),r=t["minzoom"]||0,o=t["maxzoom"]||22,h=(0,d.EN)({extent:n,maxZoom:o,minZoom:r});this.tileGrid=h,this.template_=t["template"];const c=t["grids"];if(c){if(this.tileUrlFunction_=(0,u.Qz)(c,h),t["attribution"]){const e=void 0!==i?i:n;this.setAttributions(function(s){return(0,a.HY)(e,s.extent)?[t["attribution"]]:null})}this.setState("ready")}else this.setState("error")}getTile(t,e,s,i,r){const o=[t,e,s],a=this.getTileCoordForTileUrlFunction(o,r),h=this.tileUrlFunction_(a,i,r),l=new _(o,void 0!==h?n.A.IDLE:n.A.EMPTY,void 0!==h?h:"",this.tileGrid.getTileCoordExtent(o),this.preemptive_,this.jsonp_);return l}}e["default"]=p}}]);
//# sourceMappingURL=7936.4b31a357.js.map