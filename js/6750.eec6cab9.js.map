{"version":3,"file":"js/6750.eec6cab9.js","mappings":"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","sources":["webpack://@radiantearth/stac-browser/./src/components/metadata/StatsChart.vue","webpack://@radiantearth/stac-browser/src/components/metadata/StatsChart.vue","webpack://@radiantearth/stac-browser/./src/components/metadata/StatsChart.vue?3bdb","webpack://@radiantearth/stac-browser/./src/components/metadata/StatsChart.vue?29cb","webpack://@radiantearth/stac-browser/./node_modules/@radiantearth/stac-fields/interface.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chart mb-4\"},[_c(_vm.component,{tag:\"component\",attrs:{\"data\":_vm.chartData,\"options\":_vm.allOptions}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"chart mb-4\">\n    <component :is=\"component\" :data=\"chartData\" :options=\"allOptions\" />\n  </div>\n</template>\n\n<script>\nimport { formatKey } from \"@radiantearth/stac-fields/helper\";\nimport { extension } from \"@radiantearth/stac-fields/interface\";\nimport { formatMediaType } from \"@radiantearth/stac-fields/formatters\";\nimport Utils from \"../../utils\";\n\nimport { Bar, Pie } from 'vue-chartjs';\nimport {\n  Chart as ChartJS,\n  Colors,\n  Title,\n  Tooltip,\n  BarElement,\n  ArcElement,\n  CategoryScale,\n  LinearScale\n} from 'chart.js';\n\nChartJS.register(Title, Tooltip, Colors, ArcElement, BarElement, CategoryScale, LinearScale);\n\nexport default {\n  name: \"StatsChart\",\n  components: {\n    Bar,\n    Pie\n  },\n  props: {\n    data: {\n      type: Object,\n      required: true\n    },\n    type: {\n      type: String,\n      required: true\n    },\n    count: {\n      type: Number,\n      required: true\n    },\n    options: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  computed: {\n    component() {\n      switch(this.type) {\n        case 'versions':\n          return 'Pie';\n        default:\n          return 'Bar';\n      }\n    },\n    title() {\n      switch(this.type) {\n        case 'versions':\n          return this.$t('source.stacVersion');\n        case 'extensions':\n          return this.$t('source.stacExtension');\n        case 'assets':\n          return this.$t('source.fileFormat');\n        default:\n          return '';\n      }\n    },\n    allOptions() {\n      let options = {\n        responsive: true,\n        plugins: {\n          title: {\n            display: true,\n            text: this.title\n          },\n        },\n        scales: {\n          y: {\n            min: 0,\n            max: this.count,\n            title: {\n              display: false\n            }\n          }\n        }\n      };\n      return Object.assign(options, this.options);\n    },\n    chartData() {\n      let labels = [];\n      let values = [];\n      for (let id in this.data) {\n        let count = this.data[id];\n        values.push(count);\n\n        let label;\n        switch(this.type) {\n          case 'extensions': {\n            let ext = this.parseExtension(id);\n            label = `${ext.title}`;\n            if (ext.version) {\n              label += ` (${ext.version})`;\n            }\n            break;\n          }\n          case 'assets':\n            label = formatMediaType(id);\n            break;\n          default:\n            label = id;\n        }\n        labels.push(label);\n      }\n      return {\n        labels,\n        datasets: [\n          {\n            data: values\n          }\n        ]\n      };\n    }\n  },\n  methods: {\n    parseExtension(uri) {\n      let version = null;\n      let title = uri;\n      let match = uri.match(/^https?:\\/\\/stac-extensions\\.github\\.io\\/([^/]+)\\/v?([^/]+)(?:\\/([^/.]+))?\\/schema/);\n      if (match) {\n        version = match[2];\n        title = extension(match[1]);\n        if (match[3]) {\n          title += ' - ' + formatKey(match[3]);\n        }\n      }\n      else {\n        title = uri.replace(/^https?:\\/\\/(www.)?/, '').replace(/\\/schema(\\.json)?$/, '');\n        title = Utils.shortenTitle(title, 30);\n      }\n      return { title, version };\n    }\n  }\n};\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StatsChart.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./StatsChart.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./StatsChart.vue?vue&type=template&id=334ae865\"\nimport script from \"./StatsChart.vue?vue&type=script&lang=js\"\nexport * from \"./StatsChart.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","const Registry = require('./registry');\nconst _ = require('./helper');\nconst I18N = require('./I18N');\nconst DataTypes = require('./datatypes');\nconst Formatters = require('./formatters');\n\nfunction formatGrouped(context, data, type, filter, coreKey) {\n\t// Group fields into extensions\n\tlet groups = {};\n\tfor(let field in data) {\n\t\tlet value;\n\t\ttry {\n\t\t\tlet parts = field.split(/:(.*)/);\n\t\t\tif (parts.length === 1) {\n\t\t\t\tparts.unshift(coreKey);\n\t\t\t}\n\t\t\tlet ext = parts[0];\n\t\t\tif (typeof filter === 'function' && !filter(field, [field])) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvalue = data[field];\n\t\t\tlet spec = Registry.getSpecification(field, type);\n\n\t\t\t// Move to another extension (e.g. if no prefix is provided)\n\t\t\tif (spec.ext) {\n\t\t\t\text = spec.ext;\n\t\t\t}\n\n\t\t\t// Special handling for summaries that contain a list with keys (e.g. cube:dimensions, gee:schema)\n\t\t\t// There's usually just a single object included, so get that as value\n\t\t\tlet isSummarizedListWithKeys = false;\n\t\t\tif (type === 'summaries' && spec.listWithKeys && Array.isArray(value) && value.length > 0) {\n\t\t\t\tvalue = value[0];\n\t\t\t\tisSummarizedListWithKeys = true;\n\t\t\t}\n\n\t\t\t// Fill items with missing properties\n\t\t\tlet items = null;\n\t\t\tlet itemOrder = [];\n\t\t\tif (_.isObject(spec.items)) {\n\t\t\t\tlet temp = value;\n\t\t\t\t// Ignore keys for lists that are stored as object (e.g. cube:dimensions)\n\t\t\t\tif (spec.listWithKeys) {\n\t\t\t\t\ttemp = Object.values(temp);\n\t\t\t\t}\n\n\t\t\t\tlet itemFieldNames = [];\n\t\t\t\tif (Array.isArray(temp)) {\n\t\t\t\t\titemFieldNames = _.keysFromListOfObjects(temp);\n\t\t\t\t}\n\t\t\t\telse if (_.isObject(temp)) {\n\t\t\t\t\titemFieldNames = Object.keys(temp);\n\t\t\t\t}\n\n\t\t\t\titems = {};\n\t\t\t\t// Remove fields from list that are not available in the data\n\t\t\t\titemOrder = spec.itemOrder.filter(fieldName => itemFieldNames.includes(fieldName));\n\n\t\t\t\titemFieldNames.forEach(key => {\n\t\t\t\t\tif (typeof spec.items[key] === 'undefined') {\n\t\t\t\t\t\t// Add fields that are not specified in fields.json\n\t\t\t\t\t\titems[key] = {\n\t\t\t\t\t\t\tlabel: _.formatKey(key),\n\t\t\t\t\t\t\texplain: key\n\t\t\t\t\t\t};\n\t\t\t\t\t\t// Place non-specified fields at the end\n\t\t\t\t\t\titemOrder.push(key);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Clone field spec from fields.json\n\t\t\t\t\t\titems[key] = Object.assign({}, spec.items[key]);\n\t\t\t\t\t\titems[key].label = label(key, spec.items[key]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Format values\n\t\t\tlet formatted;\n\n\t\t\t// Handle summaries\n\t\t\tif (type === 'summaries') {\n\t\t\t\tif (!isSummarizedListWithKeys && _.isObject(value)) {\n\t\t\t\t\tif (typeof value.minimum !== 'undefined' && typeof value.maximum !== 'undefined') {\n\t\t\t\t\t\tconst formatSummaryValue = x => format(x, field, context, data, spec, filter, [field]);\n\t\t\t\t\t\tif (value.minimum === value.maximum) {\n\t\t\t\t\t\t\tformatted = formatSummaryValue(value.minimum);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (value.minimum === null) {\n\t\t\t\t\t\t\tformatted = `< ${formatSummaryValue(value.maximum)}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (value.maximum === null) {\n\t\t\t\t\t\t\tformatted = `> ${formatSummaryValue(value.minimum)}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tformatted = `${formatSummaryValue(value.minimum)} – ${formatSummaryValue(value.maximum)}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tformatted = DataTypes.object(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (Registry.externalRenderer && items) {\n\t\t\t\t\tlet formatted = isSummarizedListWithKeys ? Object.assign({}, value) : value.slice(0);\n\t\t\t\t\t// Go through each field's summary\n\t\t\t\t\tfor(let i in formatted) {\n\t\t\t\t\t\tlet result = _.isObject(formatted[i]) ? {} : [];\n\t\t\t\t\t\t// Go through each entry in a field's summary (this is besically a single value as defined in the Item spec)\n\t\t\t\t\t\tfor(let key in items) {\n\t\t\t\t\t\t\tresult[key] = format(formatted[i][key], key, context, data, items[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tformatted[i] = result;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (Array.isArray(value)) {\n\t\t\t\t\tformatted = _.toList(value, !spec.custom && !spec.items, v => format(v, field, context, data, spec));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconsole.warn(`Invalid summary value: ${value}`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Fallback to \"normal\" rendering if not handled by summaries yet\n\t\t\tif (typeof formatted === 'undefined') {\n\t\t\t\tformatted = format(value, field, context, data, spec, filter, [field]);\n\t\t\t}\n\n\t\t\t// Add group if missing\n\t\t\tif (!_.isObject(groups[ext])) {\n\t\t\t\tgroups[ext] = {\n\t\t\t\t\textension: ext,\n\t\t\t\t\tlabel: extension(ext),\n\t\t\t\t\tproperties: {}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tgroups[ext].properties[field] = {\n\t\t\t\tlabel: label(field, spec),\n\t\t\t\tvalue,\n\t\t\t\tformatted,\n\t\t\t\titems,\n\t\t\t\titemOrder,\n\t\t\t\tspec\n\t\t\t};\n\t\t} catch(error) {\n\t\t\tconsole.error(`Field '${field}' with value '${value}' resulted in an error`, error);\n\t\t}\n\t}\n\treturn Object.values(groups).sort((a,b) => I18N.collator.compare(a.extension, b.extension));\n\n}\n\n// For assets (item and collection) and item-assets (extension)\nfunction formatAsset(asset, context, filter = null, coreKey = '') {\n\treturn formatGrouped(context, asset, 'assets', filter, coreKey);\n}\n\n// For links\nfunction formatLink(link, context, filter = null, coreKey = '') {\n\treturn formatGrouped(context, link, 'links', filter, coreKey);\n}\n\n// For Providers\nfunction formatProvider(provider, context, filter = null, coreKey = '') {\n\treturn formatGrouped(context, provider, 'providers', filter, coreKey);\n}\n\n// For Collection summaries\nfunction formatSummaries(collection, filter = null, coreKey = '') {\n\treturn formatGrouped(collection, collection.summaries, 'summaries', filter, coreKey);\n}\n\n// For Collections\nfunction formatCollection(collection, filter = null, coreKey = '') {\n\treturn formatGrouped(collection, collection, 'collection', filter, coreKey);\n}\n\n// For Catalogs\nfunction formatCatalog(catalog, filter = null, coreKey = '') {\n\treturn formatGrouped(catalog, catalog, 'catalog', filter, coreKey);\n}\n\n// For item properties\nfunction formatItemProperties(item, filter = null, coreKey = '') {\n\treturn formatGrouped(item, item.properties, 'metadata', filter, coreKey);\n}\n\nfunction format(value, field, context = null, parent = null, spec = null, filter = null, path = []) {\n\tif (!_.isObject(spec)) {\n\t\tspec = Registry.getSpecification(field);\n\t}\n\n\tif (typeof spec.format === 'string') {\n\t\tlet fn = Formatters[`format${spec.format}`];\n\t\tif (!fn) {\n\t\t\tconsole.warn(`Formatter '${spec.format}' not available.`);\n\t\t}\n\t\treturn fn(value, field, spec, context, parent);\n\t}\n\telse if (typeof spec.formatter === 'function') {\n\t\treturn spec.formatter(value, field, spec, context, parent);\n\t}\n\telse if (_.isObject(spec.mapping)) {\n\t\tlet key = String(value);\n\t\tif (typeof spec.mapping[key] !== 'undefined') {\n\t\t\tvalue = spec.mapping[key];\n\t\t}\n\t\telse if (typeof spec.mapping[key.toLowerCase()] !== 'undefined') {\n\t\t\tvalue = spec.mapping[key.toLowerCase()];\n\t\t}\n\t\telse if (typeof spec.mapping[key.toUpperCase()] !== 'undefined') {\n\t\t\tvalue = spec.mapping[key.toUpperCase()];\n\t\t}\n\t\treturn DataTypes.format(_.t(value), spec.unit);\n\t}\n\telse if (value === null && spec.null) {\n\t\treturn DataTypes.null(spec.null);\n\t}\n\telse if (Array.isArray(value)) {\n\t\tlet callback = (v, i) => format(v, field, context, parent, spec, filter, path.concat([i]));\n\t\tif (typeof filter === 'function' && path.length > 0) {\n\t\t\tvalue = value.filter((v, i) => filter(path[0], path.concat([i])));\n\t\t}\n\t\tif (Registry.externalRenderer && (spec.custom || spec.items)) {\n\t\t\treturn value.map(callback);\n\t\t}\n\t\telse {\n\t\t\treturn _.toList(value, false, callback);\n\t\t}\n\t}\n\telse if (_.isObject(value)) {\n\t\tlet callbackSpec = k => {\n\t\t\tif (_.isObject(spec.items)) {\n\t\t\t\treturn spec.listWithKeys ? {items: spec.items, itemOrder: spec.itemOrder} : spec.items[k];\n\t\t\t}\n\t\t\telse if (_.isObject(spec.properties)) {\n\t\t\t\treturn spec.properties[k];\n\t\t\t}\n\t\t\treturn {};\n\t\t};\n\t\tlet callbackValue = (v, k, p) => format(v, k, context, p, callbackSpec(k), filter, path.concat([k]));\n\t\tif (Registry.externalRenderer && (spec.custom || spec.items || spec.properties)) {\n\t\t\tlet formattedValues = {};\n\t\t\tfor(let key in value) {\n\t\t\t\tif (typeof filter === 'function' && path.length > 0 && !filter(path[0], path.concat([key]))) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tformattedValues[key] = callbackValue(value[key], key, value);\n\t\t\t}\n\t\t\treturn formattedValues;\n\t\t}\n\t\telse {\n\t\t\tlet callbackLabel = k => label(k, callbackSpec(k));\n\t\t\tlet itemOrder = spec.listWithKeys ? [] : spec.itemOrder;\n\t\t\treturn _.toObject(value, callbackValue, callbackLabel, itemOrder, filter, path);\n\t\t}\n\t}\n\telse {\n\t\treturn DataTypes.format(value, spec.unit);\n\t}\n}\n\nfunction label(key, spec = null) {\n\tif (!_.isObject(spec)) {\n\t\tspec = Registry.getSpecification(key);\n\t}\n\tif (_.isObject(spec) && typeof spec.label === 'string') {\n\t\tif (typeof spec.explain === 'string') {\n\t\t\tif (spec.explain.match(/^https?:\\/\\//i)) {\n\t\t\t\treturn _.toLink(spec.explain, _.t(spec.label), \"about\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn _.abbrev(_.t(spec.label), _.t(spec.explain));\n\t\t\t}\n\t\t}\n\t\telse if (typeof spec.label === 'string') {\n\t\t\treturn _.t(spec.label);\n\t\t}\n\t}\n\treturn _.formatKey(key);\n}\n\nfunction extension(key) {\n\treturn label(key, Registry.getExtension(key));\n}\n\nmodule.exports = {\n\tformat,\n\tlabel,\n\textension,\n\tformatCatalog,\n\tformatCollection,\n\tformatSummaries,\n\tformatItemProperties,\n\tformatAsset,\n\tformatLink,\n\tformatProvider,\n\tformatGrouped\n};"],"names":["render","_vm","this","_c","_self","staticClass","component","tag","attrs","chartData","allOptions","staticRenderFns","ChartJS","register","Title","Tooltip","Colors","ArcElement","BarElement","CategoryScale","LinearScale","name","components","Bar","Pie","props","data","type","Object","required","String","count","Number","options","default","computed","title","$t","responsive","plugins","display","text","scales","y","min","max","assign","labels","values","id","label","push","ext","parseExtension","version","formatMediaType","datasets","methods","uri","match","extension","formatKey","replace","Utils","shortenTitle","Registry","_","I18N","DataTypes","Formatters","formatGrouped","context","filter","coreKey","groups","field","value","parts","split","length","unshift","spec","getSpecification","isSummarizedListWithKeys","listWithKeys","Array","isArray","formatted","items","itemOrder","isObject","temp","itemFieldNames","keysFromListOfObjects","keys","fieldName","includes","forEach","key","explain","minimum","maximum","formatSummaryValue","x","format","object","externalRenderer","slice","i","result","toList","custom","v","console","warn","properties","error","sort","a","b","collator","compare","formatAsset","asset","formatLink","link","formatProvider","provider","formatSummaries","collection","summaries","formatCollection","formatCatalog","catalog","formatItemProperties","item","parent","path","fn","formatter","mapping","toLowerCase","toUpperCase","t","unit","null","callback","concat","map","callbackSpec","k","callbackValue","p","formattedValues","callbackLabel","toObject","toLink","abbrev","getExtension","module","exports"],"sourceRoot":""}