"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[7936],{8143:function(t,e,s){var i=s(11078),n=s(93474),r=s(6837),o=s(79332),h=s(4087);class a extends o.A{constructor(t,e,s){super(),s=s||{},this.tileCoord=t,this.state=e,this.key="",this.transition_=void 0===s.transition?250:s.transition,this.transitionStarts_={},this.interpolate=!!s.interpolate}changed(){this.dispatchEvent(r.A.CHANGE)}release(){this.setState(i.A.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==i.A.EMPTY){if(this.state!==i.A.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}}load(){(0,h.b0)()}getAlpha(t,e){if(!this.transition_)return 1;let s=this.transitionStarts_[t];if(s){if(-1===s)return 1}else s=e,this.transitionStarts_[t]=s;const i=e-s+1e3/60;return i>=this.transition_?1:(0,n.a6)(i/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}e.A=a},14969:function(t,e,s){var i=s(90025),n=s(90588);class r{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const t=this.pop();t instanceof i.A&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){while(this.canExpireCache())this.deleteOldest()}clear(){while(this.oldest_)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;while(e)t(e.value_,e.key_,this),e=e.newer}get(t,e){const s=this.entries_[t];return(0,n.v)(void 0!==s,"Tried to get a value for a key that does not exist in the cache"),s===this.newest_||(s===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(s.newer.older=s.older,s.older.newer=s.newer),s.newer=null,s.older=this.newest_,this.newest_.newer=s,this.newest_=s),s.value_}remove(t){const e=this.entries_[t];return(0,n.v)(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,s=0;for(e=this.newest_;e;e=e.older)t[s++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,s=0;for(e=this.newest_;e;e=e.older)t[s++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){(0,n.v)(!(t in this.entries_),"Tried to set a value for a key that is used already");const s={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=s:this.oldest_=s,this.newest_=s,this.entries_[t]=s,++this.count_}setSize(t){this.highWaterMark=t}}e.A=r},77076:function(t,e,s){s.d(e,{FQ:function(){return n},O2:function(){return a},hm:function(){return h}});var i=s(4087);function n(t,e,s,n){const r=document.createElement("script"),o="olc_"+(0,i.v6)(e);function h(){delete window[o],r.parentNode.removeChild(r)}r.async=!0,r.src=t+(t.includes("?")?"&":"?")+(n||"callback")+"="+o;const a=setTimeout(function(){h(),s&&s()},1e4);window[o]=function(t){clearTimeout(a),h(),e(t)},document.head.appendChild(r)}class r extends Error{constructor(t){const e="Unexpected response status: "+t.status;super(e),this.name="ResponseError",this.response=t}}class o extends Error{constructor(t){super("Failed to issue request"),this.name="ClientError",this.client=t}}function h(t){return new Promise(function(e,s){function i(t){const i=t.target;if(!i.status||i.status>=200&&i.status<300){let t;try{t=JSON.parse(i.responseText)}catch(n){const t="Error parsing response text as JSON: "+n.message;return void s(new Error(t))}return void e(t)}s(new r(i))}function n(t){s(new o(t.target))}const h=new XMLHttpRequest;h.addEventListener("load",i),h.addEventListener("error",n),h.open("GET",t),h.setRequestHeader("Accept","application/json"),h.send()})}function a(t,e){return e.includes("://")?e:new URL(e,t).href}},87936:function(t,e,s){s.r(e),s.d(e,{CustomTile:function(){return w}});var i=s(8143),n=s(11078),r=s(6837),o=s(9438),h=s(70915),a=s(77076),l=s(38599),d=s(14969),u=s(40186),_=s(4863),c=s(42654),p=s(66017);class w extends i.A{constructor(t,e,s,i,n,r){super(t,e),this.src_=s,this.extent_=i,this.preemptive_=n,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=r}getImage(){return null}getData(t){if(!this.grid_||!this.keys_)return null;const e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),s=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),i=this.grid_[Math.floor((1-s)*this.grid_.length)];if("string"!==typeof i)return null;let n=i.charCodeAt(Math.floor(e*i.length));n>=93&&n--,n>=35&&n--,n-=32;let r=null;if(n in this.keys_){const t=this.keys_[n];r=this.data_&&t in this.data_?this.data_[t]:t}return r}forDataAtCoordinate(t,e,s){this.state==n.A.EMPTY&&!0===s?(this.state=n.A.IDLE,(0,o.Jz)(this,r.A.CHANGE,s=>{e(this.getData(t))}),this.loadInternal_()):!0===s?setTimeout(()=>{e(this.getData(t))},0):e(this.getData(t))}getKey(){return this.src_}handleError_(){this.state=n.A.ERROR,this.changed()}handleLoad_(t){this.grid_=t["grid"],this.keys_=t["keys"],this.data_=t["data"],this.state=n.A.LOADED,this.changed()}loadInternal_(){if(this.state==n.A.IDLE)if(this.state=n.A.LOADING,this.jsonp_)(0,a.FQ)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch{return void this.handleError_()}this.handleLoad_(t)}else this.handleError_()}onXHRError_(t){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(n.A.EMPTY)}}class f extends p["default"]{constructor(t){if(super({projection:(0,l.Jt)("EPSG:3857"),state:"loading",wrapX:void 0===t.wrapX||t.wrapX,zDirection:t.zDirection}),this.preemptive_=void 0===t.preemptive||t.preemptive,this.tileUrlFunction_=c.lg,this.template_=void 0,this.jsonp_=t.jsonp||!1,this.tileCache_=new d.A(512),t.url)if(this.jsonp_)(0,a.FQ)(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else{if(!t.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");this.handleTileJSONResponse(t.tileJSON)}}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(t)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(t,e,s,i){if(this.tileGrid){const r=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,r),h=this.getTile(o[0],o[1],o[2],1,this.getProjection());h.getState()==n.A.IDLE&&h.load(),h.forDataAtCoordinate(t,s,i)}else!0===i?setTimeout(function(){s(null)},0):s(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(t){const e=(0,l.Jt)("EPSG:4326"),s=this.getProjection();let i;if(void 0!==t["bounds"]){const n=(0,l.FO)(e,s);i=(0,h.NW)(t["bounds"],n)}const n=(0,_.kZ)(s),r=t["minzoom"]||0,o=t["maxzoom"]||22,a=(0,_.EN)({extent:n,maxZoom:o,minZoom:r});this.tileGrid=a,this.template_=t["template"];const d=t["grids"];if(d){if(this.tileUrlFunction_=(0,c.Qz)(d,a),t["attribution"]){const e=void 0!==i?i:n;this.setAttributions(function(s){return(0,h.HY)(e,s.extent)?[t["attribution"]]:null})}this.setState("ready")}else this.setState("error")}getTile(t,e,s,i,r){const o=[t,e,s],h=this.getTileCoordForTileUrlFunction(o,r),a=this.tileUrlFunction_(h,i,r),l=`${this.getKey()},${(0,u.dp)(t,e,s)}`;if(this.tileCache_.containsKey(l))return this.tileCache_.get(l);this.tileCache_.expireCache();const d=new w(o,void 0!==a?n.A.IDLE:n.A.EMPTY,void 0!==a?a:"",this.tileGrid.getTileCoordExtent(o),this.preemptive_,this.jsonp_);return this.tileCache_.set(l,d),d}}e["default"]=f}}]);
//# sourceMappingURL=7936.b01aec2b.js.map