import{E as f,y as h,a4 as x,as as g}from"./GeoJSON-CSYxlXG-.js";import{r as y}from"./uri-C4hf22wZ.js";import S from"./DataTile-DKQU7_We.js";import T from"./ImageTile-CLCUZ0T3.js";import"./index-D3GKW5rd.js";import"./utils-BXWzvTjY.js";import"./_commonjsHelpers-CE1G-McA.js";import"./I18N-DlIXJTel.js";import"./BFormRadioGroup.vue_vue_type_script_setup_true_lang-DaMHx4U3-iHLMKmEq.js";import"./useStateClass-BGbSLWFN-CH6dXg3d.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--n_gO7bqE.js";import"./tilecoord-BuaM4F3-.js";import"./DataTile-CkvPdpQF.js";import"./Tile-DznNnPe9.js";import"./common-CR_WlB5E.js";import"./mat4-CeypvY8Z.js";import"./Tile-h0JwuQRT.js";import"./TileGrid-Bpn2vMfF.js";import"./TileRange-2Tc-Ry00.js";import"./TileEventType-CTN_nmJ7.js";class I extends T{constructor(t){t=t||{};const p=t.template||"z:{z} x:{x} y:{y}",e=t.source,l=t.color||"grey";super({transition:0,wrapX:t.wrapX!==void 0?t.wrapX:e!==void 0?e.getWrapX():void 0});const m=()=>{this.projection=t.projection!==void 0?h(t.projection):e!==void 0?e.getProjection():this.projection,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:e!==void 0?e.getTileGrid():this.tileGrid,this.zDirection=t.zDirection!==void 0?t.zDirection:e!==void 0?e.zDirection:this.zDirection,e instanceof S&&(this.transformMatrix=e.transformMatrix?.slice()||null);const r=this.tileGrid;r&&this.setTileSizes(r.getResolutions().map((s,a)=>x(r.getTileSize(a)).map(d=>Math.max(Math.floor(d),1)))),this.setLoader((s,a,d,u)=>{const c=y(p,s,a,d,u.maxY),[n,o]=this.getTileSize(s),i=g(n,o);return i.strokeStyle=l,i.strokeRect(.5,.5,n+.5,o+.5),i.fillStyle=l,i.strokeStyle="white",i.textAlign="center",i.textBaseline="middle",i.font="24px sans-serif",i.lineWidth=4,i.strokeText(c,n/2,o/2,n),i.fillText(c,n/2,o/2,n),Promise.resolve(i.canvas)}),this.setState("ready")};if(e===void 0||e.getState()==="ready")m();else{const r=()=>{e.getState()==="ready"&&(e.removeEventListener(f.CHANGE,r),m())};e.addEventListener(f.CHANGE,r)}}}export{I as default};
//# sourceMappingURL=TileDebug-BoA5HlAP.js.map
