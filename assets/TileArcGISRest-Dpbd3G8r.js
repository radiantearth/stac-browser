import{ao as l,aq as u,a4 as o,b7 as c}from"./GeoJSON-CFv7s0Dq.js";import{h as p}from"./tilecoord-B7gqyI5r.js";import g from"./TileImage-CfnVQywe.js";import{getRequestUrl as d}from"./arcgisRest-Cd-rs4NG.js";import"./index-CbsTq-P5.js";import"./utils-BXWzvTjY.js";import"./_commonjsHelpers-CE1G-McA.js";import"./I18N-DlIXJTel.js";import"./BFormRadioGroup.vue_vue_type_script_setup_true_lang-DaMHx4U3-N_6EJ6C6.js";import"./useStateClass-BGbSLWFN-Dnyacxxx.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--Cxwgdbkh.js";import"./Tile-B6WZt6Sf.js";import"./Tile-BFIeOP5w.js";import"./common-DXufAnlR.js";import"./Tile-CLyaskjN.js";import"./TileGrid-DkmWyZMC.js";import"./TileRange-2Tc-Ry00.js";import"./UrlTile-rmKp3r7V.js";import"./tileurlfunction-BaJE7Mrx.js";import"./uri-TtbtV9Ke.js";import"./TileEventType-CTN_nmJ7.js";import"./Image--h3q1H0i.js";import"./resolution-CU8ppKQ3.js";import"./common-9rOs42pz.js";class k extends g{constructor(t){t=t||{},super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.params_=Object.assign({},t.params),this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=l(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}getParams(){return this.params_}getRequestUrl_(t,e,i,s,m,a){const r=this.urls;if(!r)return;let h;if(r.length==1)h=r[0];else{const n=u(p(t),r.length);h=r[n]}return d(h,i,(this.tileGrid||this.getTileGridForProjection(m)).getResolution(t[0]),s,m,a)}getTilePixelRatio(t){return this.hidpi_?t:1}setParams(t){this.params_=Object.assign({},t),this.setKey(this.getKeyForParams_())}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,e,i){let s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(i)),s.getResolutions().length<=t[0])return;e!=1&&!this.hidpi_&&(e=1);const m=s.getTileCoordExtent(t,this.tmpExtent_);let a=o(s.getTileSize(t[0]),this.tmpSize);e!=1&&(a=c(a,e,this.tmpSize));const r={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(r,this.params_),this.getRequestUrl_(t,a,m,e,i,r)}}export{k as default};
//# sourceMappingURL=TileArcGISRest-Dpbd3G8r.js.map
