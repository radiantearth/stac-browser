import{c as f,t as Oe,c7 as et,d as X,e as Z,g as He,n as h,B as T,y as he,C as m,D as Q,E as Ne,N as tt,A as M,v as $,a2 as at,f as ze,h as Me,w as G,m as ot,p as K,aj as lt,q as k,ax as ae,G as oe,H as J,s as u,c8 as Te,L as j,K as x,P as xe,c4 as F,i as st,r as Ye,x as rt,I as te,M as nt,F as it,aK as De,aM as je,aL as Le,aP as We,aQ as Ue,aA as _e,c9 as Ge,ca as $e,cb as Ae,aB as Je,cc as Qe,cd as dt,ce as ut,cf as ct,am as ft}from"./index-4V-ffF_e.js";import{u as pt}from"./debounce-BHqBzJ1a-C7d6vPFW.js";const vt=(b,B="px")=>f(()=>{const s=Oe(b),l=Oe(B);return et.test(String(s))?`${Number(s)}${l}`:s}),yt="300px",bt=X({__name:"BTableSimple",props:{bordered:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1},borderVariant:{default:null},captionTop:{type:Boolean,default:!1},dark:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},id:{default:void 0},noBorderCollapse:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},responsive:{type:[Boolean,String],default:!1},small:{type:Boolean,default:!1},stacked:{type:[Boolean,String],default:!1},stickyHeader:{type:[Boolean,String,Number],default:!1},striped:{type:Boolean,default:!1},stripedColumns:{type:Boolean,default:!1},variant:{default:null},tableAttrs:{default:void 0},tableClass:{default:void 0}},setup(b){const s=Z(b,"BTableSimple"),l=He(()=>s.id),o=at(f(()=>({borderVariant:s.borderVariant}))),v=f(()=>[s.tableClass,"table","b-table",o.value,{border:s.outlined,"table-bordered":s.bordered,"table-borderless":s.borderless,"caption-top":s.captionTop,"table-dark":s.dark,"table-hover":s.hover,"b-table-stacked":s.stacked===!0,[`b-table-stacked-${s.stacked}`]:typeof s.stacked=="string","table-striped":s.striped,"table-sm":s.small,[`table-${s.variant}`]:s.variant!==null,"table-striped-columns":s.stripedColumns,"b-table-fixed":s.fixed,"b-table-no-border-collapse":s.noBorderCollapse}]),A=f(()=>({id:l.value,class:v.value,...s.tableAttrs})),le=vt(f(()=>(s.stickyHeader===!0?yt:s.stickyHeader)||Number.NaN)),se=f(()=>s.stickyHeader!==!1),_=f(()=>s.responsive!==!1||se.value),W=f(()=>se.value?{maxHeight:le.value}:void 0),U=f(()=>({"table-responsive":s.responsive===!0,[`table-responsive-${s.responsive}`]:typeof s.responsive=="string","b-table-sticky-header":se.value}));return(ne,w)=>_.value?(h(),T("div",{key:0,class:M(U.value),style:tt(W.value)},[he("table",Q(Ne(A.value)),[m(ne.$slots,"default")],16)],6)):(h(),T("table",Q($({key:1},A.value)),[m(ne.$slots,"default")],16))}}),Ee=(b,B,s)=>{const l=F(b,B);return s&&typeof s=="function"?s(l,B,b):l},O=b=>typeof b=="object"&&b!==null,re=b=>typeof b=="object"&&b!==null&&"key"in b,mt=X({__name:"BTbody",props:{variant:{default:null}},setup(b){const s=Z(b,"BTbody"),l=f(()=>({[`thead-${s.variant}`]:s.variant!==null}));return(o,v)=>(h(),T("tbody",{class:M(l.value)},[m(o.$slots,"default")],2))}}),gt=["colspan","rowspan","data-label"],ht={key:0},ge=X({__name:"BTd",props:{colspan:{default:void 0},rowspan:{default:void 0},stackedHeading:{default:void 0},stickyColumn:{type:Boolean,default:!1},variant:{default:null}},setup(b){const s=Z(b,"BTd"),l=f(()=>({[`table-${s.variant}`]:s.variant!==null,"b-table-sticky-column":s.stickyColumn,"table-b-table-default":s.stickyColumn&&s.variant===null}));return(o,v)=>(h(),T("td",{class:M(l.value),colspan:u(s).colspan,rowspan:u(s).rowspan,"data-label":u(s).stackedHeading},[u(s).stackedHeading?(h(),T("div",ht,[m(o.$slots,"default")])):m(o.$slots,"default",{key:1})],10,gt))}}),qe=X({__name:"BTfoot",props:{variant:{default:null}},setup(b){const s=Z(b,"BTfoot"),l=f(()=>({[`table-${s.variant}`]:s.variant!==null}));return(o,v)=>(h(),T("tfoot",{class:M(l.value)},[m(o.$slots,"default")],2))}}),kt=["scope","colspan","rowspan","data-label"],wt={key:0},Ke=X({__name:"BTh",props:{colspan:{default:void 0},rowspan:{default:void 0},stackedHeading:{default:void 0},stickyColumn:{type:Boolean,default:!1},variant:{default:null},scope:{default:void 0}},setup(b){const s=Z(b,"BTh"),l=f(()=>({[`table-${s.variant}`]:s.variant!==null,"b-table-sticky-column":s.stickyColumn,"table-b-table-default":s.stickyColumn&&s.variant===null})),o=f(()=>s.scope?s.scope:s.colspan?"colgroup":s.rowspan?"rowgroup":"col");return(v,A)=>(h(),T("th",{scope:o.value,class:M(l.value),colspan:u(s).colspan,rowspan:u(s).rowspan,"data-label":u(s).stackedHeading},[u(s).stackedHeading!==void 0?(h(),T("div",wt,[m(v.$slots,"default")])):m(v.$slots,"default",{key:1})],10,kt))}}),Ct=X({__name:"BThead",props:{variant:{default:null}},setup(b){const s=Z(b,"BThead"),l=f(()=>({[`table-${s.variant}`]:s.variant!==null}));return(o,v)=>(h(),T("thead",{class:M(l.value)},[m(o.$slots,"default")],2))}}),L=X({__name:"BTr",props:{variant:{default:null}},setup(b){const s=Z(b,"BTr"),l=f(()=>({[`table-${s.variant}`]:s.variant!==null}));return(o,v)=>(h(),T("tr",{class:M(l.value)},[m(o.$slots,"default")],2))}}),St=["TD","TH","TR"],Bt=["a","a *","button","button *","input:not(.disabled):not([disabled])","select:not(.disabled):not([disabled])","textarea:not(.disabled):not([disabled])",'[role="link"]','[role="link"] *','[role="button"]','[role="button"] *',"[tabindex]:not(.disabled):not([disabled])"].join(","),pe=b=>{if(!b||!b.target)return!1;const B=b.target;if("disabled"in B&&B.disabled||St.indexOf(B.tagName)!==-1)return!1;if(B.closest(".dropdown-menu"))return!0;const s=B.tagName==="LABEL"?B:B.closest("label");if(s){const l=s.getAttribute("for"),o=l?document.getElementById(l):s.querySelector("input, select, textarea");if(o&&!o.disabled)return!0}return B.matches(Bt)},_t={key:0},Tt={key:0,class:"b-table-stacked-label"},$t={class:"d-inline-flex flex-nowrap align-items-center gap-1"},At={key:3},Nt=X({__name:"BTableLite",props:{align:{default:void 0},caption:{default:void 0},detailsTdClass:{default:void 0},fieldColumnClass:{type:[Function,String,Object,Array],default:void 0},fields:{default:()=>[]},footClone:{type:Boolean,default:!1},footRowVariant:{default:void 0},footVariant:{default:void 0},headRowVariant:{default:void 0},headVariant:{default:void 0},items:{default:()=>[]},labelStacked:{type:Boolean,default:!1},modelValue:{default:void 0},primaryKey:{default:void 0},tbodyClass:{default:void 0},tbodyTrAttrs:{type:[Function,Object],default:void 0},tbodyTrClass:{type:[Function,String,Array,Object],default:void 0},tfootClass:{default:void 0},tfootTrClass:{default:void 0},theadClass:{default:void 0},theadTrClass:{default:void 0},bordered:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},borderVariant:{default:void 0},captionTop:{type:Boolean,default:void 0},dark:{type:Boolean,default:void 0},fixed:{type:Boolean,default:void 0},hover:{type:Boolean,default:void 0},id:{default:void 0},noBorderCollapse:{type:Boolean,default:void 0},outlined:{type:Boolean,default:void 0},responsive:{type:[Boolean,String],default:void 0},small:{type:Boolean,default:void 0},stacked:{type:[Boolean,String],default:void 0},stickyHeader:{type:[Boolean,String,Number],default:void 0},striped:{type:Boolean,default:void 0},stripedColumns:{type:Boolean,default:void 0},variant:{default:void 0},tableAttrs:{},tableClass:{default:void 0}},emits:["head-clicked","row-clicked","row-dblclicked","row-contextmenu","row-hovered","row-unhovered","row-middle-clicked"],setup(b,{emit:B}){const l=Z(b,"BTableLite"),o=B,v=ze(),A=st(Ge,null),le=He(()=>l.id),se=a=>l.primaryKey&&F(a,l.primaryKey)!==void 0?[String(F(a,l.primaryKey)),a._showDetails]:[a,a._showDetails],_=Ye(l.primaryKey?new Map:new WeakMap),W=a=>_.value.has(a),U=(a,d)=>{_.value.set(a,d)};G(()=>l.primaryKey,(a,d)=>{a!==d&&(_.value=a?new Map:new WeakMap)}),G(()=>l.items,a=>{a.forEach(d=>{if(!O(d))return;const[t,c]=se(d);(!W(t)||c!==void 0)&&U(t,c)})},{deep:!0,immediate:!0});const ne=f(()=>[l.tableClass,{[`align-${l.align}`]:l.align!==void 0}]),w=f(()=>{if(!l.fields.length&&l.items.length){const[a]=l.items;return a&&(O(a)||Array.isArray(a))?Object.keys(a).map(d=>{const t=$e(d);return{key:d,label:t,tdAttr:Ae(l,t)}}):[{key:"",_noHeader:!0}]}return l.fields.map(a=>{if(re(a)){const t=a.label??$e(a.key);return{...a,tdAttr:{...Ae(l,t),...a.tdAttr}}}const d=$e(a);return{key:a,label:d,tdAttr:Ae(l,d)}})}),C=f(()=>w.value.length),ve=f(()=>!(C.value>0&&w.value.every(a=>a._noHeader===!0))),ee=f(()=>({variant:l.footVariant??l.headVariant,class:l.tfootClass??l.theadClass})),ie=a=>v[`foot(${String(a)})`]?`foot(${String(a)})`:v["foot()"]?"foot()":v[`head(${String(a)})`]?`head(${String(a)})`:"head()",Fe=(a,d,t)=>{const c=F(a,d);return t&&typeof t=="function"?t(c,d,a):t},ke=(a,d,t)=>{const c=String(d.key),i=F(a,c);return d.thAttr&&typeof d.thAttr=="function"?d.thAttr(i,c,a,t):d.thAttr},de=(a,d,t=!1)=>{o("head-clicked",a.key,a,d,t)},H=a=>O(a)&&l.primaryKey&&F(a,l.primaryKey)!==void 0?String(F(a,l.primaryKey)):a,ye=a=>{const d=H(a);return _.value.get(d)},q=(a,d)=>{const t=H(a);U(t,d)},we=a=>{if(O(a)){const d=ye(a);q(a,!d),a._showDetails=!d}},Ce=a=>[a.class,a.thClass,{"b-table-sticky-column":a.stickyColumn},l.fieldColumnClass?typeof l.fieldColumnClass=="function"?l.fieldColumnClass(a):l.fieldColumnClass:null],R=(a,d)=>{const t=F(d,String(a.key));return[a.class,typeof a.tdClass=="function"?a.tdClass(t,String(a.key),d):a.tdClass,O(d)&&d._cellVariants?.[a.key]?`table-${d._cellVariants?.[a.key]}`:null,{"b-table-sticky-column":a.stickyColumn}]},Pe=(a,d,t)=>{t.button===1&&!pe(t)&&o("row-middle-clicked",a,d,t)},ue=(a,d)=>l.tbodyTrAttrs?typeof l.tbodyTrAttrs=="function"?l.tbodyTrAttrs(a,d):l.tbodyTrAttrs:null,ce=(a,d)=>l.tbodyTrClass?typeof l.tbodyTrClass=="function"?l.tbodyTrClass(a,d):l.tbodyTrClass:null,Re=a=>`${le.value}__row_${a}`,Se=a=>a?.isRowHeader?Ke:ge,fe=a=>!!(A?.headerNavigation.value&&a.sortable===!0),Ve=f(()=>!!(A?.rowNavigation.value&&l.items.length>0)),P=(a,d,t=!1)=>{const{target:c,code:i}=d;c&&c.tagName!=="TH"&&document.activeElement===c||(i==="Enter"||i==="NumpadEnter"||i==="Space")&&(De(d),de(a,d,t))},Be=(a,d,t)=>{const{target:c,code:i,shiftKey:V}=t;if(!(c&&c.tagName!=="TR"&&document.activeElement===c)){if(i==="Enter"||i==="NumpadEnter"||i==="Space"){De(t),o("row-clicked",a,d,t);return}(i===je||i===Le||i===We||i===Ue)&&(De(t),be(i,V,d))}},be=(a,d,t)=>{const c=Array.from(document.querySelectorAll(`#${le.value} tbody tr[tabindex]`));if(c.length===0)return;let i=t;a===je?d?i=c.length-1:i=Math.min(t+1,c.length-1):a===Le?d?i=0:i=Math.max(t-1,0):a===Ue?i=c.length-1:a===We&&(i=0),i!==t&&c[i]&&c[i].focus()},Ie=f(()=>({...Je(l,Qe),tableClass:ne.value,id:le.value}));return(a,d)=>(h(),K(bt,Q(Ne(Ie.value)),{default:k(()=>[v["table-colgroup"]?(h(),T("colgroup",_t,[m(a.$slots,"table-colgroup",{fields:w.value})])):x("",!0),rt(j(Ct,{variant:u(l).headVariant,class:M(u(l).theadClass)},{default:k(()=>[m(a.$slots,"thead-top",{columns:C.value,fields:w.value}),j(L,{variant:u(l).headRowVariant,class:M(u(l).theadTrClass)},{default:k(()=>[(h(!0),T(te,null,ae(w.value,t=>(h(),K(Ke,$({key:t.key,scope:t.scope,class:Ce(t),title:t.headerTitle,variant:t.variant,abbr:t.headerAbbr,style:t.thStyle,tabindex:fe(t)?"0":void 0},{ref_for:!0},ke(null,t,"top"),{onClick:c=>de(t,c),onKeydown:c=>P(t,c)}),{default:k(()=>[m(a.$slots,v[`head(${String(t.key)})`]?`head(${String(t.key)})`:"head()",{label:t.label,column:t.key,field:t,isFoot:!1},()=>[oe(J(u(Te)(t)),1)])]),_:2},1040,["scope","class","title","variant","abbr","style","tabindex","onClick","onKeydown"]))),128))]),_:3},8,["variant","class"]),v["thead-sub"]?(h(),K(L,{key:0},{default:k(()=>[(h(!0),T(te,null,ae(w.value,t=>(h(),K(ge,{key:t.key,scope:"col",variant:t.variant,class:M([t.class,t.thClass])},{default:k(()=>[m(a.$slots,"thead-sub",{items:u(l).items,fields:w.value,field:t},()=>[oe(J(t.label),1)])]),_:2},1032,["variant","class"]))),128))]),_:3})):x("",!0)]),_:3},8,["variant","class"]),[[nt,ve.value]]),j(mt,{class:M(u(l).tbodyClass)},{default:k(()=>[m(a.$slots,"custom-body",{fields:w.value,items:u(l).items,columns:C.value},()=>[!u(l).stacked&&v["top-row"]?(h(),K(L,$({key:0,class:ce(null,"row-top")},ue(null,"row-top")),{default:k(()=>[m(a.$slots,"top-row",{columns:C.value,fields:w.value})]),_:3},16,["class"])):x("",!0),(h(!0),T(te,null,ae(u(l).items,(t,c)=>(h(),T(te,{key:u(l).primaryKey&&u(F)(t,u(l).primaryKey)?u(F)(t,u(l).primaryKey):c},[j(L,$({id:u(l).primaryKey&&u(F)(t,u(l).primaryKey)?Re(u(F)(t,u(l).primaryKey)):void 0,class:ce(t,"row"),variant:u(O)(t)?t._rowVariant:void 0,tabindex:Ve.value?"0":void 0},{ref_for:!0},ue(t,"row"),{onClick:i=>!u(pe)(i)&&o("row-clicked",t,c,i),onDblclick:i=>!u(pe)(i)&&o("row-dblclicked",t,c,i),onContextmenu:i=>!u(pe)(i)&&o("row-contextmenu",t,c,i),onMouseenter:i=>!u(pe)(i)&&o("row-hovered",t,c,i),onMouseleave:i=>!u(pe)(i)&&o("row-unhovered",t,c,i),onMousedown:i=>Pe(t,c,i),onKeydown:i=>Be(t,c,i)}),{default:k(()=>[(h(!0),T(te,null,ae(w.value,i=>(h(),K(it(Se(i)),$({key:i.key,variant:u(O)(t)&&t._cellVariants?.[i.key]?null:i.variant,class:R(i,t)},{ref_for:!0},Fe(t,String(i.key),i.tdAttr)),{default:k(()=>[u(l).stacked&&u(l).labelStacked?(h(),T("label",Tt,J(u(Te)(i)),1)):x("",!0),m(a.$slots,v[`cell(${String(i.key)})`]?`cell(${String(i.key)})`:"cell()",{value:u(Ee)(t,String(i.key),i.formatter),unformatted:u(F)(t,String(i.key)),index:c,item:t,field:i,items:a.items,toggleDetails:()=>we(t),detailsShowing:u(O)(t)?ye(t)??!1:!1},()=>[!v[`cell(${String(i.key)})`]&&!v["cell()"]?(h(),T(te,{key:0},[oe(J(u(Ee)(t,String(i.key),i.formatter)),1)],64)):x("",!0)])]),_:2},1040,["variant","class"]))),128))]),_:2},1040,["id","class","variant","tabindex","onClick","onDblclick","onContextmenu","onMouseenter","onMouseleave","onMousedown","onKeydown"]),u(O)(t)&&ye(t)===!0&&v["row-details"]?(h(),T(te,{key:0},[j(L,{"aria-hidden":"true",role:"presentation",class:"d-none"}),j(L,$({class:ce(t,"row-details"),variant:t._rowVariant},{ref_for:!0},ue(t,"row-details")),{default:k(()=>[j(ge,{colspan:C.value,class:M(a.detailsTdClass)},{default:k(()=>[m(a.$slots,"row-details",{item:t,toggleDetails:()=>we(t),fields:w.value,index:c})]),_:2},1032,["colspan","class"])]),_:2},1040,["class","variant"])],64)):x("",!0)],64))),128)),!u(l).stacked&&v["bottom-row"]?(h(),K(L,$({key:1,class:["bottom-row",ce(null,"row-bottom")]},ue(null,"row-bottom")),{default:k(()=>[m(a.$slots,"bottom-row",{columns:C.value,fields:w.value})]),_:3},16,["class"])):x("",!0)])]),_:3},8,["class"]),u(l).footClone?(h(),K(qe,Q($({key:1},ee.value)),{default:k(()=>[j(L,{variant:u(l).footRowVariant??u(l).headRowVariant,class:M(u(l).tfootTrClass??u(l).theadTrClass)},{default:k(()=>[(h(!0),T(te,null,ae(w.value,t=>(h(),K(Ke,$({key:t.key,scope:"col",class:Ce(t),title:t.headerTitle,abbr:t.headerAbbr,style:t.thStyle,variant:t.variant,tabindex:fe(t)?"0":void 0},{ref_for:!0},ke(null,t,"bottom"),{onClick:c=>de(t,c,!0),onKeydown:c=>P(t,c,!0)}),{default:k(()=>[he("div",$t,[he("div",null,[m(a.$slots,ie(t.key),{label:t.label,column:t.key,field:t,isFoot:!0},()=>[oe(J(u(Te)(t)),1)])])])]),_:2},1040,["class","title","abbr","style","variant","tabindex","onClick","onKeydown"]))),128))]),_:3},8,["variant","class"])]),_:3},16)):v["custom-foot"]?(h(),K(qe,Q($({key:2},ee.value)),{default:k(()=>[m(a.$slots,"custom-foot",{fields:w.value,items:u(l).items,columns:C.value})]),_:3},16)):x("",!0),v["table-caption"]||u(l).caption?(h(),T("caption",At,[m(a.$slots,"table-caption",{},()=>[oe(J(u(l).caption),1)])])):x("",!0)]),_:3},16))}}),Ft={role:"alert","aria-live":"polite"},Pt={class:"text-center my-2"},It=X({__name:"BTable",props:xe({provider:{type:Function,default:void 0},noProvider:{default:void 0},noProviderPaging:{type:Boolean,default:!1},noProviderSorting:{type:Boolean,default:!1},noProviderFiltering:{type:Boolean,default:!1},sortCompare:{type:Function,default:void 0},mustSort:{type:[Boolean,Array],default:!1},initialSortDirection:{default:"asc"},selectable:{type:Boolean,default:!1},multisort:{type:Boolean,default:!1},stickySelect:{type:Boolean,default:!1},selectHead:{type:[Boolean,String],default:!0},selectMode:{default:"multi"},selectionVariant:{default:"primary"},busyLoadingText:{default:"Loading..."},perPage:{default:Number.POSITIVE_INFINITY},currentPage:{default:1},filter:{default:void 0},filterFunction:{type:Function,default:void 0},filterable:{default:void 0},noLocalSorting:{type:Boolean,default:!1},noSelectOnClick:{type:Boolean,default:!1},noSortableIcon:{type:Boolean,default:!1},sortIconLeft:{type:Boolean,default:!1},emptyFilteredText:{default:"There are no records matching your request"},emptyText:{default:"There are no records to show"},showEmpty:{type:Boolean,default:!1},align:{default:void 0},caption:{default:void 0},detailsTdClass:{default:void 0},fieldColumnClass:{type:[Function,String,Object,Array],default:void 0},fields:{default:()=>[]},footClone:{type:Boolean,default:void 0},footRowVariant:{default:void 0},footVariant:{default:void 0},headRowVariant:{default:void 0},headVariant:{default:void 0},items:{default:()=>[]},labelStacked:{type:Boolean,default:void 0},modelValue:{default:void 0},primaryKey:{default:void 0},tbodyClass:{default:void 0},tbodyTrAttrs:{},tbodyTrClass:{type:[Function,String,Array,Object],default:void 0},tfootClass:{default:void 0},tfootTrClass:{default:void 0},theadClass:{default:void 0},theadTrClass:{default:void 0},bordered:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},borderVariant:{default:void 0},captionTop:{type:Boolean,default:void 0},dark:{type:Boolean,default:void 0},fixed:{type:Boolean,default:void 0},hover:{type:Boolean,default:void 0},id:{default:void 0},noBorderCollapse:{type:Boolean,default:void 0},outlined:{type:Boolean,default:void 0},responsive:{type:[Boolean,String],default:void 0},small:{type:Boolean,default:void 0},stacked:{type:[Boolean,String],default:void 0},stickyHeader:{type:[Boolean,String,Number],default:void 0},striped:{type:Boolean,default:void 0},stripedColumns:{type:Boolean,default:void 0},variant:{default:void 0},tableAttrs:{},debounce:{default:0},debounceMaxWait:{default:Number.NaN}},{sortBy:{default:void 0},sortByModifiers:{},busy:{type:Boolean,default:!1},busyModifiers:{},selectedItems:{default:()=>[]},selectedItemsModifiers:{}}),emits:xe(["filtered","row-selected","row-unselected","sorted","change","head-clicked","row-clicked","row-dblclicked","row-contextmenu","row-hovered","row-unhovered","row-middle-clicked"],["update:sortBy","update:busy","update:selectedItems"]),setup(b,{expose:B,emit:s}){const o=Z(b,"BTable"),v=s,A=ze(),le=f(()=>Object.keys(A).filter(e=>e.startsWith("cell("))),se=f(()=>Object.keys(A).filter(e=>e.startsWith("foot("))),_=Me(b,"sortBy"),W=Me(b,"busy"),U=Me(b,"selectedItems"),ne=He(()=>o.id),w=f({get:()=>new Set(U.value),set:e=>{U.value=[...e]}});G(w,(e,n)=>{Array.from(n).filter(r=>!e.has(r)).forEach(r=>{v("row-unselected",r)}),Array.from(e).filter(r=>!n.has(r)).forEach(r=>{v("row-selected",r)})});const C={add:e=>{const n=new Set(w.value);n.add(e),w.value=n},clear:()=>{w.value.forEach(e=>{C.delete(e)})},delete:e=>{const n=new Set(w.value);if(o.primaryKey){const r=o.primaryKey;U.value.forEach((y,p)=>{const S=F(y,r),g=F(e,r);S&&g&&S===g&&n.delete(U.value[p])})}else n.delete(e);w.value=n},set:e=>{w.value=new Set(e)},has:e=>{if(!o.primaryKey)return w.value.has(e);const n=o.primaryKey;for(const r of w.value){const y=F(r,n),p=F(e,n);if(y&&p&&y===p)return!0}return!1}},ve=Ye([]),ee=_e(()=>o.perPage,{method:"parseInt"}),ie=_e(()=>o.currentPage,{method:"parseInt"}),Fe=_e(()=>o.debounce??0,{nanToZero:!0}),ke=_e(()=>o.debounceMaxWait??Number.NaN),de=f(()=>!!o.filter),H=f(()=>o.provider!==void 0),ye=f(()=>w.value.size>0),q=f(()=>_.value!==void 0||o.fields.some(e=>typeof e=="object"&&e!==null&&e.sortable===!0)),we=f(()=>!!(o.selectable&&!o.noSelectOnClick)),Ce=f(()=>!!q.value);ft(Ge,{rowNavigation:we,headerNavigation:Ce});const R=f(()=>o.fields.map(e=>{if(!re(e)){const y=$e(e);return{key:e,label:y,tdAttr:Ae(o,y)}}const n=_.value?.find(y=>e.key===y.key),r=!e.sortable||q.value===!1?void 0:n===void 0?"none":n.order==="desc"?"descending":n.order==="asc"?"ascending":"none";return{...e,thAttr:{"aria-sort":r,...e.thAttr},thClass:[e.thClass,{"b-table-sort-icon-left":o.sortIconLeft&&r!==void 0}]}})),Pe=f(()=>({"b-table-busy":W.value,"b-table-selectable":o.selectable,"user-select-none":o.selectable&&!o.noSelectOnClick&&ye.value,"b-table-fixed":o.fixed,"b-table-no-border-collapse":o.noBorderCollapse,"b-table-no-sort-icon":o.noSortableIcon})),ue=f(()=>[o.tbodyTrClass?typeof o.tbodyTrClass=="function"?o.tbodyTrClass(null,"table-busy"):o.tbodyTrClass:null]),ce=e=>[{"b-table-sortable-column":q.value&&e.sortable}],Re=(e,n)=>[{[`selected table-${o.selectionVariant}`]:o.selectable&&!!e&&C.has(e)},o.tbodyTrClass?typeof o.tbodyTrClass=="function"?o.tbodyTrClass(e,n):o.tbodyTrClass:null],Se=e=>typeof e.sortByFormatted=="function"?e.sortByFormatted:e.formatter,fe=(e,n)=>{if(!O(e))return String(e);const r=R.value.find(p=>re(p)?p.key===n:!1),y=F(e,n);if(re(r)&&r.sortByFormatted){const p=Se(r);if(p)return String(Ee(e,String(r.key),p))}return typeof y=="object"&&y!==null?JSON.stringify(y):y?.toString()??""},Ve=f(()=>{const e=new Map;for(const n of R.value)re(n)&&e.set(n.key,n);return e}),P=f(()=>{const e=_.value?.filter(p=>!!p.order),n=p=>{if(typeof p=="object"&&p!==null&&Object.keys(p).some(S=>S.includes("."))){let S={};for(const g in p)g.includes(".")?S=dt(S,g,p[g]):S[g]=p[g];return S}return p},r=p=>O(p)?Object.entries(p).some(([S,g])=>g==null||S[0]==="_"||!o.filterable?.includes(S)&&o.filterable?.length?!1:o.filterFunction&&typeof o.filterFunction=="function"?o.filterFunction(p,o.filter):(()=>{const Y=R.value.find(E=>re(E)?E.key===S:!1);if(re(Y)&&Y.filterByFormatted){const E=Se(Y);if(E)return String(E(g,String(Y.key),p))}return typeof g=="object"?JSON.stringify(Object.values(g)):g.toString()})().toLowerCase().includes(o.filter?.toLowerCase()??"")):!0,y=(H.value?ve.value:o.items).reduce((p,S)=>{const g=n(S);return(!(de.value&&(!H.value||o.noProviderFiltering))||r(g))&&p.push(g),p},[]);return e?.length&&(q.value===!0&&!H.value&&!o.noLocalSorting||q.value===!0&&H.value&&o.noProviderSorting)?y.sort((p,S)=>{for(let g=0;g<e.length;g++){const{key:D,order:z}=e[g],E=Ve.value.get(D)?.sortCompare||o.sortCompare,N=E?E(p,S,D):fe(p,D).localeCompare(fe(S,D),void 0,{numeric:!0});if(N!==0)return z==="asc"?N:-N}return 0}):y}),Be=f(()=>({emptyFilteredText:o.emptyFilteredText,emptyText:o.emptyText,fields:R.value,items:P.value})),be=f(()=>Number.isNaN(ee.value)||H.value&&!o.noProviderPaging?P.value:P.value.slice((ie.value-1)*(ee.value||Number.POSITIVE_INFINITY),ie.value*(ee.value||Number.POSITIVE_INFINITY)));G(be,e=>{v("change",e)});const Ie=(e,n,r=!1,y=!1,p=!1)=>{if(o.selectable)if(o.selectMode==="single"||o.selectMode==="multi"){if(r||y)return;C.has(e)?C.delete(e):o.selectMode==="single"?C.set([e]):C.add(e)}else if(y||p)C.has(e)?C.delete(e):C.add(e);else if(r){const S=[...w.value].pop(),g=P.value.findIndex(E=>E===S),D=Math.min(g,n),z=Math.max(g,n),Y=P.value.slice(D,z+1);C.set(Y)}else C.set([e])},a=e=>{if(!q.value)return;const n=typeof e=="object"&&e!==null?e.key:e,r=typeof e=="object"&&e!==null?e.sortable:!1;if(!(q.value===!0&&r===!0))return;const y=()=>[..._.value??[]].reverse().find(I=>I.order!==void 0&&I.key!==n)?.order??"asc",p=()=>typeof e=="object"&&e!==null&&e.initialSortDirection?e.initialSortDirection==="last"?y():e.initialSortDirection:o.initialSortDirection?o.initialSortDirection==="last"?y():o.initialSortDirection:"asc",S=N=>{if(N===void 0)return p();const I=p(),me=o.mustSort===!0||Array.isArray(o.mustSort)&&o.mustSort.includes(n);if(N==="asc")return I==="desc"?me?"desc":void 0:"desc";if(N==="desc")return I==="desc"||me?"asc":void 0},g=_.value?.findIndex(N=>N.key===n)??-1,D=_.value?.[g],z=g===-1||!D?{key:n,order:p()}:{...D},Y=()=>{const N=[..._.value??[]],I=z;if(g===-1)N.push(I);else{const me=S(I.order);me?(I.order=me,N.splice(g,1,I)):(I.order=void 0,N.splice(g,1))}return _.value=N,I},E=()=>{const N=g===-1?z.order:S(z.order),I={...z,order:N};return _.value=N?[I]:[],I};v("sorted",o.multisort===!0?Y():E())};let d=null;const t=async()=>{if(!H.value||o.provider===void 0)return;d&&d.abort(),d=new AbortController;const{signal:e}=d;W.value=!0;const n=o.provider({currentPage:ie.value,filter:o.filter,sortBy:_.value,perPage:ee.value,signal:e});try{const r=n instanceof Promise?await n:n;if(e.aborted||r===void 0)return;ve.value=r}catch(r){if(r instanceof Error&&r.name==="AbortError")return;throw r}finally{e.aborted||(W.value=!1)}},c=pt(t,Fe,{maxWait:ke}),i=async(e,n,r)=>{if(ct(n,r))return;const y=D=>o.noProvider?.includes(D)===!0,p=(e==="currentPage"||e==="perPage")&&(y("paging")||o.noProviderPaging===!0),S=e==="filter"&&(y("filtering")||o.noProviderFiltering===!0),g=(e==="sortBy"||e==="sortDesc")&&(y("sorting")||o.noProviderSorting===!0);p||S||g||(H.value===!0&&await c(),e==="currentPage"||e==="perPage"||v("filtered",[...P.value]))};G(()=>o.filter,(e,n)=>{i("filter",e,n),!(e===n||H.value)&&(e||v("filtered",[...P.value]))}),G(ie,(e,n)=>{i("currentPage",e,n)}),G(ee,(e,n)=>{i("perPage",e,n)}),G(_,(e,n)=>{i("sortBy",e,n)},{deep:!0}),G(()=>o.provider,e=>{if(e===void 0){ve.value=[];return}t()}),ot(t);const V={clearSelected:()=>{o.selectable&&C.clear()},selectAllRows:()=>{!o.selectable||o.selectMode==="single"||(w.value=new Set(P.value))},selectRow:e=>{if(!o.selectable)return;const n=P.value[e];!n||C.has(n)||(o.selectMode==="single"?C.set([n]):C.add(n))},unselectRow:e=>{if(!o.selectable)return;const n=P.value[e];!n||!C.has(n)||C.delete(n)},isRowSelected:e=>{if(!o.selectable)return!1;const n=P.value[e];return C.has(n)}},Xe={onHeadClicked:(e,n,r,y=!1)=>{v("head-clicked",e,n,r,y),a(n)},onRowClicked:(e,n,r)=>{o.noSelectOnClick===!1&&Ie(e,n,r.shiftKey,r.ctrlKey,r.metaKey),v("row-clicked",e,n,r)},onRowDblclicked:(...e)=>v("row-dblclicked",...e),onRowContextmenu:(...e)=>v("row-contextmenu",...e),onRowHovered:(...e)=>v("row-hovered",...e),onRowUnhovered:(...e)=>v("row-unhovered",...e),onRowMiddleClicked:(...e)=>v("row-middle-clicked",...e)},Ze=f(()=>({...Je(o,[...ut,...Qe]),tableAttrs:{ariaBusy:W.value},items:be.value,fields:R.value,tableClass:Pe.value,tbodyTrClass:Re,fieldColumnClass:ce,id:ne.value,...Xe}));return B({...V,items:P,displayItems:be,getStringValue:fe,refresh:t}),(e,n)=>(h(),K(Nt,Q(Ne(Ze.value)),lt({"custom-body":k(r=>[W.value&&A["table-busy"]?(h(),K(L,{key:0,class:M(["b-table-busy-slot",ue.value])},{default:k(()=>[j(ge,{colspan:r.fields.length},{default:k(()=>[m(e.$slots,"table-busy")]),_:2},1032,["colspan"])]),_:2},1032,["class"])):u(o).showEmpty===!0&&P.value.length===0?(h(),K(L,{key:1,class:"b-table-empty-row"},{default:k(()=>[j(ge,{colspan:R.value.length},{default:k(()=>[he("div",Ft,[he("div",Pt,[de.value?m(e.$slots,"empty-filtered",Q($({key:0},Be.value)),()=>[oe(J(u(o).emptyFilteredText),1)]):m(e.$slots,"empty",Q($({key:1},Be.value)),()=>[oe(J(u(o).emptyText),1)])])])]),_:3},8,["colspan"])]),_:3})):x("",!0)]),_:2},[A["table-colgroup"]?{name:"table-colgroup",fn:k(r=>[m(e.$slots,"table-colgroup",Q(Ne(r)))]),key:"0"}:void 0,A["thead-top"]?{name:"thead-top",fn:k(r=>[m(e.$slots,"thead-top",$(r,{clearSelected:V.clearSelected,selectAllRows:V.selectAllRows,fields:R.value}))]),key:"1"}:void 0,A["thead-sub"]?{name:"thead-sub",fn:k(r=>[m(e.$slots,"thead-sub",$(r,{fields:R.value}))]),key:"2"}:void 0,A["top-row"]?{name:"top-row",fn:k(r=>[m(e.$slots,"top-row",$(r,{fields:R.value}))]),key:"3"}:void 0,A["row-details"]?{name:"row-details",fn:k(r=>[m(e.$slots,"row-details",$(r,{fields:R.value,selectRow:()=>V.selectRow(r.index),unselectRow:()=>V.unselectRow(r.index),rowSelected:V.isRowSelected(r.index)}))]),key:"4"}:void 0,A["bottom-row"]?{name:"bottom-row",fn:k(r=>[m(e.$slots,"bottom-row",$(r,{fields:R.value}))]),key:"5"}:void 0,A["custom-foot"]?{name:"custom-foot",fn:k(r=>[m(e.$slots,"custom-foot",$(r,{fields:R.value}))]),key:"6"}:void 0,A["table-caption"]?{name:"table-caption",fn:k(()=>[m(e.$slots,"table-caption")]),key:"7"}:void 0,ae(le.value,r=>({name:r,fn:k(y=>[m(e.$slots,r,$(y,{selectRow:()=>V.selectRow(y.index),unselectRow:()=>V.unselectRow(y.index),rowSelected:V.isRowSelected(y.index)}))])})),ae(se.value,r=>({name:r,fn:k(y=>[m(e.$slots,r,$(y,{selectAllRows:V.selectAllRows,clearSelected:V.clearSelected}))])})),ae(R.value,r=>({name:`head(${String(r.key)})`,fn:k(y=>[m(e.$slots,A[`head(${String(r.key)})`]?`head(${String(r.key)})`:"head()",$(y,{selectAllRows:V.selectAllRows,clearSelected:V.clearSelected}),()=>[oe(J(u(Te)(r)),1)])])}))]),1040))}});export{bt as _,L as a,Ct as b,Ke as c,qe as d,ge as e,mt as f,Nt as g,It as h,vt as u};
//# sourceMappingURL=BTable.vue_vue_type_script_setup_true_lang-D6ymr5i1-CPH5k4Xp.js.map
