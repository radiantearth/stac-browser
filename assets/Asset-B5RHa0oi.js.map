{"version":3,"mappings":"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","names":["_sfc_main","defineAsyncComponent","__vitePreload","BCard","BTab","BTabs","BAccordionItem","StacFieldsMixin","formatMediaType","mapState","Utils","inherit","alternates","key","alternate","merged","Asset","a","b","role","isVisible","event","_hoisted_2","_hoisted_3","_createBlock","_component_b_accordion_item","$options","$data","$event","_createElementVNode","_hoisted_1","_component_b_icon_chevron_down","_component_b_icon_chevron_right","_toDisplayString","$props","_component_b_badge","_ctx","_createVNode","_component_b_icon_check","_createTextVNode","_createElementBlock","_Fragment","_renderList","_hoisted_4","_component_b_card","_component_b_tabs","_component_b_tab","_component_AssetAlternative","_openBlock","altAsset"],"ignoreList":[],"sources":["../../src/components/Asset.vue"],"sourcesContent":["<template>\n  <b-accordion-item\n    :id=\"uid\"\n    v-model=\"expanded\"\n    class=\"asset\"\n    body-class=\"asset-body\"\n    @update:model-value=\"collapseToggled\"\n  >\n    <template #title>\n      <span class=\"chevron\" aria-hidden=\"true\">\n        <b-icon-chevron-down v-if=\"expanded\" />\n        <b-icon-chevron-right v-else />\n      </span>\n      <span class=\"title\">{{ title }}</span>\n      <div class=\"badges ms-1\">\n        <b-badge v-if=\"shown\" variant=\"success\" class=\"shown\" :title=\"$t('assets.currentlyShown')\">\n          <b-icon-check /> {{ $t('assets.shown') }}\n        </b-badge>\n        <b-badge v-if=\"asset.deprecated\" variant=\"warning\" class=\"deprecated\">{{ $t('deprecated') }}</b-badge>\n        <template v-if=\"Array.isArray(asset.roles)\">\n          <b-badge v-for=\"role in sortedRoles\" :key=\"role\" :variant=\"role === 'data' ? 'primary' : 'secondary'\" class=\"role\">{{ displayRole(role) }}</b-badge>\n        </template>\n        <b-badge v-if=\"shortFileFormat\" variant=\"dark\" class=\"format\" :title=\"fileFormat\"><span v-html=\"shortFileFormat\" /></b-badge>\n      </div>\n    </template>\n   \n    <template v-if=\"hasAlternatives\">\n      <b-card no-body class=\"border-0 rounded-0\">\n        <b-tabs lazy card>\n          <b-tab :title=\"asset['alternate:name'] || $t('assets.alternate.main')\" active no-body>\n            <AssetAlternative :asset=\"asset\" :shown=\"shown\" hasAlternatives @show=\"show\" />\n          </b-tab>\n          <b-tab v-for=\"(altAsset, key) in alternatives\" :title=\"altAsset['alternate:name'] || key\" :key=\"key\" no-body>\n            <AssetAlternative :asset=\"altAsset\" :shown=\"shown\" hasAlternatives @show=\"show\" />\n          </b-tab>\n        </b-tabs>\n      </b-card>\n    </template>\n    <AssetAlternative v-else :asset=\"asset\" :shown=\"shown\" @show=\"show\" />\n  </b-accordion-item>\n</template>\n\n<script>\nimport { defineAsyncComponent } from 'vue';\nimport { formatMediaType } from '@radiantearth/stac-fields/formatters';\nimport { mapState } from 'vuex';\nimport StacFieldsMixin from './StacFieldsMixin';\nimport Utils from '../utils';\nimport { Asset } from 'stac-js';\nimport { BCard, BTab, BTabs, BAccordionItem } from 'bootstrap-vue-next';\n\nexport default {\n  name: 'Asset',\n  components: {\n    AssetAlternative: defineAsyncComponent(() => import('./AssetAlternative.vue')),\n    BCard,\n    BTab,\n    BTabs,\n    BAccordionItem\n  },\n  mixins: [\n    StacFieldsMixin({ formatMediaType })\n  ],\n  props: {\n    asset: {\n      type: Object,\n      required: true\n    },\n    definition: {\n      type: Boolean,\n      default: false\n    },\n    expand: {\n      type: Boolean,\n      default: null\n    },\n    shown: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['show'],\n  data() {\n    return {\n      expanded: false\n    };\n  },\n  computed: {\n    ...mapState(['stateQueryParameters']),\n    type() {\n      return this.definition ? 'itemdef' : 'asset';\n    },\n    uid() {\n      return `${this.type}-${this.asset.getKey().toLowerCase().replace(/[^\\w]/g, '-')}`;\n    },\n    title() {\n      return this.asset.title || this.asset.getKey();\n    },\n    fileFormat() {\n      if (typeof this.asset.type === \"string\" && this.asset.type.length > 0) {\n        return this.formatMediaType(this.asset.type);\n      }\n      return null;\n    },\n    shortFileFormat() {\n      if (typeof this.asset.type === \"string\" && this.asset.type.length > 0) {\n        return this.formatMediaType(this.asset.type, null, {shorten: true});\n      }\n      return null;\n    },\n    alternatives() {\n      if (!Utils.isObject(this.asset.alternate)) {\n        return {};\n      }\n\n      const inherit = this.asset.toJSON();\n      delete inherit.alternate;\n\n      const alternates = {};\n      for (const key in this.asset.alternate) {\n        const alternate = this.asset.alternate[key];\n        const merged = Object.assign({}, inherit, alternate.toJSON());\n        alternates[key] = new Asset(merged, key, alternate.getContext());\n      }\n      \n      return alternates;\n    },\n    hasAlternatives() {\n      return Utils.size(this.alternatives) > 0;\n    },\n    sortedRoles() {\n      if (!Array.isArray(this.asset.roles)) {\n        return [];\n      }\n      // Sort roles with 'data' first, then alphabetically (case-insensitive)\n      return [...this.asset.roles].sort((a, b) => {\n        if (a === 'data') {\n          return -1;\n        }\n        if (b === 'data') {\n          return 1;\n        }\n        return a.toLowerCase().localeCompare(b.toLowerCase(), undefined, { sensitivity: 'base' });\n      });\n    }\n  },\n  created() {\n    if (this.stateQueryParameters[this.type].indexOf(this.uid) > -1) {\n      this.expanded = true;\n      return;\n    }\n\n    if (typeof this.expand === 'boolean') {\n      this.expanded = this.expand;\n    }\n    else {\n      this.expanded = false;\n    }\n  },\n  methods: {\n    displayRole(role) {\n      let key = `assets.role.${role}`;\n      if (this.$te(key)) {\n        return this.$t(key);\n      }\n      return role;\n    },\n    collapseToggled(isVisible) {\n      let event = isVisible ? 'openCollapsible' : 'closeCollapsible';\n      this.$store.commit(event, {type: this.type, uid: this.uid});\n    },\n    show() {\n      this.$emit('show', ...arguments);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n#stac-browser .asset {\n  .asset-body {\n    padding: 0;\n  }\n\n  .metadata {\n    .card-columns {\n      column-count: 1;\n    }\n    .card {\n      border: 0;\n    }\n  }\n}\n</style>\n"],"file":"Asset-B5RHa0oi.js"}