import{T as a}from"./Tile-Dd8tR1PC.js";import{f as n,as as o}from"./GeoJSON-BoRJWQIG.js";function l(e){return e instanceof Image||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageBitmap?e:null}function f(e){return e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e instanceof DataView?e:null}const h=new Error("disposed");let i=null;function _(e){i||(i=o(e.width,e.height,void 0,{willReadFrequently:!0}));const t=i.canvas,r=e.width;t.width!==r&&(t.width=r);const s=e.height;return t.height!==s&&(t.height=s),i.clearRect(0,0,r,s),i.drawImage(e,0,0),i.getImageData(0,0,r,s).data}const c=[256,256];class g extends a{constructor(t){const r=n.IDLE;super(t.tileCoord,r,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=l(this.data_);return t?[t.width,t.height]:c}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==n.IDLE&&this.state!==n.ERROR)return;this.state=n.LOADING,this.changed();const t=this;this.loader_().then(function(r){t.data_=r,t.state=n.LOADED,t.changed()}).catch(function(r){t.error_=r,t.state=n.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(h),this.controller_=null),super.disposeInternal()}}export{g as D,l as a,f as b,_ as t};
//# sourceMappingURL=DataTile-B4Zfc0sf.js.map
