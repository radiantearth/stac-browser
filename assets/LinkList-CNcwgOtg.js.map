{"version":3,"mappings":";osBAsBA,IAAIA,EAAS,EAEb,MAAKC,EAAU,CACb,KAAM,gBACN,WAAY,CACV,YAAAC,EACA,SAAAC,EACA,SAAUC,EAAqB,IAAIC,EAAA,IAAE,OAAO,kCAAoB,0FAAE,KAAKC,GAAKA,EAAE,QAAQ,CAAC,EACvF,YAAaF,EAAqB,IAAIC,EAAA,IAAE,OAAO,2BAAmB,qCAAC,EACnE,eAAgBD,EAAqB,IAAIC,EAAA,IAAE,OAAO,8BAAsB,6EAAC,GAE3E,MAAO,CACL,KAAM,CACJ,KAAM,OACN,SAAU,IAEZ,cAAe,CACb,KAAM,SACN,SAAU,IAEZ,QAAS,CACP,KAAM,OACN,QAAS,IACX,GAEF,MAAO,CACL,MAAO,CACL,OAAQ,CAAC,OAAQ,OAAQ,MAAO,QAAS,aAAa,EAE1D,EACA,SAAU,CACR,WAAY,CACV,MAAO,gBAAkBL,CAC3B,GAEF,cAAe,CACbA,GACF,CACF,EA3DMO,EAAA,OAAM,MAAM,EAOHC,EAAA,OAAM,cAAc,EACvBC,EAAA,OAAM,OAAO,6HARvB,OAAAC,EAAA,EAAAC,EAaK,KAbLJ,EAaK,CAZHK,EAAqFC,EAAA,CAA1E,GAAIC,EAAA,UAAY,KAAMC,EAAA,KAAO,cAAeA,EAAA,cAAe,MAAM,+DAC5EH,EAUYI,EAAA,CATT,OAAQF,EAAA,UAAW,UAAU,OAAO,cAAY,gBAAgB,MAAM,YACvE,SAAM,SAAO,mBAAkB,eAE/B,IAA+E,CAA5DC,EAAA,KAAK,iBAAxBE,EAA+EC,EAAA,OAAzC,YAAaH,EAAA,KAAK,YAAa,+DACrEI,EAGU,UAHVX,EAGU,CAFRW,EAAoD,KAApDV,EAAoDW,EAA/BC,EAAA,GAAE,0CACvBT,EAA+CU,EAAA,CAAlC,YAAU,KAAMP,EAAA,KAAM,KAAK,0CAE1CH,EAAiFW,EAAA,CAAhE,KAAMR,EAAA,KAAM,KAAK,OAAO,UAAU,KAAM,aAAcS,EAAA,2FCexEvB,EAAU,CACb,KAAM,WACN,WAAY,CACV,cAAAwB,GAEF,MAAO,CACL,MAAO,CACL,KAAM,OACN,QAAS,MAEX,MAAO,CACL,KAAM,MACN,QAAS,IAAO,IAElB,QAAS,CACP,KAAM,OACN,QAAS,IACX,GAEF,SAAU,CACR,GAAGC,EAAS,CAAC,YAAY,CAAC,EAC1B,QAAS,CACP,IAAIC,EAAS,KAAK,MAAM,OAAO,CAACC,EAASC,IAAS,CAChD,IAAIC,EAAM,OAAOD,EAAK,KAAQ,SAAWA,EAAK,IAAI,YAAW,EAAK,GAClE,OAAIC,KAAOF,EACTA,EAAQE,CAAG,EAAE,MAAM,KAAKD,CAAI,EAG5BD,EAAQE,CAAG,EAAI,CACb,IAAKA,EACL,MAAO,KAAK,UAAUA,CAAG,EACzB,MAAO,CAACD,CAAI,GAGTD,CACT,EAAG,EAAE,EACL,MAAMG,EAAW,IAAI,KAAK,SAAS,KAAK,UAAU,EAClD,OAAO,OAAO,OAAOJ,CAAM,EAAE,KAAK,CAACK,EAAIC,IAAOF,EAAS,QAAQC,EAAG,MAAOC,EAAG,KAAK,CAAC,CACpF,EACA,WAAY,CACV,OAAO,KAAK,OAAO,KAAKC,GAASA,EAAM,IAAI,OAAS,GAAKA,EAAM,MAAM,QAAU,CAAC,CAClF,GAEF,QAAS,CACP,UAAUJ,EAAK,CACb,IAAIK,EAAK,OAAOL,GAAQ,SAAWA,EAAI,YAAW,EAAK,GACvD,OAAIK,KAAMC,SAAO,MAAM,IAAI,QAClBC,EAAgBD,SAAO,MAAM,IAAI,QAAQD,CAAE,CAAC,GAG/CL,EAAI,WAAWQ,CAAY,IAC7BR,EAAMA,EAAI,OAAOQ,EAAa,MAAM,GAE/BC,YAAUT,CAAG,EAExB,EACA,cAAcD,EAAM,CAClB,IAAIW,EAAQC,EAAM,aAAaZ,EAAK,IAAI,EACxC,OAAI,KAAK,UACAW,EAIA,GADG,KAAK,UAAUX,EAAK,GAAG,CACpB,KAAKW,CAAK,EAE3B,CACF,CACF,EA7FWjC,EAAA,OAAM,YAAY,mFAA3B,OAAAG,EAAA,EAAAC,EAaU,UAbVJ,EAaU,CAZEQ,EAAA,OAAVL,EAAA,EAAAC,EAAiC,SAAbI,EAAA,KAAK,gCACTD,EAAA,iBACdH,EAKM+B,EAAA,QAAAC,EAL6B7B,EAAA,OAAToB,QAA1BvB,EAKM,OALD,MAAM,QAAiC,IAAKuB,EAAM,MAC3CA,EAAM,SAAhBvB,EAA2C,KAAAF,EAAAW,EAAnBc,EAAM,KAAK,gCACnCf,EAEK,YADHT,EAAA,IAAAC,EAA0I+B,SAArGR,EAAM,MAAK,CAAzBL,EAAMe,SAA7B3B,EAA0I4B,EAAA,CAAvF,IAAKD,EAAM,KAAMf,EAAO,QAASd,EAAA,QAAU,cAAa,IAAQD,EAAA,cAAce,CAAI,uEAI3IlB,EAEK,KAAAmC,EAAA,EADHpC,EAAA,IAAAC,EAAoI+B,EAAA,KAAAC,EAA/F5B,EAAA,MAAK,CAAnBc,EAAMe,SAA7B3B,EAAoI4B,EAAA,CAAvF,IAAKD,EAAM,KAAMf,EAAO,QAASd,EAAA,QAAU,cAAa,IAAQD,EAAA,cAAce,CAAI","names":["linkId","_sfc_main","HrefActions","StacLink","defineAsyncComponent","__vitePreload","m","_hoisted_1","_hoisted_2","_hoisted_3","_openBlock","_createElementBlock","_createVNode","_component_StacLink","$options","$props","_component_b_popover","_createBlock","_component_Description","_createElementVNode","_toDisplayString","_ctx","_component_HrefActions","_component_MetadataGroups","$data","LinkListEntry","mapState","groups","summary","link","rel","collator","g1","g2","group","lc","Fields","translateFields","ogcRelPrefix","formatKey","title","Utils","_Fragment","_renderList","key","_component_LinkListEntry","_hoisted_4"],"ignoreList":[],"sources":["../../src/components/LinkListEntry.vue","../../src/components/LinkList.vue"],"sourcesContent":["<template>\n  <li class=\"link\">\n    <StacLink :id=\"popoverId\" :data=\"link\" :fallbackTitle=\"fallbackTitle\" class=\"pe-1\" />\n    <b-popover\n      :target=\"popoverId\" placement=\"auto\" teleport-to=\"#stac-browser\" class=\"link-more\"\n      focus hover :boundary-padding=\"20\"\n    >\n      <Description v-if=\"link.description\" :description=\"link.description\" compact />\n      <section class=\"link-actions\">\n        <h3 class=\"first\">{{ $t('additionalActions') }}</h3>\n        <HrefActions vertical :data=\"link\" size=\"sm\" />\n      </section>\n      <MetadataGroups :data=\"link\" type=\"Link\" headerTag=\"h3\" :ignoreFields=\"ignore\" />\n    </b-popover>\n  </li>\n</template>\n\n<script>\nimport { defineAsyncComponent } from 'vue';\nimport HrefActions from './HrefActions.vue';\nimport StacLink from './StacLink.vue';\n\nlet linkId = 0;\n\nexport default {\n  name: \"LinkListEntry\",\n  components: {\n    HrefActions,\n    StacLink,\n    BPopover: defineAsyncComponent(() => import('bootstrap-vue-next').then(m => m.BPopover)),\n    Description: defineAsyncComponent(() => import('./Description.vue')),\n    MetadataGroups: defineAsyncComponent(() => import('./MetadataGroups.vue'))\n  },\n  props: {\n    link: {\n      type: Object,\n      required: true\n    },\n    fallbackTitle: {\n      type: Function,\n      required: true\n    },\n    context: {\n      type: Object,\n      default: null\n    }\n  },\n  data() {\n    return {\n      ignore: ['href', 'type', 'rel', 'title', 'description']\n    };\n  },\n  computed: {\n    popoverId() {\n      return \"popover-link-\" + linkId;\n    }\n  },\n  beforeCreate() {\n    linkId++;\n  }\n};\n</script>\n\n<style lang=\"scss\">\n#stac-browser .link-more {\n  width: auto;\n  max-width: 600px;\n\n  .styled-description {\n    margin-bottom: 1rem;\n  }\n\n  h3 {\n    font-size: 0.85rem;\n    color: #6c757d;\n    text-align: center;\n    padding: 0;\n    font-weight: 600;\n    margin: 1rem 0 0.7rem;\n\n    &.first {\n      margin-top: 0;\n    }\n  }\n  \n  .metadata {\n    min-width: 400px;\n\n    h4 {\n      font-size: 0.85rem;\n      font-weight: normal;\n      margin-top: 0;\n      margin-bottom: 0.5rem;\n    }\n\n    .card-columns {\n      column-count: 1;\n    }\n    .card {\n      border: 0;\n      margin-top: 0;\n      font-size: 0.8rem;\n    }\n    .card-body {\n      padding: 0;\n    }\n  }\n}\n</style>\n","<template>\n  <section class=\"links mb-4\">\n    <h2 v-if=\"title\">{{ title }}</h2>\n    <template v-if=\"hasGroups\">\n      <div class=\"group\" v-for=\"group in groups\" :key=\"group.rel\">\n        <h4 v-if=\"group.rel\">{{ group.label }}</h4>\n        <ul>\n          <LinkListEntry v-for=\"(link, key) in group.links\" :key=\"key\" :link=\"link\" :context=\"context\" :fallbackTitle=\"() => fallbackTitle(link)\" />\n        </ul>\n      </div>\n    </template>\n    <ul v-else>\n      <LinkListEntry v-for=\"(link, key) in links\" :key=\"key\" :link=\"link\" :context=\"context\" :fallbackTitle=\"() => fallbackTitle(link)\" />\n    </ul>\n  </section>\n</template>\n\n<script>\nimport LinkListEntry from './LinkListEntry.vue';\nimport { Fields } from '@radiantearth/stac-fields';\nimport { formatKey } from '@radiantearth/stac-fields/helper';\nimport { ogcRelPrefix } from '../rels';\nimport Utils from '../utils';\nimport { translateFields } from '../i18n';\nimport { mapState } from 'vuex';\n\n\nexport default {\n  name: \"LinkList\",\n  components: {\n    LinkListEntry\n  },\n  props: {\n    title: {\n      type: String,\n      default: null\n    },\n    links: {\n      type: Array,\n      default: () => ([])\n    },\n    context: {\n      type: Object,\n      default: null\n    }\n  },\n  computed: {\n    ...mapState(['uiLanguage']),\n    groups() {\n      let groups = this.links.reduce((summary, link) => {\n        let rel = typeof link.rel === 'string' ? link.rel.toLowerCase() : \"\";\n        if (rel in summary) {\n          summary[rel].links.push(link);\n        }\n        else {\n          summary[rel] = {\n            rel: rel,\n            label: this.formatRel(rel),\n            links: [link]\n          };\n        }\n        return summary;\n      }, {});\n      const collator = new Intl.Collator(this.uiLanguage);\n      return Object.values(groups).sort((g1, g2) => collator.compare(g1.label, g2.label));\n    },\n    hasGroups() {\n      return this.groups.some(group => group.rel.length > 0 && group.links.length >= 2);\n    }\n  },\n  methods: {\n    formatRel(rel) {\n      let lc = typeof rel === 'string' ? rel.toLowerCase() : \"\";\n      if (lc in Fields.links.rel.mapping) {\n        return translateFields(Fields.links.rel.mapping[lc]);\n      }\n      else {\n        if (rel.startsWith(ogcRelPrefix)) {\n          rel = rel.substr(ogcRelPrefix.length);\n        }\n        return formatKey(rel);\n      }\n    },\n    fallbackTitle(link) {\n      let title = Utils.titleForHref(link.href);\n      if (this.hasGroups) {\n        return title;\n      }\n      else {\n        let rel = this.formatRel(link.rel);\n        return `${rel}: ${title}`;\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n#stac-browser .links {\n  ul {\n    list-style-type: '-';\n    margin: 0 0 1em 1em;\n    padding: 0;\n\n    > li {\n      margin-bottom: 0.2em;\n      padding-left: 0.5em;\n    }\n  }\n}\n</style>\n"],"file":"LinkList-CNcwgOtg.js"}