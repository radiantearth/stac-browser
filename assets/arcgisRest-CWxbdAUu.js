import{am as f,y as O,aB as p,bj as u,aC as P}from"./GeoJSON-R3UKT-HL.js";import{a as h}from"./uri-U2Ph9pMv.js";import{getRequestExtent as E}from"./Image-CYNHnAhC.js";import{DECIMALS as S}from"./common-9rOs42pz.js";import"./index-CZLOmM9h.js";import"./utils-BXWzvTjY.js";import"./_commonjsHelpers-CE1G-McA.js";import"./I18N-DlIXJTel.js";import"./BFormRadioGroup.vue_vue_type_script_setup_true_lang-DaMHx4U3-B3EEl1J0.js";import"./useStateClass-BGbSLWFN-CfFJOZ-N.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--fUwaC9LK.js";import"./tilecoord-dopSHpTK.js";import"./common-CNSMZ-XJ.js";import"./resolution-CU8ppKQ3.js";function M(o,t,i,c,s,r){const n=s.getCode().split(/:(?=\d+$)/).pop(),e=i/c,m=[u(p(t)/e,S),u(P(t)/e,S)];r.SIZE=m[0]+","+m[1],r.BBOX=t.join(","),r.BBOXSR=n,r.IMAGESR=n,r.DPI=Math.round(r.DPI?r.DPI*c:90*c);const g=o.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return h(g,r)}function F(o){const t=o.load?o.load:f,i=O(o.projection||"EPSG:3857"),c=o.ratio??1.5,s=o.crossOrigin??null;return function(r,n,e){e=o.hidpi?e:1;const m={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(m,o.params),r=E(r,n,e,c);const g=M(o.url,r,n,e,i,m),d=new Image;return d.crossOrigin=s,t(d,g).then(a=>{const I=p(r)/a.width*e;return{image:a,extent:r,resolution:I,pixelRatio:e}})}}export{F as createLoader,M as getRequestUrl};
//# sourceMappingURL=arcgisRest-CWxbdAUu.js.map
