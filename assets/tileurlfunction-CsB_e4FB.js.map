{"version":3,"file":"tileurlfunction-CsB_e4FB.js","sources":["../../node_modules/ol/tileurlfunction.js"],"sourcesContent":["/**\n * @module ol/tileurlfunction\n */\nimport {modulo} from './math.js';\nimport {hash as tileCoordHash} from './tilecoord.js';\nimport {renderXYZTemplate} from './uri.js';\n\n/**\n * @param {string} template Template.\n * @param {import(\"./tilegrid/TileGrid.js\").default|null} tileGrid Tile grid.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTemplate(template, tileGrid) {\n  return (\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function (tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      }\n      let maxY;\n      const z = tileCoord[0];\n      if (tileGrid) {\n        // The `{-y}` placeholder only works for sources that have a tile grid at construction\n        const range = tileGrid.getFullTileRange(z);\n        if (range) {\n          maxY = range.getHeight() - 1;\n        }\n      }\n      return renderXYZTemplate(template, z, tileCoord[1], tileCoord[2], maxY);\n    }\n  );\n}\n\n/**\n * @param {Array<string>} templates Templates.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTemplates(templates, tileGrid) {\n  const len = templates.length;\n  const tileUrlFunctions = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    tileUrlFunctions[i] = createFromTemplate(templates[i], tileGrid);\n  }\n  return createFromTileUrlFunctions(tileUrlFunctions);\n}\n\n/**\n * @param {Array<import(\"./Tile.js\").UrlFunction>} tileUrlFunctions Tile URL Functions.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTileUrlFunctions(tileUrlFunctions) {\n  if (tileUrlFunctions.length === 1) {\n    return tileUrlFunctions[0];\n  }\n  return (\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function (tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      }\n      const h = tileCoordHash(tileCoord);\n      const index = modulo(h, tileUrlFunctions.length);\n      return tileUrlFunctions[index](tileCoord, pixelRatio, projection);\n    }\n  );\n}\n\n/**\n * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @param {number} pixelRatio Pixel ratio.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {string|undefined} Tile URL.\n */\nexport function nullTileUrlFunction(tileCoord, pixelRatio, projection) {\n  return undefined;\n}\n"],"names":["createFromTemplate","template","tileGrid","tileCoord","pixelRatio","projection","maxY","z","range","renderXYZTemplate","createFromTemplates","templates","len","tileUrlFunctions","i","createFromTileUrlFunctions","h","tileCoordHash","index","modulo","nullTileUrlFunction"],"mappings":"6HAYO,SAASA,EAAmBC,EAAUC,EAAU,CACrD,OAOE,SAAUC,EAAWC,EAAYC,EAAY,CAC3C,GAAI,CAACF,EACH,OAEF,IAAIG,EACJ,MAAMC,EAAIJ,EAAU,CAAC,EACrB,GAAID,EAAU,CAEZ,MAAMM,EAAQN,EAAS,iBAAiBK,CAAC,EACrCC,IACFF,EAAOE,EAAM,UAAS,EAAK,EAE/B,CACA,OAAOC,EAAkBR,EAAUM,EAAGJ,EAAU,CAAC,EAAGA,EAAU,CAAC,EAAGG,CAAI,CACxE,EAEJ,CAOO,SAASI,EAAoBC,EAAWT,EAAU,CACvD,MAAMU,EAAMD,EAAU,OAChBE,EAAmB,IAAI,MAAMD,CAAG,EACtC,QAASE,EAAI,EAAGA,EAAIF,EAAK,EAAEE,EACzBD,EAAiBC,CAAC,EAAId,EAAmBW,EAAUG,CAAC,EAAGZ,CAAQ,EAEjE,OAAOa,EAA2BF,CAAgB,CACpD,CAMO,SAASE,EAA2BF,EAAkB,CAC3D,OAAIA,EAAiB,SAAW,EACvBA,EAAiB,CAAC,GASzB,SAAUV,EAAWC,EAAYC,EAAY,CAC3C,GAAI,CAACF,EACH,OAEF,MAAMa,EAAIC,EAAcd,CAAS,EAC3Be,EAAQC,EAAOH,EAAGH,EAAiB,MAAM,EAC/C,OAAOA,EAAiBK,CAAK,EAAEf,EAAWC,EAAYC,CAAU,CAClE,EAEJ,CAQO,SAASe,EAAoBjB,EAAWC,EAAYC,EAAY,CAEvE","x_google_ignoreList":[0]}