import{d as k,e as L,f as M,h as x,w as p,g as P,n as B,B as S,C as z,A as H,s,P as b,c as C,aG as N,i as D,j,bA as O,m as R,a1 as m,L as q,q as w,y as $,v as g,p as F,F as G,G as U,H as _,r as K,bH as T,bI as Z,Z as J,am as Q,aa as h}from"./index-B3F0456b.js";import{f as W}from"./BTabs.vue_vue_type_script_setup_true_lang-CU4B0ph2-DJDzjcBC.js";import{_ as X}from"./BCollapse.vue_vue_type_script_setup_true_lang-BUisG8-R-DkzwlOSo.js";const Y=["aria-expanded","aria-controls","onClick"],ee=k({inheritAttrs:!1,__name:"BAccordionItem",props:b({bodyAttrs:{default:void 0},bodyClass:{default:void 0},buttonAttrs:{default:void 0},buttonClass:{default:void 0},collapseClass:{default:void 0},headerAttrs:{default:void 0},headerClass:{default:void 0},headerTag:{default:"h2"},horizontal:{type:Boolean,default:void 0},id:{default:void 0},isNav:{type:Boolean,default:void 0},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1},tag:{default:void 0},title:{default:void 0},show:{type:Boolean,default:void 0},visible:{type:Boolean,default:!1},wrapperAttrs:{default:void 0}},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:b(["hide","hide-prevented","hidden","show","show-prevented","shown","toggle","toggle-prevented","cancel","ok"],["update:modelValue"]),setup(c,{emit:V}){const u=L(c,"BAccordionItem"),a=V,i=N(),y=C(()=>{const{class:f,...e}=i;return{wrapperClass:f,collapseAttrs:e}}),n=D(T,null),t=P(()=>u.id,"accordion_item"),d=x(c,"modelValue");d.value?n?.setOpenItem(t.value):d.value=(Array.isArray(n?.openItem.value)?n?.openItem.value.includes(t.value):n?.openItem.value===t.value)&&!n?.initialAnimation.value;const I=j("_el");n?.registerAccordionItem(t.value,I),O(()=>{n?.unregisterAccordionItem(t.value)}),R(()=>{!d.value&&n?.openItem.value===t.value&&m(()=>{d.value=!0})});const A=C(()=>Array.isArray(n?.openItem.value)?n?.openItem.value.includes(t.value):n?.openItem.value===t.value);return p(()=>n?.openItem.value,()=>d.value=A.value),p(d,()=>{d.value&&!A.value?n?.setOpenItem(t.value):!d.value&&A.value&&n?.setCloseItem(t.value)}),(f,e)=>(B(),S("div",g({ref:"_el",class:"accordion-item"},s(u).wrapperAttrs,{class:y.value.wrapperClass}),[q(X,g({id:s(t),modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value=l),class:["accordion-collapse",s(u).collapseClass],"aria-labelledby":`${s(t)}-heading`},y.value.collapseAttrs,{tag:s(u).tag,show:s(u).show,horizontal:s(u).horizontal,visible:s(u).visible,"is-nav":s(u).isNav,lazy:s(u).lazy||s(n)?.lazy.value,"unmount-lazy":s(u).unmountLazy||s(n)?.unmountLazy.value,onShow:e[1]||(e[1]=l=>a("show",l)),onShown:e[2]||(e[2]=l=>a("shown",l)),onHide:e[3]||(e[3]=l=>a("hide",l)),onHidden:e[4]||(e[4]=l=>a("hidden",l)),onHidePrevented:e[5]||(e[5]=l=>a("hide-prevented",l)),onShowPrevented:e[6]||(e[6]=l=>a("show-prevented",l)),onTogglePrevented:e[7]||(e[7]=l=>a("toggle-prevented",l)),onToggle:e[8]||(e[8]=l=>a("toggle",l))}),{header:w(({visible:l,toggle:o})=>[(B(),F(G(s(u).headerTag),g({id:`${s(t)}-heading`,class:["accordion-header",s(u).headerClass]},s(u).headerAttrs),{default:w(()=>[$("button",g({class:"accordion-button"},s(u).buttonAttrs,{class:[{collapsed:!l},s(u).buttonClass],type:"button","aria-expanded":l?"true":"false","aria-controls":s(t),onClick:o}),[z(f.$slots,"title",{},()=>[U(_(s(u).title),1)])],16,Y)]),_:2},1040,["id","class"]))]),default:w(()=>[$("div",g({class:"accordion-body"},s(u).bodyAttrs,{class:s(u).bodyClass}),[z(f.$slots,"default")],16)]),_:3},16,["id","modelValue","class","aria-labelledby","tag","show","horizontal","visible","is-nav","lazy","unmount-lazy"])],16))}}),ae=["id"],se=k({__name:"BAccordion",props:b({flush:{type:Boolean,default:!1},free:{type:Boolean,default:!1},id:{default:void 0},initialAnimation:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},unmountLazy:{type:Boolean,default:!1}},{modelValue:{default:void 0},modelModifiers:{},index:{default:void 0},indexModifiers:{}}),emits:["update:modelValue","update:index"],setup(c){const r=L(c,"BAccordion"),u=M(),a=x(c,"modelValue"),i=x(c,"index"),y=K([]),n=()=>{const e=W(u.default?.({})??[]);y.value=(Array.isArray(e)?e:[e]).filter(l=>l.type===ee)};n(),p(()=>u.default?.({}),()=>{n(),m(()=>{d()})});const t=J([]),d=()=>{if(t.value=t.value.sort((e,l)=>Z(s(e.el),s(l.el))),a.value)if(Array.isArray(a.value)){const e=a.value.map(l=>t.value.findIndex(o=>o.id===l)).filter(l=>l!==-1);e.length,a.value.length,i.value=e}else{const e=t.value.findIndex(l=>l.id===a.value);e!==-1&&(i.value=e)}else i.value!==void 0&&(a.value=Array.isArray(i.value)?i.value.map(e=>t.value[e]?.id):t.value[i.value]?.id)},I=P(()=>r.id,"accordion"),A=C(()=>({"accordion-flush":r.flush})),f=(e,l)=>Array.isArray(e)&&Array.isArray(l)?e.length===l.length&&e.every((o,v)=>o===l[v]):e===l;return p(()=>i.value,(e,l)=>{if(!f(e,l)){if(i.value===void 0){a.value=void 0;return}if(r.free)if(Array.isArray(i.value)){const o=i.value.map(v=>t.value[v]?.id);f(o,a.value)||(a.value=o)}else{const o=t.value[i.value]?.id;if(o===void 0){m(()=>{i.value=void 0});return}f(o,a.value)||(a.value=o)}else{const o=Array.isArray(i.value)?i.value?.[0]:i.value;t.value[o]?.id?a.value!==t.value[o]?.id&&(a.value=t.value[o]?.id):m(()=>{i.value=void 0})}}}),p(()=>a.value,(e,l)=>{if(!f(e,l)){if(a.value===void 0){i.value=void 0;return}if(r.free){if(r.free)if(Array.isArray(a.value)){const o=a.value.map(v=>t.value.findIndex(E=>E.id===v)).filter(v=>v!==-1);o.length>0?f(o,i.value)||(i.value=o):m(()=>{a.value=void 0})}else{const o=t.value.findIndex(v=>v.id===a.value);f(o,i.value)||(i.value=o)}}else{const o=Array.isArray(a.value)?t.value.findIndex(v=>v.id===a.value?.[0]):t.value.findIndex(v=>v.id===a.value);o!==-1?i.value!==o&&(i.value=o):m(()=>{a.value=void 0})}}},{deep:!0}),p(()=>r.free,e=>{a.value&&(!e&&Array.isArray(a.value)?a.value=a.value[0]:e&&!Array.isArray(a.value)&&(a.value=[a.value]))}),Q(T,{openItem:h(()=>a.value),free:h(()=>r.free),initialAnimation:h(()=>r.initialAnimation),lazy:h(()=>r.lazy),unmountLazy:h(()=>r.unmountLazy),setOpenItem:e=>{if(r.free&&!Array.isArray(a.value)){a.value!==void 0?a.value=[a.value,e]:a.value=[e];return}if(!r.free&&Array.isArray(a.value)){a.value=e;return}Array.isArray(a.value)?a.value.includes(e)||(a.value=[...a.value,e]):a.value=e},setCloseItem:e=>{if(!r.free&&Array.isArray(a.value)){a.value=void 0;return}if(Array.isArray(a.value)){const l=a.value.filter(o=>o!==e);a.value=l.length?l:void 0}else a.value===e&&(a.value=void 0)},registerAccordionItem:(e,l)=>{t.value=[...t.value,{id:e,el:l}],t.value.length===y.value.length&&d()},unregisterAccordionItem:e=>{t.value=t.value.filter(l=>l.id!==e)}}),(e,l)=>(B(),S("div",{id:s(I),class:H(["accordion",A.value])},[z(e.$slots,"default")],10,ae))}});export{ee as _,se as a};
//# sourceMappingURL=BAccordion.vue_vue_type_script_setup_true_lang-Ccx3zW5a-Cb3i65Yt.js.map
