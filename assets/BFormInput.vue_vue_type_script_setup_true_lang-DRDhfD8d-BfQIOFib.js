import{g as q,i as V,aJ as A,m as _,c0 as D,r as k,aA as F,bZ as S,a1 as T,c as M,d as U,e as W,h as K,j as P,n as j,B as G,s as t,A as R,P as Z}from"./index-4V-ffF_e.js";import{u as w,a as E}from"./useStateClass-BGbSLWFN-lMazZNQ7.js";import{u as J}from"./debounce-BHqBzJ1a-C7d6vPFW.js";const $=(a,s)=>{if(a===null)return;let n=a;if(s.number&&typeof n=="string"&&n!==""){const e=Number.parseFloat(n);n=Number.isNaN(e)?n:e}return n},H=(a,s,n,e)=>{const i=k(0),c=q(()=>a.id,"input"),m=F(()=>a.debounce??0,{nanToZero:!0}),N=F(()=>a.debounceMaxWait??Number.NaN),z=V(S,null)?.(c),p=M(()=>a.state!==void 0?a.state:z?.state.value??null),g=E(()=>a.ariaInvalid,p),B=w(p),I=J(o=>{n.value=o},()=>e.lazy===!0?0:m.value,{maxWait:()=>e.lazy===!0?Number.NaN:N.value}),v=(o,r=!1,l=!1)=>{e.lazy===!0&&r===!1||(l?n.value=o:I(o))},{focused:y}=A(s,{initialValue:a.autofocus}),b=(o,r,l=!1)=>a.formatter!==void 0&&(!a.lazyFormatter||l)?a.formatter(o,r):o;return _(()=>{s.value&&(s.value.value=n.value?.toString()??"")}),D(()=>{T(()=>{a.autofocus&&(y.value=!0)})}),{input:s,computedId:c,computedAriaInvalid:g,onInput:o=>{const{value:r}=o.target,l=b(r,o);if(o.defaultPrevented){o.preventDefault();return}v(l)},onChange:o=>{const{value:r}=o.target,l=b(r,o);if(o.defaultPrevented){o.preventDefault();return}const x=l;n.value!==x&&v(l,!0)},onBlur:o=>{if(!e.lazy&&!a.lazyFormatter&&!e.trim&&m.value<=0)return;const{value:r}=o.target,l=b(r,o,!0),x=e.trim?l.trim():l,h=x.length!==l.length;I.cancel(),n.value!==x&&v(l,!0,!0),e.trim&&h&&(i.value=i.value+1)},focus:()=>{a.disabled||(y.value=!0)},blur:()=>{a.disabled||(y.value=!1)},forceUpdateKey:i,stateClass:B}},L=["id","value","name","form","type","disabled","placeholder","required","autocomplete","readonly","min","max","step","list","aria-required","aria-invalid"],ee=U({__name:"BFormInput",props:Z({max:{default:void 0},min:{default:void 0},step:{default:void 0},type:{default:"text"},ariaInvalid:{type:[Boolean,String],default:void 0},autocomplete:{default:void 0},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{default:void 0},formatter:{type:Function,default:void 0},id:{default:void 0},lazyFormatter:{type:Boolean,default:!1},list:{default:void 0},name:{default:void 0},placeholder:{default:void 0},plaintext:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},size:{default:void 0},state:{type:[Boolean,null],default:void 0},debounce:{default:0},debounceMaxWait:{default:Number.NaN}},{modelValue:{default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(a,{expose:s}){const e=W(a,"BFormInput"),[i,c]=K(a,"modelValue",{set:d=>$(d,c)}),m=P("_input"),{computedId:N,computedAriaInvalid:z,onInput:p,onChange:g,onBlur:B,stateClass:I,focus:v,blur:y,forceUpdateKey:b}=H(e,m,i,c),C=M(()=>{const d=e.type==="range",u=e.type==="color";return[I.value,{"form-range":d,"form-control":u||!e.plaintext&&!d,"form-control-color":u,"form-control-plaintext":e.plaintext&&!d&&!u,[`form-control-${e.size}`]:!!e.size}]});return s({blur:y,element:m,focus:v}),(d,u)=>(j(),G("input",{id:t(N),ref:"_input",key:t(b),value:t(i),class:R(C.value),name:t(e).name||void 0,form:t(e).form||void 0,type:t(e).type,disabled:t(e).disabled,placeholder:t(e).placeholder,required:t(e).required||void 0,autocomplete:t(e).autocomplete||void 0,readonly:t(e).readonly||t(e).plaintext,min:t(e).min,max:t(e).max,step:t(e).step,list:t(e).type!=="password"?t(e).list:void 0,"aria-required":t(e).required||void 0,"aria-invalid":t(z),onInput:u[0]||(u[0]=(...f)=>t(p)&&t(p)(...f)),onChange:u[1]||(u[1]=(...f)=>t(g)&&t(g)(...f)),onBlur:u[2]||(u[2]=(...f)=>t(B)&&t(B)(...f))},null,42,L))}});export{ee as _,$ as n,H as u};
//# sourceMappingURL=BFormInput.vue_vue_type_script_setup_true_lang-DRDhfD8d-BfQIOFib.js.map
