{"version":3,"mappings":"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","names":["_sfc_main","BDropdown","BDropdownItemButton","defineAsyncComponent","__vitePreload","DatePickerMixin","option","findIndex","op","nextIndex","evt","val","Utils","CqlValue","_hoisted_1","_hoisted_2","_hoisted_3","_openBlock","_createElementBlock","_createElementVNode","_toDisplayString","$props","_createVNode","_component_b_dropdown","$options","_Fragment","_renderList","_createBlock","_component_b_dropdown_item_button","$event","_component_b_badge","_createTextVNode","_component_VueDatePicker","_ctx","_component_b_form_select","_mergeProps","_cache","_component_b_form_input","_component_b_form_checkbox","_component_b_button","_component_b_icon_x_circle_fill","_hoisted_4","_component_Description"],"ignoreList":[],"sources":["../../src/components/QueryableInput.vue"],"sourcesContent":["<template>\n  <div class=\"queryable-group\">\n    <div class=\"queryable-row\">\n      <span class=\"title\">\n        {{ queryable.title }}\n      </span>\n\n      <b-dropdown size=\"sm\" class=\"op\" variant=\"dark\" split :text=\"operator.label\" @click=\"iterateOps\">\n        <b-dropdown-item-button\n          v-for=\"op in operators\"\n          :key=\"op.SYMBOL\"\n          :active=\"op === operator\"\n          @click=\"updateOperator(op)\"\n          button-class=\"d-flex justify-content-between align-items-center\"\n        >\n          <span>{{ op.longLabel }}</span>\n          <b-badge variant=\"dark\" class=\"ms-2\">{{ op.label }}</b-badge>\n        </b-dropdown-item-button>\n      </b-dropdown>\n\n      <VueDatePicker\n        v-if=\"queryable.isTemporal\"\n        class=\"value\"\n        :model-value=\"value?.value\"\n        @update:model-value=\"updateValue\"\n        :locale=\"datepickerLang\"\n        :week-start=\"weekStartDay\"\n        :formats=\"{ input: queryable.isDateTime ? dateTimeFormat : dateFormat }\"\n        :close-on-scroll=\"false\"\n        :time-config=\"{ \n          enableTimePicker: queryable.isDateTime,\n          seconds: queryable.isDateTime,\n          timePickerInline: true \n        }\"\n        :input-attrs=\"{ clearable: true }\"\n        auto-apply\n      />\n\n      <b-form-select\n        v-else-if=\"queryable.isSelection\"\n        :options=\"queryableOptions\"\n        size=\"sm\"\n        class=\"value\"\n        :model-value=\"value.value\"\n        @update:model-value=\"updateValue($event)\"\n        v-bind=\"validation\"\n      />\n      <b-form-input\n        v-else-if=\"queryable.isText || queryable.isNumeric\"\n        size=\"sm\"\n        class=\"value\"\n        :model-value=\"value.value\"\n        @update:model-value=\"updateValue($event)\"\n        v-bind=\"validation\"\n      />\n      <b-form-checkbox\n        v-else-if=\"queryable.isBoolean\"\n        switch\n        class=\"value\"\n        :model-value=\"value.value\"\n        @update:model-value=\"updateValue($event)\"\n        v-bind=\"validation\"\n      >\n        {{ $t(`checkbox.${value.value}`) }}\n      </b-form-checkbox>\n\n      <b-button class=\"delete\" size=\"sm\" variant=\"danger\" @click=\"$emit('remove-queryable')\">\n        <b-icon-x-circle-fill aria-hidden=\"true\" />\n      </b-button>\n    </div>\n\n    <div v-if=\"queryable.description || operator.description\" class=\"queryable-help text-muted small\">\n      <Description v-if=\"operator.description\" :description=\"operator.description\" inline />\n      <Description v-if=\"queryable.description\" :description=\"queryable.description\" inline />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { defineAsyncComponent } from 'vue';\n\nimport { BDropdown, BDropdownItemButton } from 'bootstrap-vue-next';\n\nimport DatePickerMixin from './DatePickerMixin';\nimport Utils from '../utils';\nimport CqlValue from '../models/cql2/value';\n    \nexport default {\n  name: 'QueryableInput',\n  components: {\n    BDropdown,\n    BDropdownItemButton,\n    Description: defineAsyncComponent(() => import('./Description.vue'))\n  },\n  mixins: [\n    DatePickerMixin\n  ],\n  props: {\n    // eslint-disable-next-line\n    value: {\n      // Any type is allowed\n    },\n    operator: {\n      type: Function,\n      required: true\n    },\n    queryable: {\n      type: Object,\n      required: true\n    },\n    cql: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: [\n    'remove-queryable',\n    'update:value',\n    'update:operator'\n  ],\n  computed: {\n    validation() {\n      if (this.queryable.isText) {\n        return {\n          type: 'text',\n          minlength: this.schema.minLength,\n          maxlength: this.schema.maxLength,\n          required: this.schema.minLength > 0\n        };\n      }\n      else if (this.queryable.isNumeric) {\n        return {\n          type: 'number',\n          number: true,\n          min: this.schema.minimum,\n          max: this.schema.maximum,\n          step: this.schema.multipleOf || 'any'\n        };\n      }\n      return {};\n    },\n    schema() {\n      return this.queryable.schema;\n    },\n    operators() {\n      return this.queryable.getOperators(this.cql);\n    },\n    queryableOptions() {\n      if (this.queryable.isSelection) {\n        return this.schema.enum.map(option => ({\n          value: option,\n          text: option\n        }));\n      }\n      return [];\n    }\n  },\n  methods: {\n    iterateOps() {\n      let findIndex = this.operators.findIndex(op => op === this.operator);\n      let nextIndex = ++findIndex % this.operators.length;\n      this.updateOperator(this.operators[nextIndex]);\n    },\n    updateValue(evt) {\n      let val = Utils.isObject(evt) && 'target' in evt ? evt.target.value : evt;\n      if (typeof val === \"string\" && this.queryable.is('integer')) {\n        val = parseInt(val, 10);\n      }\n      else if (typeof val === \"string\" && this.queryable.is('number')) {\n        val = parseFloat(val);\n      }\n      this.$emit('update:value', CqlValue.create(val));\n    },\n    updateOperator(op) {\n      this.$emit('update:operator', op);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import 'bootstrap/scss/mixins';\n@import \"../theme/variables.scss\";\n@import '../theme/datepicker.scss';\n\n.queryable-row {\n  margin: 0.25em 0;\n  gap: 0.5em;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  align-content: center;\n  display: flex;\n\n  .title, .value {\n    flex-grow: 4;\n    width: 7rem !important;\n  }\n  .op {\n    min-width: 4rem;\n    width: auto;\n  }\n  .delete {\n    width: auto;\n  }\n}\n\n.queryable-help {\n  display: block;\n  margin: 0.25em 0 1em 0;\n  line-height: 1.1em;\n}\n\n.queryable-group {\n  margin: 0.75em 0;\n}\n</style>\n"],"file":"QueryableInput-BIblxSJ4.js"}