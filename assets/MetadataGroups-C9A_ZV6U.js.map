{"version":3,"mappings":"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","names":["EntryMixin","FORCE_TABLE","_sfc_main","defineAsyncComponent","__vitePreload","Utils","_createBlock","_component_b_row","_createVNode","_component_b_col","$options","_ctx","_createElementVNode","_hoisted_1","_component_MetadataTable","_hoisted_2","MetadataEntry","BCard","BCardTitle","_component_b_card","$props","_component_b_card_title","_createElementBlock","_Fragment","_openBlock","_renderList","entry","key","_component_MetadataEntry","_mergeProps","BCardGroup","MetadataGroup","StacFieldsMixin","mapState","locale","en","__variableDynamicImportRuntimeHelper","isoDuration","filter","formatAsset","formatLink","formatProvider","formatItemProperties","formatCatalog","core","formatCollection","formatSummaries","summaryGroup","index","coreGroup","collator","a","b","formatGrouped","$data","_resolveDynamicComponent","_component_b_card_group","_normalizeClass","group","_component_MetadataGroup"],"ignoreList":[],"sources":["../../src/components/metadata/EntryMixin.js","../../src/components/metadata/MetadataEntry.vue","../../src/components/metadata/MetadataGroup.vue","../../src/components/MetadataGroups.vue"],"sourcesContent":["export default {\n  props: {\n    field: {\n      type: String,\n      required: true\n    },\n    label: {\n      type: String,\n      required: true\n    },\n    value: {},\n    formatted: {\n      type: String\n    },\n    spec: {\n      type: Object,\n      required: true\n    },\n    itemOrder: {},\n    items: {}\n  }\n};","<template>\n  <b-row>\n    <b-col :md=\"showTable ? 12 : 3\" class=\"label\" :title=\"field\">\n      <span v-html=\"label\" />\n    </b-col>\n    <b-col v-if=\"showTable\" md=\"12\" class=\"value mt-2\">\n      <MetadataTable v-bind=\"$props\" />\n    </b-col>\n    <b-col v-else md=\"9\" class=\"value\">\n      <div v-html=\"formatted\" />\n    </b-col>\n  </b-row>\n</template>\n\n<script>\nimport EntryMixin from './EntryMixin';\nimport Utils from '../../utils';\nimport { defineAsyncComponent } from 'vue';\n\nconst FORCE_TABLE = [\n  'languages',\n  'eo:bands',\n  'raster:bands',\n  'bands'\n];\n\nexport default {\n  name: \"MetadataEntry\",\n  components: {\n    MetadataTable: defineAsyncComponent(() => import('./MetadataTable.vue'))\n  },\n  mixins: [\n    EntryMixin\n  ],\n  computed: {\n    showTable() {\n      return FORCE_TABLE.includes(this.field) || this.itemOrder.length > 0 && Utils.size(this.value) >= 3;\n    }\n  }\n};\n</script>\n","<template>\n  <b-card no-body :key=\"extension\" :class=\"['metadata-card', `ext-${extension}`]\">\n    <b-card-title>\n      <span v-if=\"label\" v-html=\"label\" />\n      <template v-else>{{ $t('metadata.general') }}</template>\n    </b-card-title>\n    <section class=\"border metadata-rows\">\n      <MetadataEntry v-for=\"(entry, key) in properties\" :field=\"key\" :key=\"key\" v-bind=\"entry\" />\n    </section>\n  </b-card>\n</template>\n\n<script>\nimport MetadataEntry from './MetadataEntry.vue';\nimport { BCard, BCardTitle } from 'bootstrap-vue-next';\n\nexport default {\n  name: \"MetadataGroup\",\n  components: {\n    MetadataEntry,\n    BCard,\n    BCardTitle\n  },\n  props: {\n      label: {\n        type: String,\n        default: ''\n      },\n      extension: {\n        type: String,\n        default: ''\n      },\n      properties: {\n        type: Object,\n        required: true\n      }\n  }\n};\n</script>\n","<template>\n  <section v-if=\"formattedData.length > 0\" class=\"metadata\">\n    <component :is=\"headerTag\" v-if=\"title\">{{ titleText }}</component>\n    <b-card-group columns :class=\"`count-${formattedData.length}`\">\n      <MetadataGroup\n        v-for=\"group in formattedData\"\n        :key=\"group.extension\"\n        v-bind=\"group\"\n      />\n    </b-card-group>\n  </section>\n</template>\n\n<script>\nimport { BCardGroup } from 'bootstrap-vue-next';\nimport {\n  formatAsset,\n  formatCatalog,\n  formatCollection,\n  formatGrouped,\n  formatItemProperties,\n  formatLink,\n  formatProvider,\n  formatSummaries,\n} from \"@radiantearth/stac-fields\";\nimport StacFieldsMixin from './StacFieldsMixin';\nimport MetadataGroup from \"./metadata/MetadataGroup.vue\";\nimport { isoDuration } from \"@musement/iso-duration\";\nimport { mapState } from \"vuex\";\n// Register custom fields for the metadata rendering\n \nimport \"../../fields.config\";\n\nexport default {\n  name: \"MetadataGroups\",\n  components: {\n    BCardGroup,\n    MetadataGroup,\n  },\n  mixins: [\n    StacFieldsMixin({}),\n  ],\n  props: {\n    data: {\n      type: Object,\n      required: true,\n    },\n    type: {\n      type: String,\n      required: true,\n    },\n    context: {\n      type: Object,\n      default: null,\n    },\n    ignoreFields: {\n      type: Array,\n      default: () => [],\n    },\n    title: {\n      type: [Boolean, String],\n      default: true,\n    },\n    headerTag: {\n      type: String,\n      default: \"h2\",\n    },\n  },\n  data() {\n    return {\n      formattedData: [],\n    };\n  },\n  computed: {\n    ...mapState([\"uiLanguage\"]),\n    titleText() {\n      if (typeof this.title === \"string\") {\n        return this.title;\n      }\n      return this.$t(\"metadata.title\");\n    },\n  },\n  watch: {\n    uiLanguage: {\n      immediate: true,\n      async handler(locale) {\n        if (!locale) {\n          return;\n        }\n\n        // Update durations (for stac-fields)\n        const en = (await import(`../locales/${locale}/duration.js`)).default;\n        isoDuration.setLocales({ en });\n\n        // Format the data again to update translations\n        this.formattedData = this.formatData();\n      },\n    },\n  },\n  methods: {\n    formatData() {\n      // Filter all fields as given in ignoreFields and also\n      // ignore fields starting with an underscore which is likely originating from the STAC class\n      let filter = (key) =>\n        !key.startsWith(\"_\") && !this.ignoreFields.includes(key);\n      switch (this.type) {\n        case \"Asset\":\n          return formatAsset(this.data.toJSON(), this.context, filter);\n        case \"Link\":\n          return formatLink(this.data, this.context, filter);\n        case \"Provider\":\n          return formatProvider(this.data, this.context, filter);\n        case \"Item\":\n          return formatItemProperties(this.data, filter);\n        case \"Catalog\":\n          return formatCatalog(this.data, filter);\n        case \"Collection\": {\n          let core = formatCollection(this.data, filter);\n          let summaries = formatSummaries(this.data, filter);\n          // Merge summaries into collection metadata\n          summaries.forEach((summaryGroup) => {\n            let index = core.findIndex(\n              (coreGroup) => summaryGroup.extension === coreGroup.extension\n            );\n            if (index !== -1) {\n              Object.assign(core[index].properties, summaryGroup.properties);\n            } else {\n              core.push(summaryGroup);\n            }\n          });\n          const collator = new Intl.Collator(this.uiLanguage);\n          return core.sort((a, b) => collator.compare(a.label, b.label));\n        }\n        case \"FeatureCollection\":\n          return {};\n        default:\n          return formatGrouped(this.context, this.data, this.type, filter);\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../theme/variables.scss\";\n\n#stac-browser {\n  .metadata {\n    .card {\n      border: 0;\n      margin-top: $block-margin;\n      margin-bottom: $block-margin;\n      text-align: left;\n\n      .metadata-rows {\n        border-radius: $border-radius;\n      }\n\n      .row {\n        padding: 0.4rem;\n        border-top: 1px solid rgba(0, 0, 0, 0.125);\n\n        &:first-child {\n          border-top: 0;\n        }\n        &:nth-child(odd) {\n          background: rgba(0, 0, 0, 0.03);\n        }\n      }\n    }\n    .row {\n      margin: 0;\n      padding: 0;\n    }\n    .label {\n      margin: 0;\n      padding-left: 0;\n      font-weight: 600;\n      vertical-align: top;\n    }\n    .value {\n      margin: 0;\n      padding-right: 0;\n\n      > ul,\n      > ol,\n      > pre,\n      > dl,\n      > .description {\n        max-height: 15em;\n        overflow: auto;\n      }\n\n      .styled-description {\n        h1 {\n          font-size: 1.5em;\n        }\n        h2 {\n          font-size: 1.4em;\n        }\n        h3 {\n          font-size: 1.3em;\n        }\n        h4 {\n          font-size: 1.2em;\n        }\n        h5 {\n          font-size: 1.1em;\n        }\n        h6 {\n          font-size: 1em;\n        }\n      }\n    }\n    ul {\n      padding-left: 1.4em;\n      margin-bottom: 0;\n    }\n    ol {\n      padding-left: 2em;\n      margin-bottom: 0;\n    }\n    ul li {\n      list-style-type: \"â€¢ \";\n    }\n    dl {\n      margin: 0;\n      margin-left: 1em;\n      margin-bottom: 0.5em;\n\n      &:only-child {\n        margin-left: 0;\n        margin-bottom: 0;\n      }\n      dl:only-child {\n        margin-left: 1em;\n      }\n    }\n    ul > li > dl,\n    ol > li > dl {\n      margin-left: 0;\n    }\n    dt {\n      display: inline;\n    }\n    dt:after {\n      content: \": \";\n    }\n    dd {\n      display: inline;\n\n      &:not(:last-of-type) > dl:only-child {\n        margin-bottom: -1em;\n      }\n      &:after {\n        content: \"\\A\";\n        white-space: pre;\n        line-height: 1px;\n      }\n      &:last-of-type:after {\n        content: \"\";\n        white-space: normal;\n      }\n      .description {\n        display: inline-block;\n\n        > p:only-child {\n          display: inline;\n        }\n      }\n      > ul,\n      > ol {\n        max-height: 15em;\n        overflow: auto;\n      }\n    }\n    .provider .description {\n      font-size: 0.9em;\n      line-height: 1.5em;\n      margin-bottom: 0.5em;\n    }\n    .checksum-input {\n      width: 100%;\n    }\n\n    .color {\n      text-align: center;\n\n      .color-code {\n        color: white;\n        text-shadow: 1px 1px 1px #000;\n        text-align: center;\n      }\n    }\n  }\n}\n</style>\n"],"file":"MetadataGroups-C9A_ZV6U.js"}