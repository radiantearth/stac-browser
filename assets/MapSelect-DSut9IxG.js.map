{"version":3,"file":"MapSelect-DSut9IxG.js","sources":["../../src/components/maps/UserLocationControl.vue","../../node_modules/ol/interaction/Extent.js","../../node_modules/@turf/helpers/dist/esm/index.js","../../node_modules/bignumber.js/bignumber.mjs","../../node_modules/splaytree-ts/dist/esm/index.js","../../node_modules/polyclip-ts/dist/esm/index.js","../../node_modules/@turf/clone/dist/esm/index.js","../../node_modules/@turf/mask/dist/esm/index.js","../../src/components/maps/MapSelect.vue"],"sourcesContent":["<template>\n  <div class=\"ol-location ol-unselectable ol-control\" style=\"pointer-events: auto;\">\n    <button @click.prevent.stop=\"request\" :title=\"$t('mapping.location.description')\">\n      <b-icon-pin-map-fill />\n    </button>\n  </div>\n</template>\n\n<script>\nimport Point from 'ol/geom/Point';\nimport ControlMixin from './ControlMixin';\nimport { fromLonLat } from 'ol/proj';\n\nexport default {\n  name: 'UserLocationControl',\n  mixins: [\n    ControlMixin\n  ],\n  props: {\n    maxZoom: {\n      type: Number,\n      default: undefined\n    }\n  },\n  methods: {\n    request() {\n      if (\"geolocation\" in navigator) {\n        navigator.geolocation.getCurrentPosition(\n          position => {\n            const view = this.map.getView();\n            const coords = fromLonLat([position.coords.longitude, position.coords.latitude], view.getProjection());\n            const point = new Point(coords);\n            view.fit(point, {maxZoom: this.maxZoom});\n          },\n          error => this.$store.commit('showGlobalError', {\n            error,\n            message: error.message\n          }),\n          {\n            maximumAge: Infinity\n          }\n        );\n      }\n    },\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.ol-location {\n  z-index: 1;\n  left: 0.5em;\n  top: calc(3.75em + 6px);\n}\n</style>\n","/**\n * @module ol/interaction/Extent\n */\nimport Feature from '../Feature.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport {\n  closestOnSegment,\n  distance as coordinateDistance,\n  squaredDistance as squaredCoordinateDistance,\n  squaredDistanceToSegment,\n} from '../coordinate.js';\nimport Event from '../events/Event.js';\nimport {always} from '../events/condition.js';\nimport {boundingExtent, containsCoordinate, getArea} from '../extent.js';\nimport Point from '../geom/Point.js';\nimport {fromExtent as polygonFromExtent} from '../geom/Polygon.js';\nimport VectorLayer from '../layer/Vector.js';\nimport {toUserExtent} from '../proj.js';\nimport VectorSource from '../source/Vector.js';\nimport {createEditingStyle} from '../style/Style.js';\nimport PointerInteraction from './Pointer.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition.always}.\n * @property {import(\"../events/condition.js\").Condition|null} [createCondition=null] A function that\n * takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled to create a new extent.\n * If `null`, the `condition` will also be used as `createCondition`.\n * @property {boolean} [drag=false] An extent can be dragged.\n * @property {import(\"../extent.js\").Extent} [extent] Initial extent. Defaults to no\n * initial extent.\n * @property {import(\"../style/Style.js\").StyleLike} [boxStyle]\n * Style for the drawn extent box. Defaults to the `Polygon` editing style\n * documented in {@link module:ol/style/Style~Style}\n * @property {number} [pixelTolerance=10] Pixel tolerance for considering the\n * pointer close enough to a segment or vertex for editing.\n * @property {import(\"../style/Style.js\").StyleLike} [pointerStyle]\n * Style for the cursor used to draw the extent. Defaults to the `Point` editing style\n * documented in {@link module:ol/style/Style~Style}\n * @property {boolean} [wrapX=false] Wrap the drawn extent across multiple maps\n * in the X direction? Only affects visuals, not functionality.\n */\n\n/**\n * @enum {string}\n */\nconst ExtentEventType = {\n  /**\n   * Triggered after the extent is changed\n   * @event ExtentEvent#extentchanged\n   * @api\n   */\n  EXTENTCHANGED: 'extentchanged',\n};\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/Extent~Extent} instances are\n * instances of this type.\n */\nexport class ExtentEvent extends Event {\n  /**\n   * @param {import(\"../extent.js\").Extent} extent the new extent\n   */\n  constructor(extent) {\n    super(ExtentEventType.EXTENTCHANGED);\n\n    /**\n     * The current extent.\n     * @type {import(\"../extent.js\").Extent}\n     * @api\n     */\n    this.extent = extent;\n  }\n}\n\n/**\n * @typedef {function (import(\"../coordinate.js\").Coordinate): import(\"../extent.js\").Extent} PointerHandler\n */\n\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:active', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").OnSignature<'extentchanged', ExtentEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types|\n *     'change:active'|'extentchanged', Return>} ExtentOnSignature\n */\n\n/**\n * @classdesc\n * Allows the user to draw a vector box by clicking and dragging on the map.\n * Once drawn, the vector box can be modified by dragging its vertices or edges.\n * The interaction can also be configured with an initial extent and a `createCondition`\n * to prevent the creation of a new extent on `pointerdown`, if desired.\n *\n * @fires ExtentEvent\n * @api\n */\nclass Extent extends PointerInteraction {\n  /**\n   * @param {Options} [options] Options.\n   */\n  constructor(options) {\n    options = options || {};\n\n    super(/** @type {import(\"./Pointer.js\").Options} */ (options));\n\n    /***\n     * @type {ExtentOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.on;\n\n    /***\n     * @type {ExtentOnSignature<import(\"../events\").EventsKey>}\n     */\n    this.once;\n\n    /***\n     * @type {ExtentOnSignature<void>}\n     */\n    this.un;\n\n    /**\n     * Condition\n     * @type {import(\"../events/condition.js\").Condition}\n     * @private\n     */\n    this.condition_ = options.condition ? options.condition : always;\n\n    /**\n     * @type {import(\"../events/condition.js\").Condition}\n     * @private\n     */\n    this.createCondition_ = options.createCondition || this.condition_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.drag_ = options.drag || false;\n\n    /**\n     * Extent of the drawn box\n     * @type {import(\"../extent.js\").Extent}\n     * @private\n     */\n    this.extent_ = null;\n\n    /**\n     * Handler for pointer move events\n     * @type {PointerHandler|null}\n     * @private\n     */\n    this.pointerHandler_ = null;\n\n    /**\n     * Pixel threshold to snap to extent\n     * @type {number}\n     * @private\n     */\n    this.pixelTolerance_ =\n      options.pixelTolerance !== undefined ? options.pixelTolerance : 10;\n\n    /**\n     * Is the pointer snapped to an extent vertex\n     * @type {boolean}\n     * @private\n     */\n    this.snappedToVertex_ = false;\n\n    /**\n     * Feature for displaying the visible extent\n     * @type {Feature}\n     * @private\n     */\n    this.extentFeature_ = null;\n\n    /**\n     * Feature for displaying the visible pointer\n     * @type {Feature<Point>}\n     * @private\n     */\n    this.vertexFeature_ = null;\n\n    if (!options) {\n      options = {};\n    }\n\n    /**\n     * Layer for the extentFeature\n     * @type {VectorLayer}\n     * @private\n     */\n    this.extentOverlay_ = new VectorLayer({\n      source: new VectorSource({\n        useSpatialIndex: false,\n        wrapX: !!options.wrapX,\n      }),\n      style: options.boxStyle\n        ? options.boxStyle\n        : getDefaultExtentStyleFunction(),\n      updateWhileAnimating: true,\n      updateWhileInteracting: true,\n    });\n\n    /**\n     * Layer for the vertexFeature\n     * @type {VectorLayer}\n     * @private\n     */\n    this.vertexOverlay_ = new VectorLayer({\n      source: new VectorSource({\n        useSpatialIndex: false,\n        wrapX: !!options.wrapX,\n      }),\n      style: options.pointerStyle\n        ? options.pointerStyle\n        : getDefaultPointerStyleFunction(),\n      updateWhileAnimating: true,\n      updateWhileInteracting: true,\n    });\n\n    if (options.extent) {\n      this.setExtent(options.extent);\n    }\n  }\n\n  /**\n   * @param {import(\"../pixel.js\").Pixel} pixel cursor location\n   * @param {import(\"../Map.js\").default} map map\n   * @return {import(\"../coordinate.js\").Coordinate|null} snapped vertex on extent\n   * @private\n   */\n  snapToVertex_(pixel, map) {\n    const pixelCoordinate = map.getCoordinateFromPixelInternal(pixel);\n    const sortByDistance = function (a, b) {\n      return (\n        squaredDistanceToSegment(pixelCoordinate, a) -\n        squaredDistanceToSegment(pixelCoordinate, b)\n      );\n    };\n    const extent = this.getExtentInternal();\n    if (extent) {\n      //convert extents to line segments and find the segment closest to pixelCoordinate\n      const segments = getSegments(extent);\n      segments.sort(sortByDistance);\n      const closestSegment = segments[0];\n\n      let vertex = closestOnSegment(pixelCoordinate, closestSegment);\n      const vertexPixel = map.getPixelFromCoordinateInternal(vertex);\n\n      //if the distance is within tolerance, snap to the segment\n      if (coordinateDistance(pixel, vertexPixel) <= this.pixelTolerance_) {\n        //test if we should further snap to a vertex\n        const pixel1 = map.getPixelFromCoordinateInternal(closestSegment[0]);\n        const pixel2 = map.getPixelFromCoordinateInternal(closestSegment[1]);\n        const squaredDist1 = squaredCoordinateDistance(vertexPixel, pixel1);\n        const squaredDist2 = squaredCoordinateDistance(vertexPixel, pixel2);\n        const dist = Math.sqrt(Math.min(squaredDist1, squaredDist2));\n        this.snappedToVertex_ = dist <= this.pixelTolerance_;\n        if (this.snappedToVertex_) {\n          vertex =\n            squaredDist1 > squaredDist2 ? closestSegment[1] : closestSegment[0];\n        }\n        return vertex;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent pointer move event\n   * @return {boolean} The event was handled.\n   * @private\n   */\n  handlePointerMove_(mapBrowserEvent) {\n    const pixel = mapBrowserEvent.pixel;\n    const map = mapBrowserEvent.map;\n    const draggable =\n      this.drag_ &&\n      containsCoordinate(this.extent_, mapBrowserEvent.coordinate);\n\n    let vertex = this.snapToVertex_(pixel, map);\n    if (!vertex && this.createCondition_(mapBrowserEvent) && !draggable) {\n      vertex = map.getCoordinateFromPixelInternal(pixel);\n    }\n    if (draggable && !vertex) {\n      this.getMap().getViewport().classList.add('ol-grab');\n    } else {\n      this.getMap().getViewport().classList.remove('ol-grab');\n    }\n    if (vertex) {\n      this.updatePointerFeature_(vertex);\n      return true;\n    }\n    this.noVertexFeature_();\n    return false;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent extent\n   * @return {Feature} extent as featrue\n   * @private\n   */\n  createOrUpdateExtentFeature_(extent) {\n    let extentFeature = this.extentFeature_;\n\n    if (!extentFeature) {\n      if (!extent) {\n        extentFeature = new Feature({});\n      } else {\n        extentFeature = new Feature(polygonFromExtent(extent));\n      }\n      this.extentFeature_ = extentFeature;\n      this.extentOverlay_.getSource().addFeature(extentFeature);\n    } else {\n      if (!extent) {\n        extentFeature.setGeometry(undefined);\n      } else {\n        extentFeature.setGeometry(polygonFromExtent(extent));\n      }\n    }\n    return extentFeature;\n  }\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} vertex location of feature\n   * @param {boolean} [createIfNotExists] create the feature if it does not exist\n   * @return {Feature} vertex as feature\n   * @private\n   */\n  updatePointerFeature_(vertex, createIfNotExists = true) {\n    let vertexFeature = this.vertexFeature_;\n    if (createIfNotExists && !vertexFeature) {\n      vertexFeature = new Feature(new Point(vertex));\n      this.vertexFeature_ = vertexFeature;\n      this.vertexOverlay_.getSource().addFeature(vertexFeature);\n    }\n    if (vertexFeature) {\n      const geometry = vertexFeature.getGeometry();\n      geometry.setCoordinates(vertex);\n    }\n    return vertexFeature;\n  }\n\n  /**\n   * Remove the vertex feature if it exists.\n   * @private\n   */\n  noVertexFeature_() {\n    if (this.vertexFeature_) {\n      this.vertexOverlay_.getSource().removeFeature(this.vertexFeature_);\n      this.vertexFeature_ = null;\n    }\n  }\n\n  /**\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   * @return {boolean} `false` to stop event propagation.\n   * @override\n   */\n  handleEvent(mapBrowserEvent) {\n    if (!mapBrowserEvent.originalEvent || !this.condition_(mapBrowserEvent)) {\n      this.noVertexFeature_();\n      return true;\n    }\n\n    let handled = this.handlingDownUpSequence;\n\n    //display pointer (if not dragging)\n    if (\n      mapBrowserEvent.type == MapBrowserEventType.POINTERMOVE &&\n      !this.handlingDownUpSequence\n    ) {\n      handled = this.handlePointerMove_(mapBrowserEvent);\n    }\n    //call pointer to determine up/down/drag\n    super.handleEvent(mapBrowserEvent);\n    //return false to stop propagation\n    return !handled;\n  }\n\n  /**\n   * Handle pointer down events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   * @override\n   */\n  handleDownEvent(mapBrowserEvent) {\n    const pixel = mapBrowserEvent.pixel;\n    const map = mapBrowserEvent.map;\n\n    const extent = this.getExtentInternal();\n    let vertex = this.snapToVertex_(pixel, map);\n\n    //find the extent corner opposite the passed corner\n    const getOpposingPoint = function (point) {\n      let x_ = null;\n      let y_ = null;\n      if (point[0] == extent[0]) {\n        x_ = extent[2];\n      } else if (point[0] == extent[2]) {\n        x_ = extent[0];\n      }\n      if (point[1] == extent[1]) {\n        y_ = extent[3];\n      } else if (point[1] == extent[3]) {\n        y_ = extent[1];\n      }\n      if (x_ !== null && y_ !== null) {\n        return [x_, y_];\n      }\n      return null;\n    };\n    if (vertex && extent) {\n      const x =\n        vertex[0] == extent[0] || vertex[0] == extent[2] ? vertex[0] : null;\n      const y =\n        vertex[1] == extent[1] || vertex[1] == extent[3] ? vertex[1] : null;\n\n      //snap to point\n      if (x !== null && y !== null) {\n        this.pointerHandler_ = getPointHandler(getOpposingPoint(vertex));\n        //snap to edge\n      } else if (x !== null) {\n        this.pointerHandler_ = getEdgeHandler(\n          getOpposingPoint([x, extent[1]]),\n          getOpposingPoint([x, extent[3]]),\n        );\n      } else if (y !== null) {\n        this.pointerHandler_ = getEdgeHandler(\n          getOpposingPoint([extent[0], y]),\n          getOpposingPoint([extent[2], y]),\n        );\n      }\n      //no snap - new bbox or dragging existing bbox\n    } else {\n      vertex = map.getCoordinateFromPixelInternal(pixel);\n      let drag = false;\n      if (this.drag_) {\n        if (containsCoordinate(extent, vertex)) {\n          this.pointerHandler_ = getDragHandler(extent, vertex);\n          drag = true;\n        }\n      }\n      if (!drag && this.createCondition_(mapBrowserEvent)) {\n        this.setExtent([vertex[0], vertex[1], vertex[0], vertex[1]]);\n        this.pointerHandler_ = getPointHandler(vertex);\n      }\n    }\n    return !!this.pointerHandler_; //event handled; start downup sequence\n  }\n\n  /**\n   * Handle pointer drag events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @override\n   */\n  handleDragEvent(mapBrowserEvent) {\n    if (this.pointerHandler_) {\n      const pixelCoordinate = mapBrowserEvent.coordinate;\n      this.setExtent(this.pointerHandler_(pixelCoordinate));\n      this.updatePointerFeature_(pixelCoordinate, false);\n    }\n  }\n\n  /**\n   * Handle pointer up events.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   * @override\n   */\n  handleUpEvent(mapBrowserEvent) {\n    this.pointerHandler_ = null;\n    //If bbox is zero area, set to null;\n    const extent = this.getExtentInternal();\n    if (!extent || getArea(extent) === 0) {\n      this.setExtent(null);\n    }\n    return false; //Stop handling downup sequence\n  }\n\n  /**\n   * Remove the interaction from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../Map.js\").default} map Map.\n   * @override\n   */\n  setMap(map) {\n    this.extentOverlay_.setMap(map);\n    this.vertexOverlay_.setMap(map);\n    super.setMap(map);\n  }\n\n  /**\n   * Returns the current drawn extent in the view projection (or user projection if set)\n   *\n   * @return {import(\"../extent.js\").Extent} Drawn extent in the view projection.\n   * @api\n   */\n  getExtent() {\n    return toUserExtent(\n      this.getExtentInternal(),\n      this.getMap().getView().getProjection(),\n    );\n  }\n\n  /**\n   * Returns the current drawn extent in the view projection\n   *\n   * @return {import(\"../extent.js\").Extent} Drawn extent in the view projection.\n   * @api\n   * @deprecated Use {@link module:ol/interaction/Extent~Extent#getExtent} instead.\n   */\n  getExtentInternal() {\n    return this.extent_;\n  }\n\n  /**\n   * Manually sets the drawn extent, using the view projection.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent\n   * @api\n   */\n  setExtent(extent) {\n    //Null extent means no bbox\n    this.extent_ = extent ? extent : null;\n    this.createOrUpdateExtentFeature_(extent);\n    this.dispatchEvent(new ExtentEvent(this.extent_));\n  }\n}\n\n/**\n * Returns the default style for the drawn bbox\n *\n * @return {import(\"../style/Style.js\").StyleFunction} Default Extent style\n */\nfunction getDefaultExtentStyleFunction() {\n  const style = createEditingStyle();\n  return function (feature, resolution) {\n    return style['Polygon'];\n  };\n}\n\n/**\n * Returns the default style for the pointer\n *\n * @return {import(\"../style/Style.js\").StyleFunction} Default pointer style\n */\nfunction getDefaultPointerStyleFunction() {\n  const style = createEditingStyle();\n  return function (feature, resolution) {\n    return style['Point'];\n  };\n}\n\n/**\n * @param {import(\"../coordinate.js\").Coordinate} fixedPoint corner that will be unchanged in the new extent\n * @return {function (import(\"../coordinate.js\").Coordinate): import(\"../extent.js\").Extent} event handler\n */\nfunction getPointHandler(fixedPoint) {\n  return function (point) {\n    return boundingExtent([fixedPoint, point]);\n  };\n}\n\n/**\n * @param {import(\"../coordinate.js\").Coordinate} fixedP1 first corner that will be unchanged in the new extent\n * @param {import(\"../coordinate.js\").Coordinate} fixedP2 second corner that will be unchanged in the new extent\n * @return {PointerHandler|null} event handler\n */\nfunction getEdgeHandler(fixedP1, fixedP2) {\n  if (fixedP1[0] == fixedP2[0]) {\n    return function (point) {\n      return boundingExtent([fixedP1, [point[0], fixedP2[1]]]);\n    };\n  }\n  if (fixedP1[1] == fixedP2[1]) {\n    return function (point) {\n      return boundingExtent([fixedP1, [fixedP2[0], point[1]]]);\n    };\n  }\n  return null;\n}\n\n/**\n * @param {import(\"../extent.js\").Extent} extent The extent that will be dragged\n * @param {import(\"../coordinate.js\").Coordinate} vertex The vertex that drag delta is calculated from\n * @return {PointerHandler|null} event handler\n */\nfunction getDragHandler(extent, vertex) {\n  return function (point) {\n    const deltaX = point[0] - vertex[0];\n    const deltaY = point[1] - vertex[1];\n    return [\n      extent[0] + deltaX,\n      extent[1] + deltaY,\n      extent[2] + deltaX,\n      extent[3] + deltaY,\n    ];\n  };\n}\n\n/**\n * @param {import(\"../extent.js\").Extent} extent extent\n * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} extent line segments\n */\nfunction getSegments(extent) {\n  return [\n    [\n      [extent[0], extent[1]],\n      [extent[0], extent[3]],\n    ],\n    [\n      [extent[0], extent[3]],\n      [extent[2], extent[3]],\n    ],\n    [\n      [extent[2], extent[3]],\n      [extent[2], extent[1]],\n    ],\n    [\n      [extent[2], extent[1]],\n      [extent[0], extent[1]],\n    ],\n  ];\n}\n\nexport default Extent;\n","// index.ts\nvar earthRadius = 63710088e-1;\nvar factors = {\n  centimeters: earthRadius * 100,\n  centimetres: earthRadius * 100,\n  degrees: 360 / (2 * Math.PI),\n  feet: earthRadius * 3.28084,\n  inches: earthRadius * 39.37,\n  kilometers: earthRadius / 1e3,\n  kilometres: earthRadius / 1e3,\n  meters: earthRadius,\n  metres: earthRadius,\n  miles: earthRadius / 1609.344,\n  millimeters: earthRadius * 1e3,\n  millimetres: earthRadius * 1e3,\n  nauticalmiles: earthRadius / 1852,\n  radians: 1,\n  yards: earthRadius * 1.0936\n};\nvar areaFactors = {\n  acres: 247105e-9,\n  centimeters: 1e4,\n  centimetres: 1e4,\n  feet: 10.763910417,\n  hectares: 1e-4,\n  inches: 1550.003100006,\n  kilometers: 1e-6,\n  kilometres: 1e-6,\n  meters: 1,\n  metres: 1,\n  miles: 386e-9,\n  nauticalmiles: 29155334959812285e-23,\n  millimeters: 1e6,\n  millimetres: 1e6,\n  yards: 1.195990046\n};\nfunction feature(geom, properties, options = {}) {\n  const feat = { type: \"Feature\" };\n  if (options.id === 0 || options.id) {\n    feat.id = options.id;\n  }\n  if (options.bbox) {\n    feat.bbox = options.bbox;\n  }\n  feat.properties = properties || {};\n  feat.geometry = geom;\n  return feat;\n}\nfunction geometry(type, coordinates, _options = {}) {\n  switch (type) {\n    case \"Point\":\n      return point(coordinates).geometry;\n    case \"LineString\":\n      return lineString(coordinates).geometry;\n    case \"Polygon\":\n      return polygon(coordinates).geometry;\n    case \"MultiPoint\":\n      return multiPoint(coordinates).geometry;\n    case \"MultiLineString\":\n      return multiLineString(coordinates).geometry;\n    case \"MultiPolygon\":\n      return multiPolygon(coordinates).geometry;\n    default:\n      throw new Error(type + \" is invalid\");\n  }\n}\nfunction point(coordinates, properties, options = {}) {\n  if (!coordinates) {\n    throw new Error(\"coordinates is required\");\n  }\n  if (!Array.isArray(coordinates)) {\n    throw new Error(\"coordinates must be an Array\");\n  }\n  if (coordinates.length < 2) {\n    throw new Error(\"coordinates must be at least 2 numbers long\");\n  }\n  if (!isNumber(coordinates[0]) || !isNumber(coordinates[1])) {\n    throw new Error(\"coordinates must contain numbers\");\n  }\n  const geom = {\n    type: \"Point\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction points(coordinates, properties, options = {}) {\n  return featureCollection(\n    coordinates.map((coords) => {\n      return point(coords, properties);\n    }),\n    options\n  );\n}\nfunction polygon(coordinates, properties, options = {}) {\n  for (const ring of coordinates) {\n    if (ring.length < 4) {\n      throw new Error(\n        \"Each LinearRing of a Polygon must have 4 or more Positions.\"\n      );\n    }\n    if (ring[ring.length - 1].length !== ring[0].length) {\n      throw new Error(\"First and last Position are not equivalent.\");\n    }\n    for (let j = 0; j < ring[ring.length - 1].length; j++) {\n      if (ring[ring.length - 1][j] !== ring[0][j]) {\n        throw new Error(\"First and last Position are not equivalent.\");\n      }\n    }\n  }\n  const geom = {\n    type: \"Polygon\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction polygons(coordinates, properties, options = {}) {\n  return featureCollection(\n    coordinates.map((coords) => {\n      return polygon(coords, properties);\n    }),\n    options\n  );\n}\nfunction lineString(coordinates, properties, options = {}) {\n  if (coordinates.length < 2) {\n    throw new Error(\"coordinates must be an array of two or more positions\");\n  }\n  const geom = {\n    type: \"LineString\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction lineStrings(coordinates, properties, options = {}) {\n  return featureCollection(\n    coordinates.map((coords) => {\n      return lineString(coords, properties);\n    }),\n    options\n  );\n}\nfunction featureCollection(features, options = {}) {\n  const fc = { type: \"FeatureCollection\" };\n  if (options.id) {\n    fc.id = options.id;\n  }\n  if (options.bbox) {\n    fc.bbox = options.bbox;\n  }\n  fc.features = features;\n  return fc;\n}\nfunction multiLineString(coordinates, properties, options = {}) {\n  const geom = {\n    type: \"MultiLineString\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction multiPoint(coordinates, properties, options = {}) {\n  const geom = {\n    type: \"MultiPoint\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction multiPolygon(coordinates, properties, options = {}) {\n  const geom = {\n    type: \"MultiPolygon\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction geometryCollection(geometries, properties, options = {}) {\n  const geom = {\n    type: \"GeometryCollection\",\n    geometries\n  };\n  return feature(geom, properties, options);\n}\nfunction round(num, precision = 0) {\n  if (precision && !(precision >= 0)) {\n    throw new Error(\"precision must be a positive number\");\n  }\n  const multiplier = Math.pow(10, precision || 0);\n  return Math.round(num * multiplier) / multiplier;\n}\nfunction radiansToLength(radians, units = \"kilometers\") {\n  const factor = factors[units];\n  if (!factor) {\n    throw new Error(units + \" units is invalid\");\n  }\n  return radians * factor;\n}\nfunction lengthToRadians(distance, units = \"kilometers\") {\n  const factor = factors[units];\n  if (!factor) {\n    throw new Error(units + \" units is invalid\");\n  }\n  return distance / factor;\n}\nfunction lengthToDegrees(distance, units) {\n  return radiansToDegrees(lengthToRadians(distance, units));\n}\nfunction bearingToAzimuth(bearing) {\n  let angle = bearing % 360;\n  if (angle < 0) {\n    angle += 360;\n  }\n  return angle;\n}\nfunction azimuthToBearing(angle) {\n  angle = angle % 360;\n  if (angle > 180) {\n    return angle - 360;\n  } else if (angle < -180) {\n    return angle + 360;\n  }\n  return angle;\n}\nfunction radiansToDegrees(radians) {\n  const normalisedRadians = radians % (2 * Math.PI);\n  return normalisedRadians * 180 / Math.PI;\n}\nfunction degreesToRadians(degrees) {\n  const normalisedDegrees = degrees % 360;\n  return normalisedDegrees * Math.PI / 180;\n}\nfunction convertLength(length, originalUnit = \"kilometers\", finalUnit = \"kilometers\") {\n  if (!(length >= 0)) {\n    throw new Error(\"length must be a positive number\");\n  }\n  return radiansToLength(lengthToRadians(length, originalUnit), finalUnit);\n}\nfunction convertArea(area, originalUnit = \"meters\", finalUnit = \"kilometers\") {\n  if (!(area >= 0)) {\n    throw new Error(\"area must be a positive number\");\n  }\n  const startFactor = areaFactors[originalUnit];\n  if (!startFactor) {\n    throw new Error(\"invalid original units\");\n  }\n  const finalFactor = areaFactors[finalUnit];\n  if (!finalFactor) {\n    throw new Error(\"invalid final units\");\n  }\n  return area / startFactor * finalFactor;\n}\nfunction isNumber(num) {\n  return !isNaN(num) && num !== null && !Array.isArray(num);\n}\nfunction isObject(input) {\n  return input !== null && typeof input === \"object\" && !Array.isArray(input);\n}\nfunction validateBBox(bbox) {\n  if (!bbox) {\n    throw new Error(\"bbox is required\");\n  }\n  if (!Array.isArray(bbox)) {\n    throw new Error(\"bbox must be an Array\");\n  }\n  if (bbox.length !== 4 && bbox.length !== 6) {\n    throw new Error(\"bbox must be an Array of 4 or 6 numbers\");\n  }\n  bbox.forEach((num) => {\n    if (!isNumber(num)) {\n      throw new Error(\"bbox must only contain numbers\");\n    }\n  });\n}\nfunction validateId(id) {\n  if (!id) {\n    throw new Error(\"id is required\");\n  }\n  if ([\"string\", \"number\"].indexOf(typeof id) === -1) {\n    throw new Error(\"id must be a number or a string\");\n  }\n}\nexport {\n  areaFactors,\n  azimuthToBearing,\n  bearingToAzimuth,\n  convertArea,\n  convertLength,\n  degreesToRadians,\n  earthRadius,\n  factors,\n  feature,\n  featureCollection,\n  geometry,\n  geometryCollection,\n  isNumber,\n  isObject,\n  lengthToDegrees,\n  lengthToRadians,\n  lineString,\n  lineStrings,\n  multiLineString,\n  multiPoint,\n  multiPolygon,\n  point,\n  points,\n  polygon,\n  polygons,\n  radiansToDegrees,\n  radiansToLength,\n  round,\n  validateBBox,\n  validateId\n};\n//# sourceMappingURL=index.js.map","/*\r\n *      bignumber.js v9.3.1\r\n *      A JavaScript library for arbitrary-precision arithmetic.\r\n *      https://github.com/MikeMcl/bignumber.js\r\n *      Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>\r\n *      MIT Licensed.\r\n *\r\n *      BigNumber.prototype methods     |  BigNumber methods\r\n *                                      |\r\n *      absoluteValue            abs    |  clone\r\n *      comparedTo                      |  config               set\r\n *      decimalPlaces            dp     |      DECIMAL_PLACES\r\n *      dividedBy                div    |      ROUNDING_MODE\r\n *      dividedToIntegerBy       idiv   |      EXPONENTIAL_AT\r\n *      exponentiatedBy          pow    |      RANGE\r\n *      integerValue                    |      CRYPTO\r\n *      isEqualTo                eq     |      MODULO_MODE\r\n *      isFinite                        |      POW_PRECISION\r\n *      isGreaterThan            gt     |      FORMAT\r\n *      isGreaterThanOrEqualTo   gte    |      ALPHABET\r\n *      isInteger                       |  isBigNumber\r\n *      isLessThan               lt     |  maximum              max\r\n *      isLessThanOrEqualTo      lte    |  minimum              min\r\n *      isNaN                           |  random\r\n *      isNegative                      |  sum\r\n *      isPositive                      |\r\n *      isZero                          |\r\n *      minus                           |\r\n *      modulo                   mod    |\r\n *      multipliedBy             times  |\r\n *      negated                         |\r\n *      plus                            |\r\n *      precision                sd     |\r\n *      shiftedBy                       |\r\n *      squareRoot               sqrt   |\r\n *      toExponential                   |\r\n *      toFixed                         |\r\n *      toFormat                        |\r\n *      toFraction                      |\r\n *      toJSON                          |\r\n *      toNumber                        |\r\n *      toPrecision                     |\r\n *      toString                        |\r\n *      valueOf                         |\r\n *\r\n */\r\n\r\n\r\nvar\r\n  isNumeric = /^-?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?$/i,\r\n  mathceil = Math.ceil,\r\n  mathfloor = Math.floor,\r\n\r\n  bignumberError = '[BigNumber Error] ',\r\n  tooManyDigits = bignumberError + 'Number primitive has more than 15 significant digits: ',\r\n\r\n  BASE = 1e14,\r\n  LOG_BASE = 14,\r\n  MAX_SAFE_INTEGER = 0x1fffffffffffff,         // 2^53 - 1\r\n  // MAX_INT32 = 0x7fffffff,                   // 2^31 - 1\r\n  POWS_TEN = [1, 10, 100, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9, 1e10, 1e11, 1e12, 1e13],\r\n  SQRT_BASE = 1e7,\r\n\r\n  // EDITABLE\r\n  // The limit on the value of DECIMAL_PLACES, TO_EXP_NEG, TO_EXP_POS, MIN_EXP, MAX_EXP, and\r\n  // the arguments to toExponential, toFixed, toFormat, and toPrecision.\r\n  MAX = 1E9;                                   // 0 to MAX_INT32\r\n\r\n\r\n/*\r\n * Create and return a BigNumber constructor.\r\n */\r\nfunction clone(configObject) {\r\n  var div, convertBase, parseNumeric,\r\n    P = BigNumber.prototype = { constructor: BigNumber, toString: null, valueOf: null },\r\n    ONE = new BigNumber(1),\r\n\r\n\r\n    //----------------------------- EDITABLE CONFIG DEFAULTS -------------------------------\r\n\r\n\r\n    // The default values below must be integers within the inclusive ranges stated.\r\n    // The values can also be changed at run-time using BigNumber.set.\r\n\r\n    // The maximum number of decimal places for operations involving division.\r\n    DECIMAL_PLACES = 20,                     // 0 to MAX\r\n\r\n    // The rounding mode used when rounding to the above decimal places, and when using\r\n    // toExponential, toFixed, toFormat and toPrecision, and round (default value).\r\n    // UP         0 Away from zero.\r\n    // DOWN       1 Towards zero.\r\n    // CEIL       2 Towards +Infinity.\r\n    // FLOOR      3 Towards -Infinity.\r\n    // HALF_UP    4 Towards nearest neighbour. If equidistant, up.\r\n    // HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.\r\n    // HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.\r\n    // HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.\r\n    // HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.\r\n    ROUNDING_MODE = 4,                       // 0 to 8\r\n\r\n    // EXPONENTIAL_AT : [TO_EXP_NEG , TO_EXP_POS]\r\n\r\n    // The exponent value at and beneath which toString returns exponential notation.\r\n    // Number type: -7\r\n    TO_EXP_NEG = -7,                         // 0 to -MAX\r\n\r\n    // The exponent value at and above which toString returns exponential notation.\r\n    // Number type: 21\r\n    TO_EXP_POS = 21,                         // 0 to MAX\r\n\r\n    // RANGE : [MIN_EXP, MAX_EXP]\r\n\r\n    // The minimum exponent value, beneath which underflow to zero occurs.\r\n    // Number type: -324  (5e-324)\r\n    MIN_EXP = -1e7,                          // -1 to -MAX\r\n\r\n    // The maximum exponent value, above which overflow to Infinity occurs.\r\n    // Number type:  308  (1.7976931348623157e+308)\r\n    // For MAX_EXP > 1e7, e.g. new BigNumber('1e100000000').plus(1) may be slow.\r\n    MAX_EXP = 1e7,                           // 1 to MAX\r\n\r\n    // Whether to use cryptographically-secure random number generation, if available.\r\n    CRYPTO = false,                          // true or false\r\n\r\n    // The modulo mode used when calculating the modulus: a mod n.\r\n    // The quotient (q = a / n) is calculated according to the corresponding rounding mode.\r\n    // The remainder (r) is calculated as: r = a - n * q.\r\n    //\r\n    // UP        0 The remainder is positive if the dividend is negative, else is negative.\r\n    // DOWN      1 The remainder has the same sign as the dividend.\r\n    //             This modulo mode is commonly known as 'truncated division' and is\r\n    //             equivalent to (a % n) in JavaScript.\r\n    // FLOOR     3 The remainder has the same sign as the divisor (Python %).\r\n    // HALF_EVEN 6 This modulo mode implements the IEEE 754 remainder function.\r\n    // EUCLID    9 Euclidian division. q = sign(n) * floor(a / abs(n)).\r\n    //             The remainder is always positive.\r\n    //\r\n    // The truncated division, floored division, Euclidian division and IEEE 754 remainder\r\n    // modes are commonly used for the modulus operation.\r\n    // Although the other rounding modes can also be used, they may not give useful results.\r\n    MODULO_MODE = 1,                         // 0 to 9\r\n\r\n    // The maximum number of significant digits of the result of the exponentiatedBy operation.\r\n    // If POW_PRECISION is 0, there will be unlimited significant digits.\r\n    POW_PRECISION = 0,                       // 0 to MAX\r\n\r\n    // The format specification used by the BigNumber.prototype.toFormat method.\r\n    FORMAT = {\r\n      prefix: '',\r\n      groupSize: 3,\r\n      secondaryGroupSize: 0,\r\n      groupSeparator: ',',\r\n      decimalSeparator: '.',\r\n      fractionGroupSize: 0,\r\n      fractionGroupSeparator: '\\xA0',        // non-breaking space\r\n      suffix: ''\r\n    },\r\n\r\n    // The alphabet used for base conversion. It must be at least 2 characters long, with no '+',\r\n    // '-', '.', whitespace, or repeated character.\r\n    // '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_'\r\n    ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyz',\r\n    alphabetHasNormalDecimalDigits = true;\r\n\r\n\r\n  //------------------------------------------------------------------------------------------\r\n\r\n\r\n  // CONSTRUCTOR\r\n\r\n\r\n  /*\r\n   * The BigNumber constructor and exported function.\r\n   * Create and return a new instance of a BigNumber object.\r\n   *\r\n   * v {number|string|BigNumber} A numeric value.\r\n   * [b] {number} The base of v. Integer, 2 to ALPHABET.length inclusive.\r\n   */\r\n  function BigNumber(v, b) {\r\n    var alphabet, c, caseChanged, e, i, isNum, len, str,\r\n      x = this;\r\n\r\n    // Enable constructor call without `new`.\r\n    if (!(x instanceof BigNumber)) return new BigNumber(v, b);\r\n\r\n    if (b == null) {\r\n\r\n      if (v && v._isBigNumber === true) {\r\n        x.s = v.s;\r\n\r\n        if (!v.c || v.e > MAX_EXP) {\r\n          x.c = x.e = null;\r\n        } else if (v.e < MIN_EXP) {\r\n          x.c = [x.e = 0];\r\n        } else {\r\n          x.e = v.e;\r\n          x.c = v.c.slice();\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      if ((isNum = typeof v == 'number') && v * 0 == 0) {\r\n\r\n        // Use `1 / n` to handle minus zero also.\r\n        x.s = 1 / v < 0 ? (v = -v, -1) : 1;\r\n\r\n        // Fast path for integers, where n < 2147483648 (2**31).\r\n        if (v === ~~v) {\r\n          for (e = 0, i = v; i >= 10; i /= 10, e++);\r\n\r\n          if (e > MAX_EXP) {\r\n            x.c = x.e = null;\r\n          } else {\r\n            x.e = e;\r\n            x.c = [v];\r\n          }\r\n\r\n          return;\r\n        }\r\n\r\n        str = String(v);\r\n      } else {\r\n\r\n        if (!isNumeric.test(str = String(v))) return parseNumeric(x, str, isNum);\r\n\r\n        x.s = str.charCodeAt(0) == 45 ? (str = str.slice(1), -1) : 1;\r\n      }\r\n\r\n      // Decimal point?\r\n      if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n\r\n      // Exponential form?\r\n      if ((i = str.search(/e/i)) > 0) {\r\n\r\n        // Determine exponent.\r\n        if (e < 0) e = i;\r\n        e += +str.slice(i + 1);\r\n        str = str.substring(0, i);\r\n      } else if (e < 0) {\r\n\r\n        // Integer.\r\n        e = str.length;\r\n      }\r\n\r\n    } else {\r\n\r\n      // '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'\r\n      intCheck(b, 2, ALPHABET.length, 'Base');\r\n\r\n      // Allow exponential notation to be used with base 10 argument, while\r\n      // also rounding to DECIMAL_PLACES as with other bases.\r\n      if (b == 10 && alphabetHasNormalDecimalDigits) {\r\n        x = new BigNumber(v);\r\n        return round(x, DECIMAL_PLACES + x.e + 1, ROUNDING_MODE);\r\n      }\r\n\r\n      str = String(v);\r\n\r\n      if (isNum = typeof v == 'number') {\r\n\r\n        // Avoid potential interpretation of Infinity and NaN as base 44+ values.\r\n        if (v * 0 != 0) return parseNumeric(x, str, isNum, b);\r\n\r\n        x.s = 1 / v < 0 ? (str = str.slice(1), -1) : 1;\r\n\r\n        // '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'\r\n        if (BigNumber.DEBUG && str.replace(/^0\\.0*|\\./, '').length > 15) {\r\n          throw Error\r\n           (tooManyDigits + v);\r\n        }\r\n      } else {\r\n        x.s = str.charCodeAt(0) === 45 ? (str = str.slice(1), -1) : 1;\r\n      }\r\n\r\n      alphabet = ALPHABET.slice(0, b);\r\n      e = i = 0;\r\n\r\n      // Check that str is a valid base b number.\r\n      // Don't use RegExp, so alphabet can contain special characters.\r\n      for (len = str.length; i < len; i++) {\r\n        if (alphabet.indexOf(c = str.charAt(i)) < 0) {\r\n          if (c == '.') {\r\n\r\n            // If '.' is not the first character and it has not be found before.\r\n            if (i > e) {\r\n              e = len;\r\n              continue;\r\n            }\r\n          } else if (!caseChanged) {\r\n\r\n            // Allow e.g. hexadecimal 'FF' as well as 'ff'.\r\n            if (str == str.toUpperCase() && (str = str.toLowerCase()) ||\r\n                str == str.toLowerCase() && (str = str.toUpperCase())) {\r\n              caseChanged = true;\r\n              i = -1;\r\n              e = 0;\r\n              continue;\r\n            }\r\n          }\r\n\r\n          return parseNumeric(x, String(v), isNum, b);\r\n        }\r\n      }\r\n\r\n      // Prevent later check for length on converted number.\r\n      isNum = false;\r\n      str = convertBase(str, b, 10, x.s);\r\n\r\n      // Decimal point?\r\n      if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n      else e = str.length;\r\n    }\r\n\r\n    // Determine leading zeros.\r\n    for (i = 0; str.charCodeAt(i) === 48; i++);\r\n\r\n    // Determine trailing zeros.\r\n    for (len = str.length; str.charCodeAt(--len) === 48;);\r\n\r\n    if (str = str.slice(i, ++len)) {\r\n      len -= i;\r\n\r\n      // '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'\r\n      if (isNum && BigNumber.DEBUG &&\r\n        len > 15 && (v > MAX_SAFE_INTEGER || v !== mathfloor(v))) {\r\n          throw Error\r\n           (tooManyDigits + (x.s * v));\r\n      }\r\n\r\n       // Overflow?\r\n      if ((e = e - i - 1) > MAX_EXP) {\r\n\r\n        // Infinity.\r\n        x.c = x.e = null;\r\n\r\n      // Underflow?\r\n      } else if (e < MIN_EXP) {\r\n\r\n        // Zero.\r\n        x.c = [x.e = 0];\r\n      } else {\r\n        x.e = e;\r\n        x.c = [];\r\n\r\n        // Transform base\r\n\r\n        // e is the base 10 exponent.\r\n        // i is where to slice str to get the first element of the coefficient array.\r\n        i = (e + 1) % LOG_BASE;\r\n        if (e < 0) i += LOG_BASE;  // i < 1\r\n\r\n        if (i < len) {\r\n          if (i) x.c.push(+str.slice(0, i));\r\n\r\n          for (len -= LOG_BASE; i < len;) {\r\n            x.c.push(+str.slice(i, i += LOG_BASE));\r\n          }\r\n\r\n          i = LOG_BASE - (str = str.slice(i)).length;\r\n        } else {\r\n          i -= len;\r\n        }\r\n\r\n        for (; i--; str += '0');\r\n        x.c.push(+str);\r\n      }\r\n    } else {\r\n\r\n      // Zero.\r\n      x.c = [x.e = 0];\r\n    }\r\n  }\r\n\r\n\r\n  // CONSTRUCTOR PROPERTIES\r\n\r\n\r\n  BigNumber.clone = clone;\r\n\r\n  BigNumber.ROUND_UP = 0;\r\n  BigNumber.ROUND_DOWN = 1;\r\n  BigNumber.ROUND_CEIL = 2;\r\n  BigNumber.ROUND_FLOOR = 3;\r\n  BigNumber.ROUND_HALF_UP = 4;\r\n  BigNumber.ROUND_HALF_DOWN = 5;\r\n  BigNumber.ROUND_HALF_EVEN = 6;\r\n  BigNumber.ROUND_HALF_CEIL = 7;\r\n  BigNumber.ROUND_HALF_FLOOR = 8;\r\n  BigNumber.EUCLID = 9;\r\n\r\n\r\n  /*\r\n   * Configure infrequently-changing library-wide settings.\r\n   *\r\n   * Accept an object with the following optional properties (if the value of a property is\r\n   * a number, it must be an integer within the inclusive range stated):\r\n   *\r\n   *   DECIMAL_PLACES   {number}           0 to MAX\r\n   *   ROUNDING_MODE    {number}           0 to 8\r\n   *   EXPONENTIAL_AT   {number|number[]}  -MAX to MAX  or  [-MAX to 0, 0 to MAX]\r\n   *   RANGE            {number|number[]}  -MAX to MAX (not zero)  or  [-MAX to -1, 1 to MAX]\r\n   *   CRYPTO           {boolean}          true or false\r\n   *   MODULO_MODE      {number}           0 to 9\r\n   *   POW_PRECISION       {number}           0 to MAX\r\n   *   ALPHABET         {string}           A string of two or more unique characters which does\r\n   *                                       not contain '.'.\r\n   *   FORMAT           {object}           An object with some of the following properties:\r\n   *     prefix                 {string}\r\n   *     groupSize              {number}\r\n   *     secondaryGroupSize     {number}\r\n   *     groupSeparator         {string}\r\n   *     decimalSeparator       {string}\r\n   *     fractionGroupSize      {number}\r\n   *     fractionGroupSeparator {string}\r\n   *     suffix                 {string}\r\n   *\r\n   * (The values assigned to the above FORMAT object properties are not checked for validity.)\r\n   *\r\n   * E.g.\r\n   * BigNumber.config({ DECIMAL_PLACES : 20, ROUNDING_MODE : 4 })\r\n   *\r\n   * Ignore properties/parameters set to null or undefined, except for ALPHABET.\r\n   *\r\n   * Return an object with the properties current values.\r\n   */\r\n  BigNumber.config = BigNumber.set = function (obj) {\r\n    var p, v;\r\n\r\n    if (obj != null) {\r\n\r\n      if (typeof obj == 'object') {\r\n\r\n        // DECIMAL_PLACES {number} Integer, 0 to MAX inclusive.\r\n        // '[BigNumber Error] DECIMAL_PLACES {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'DECIMAL_PLACES')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, MAX, p);\r\n          DECIMAL_PLACES = v;\r\n        }\r\n\r\n        // ROUNDING_MODE {number} Integer, 0 to 8 inclusive.\r\n        // '[BigNumber Error] ROUNDING_MODE {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'ROUNDING_MODE')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, 8, p);\r\n          ROUNDING_MODE = v;\r\n        }\r\n\r\n        // EXPONENTIAL_AT {number|number[]}\r\n        // Integer, -MAX to MAX inclusive or\r\n        // [integer -MAX to 0 inclusive, 0 to MAX inclusive].\r\n        // '[BigNumber Error] EXPONENTIAL_AT {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'EXPONENTIAL_AT')) {\r\n          v = obj[p];\r\n          if (v && v.pop) {\r\n            intCheck(v[0], -MAX, 0, p);\r\n            intCheck(v[1], 0, MAX, p);\r\n            TO_EXP_NEG = v[0];\r\n            TO_EXP_POS = v[1];\r\n          } else {\r\n            intCheck(v, -MAX, MAX, p);\r\n            TO_EXP_NEG = -(TO_EXP_POS = v < 0 ? -v : v);\r\n          }\r\n        }\r\n\r\n        // RANGE {number|number[]} Non-zero integer, -MAX to MAX inclusive or\r\n        // [integer -MAX to -1 inclusive, integer 1 to MAX inclusive].\r\n        // '[BigNumber Error] RANGE {not a primitive number|not an integer|out of range|cannot be zero}: {v}'\r\n        if (obj.hasOwnProperty(p = 'RANGE')) {\r\n          v = obj[p];\r\n          if (v && v.pop) {\r\n            intCheck(v[0], -MAX, -1, p);\r\n            intCheck(v[1], 1, MAX, p);\r\n            MIN_EXP = v[0];\r\n            MAX_EXP = v[1];\r\n          } else {\r\n            intCheck(v, -MAX, MAX, p);\r\n            if (v) {\r\n              MIN_EXP = -(MAX_EXP = v < 0 ? -v : v);\r\n            } else {\r\n              throw Error\r\n               (bignumberError + p + ' cannot be zero: ' + v);\r\n            }\r\n          }\r\n        }\r\n\r\n        // CRYPTO {boolean} true or false.\r\n        // '[BigNumber Error] CRYPTO not true or false: {v}'\r\n        // '[BigNumber Error] crypto unavailable'\r\n        if (obj.hasOwnProperty(p = 'CRYPTO')) {\r\n          v = obj[p];\r\n          if (v === !!v) {\r\n            if (v) {\r\n              if (typeof crypto != 'undefined' && crypto &&\r\n               (crypto.getRandomValues || crypto.randomBytes)) {\r\n                CRYPTO = v;\r\n              } else {\r\n                CRYPTO = !v;\r\n                throw Error\r\n                 (bignumberError + 'crypto unavailable');\r\n              }\r\n            } else {\r\n              CRYPTO = v;\r\n            }\r\n          } else {\r\n            throw Error\r\n             (bignumberError + p + ' not true or false: ' + v);\r\n          }\r\n        }\r\n\r\n        // MODULO_MODE {number} Integer, 0 to 9 inclusive.\r\n        // '[BigNumber Error] MODULO_MODE {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'MODULO_MODE')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, 9, p);\r\n          MODULO_MODE = v;\r\n        }\r\n\r\n        // POW_PRECISION {number} Integer, 0 to MAX inclusive.\r\n        // '[BigNumber Error] POW_PRECISION {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'POW_PRECISION')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, MAX, p);\r\n          POW_PRECISION = v;\r\n        }\r\n\r\n        // FORMAT {object}\r\n        // '[BigNumber Error] FORMAT not an object: {v}'\r\n        if (obj.hasOwnProperty(p = 'FORMAT')) {\r\n          v = obj[p];\r\n          if (typeof v == 'object') FORMAT = v;\r\n          else throw Error\r\n           (bignumberError + p + ' not an object: ' + v);\r\n        }\r\n\r\n        // ALPHABET {string}\r\n        // '[BigNumber Error] ALPHABET invalid: {v}'\r\n        if (obj.hasOwnProperty(p = 'ALPHABET')) {\r\n          v = obj[p];\r\n\r\n          // Disallow if less than two characters,\r\n          // or if it contains '+', '-', '.', whitespace, or a repeated character.\r\n          if (typeof v == 'string' && !/^.?$|[+\\-.\\s]|(.).*\\1/.test(v)) {\r\n            alphabetHasNormalDecimalDigits = v.slice(0, 10) == '0123456789';\r\n            ALPHABET = v;\r\n          } else {\r\n            throw Error\r\n             (bignumberError + p + ' invalid: ' + v);\r\n          }\r\n        }\r\n\r\n      } else {\r\n\r\n        // '[BigNumber Error] Object expected: {v}'\r\n        throw Error\r\n         (bignumberError + 'Object expected: ' + obj);\r\n      }\r\n    }\r\n\r\n    return {\r\n      DECIMAL_PLACES: DECIMAL_PLACES,\r\n      ROUNDING_MODE: ROUNDING_MODE,\r\n      EXPONENTIAL_AT: [TO_EXP_NEG, TO_EXP_POS],\r\n      RANGE: [MIN_EXP, MAX_EXP],\r\n      CRYPTO: CRYPTO,\r\n      MODULO_MODE: MODULO_MODE,\r\n      POW_PRECISION: POW_PRECISION,\r\n      FORMAT: FORMAT,\r\n      ALPHABET: ALPHABET\r\n    };\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if v is a BigNumber instance, otherwise return false.\r\n   *\r\n   * If BigNumber.DEBUG is true, throw if a BigNumber instance is not well-formed.\r\n   *\r\n   * v {any}\r\n   *\r\n   * '[BigNumber Error] Invalid BigNumber: {v}'\r\n   */\r\n  BigNumber.isBigNumber = function (v) {\r\n    if (!v || v._isBigNumber !== true) return false;\r\n    if (!BigNumber.DEBUG) return true;\r\n\r\n    var i, n,\r\n      c = v.c,\r\n      e = v.e,\r\n      s = v.s;\r\n\r\n    out: if ({}.toString.call(c) == '[object Array]') {\r\n\r\n      if ((s === 1 || s === -1) && e >= -MAX && e <= MAX && e === mathfloor(e)) {\r\n\r\n        // If the first element is zero, the BigNumber value must be zero.\r\n        if (c[0] === 0) {\r\n          if (e === 0 && c.length === 1) return true;\r\n          break out;\r\n        }\r\n\r\n        // Calculate number of digits that c[0] should have, based on the exponent.\r\n        i = (e + 1) % LOG_BASE;\r\n        if (i < 1) i += LOG_BASE;\r\n\r\n        // Calculate number of digits of c[0].\r\n        //if (Math.ceil(Math.log(c[0] + 1) / Math.LN10) == i) {\r\n        if (String(c[0]).length == i) {\r\n\r\n          for (i = 0; i < c.length; i++) {\r\n            n = c[i];\r\n            if (n < 0 || n >= BASE || n !== mathfloor(n)) break out;\r\n          }\r\n\r\n          // Last element cannot be zero, unless it is the only element.\r\n          if (n !== 0) return true;\r\n        }\r\n      }\r\n\r\n    // Infinity/NaN\r\n    } else if (c === null && e === null && (s === null || s === 1 || s === -1)) {\r\n      return true;\r\n    }\r\n\r\n    throw Error\r\n      (bignumberError + 'Invalid BigNumber: ' + v);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the maximum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.maximum = BigNumber.max = function () {\r\n    return maxOrMin(arguments, -1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the minimum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.minimum = BigNumber.min = function () {\r\n    return maxOrMin(arguments, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber with a random value equal to or greater than 0 and less than 1,\r\n   * and with dp, or DECIMAL_PLACES if dp is omitted, decimal places (or less if trailing\r\n   * zeros are produced).\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp}'\r\n   * '[BigNumber Error] crypto unavailable'\r\n   */\r\n  BigNumber.random = (function () {\r\n    var pow2_53 = 0x20000000000000;\r\n\r\n    // Return a 53 bit integer n, where 0 <= n < 9007199254740992.\r\n    // Check if Math.random() produces more than 32 bits of randomness.\r\n    // If it does, assume at least 53 bits are produced, otherwise assume at least 30 bits.\r\n    // 0x40000000 is 2^30, 0x800000 is 2^23, 0x1fffff is 2^21 - 1.\r\n    var random53bitInt = (Math.random() * pow2_53) & 0x1fffff\r\n     ? function () { return mathfloor(Math.random() * pow2_53); }\r\n     : function () { return ((Math.random() * 0x40000000 | 0) * 0x800000) +\r\n       (Math.random() * 0x800000 | 0); };\r\n\r\n    return function (dp) {\r\n      var a, b, e, k, v,\r\n        i = 0,\r\n        c = [],\r\n        rand = new BigNumber(ONE);\r\n\r\n      if (dp == null) dp = DECIMAL_PLACES;\r\n      else intCheck(dp, 0, MAX);\r\n\r\n      k = mathceil(dp / LOG_BASE);\r\n\r\n      if (CRYPTO) {\r\n\r\n        // Browsers supporting crypto.getRandomValues.\r\n        if (crypto.getRandomValues) {\r\n\r\n          a = crypto.getRandomValues(new Uint32Array(k *= 2));\r\n\r\n          for (; i < k;) {\r\n\r\n            // 53 bits:\r\n            // ((Math.pow(2, 32) - 1) * Math.pow(2, 21)).toString(2)\r\n            // 11111 11111111 11111111 11111111 11100000 00000000 00000000\r\n            // ((Math.pow(2, 32) - 1) >>> 11).toString(2)\r\n            //                                     11111 11111111 11111111\r\n            // 0x20000 is 2^21.\r\n            v = a[i] * 0x20000 + (a[i + 1] >>> 11);\r\n\r\n            // Rejection sampling:\r\n            // 0 <= v < 9007199254740992\r\n            // Probability that v >= 9e15, is\r\n            // 7199254740992 / 9007199254740992 ~= 0.0008, i.e. 1 in 1251\r\n            if (v >= 9e15) {\r\n              b = crypto.getRandomValues(new Uint32Array(2));\r\n              a[i] = b[0];\r\n              a[i + 1] = b[1];\r\n            } else {\r\n\r\n              // 0 <= v <= 8999999999999999\r\n              // 0 <= (v % 1e14) <= 99999999999999\r\n              c.push(v % 1e14);\r\n              i += 2;\r\n            }\r\n          }\r\n          i = k / 2;\r\n\r\n        // Node.js supporting crypto.randomBytes.\r\n        } else if (crypto.randomBytes) {\r\n\r\n          // buffer\r\n          a = crypto.randomBytes(k *= 7);\r\n\r\n          for (; i < k;) {\r\n\r\n            // 0x1000000000000 is 2^48, 0x10000000000 is 2^40\r\n            // 0x100000000 is 2^32, 0x1000000 is 2^24\r\n            // 11111 11111111 11111111 11111111 11111111 11111111 11111111\r\n            // 0 <= v < 9007199254740992\r\n            v = ((a[i] & 31) * 0x1000000000000) + (a[i + 1] * 0x10000000000) +\r\n               (a[i + 2] * 0x100000000) + (a[i + 3] * 0x1000000) +\r\n               (a[i + 4] << 16) + (a[i + 5] << 8) + a[i + 6];\r\n\r\n            if (v >= 9e15) {\r\n              crypto.randomBytes(7).copy(a, i);\r\n            } else {\r\n\r\n              // 0 <= (v % 1e14) <= 99999999999999\r\n              c.push(v % 1e14);\r\n              i += 7;\r\n            }\r\n          }\r\n          i = k / 7;\r\n        } else {\r\n          CRYPTO = false;\r\n          throw Error\r\n           (bignumberError + 'crypto unavailable');\r\n        }\r\n      }\r\n\r\n      // Use Math.random.\r\n      if (!CRYPTO) {\r\n\r\n        for (; i < k;) {\r\n          v = random53bitInt();\r\n          if (v < 9e15) c[i++] = v % 1e14;\r\n        }\r\n      }\r\n\r\n      k = c[--i];\r\n      dp %= LOG_BASE;\r\n\r\n      // Convert trailing digits to zeros according to dp.\r\n      if (k && dp) {\r\n        v = POWS_TEN[LOG_BASE - dp];\r\n        c[i] = mathfloor(k / v) * v;\r\n      }\r\n\r\n      // Remove trailing elements which are zero.\r\n      for (; c[i] === 0; c.pop(), i--);\r\n\r\n      // Zero?\r\n      if (i < 0) {\r\n        c = [e = 0];\r\n      } else {\r\n\r\n        // Remove leading elements which are zero and adjust exponent accordingly.\r\n        for (e = -1 ; c[0] === 0; c.splice(0, 1), e -= LOG_BASE);\r\n\r\n        // Count the digits of the first element of c to determine leading zeros, and...\r\n        for (i = 1, v = c[0]; v >= 10; v /= 10, i++);\r\n\r\n        // adjust the exponent accordingly.\r\n        if (i < LOG_BASE) e -= LOG_BASE - i;\r\n      }\r\n\r\n      rand.e = e;\r\n      rand.c = c;\r\n      return rand;\r\n    };\r\n  })();\r\n\r\n\r\n   /*\r\n   * Return a BigNumber whose value is the sum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.sum = function () {\r\n    var i = 1,\r\n      args = arguments,\r\n      sum = new BigNumber(args[0]);\r\n    for (; i < args.length;) sum = sum.plus(args[i++]);\r\n    return sum;\r\n  };\r\n\r\n\r\n  // PRIVATE FUNCTIONS\r\n\r\n\r\n  // Called by BigNumber and BigNumber.prototype.toString.\r\n  convertBase = (function () {\r\n    var decimal = '0123456789';\r\n\r\n    /*\r\n     * Convert string of baseIn to an array of numbers of baseOut.\r\n     * Eg. toBaseOut('255', 10, 16) returns [15, 15].\r\n     * Eg. toBaseOut('ff', 16, 10) returns [2, 5, 5].\r\n     */\r\n    function toBaseOut(str, baseIn, baseOut, alphabet) {\r\n      var j,\r\n        arr = [0],\r\n        arrL,\r\n        i = 0,\r\n        len = str.length;\r\n\r\n      for (; i < len;) {\r\n        for (arrL = arr.length; arrL--; arr[arrL] *= baseIn);\r\n\r\n        arr[0] += alphabet.indexOf(str.charAt(i++));\r\n\r\n        for (j = 0; j < arr.length; j++) {\r\n\r\n          if (arr[j] > baseOut - 1) {\r\n            if (arr[j + 1] == null) arr[j + 1] = 0;\r\n            arr[j + 1] += arr[j] / baseOut | 0;\r\n            arr[j] %= baseOut;\r\n          }\r\n        }\r\n      }\r\n\r\n      return arr.reverse();\r\n    }\r\n\r\n    // Convert a numeric string of baseIn to a numeric string of baseOut.\r\n    // If the caller is toString, we are converting from base 10 to baseOut.\r\n    // If the caller is BigNumber, we are converting from baseIn to base 10.\r\n    return function (str, baseIn, baseOut, sign, callerIsToString) {\r\n      var alphabet, d, e, k, r, x, xc, y,\r\n        i = str.indexOf('.'),\r\n        dp = DECIMAL_PLACES,\r\n        rm = ROUNDING_MODE;\r\n\r\n      // Non-integer.\r\n      if (i >= 0) {\r\n        k = POW_PRECISION;\r\n\r\n        // Unlimited precision.\r\n        POW_PRECISION = 0;\r\n        str = str.replace('.', '');\r\n        y = new BigNumber(baseIn);\r\n        x = y.pow(str.length - i);\r\n        POW_PRECISION = k;\r\n\r\n        // Convert str as if an integer, then restore the fraction part by dividing the\r\n        // result by its base raised to a power.\r\n\r\n        y.c = toBaseOut(toFixedPoint(coeffToString(x.c), x.e, '0'),\r\n         10, baseOut, decimal);\r\n        y.e = y.c.length;\r\n      }\r\n\r\n      // Convert the number as integer.\r\n\r\n      xc = toBaseOut(str, baseIn, baseOut, callerIsToString\r\n       ? (alphabet = ALPHABET, decimal)\r\n       : (alphabet = decimal, ALPHABET));\r\n\r\n      // xc now represents str as an integer and converted to baseOut. e is the exponent.\r\n      e = k = xc.length;\r\n\r\n      // Remove trailing zeros.\r\n      for (; xc[--k] == 0; xc.pop());\r\n\r\n      // Zero?\r\n      if (!xc[0]) return alphabet.charAt(0);\r\n\r\n      // Does str represent an integer? If so, no need for the division.\r\n      if (i < 0) {\r\n        --e;\r\n      } else {\r\n        x.c = xc;\r\n        x.e = e;\r\n\r\n        // The sign is needed for correct rounding.\r\n        x.s = sign;\r\n        x = div(x, y, dp, rm, baseOut);\r\n        xc = x.c;\r\n        r = x.r;\r\n        e = x.e;\r\n      }\r\n\r\n      // xc now represents str converted to baseOut.\r\n\r\n      // The index of the rounding digit.\r\n      d = e + dp + 1;\r\n\r\n      // The rounding digit: the digit to the right of the digit that may be rounded up.\r\n      i = xc[d];\r\n\r\n      // Look at the rounding digits and mode to determine whether to round up.\r\n\r\n      k = baseOut / 2;\r\n      r = r || d < 0 || xc[d + 1] != null;\r\n\r\n      r = rm < 4 ? (i != null || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n            : i > k || i == k &&(rm == 4 || r || rm == 6 && xc[d - 1] & 1 ||\r\n             rm == (x.s < 0 ? 8 : 7));\r\n\r\n      // If the index of the rounding digit is not greater than zero, or xc represents\r\n      // zero, then the result of the base conversion is zero or, if rounding up, a value\r\n      // such as 0.00001.\r\n      if (d < 1 || !xc[0]) {\r\n\r\n        // 1^-dp or 0\r\n        str = r ? toFixedPoint(alphabet.charAt(1), -dp, alphabet.charAt(0)) : alphabet.charAt(0);\r\n      } else {\r\n\r\n        // Truncate xc to the required number of decimal places.\r\n        xc.length = d;\r\n\r\n        // Round up?\r\n        if (r) {\r\n\r\n          // Rounding up may mean the previous digit has to be rounded up and so on.\r\n          for (--baseOut; ++xc[--d] > baseOut;) {\r\n            xc[d] = 0;\r\n\r\n            if (!d) {\r\n              ++e;\r\n              xc = [1].concat(xc);\r\n            }\r\n          }\r\n        }\r\n\r\n        // Determine trailing zeros.\r\n        for (k = xc.length; !xc[--k];);\r\n\r\n        // E.g. [4, 11, 15] becomes 4bf.\r\n        for (i = 0, str = ''; i <= k; str += alphabet.charAt(xc[i++]));\r\n\r\n        // Add leading zeros, decimal point and trailing zeros as required.\r\n        str = toFixedPoint(str, e, alphabet.charAt(0));\r\n      }\r\n\r\n      // The caller will add the sign.\r\n      return str;\r\n    };\r\n  })();\r\n\r\n\r\n  // Perform division in the specified base. Called by div and convertBase.\r\n  div = (function () {\r\n\r\n    // Assume non-zero x and k.\r\n    function multiply(x, k, base) {\r\n      var m, temp, xlo, xhi,\r\n        carry = 0,\r\n        i = x.length,\r\n        klo = k % SQRT_BASE,\r\n        khi = k / SQRT_BASE | 0;\r\n\r\n      for (x = x.slice(); i--;) {\r\n        xlo = x[i] % SQRT_BASE;\r\n        xhi = x[i] / SQRT_BASE | 0;\r\n        m = khi * xlo + xhi * klo;\r\n        temp = klo * xlo + ((m % SQRT_BASE) * SQRT_BASE) + carry;\r\n        carry = (temp / base | 0) + (m / SQRT_BASE | 0) + khi * xhi;\r\n        x[i] = temp % base;\r\n      }\r\n\r\n      if (carry) x = [carry].concat(x);\r\n\r\n      return x;\r\n    }\r\n\r\n    function compare(a, b, aL, bL) {\r\n      var i, cmp;\r\n\r\n      if (aL != bL) {\r\n        cmp = aL > bL ? 1 : -1;\r\n      } else {\r\n\r\n        for (i = cmp = 0; i < aL; i++) {\r\n\r\n          if (a[i] != b[i]) {\r\n            cmp = a[i] > b[i] ? 1 : -1;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      return cmp;\r\n    }\r\n\r\n    function subtract(a, b, aL, base) {\r\n      var i = 0;\r\n\r\n      // Subtract b from a.\r\n      for (; aL--;) {\r\n        a[aL] -= i;\r\n        i = a[aL] < b[aL] ? 1 : 0;\r\n        a[aL] = i * base + a[aL] - b[aL];\r\n      }\r\n\r\n      // Remove leading zeros.\r\n      for (; !a[0] && a.length > 1; a.splice(0, 1));\r\n    }\r\n\r\n    // x: dividend, y: divisor.\r\n    return function (x, y, dp, rm, base) {\r\n      var cmp, e, i, more, n, prod, prodL, q, qc, rem, remL, rem0, xi, xL, yc0,\r\n        yL, yz,\r\n        s = x.s == y.s ? 1 : -1,\r\n        xc = x.c,\r\n        yc = y.c;\r\n\r\n      // Either NaN, Infinity or 0?\r\n      if (!xc || !xc[0] || !yc || !yc[0]) {\r\n\r\n        return new BigNumber(\r\n\r\n         // Return NaN if either NaN, or both Infinity or 0.\r\n         !x.s || !y.s || (xc ? yc && xc[0] == yc[0] : !yc) ? NaN :\r\n\r\n          // Return 0 if x is 0 or y is Infinity, or return Infinity as y is 0.\r\n          xc && xc[0] == 0 || !yc ? s * 0 : s / 0\r\n       );\r\n      }\r\n\r\n      q = new BigNumber(s);\r\n      qc = q.c = [];\r\n      e = x.e - y.e;\r\n      s = dp + e + 1;\r\n\r\n      if (!base) {\r\n        base = BASE;\r\n        e = bitFloor(x.e / LOG_BASE) - bitFloor(y.e / LOG_BASE);\r\n        s = s / LOG_BASE | 0;\r\n      }\r\n\r\n      // Result exponent may be one less then the current value of e.\r\n      // The coefficients of the BigNumbers from convertBase may have trailing zeros.\r\n      for (i = 0; yc[i] == (xc[i] || 0); i++);\r\n\r\n      if (yc[i] > (xc[i] || 0)) e--;\r\n\r\n      if (s < 0) {\r\n        qc.push(1);\r\n        more = true;\r\n      } else {\r\n        xL = xc.length;\r\n        yL = yc.length;\r\n        i = 0;\r\n        s += 2;\r\n\r\n        // Normalise xc and yc so highest order digit of yc is >= base / 2.\r\n\r\n        n = mathfloor(base / (yc[0] + 1));\r\n\r\n        // Not necessary, but to handle odd bases where yc[0] == (base / 2) - 1.\r\n        // if (n > 1 || n++ == 1 && yc[0] < base / 2) {\r\n        if (n > 1) {\r\n          yc = multiply(yc, n, base);\r\n          xc = multiply(xc, n, base);\r\n          yL = yc.length;\r\n          xL = xc.length;\r\n        }\r\n\r\n        xi = yL;\r\n        rem = xc.slice(0, yL);\r\n        remL = rem.length;\r\n\r\n        // Add zeros to make remainder as long as divisor.\r\n        for (; remL < yL; rem[remL++] = 0);\r\n        yz = yc.slice();\r\n        yz = [0].concat(yz);\r\n        yc0 = yc[0];\r\n        if (yc[1] >= base / 2) yc0++;\r\n        // Not necessary, but to prevent trial digit n > base, when using base 3.\r\n        // else if (base == 3 && yc0 == 1) yc0 = 1 + 1e-15;\r\n\r\n        do {\r\n          n = 0;\r\n\r\n          // Compare divisor and remainder.\r\n          cmp = compare(yc, rem, yL, remL);\r\n\r\n          // If divisor < remainder.\r\n          if (cmp < 0) {\r\n\r\n            // Calculate trial digit, n.\r\n\r\n            rem0 = rem[0];\r\n            if (yL != remL) rem0 = rem0 * base + (rem[1] || 0);\r\n\r\n            // n is how many times the divisor goes into the current remainder.\r\n            n = mathfloor(rem0 / yc0);\r\n\r\n            //  Algorithm:\r\n            //  product = divisor multiplied by trial digit (n).\r\n            //  Compare product and remainder.\r\n            //  If product is greater than remainder:\r\n            //    Subtract divisor from product, decrement trial digit.\r\n            //  Subtract product from remainder.\r\n            //  If product was less than remainder at the last compare:\r\n            //    Compare new remainder and divisor.\r\n            //    If remainder is greater than divisor:\r\n            //      Subtract divisor from remainder, increment trial digit.\r\n\r\n            if (n > 1) {\r\n\r\n              // n may be > base only when base is 3.\r\n              if (n >= base) n = base - 1;\r\n\r\n              // product = divisor * trial digit.\r\n              prod = multiply(yc, n, base);\r\n              prodL = prod.length;\r\n              remL = rem.length;\r\n\r\n              // Compare product and remainder.\r\n              // If product > remainder then trial digit n too high.\r\n              // n is 1 too high about 5% of the time, and is not known to have\r\n              // ever been more than 1 too high.\r\n              while (compare(prod, rem, prodL, remL) == 1) {\r\n                n--;\r\n\r\n                // Subtract divisor from product.\r\n                subtract(prod, yL < prodL ? yz : yc, prodL, base);\r\n                prodL = prod.length;\r\n                cmp = 1;\r\n              }\r\n            } else {\r\n\r\n              // n is 0 or 1, cmp is -1.\r\n              // If n is 0, there is no need to compare yc and rem again below,\r\n              // so change cmp to 1 to avoid it.\r\n              // If n is 1, leave cmp as -1, so yc and rem are compared again.\r\n              if (n == 0) {\r\n\r\n                // divisor < remainder, so n must be at least 1.\r\n                cmp = n = 1;\r\n              }\r\n\r\n              // product = divisor\r\n              prod = yc.slice();\r\n              prodL = prod.length;\r\n            }\r\n\r\n            if (prodL < remL) prod = [0].concat(prod);\r\n\r\n            // Subtract product from remainder.\r\n            subtract(rem, prod, remL, base);\r\n            remL = rem.length;\r\n\r\n             // If product was < remainder.\r\n            if (cmp == -1) {\r\n\r\n              // Compare divisor and new remainder.\r\n              // If divisor < new remainder, subtract divisor from remainder.\r\n              // Trial digit n too low.\r\n              // n is 1 too low about 5% of the time, and very rarely 2 too low.\r\n              while (compare(yc, rem, yL, remL) < 1) {\r\n                n++;\r\n\r\n                // Subtract divisor from remainder.\r\n                subtract(rem, yL < remL ? yz : yc, remL, base);\r\n                remL = rem.length;\r\n              }\r\n            }\r\n          } else if (cmp === 0) {\r\n            n++;\r\n            rem = [0];\r\n          } // else cmp === 1 and n will be 0\r\n\r\n          // Add the next digit, n, to the result array.\r\n          qc[i++] = n;\r\n\r\n          // Update the remainder.\r\n          if (rem[0]) {\r\n            rem[remL++] = xc[xi] || 0;\r\n          } else {\r\n            rem = [xc[xi]];\r\n            remL = 1;\r\n          }\r\n        } while ((xi++ < xL || rem[0] != null) && s--);\r\n\r\n        more = rem[0] != null;\r\n\r\n        // Leading zero?\r\n        if (!qc[0]) qc.splice(0, 1);\r\n      }\r\n\r\n      if (base == BASE) {\r\n\r\n        // To calculate q.e, first get the number of digits of qc[0].\r\n        for (i = 1, s = qc[0]; s >= 10; s /= 10, i++);\r\n\r\n        round(q, dp + (q.e = i + e * LOG_BASE - 1) + 1, rm, more);\r\n\r\n      // Caller is convertBase.\r\n      } else {\r\n        q.e = e;\r\n        q.r = +more;\r\n      }\r\n\r\n      return q;\r\n    };\r\n  })();\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of BigNumber n in fixed-point or exponential\r\n   * notation rounded to the specified decimal places or significant digits.\r\n   *\r\n   * n: a BigNumber.\r\n   * i: the index of the last digit required (i.e. the digit that may be rounded up).\r\n   * rm: the rounding mode.\r\n   * id: 1 (toExponential) or 2 (toPrecision).\r\n   */\r\n  function format(n, i, rm, id) {\r\n    var c0, e, ne, len, str;\r\n\r\n    if (rm == null) rm = ROUNDING_MODE;\r\n    else intCheck(rm, 0, 8);\r\n\r\n    if (!n.c) return n.toString();\r\n\r\n    c0 = n.c[0];\r\n    ne = n.e;\r\n\r\n    if (i == null) {\r\n      str = coeffToString(n.c);\r\n      str = id == 1 || id == 2 && (ne <= TO_EXP_NEG || ne >= TO_EXP_POS)\r\n       ? toExponential(str, ne)\r\n       : toFixedPoint(str, ne, '0');\r\n    } else {\r\n      n = round(new BigNumber(n), i, rm);\r\n\r\n      // n.e may have changed if the value was rounded up.\r\n      e = n.e;\r\n\r\n      str = coeffToString(n.c);\r\n      len = str.length;\r\n\r\n      // toPrecision returns exponential notation if the number of significant digits\r\n      // specified is less than the number of digits necessary to represent the integer\r\n      // part of the value in fixed-point notation.\r\n\r\n      // Exponential notation.\r\n      if (id == 1 || id == 2 && (i <= e || e <= TO_EXP_NEG)) {\r\n\r\n        // Append zeros?\r\n        for (; len < i; str += '0', len++);\r\n        str = toExponential(str, e);\r\n\r\n      // Fixed-point notation.\r\n      } else {\r\n        i -= ne + (id === 2 && e > ne);\r\n        str = toFixedPoint(str, e, '0');\r\n\r\n        // Append zeros?\r\n        if (e + 1 > len) {\r\n          if (--i > 0) for (str += '.'; i--; str += '0');\r\n        } else {\r\n          i += e - len;\r\n          if (i > 0) {\r\n            if (e + 1 == len) str += '.';\r\n            for (; i--; str += '0');\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return n.s < 0 && c0 ? '-' + str : str;\r\n  }\r\n\r\n\r\n  // Handle BigNumber.max and BigNumber.min.\r\n  // If any number is NaN, return NaN.\r\n  function maxOrMin(args, n) {\r\n    var k, y,\r\n      i = 1,\r\n      x = new BigNumber(args[0]);\r\n\r\n    for (; i < args.length; i++) {\r\n      y = new BigNumber(args[i]);\r\n      if (!y.s || (k = compare(x, y)) === n || k === 0 && x.s === n) {\r\n        x = y;\r\n      }\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  /*\r\n   * Strip trailing zeros, calculate base 10 exponent and check against MIN_EXP and MAX_EXP.\r\n   * Called by minus, plus and times.\r\n   */\r\n  function normalise(n, c, e) {\r\n    var i = 1,\r\n      j = c.length;\r\n\r\n     // Remove trailing zeros.\r\n    for (; !c[--j]; c.pop());\r\n\r\n    // Calculate the base 10 exponent. First get the number of digits of c[0].\r\n    for (j = c[0]; j >= 10; j /= 10, i++);\r\n\r\n    // Overflow?\r\n    if ((e = i + e * LOG_BASE - 1) > MAX_EXP) {\r\n\r\n      // Infinity.\r\n      n.c = n.e = null;\r\n\r\n    // Underflow?\r\n    } else if (e < MIN_EXP) {\r\n\r\n      // Zero.\r\n      n.c = [n.e = 0];\r\n    } else {\r\n      n.e = e;\r\n      n.c = c;\r\n    }\r\n\r\n    return n;\r\n  }\r\n\r\n\r\n  // Handle values that fail the validity test in BigNumber.\r\n  parseNumeric = (function () {\r\n    var basePrefix = /^(-?)0([xbo])(?=\\w[\\w.]*$)/i,\r\n      dotAfter = /^([^.]+)\\.$/,\r\n      dotBefore = /^\\.([^.]+)$/,\r\n      isInfinityOrNaN = /^-?(Infinity|NaN)$/,\r\n      whitespaceOrPlus = /^\\s*\\+(?=[\\w.])|^\\s+|\\s+$/g;\r\n\r\n    return function (x, str, isNum, b) {\r\n      var base,\r\n        s = isNum ? str : str.replace(whitespaceOrPlus, '');\r\n\r\n      // No exception on Infinity or NaN.\r\n      if (isInfinityOrNaN.test(s)) {\r\n        x.s = isNaN(s) ? null : s < 0 ? -1 : 1;\r\n      } else {\r\n        if (!isNum) {\r\n\r\n          // basePrefix = /^(-?)0([xbo])(?=\\w[\\w.]*$)/i\r\n          s = s.replace(basePrefix, function (m, p1, p2) {\r\n            base = (p2 = p2.toLowerCase()) == 'x' ? 16 : p2 == 'b' ? 2 : 8;\r\n            return !b || b == base ? p1 : m;\r\n          });\r\n\r\n          if (b) {\r\n            base = b;\r\n\r\n            // E.g. '1.' to '1', '.1' to '0.1'\r\n            s = s.replace(dotAfter, '$1').replace(dotBefore, '0.$1');\r\n          }\r\n\r\n          if (str != s) return new BigNumber(s, base);\r\n        }\r\n\r\n        // '[BigNumber Error] Not a number: {n}'\r\n        // '[BigNumber Error] Not a base {b} number: {n}'\r\n        if (BigNumber.DEBUG) {\r\n          throw Error\r\n            (bignumberError + 'Not a' + (b ? ' base ' + b : '') + ' number: ' + str);\r\n        }\r\n\r\n        // NaN\r\n        x.s = null;\r\n      }\r\n\r\n      x.c = x.e = null;\r\n    }\r\n  })();\r\n\r\n\r\n  /*\r\n   * Round x to sd significant digits using rounding mode rm. Check for over/under-flow.\r\n   * If r is truthy, it is known that there are more digits after the rounding digit.\r\n   */\r\n  function round(x, sd, rm, r) {\r\n    var d, i, j, k, n, ni, rd,\r\n      xc = x.c,\r\n      pows10 = POWS_TEN;\r\n\r\n    // if x is not Infinity or NaN...\r\n    if (xc) {\r\n\r\n      // rd is the rounding digit, i.e. the digit after the digit that may be rounded up.\r\n      // n is a base 1e14 number, the value of the element of array x.c containing rd.\r\n      // ni is the index of n within x.c.\r\n      // d is the number of digits of n.\r\n      // i is the index of rd within n including leading zeros.\r\n      // j is the actual index of rd within n (if < 0, rd is a leading zero).\r\n      out: {\r\n\r\n        // Get the number of digits of the first element of xc.\r\n        for (d = 1, k = xc[0]; k >= 10; k /= 10, d++);\r\n        i = sd - d;\r\n\r\n        // If the rounding digit is in the first element of xc...\r\n        if (i < 0) {\r\n          i += LOG_BASE;\r\n          j = sd;\r\n          n = xc[ni = 0];\r\n\r\n          // Get the rounding digit at index j of n.\r\n          rd = mathfloor(n / pows10[d - j - 1] % 10);\r\n        } else {\r\n          ni = mathceil((i + 1) / LOG_BASE);\r\n\r\n          if (ni >= xc.length) {\r\n\r\n            if (r) {\r\n\r\n              // Needed by sqrt.\r\n              for (; xc.length <= ni; xc.push(0));\r\n              n = rd = 0;\r\n              d = 1;\r\n              i %= LOG_BASE;\r\n              j = i - LOG_BASE + 1;\r\n            } else {\r\n              break out;\r\n            }\r\n          } else {\r\n            n = k = xc[ni];\r\n\r\n            // Get the number of digits of n.\r\n            for (d = 1; k >= 10; k /= 10, d++);\r\n\r\n            // Get the index of rd within n.\r\n            i %= LOG_BASE;\r\n\r\n            // Get the index of rd within n, adjusted for leading zeros.\r\n            // The number of leading zeros of n is given by LOG_BASE - d.\r\n            j = i - LOG_BASE + d;\r\n\r\n            // Get the rounding digit at index j of n.\r\n            rd = j < 0 ? 0 : mathfloor(n / pows10[d - j - 1] % 10);\r\n          }\r\n        }\r\n\r\n        r = r || sd < 0 ||\r\n\r\n        // Are there any non-zero digits after the rounding digit?\r\n        // The expression  n % pows10[d - j - 1]  returns all digits of n to the right\r\n        // of the digit at j, e.g. if n is 908714 and j is 2, the expression gives 714.\r\n         xc[ni + 1] != null || (j < 0 ? n : n % pows10[d - j - 1]);\r\n\r\n        r = rm < 4\r\n         ? (rd || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n         : rd > 5 || rd == 5 && (rm == 4 || r || rm == 6 &&\r\n\r\n          // Check whether the digit to the left of the rounding digit is odd.\r\n          ((i > 0 ? j > 0 ? n / pows10[d - j] : 0 : xc[ni - 1]) % 10) & 1 ||\r\n           rm == (x.s < 0 ? 8 : 7));\r\n\r\n        if (sd < 1 || !xc[0]) {\r\n          xc.length = 0;\r\n\r\n          if (r) {\r\n\r\n            // Convert sd to decimal places.\r\n            sd -= x.e + 1;\r\n\r\n            // 1, 0.1, 0.01, 0.001, 0.0001 etc.\r\n            xc[0] = pows10[(LOG_BASE - sd % LOG_BASE) % LOG_BASE];\r\n            x.e = -sd || 0;\r\n          } else {\r\n\r\n            // Zero.\r\n            xc[0] = x.e = 0;\r\n          }\r\n\r\n          return x;\r\n        }\r\n\r\n        // Remove excess digits.\r\n        if (i == 0) {\r\n          xc.length = ni;\r\n          k = 1;\r\n          ni--;\r\n        } else {\r\n          xc.length = ni + 1;\r\n          k = pows10[LOG_BASE - i];\r\n\r\n          // E.g. 56700 becomes 56000 if 7 is the rounding digit.\r\n          // j > 0 means i > number of leading zeros of n.\r\n          xc[ni] = j > 0 ? mathfloor(n / pows10[d - j] % pows10[j]) * k : 0;\r\n        }\r\n\r\n        // Round up?\r\n        if (r) {\r\n\r\n          for (; ;) {\r\n\r\n            // If the digit to be rounded up is in the first element of xc...\r\n            if (ni == 0) {\r\n\r\n              // i will be the length of xc[0] before k is added.\r\n              for (i = 1, j = xc[0]; j >= 10; j /= 10, i++);\r\n              j = xc[0] += k;\r\n              for (k = 1; j >= 10; j /= 10, k++);\r\n\r\n              // if i != k the length has increased.\r\n              if (i != k) {\r\n                x.e++;\r\n                if (xc[0] == BASE) xc[0] = 1;\r\n              }\r\n\r\n              break;\r\n            } else {\r\n              xc[ni] += k;\r\n              if (xc[ni] != BASE) break;\r\n              xc[ni--] = 0;\r\n              k = 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        // Remove trailing zeros.\r\n        for (i = xc.length; xc[--i] === 0; xc.pop());\r\n      }\r\n\r\n      // Overflow? Infinity.\r\n      if (x.e > MAX_EXP) {\r\n        x.c = x.e = null;\r\n\r\n      // Underflow? Zero.\r\n      } else if (x.e < MIN_EXP) {\r\n        x.c = [x.e = 0];\r\n      }\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  function valueOf(n) {\r\n    var str,\r\n      e = n.e;\r\n\r\n    if (e === null) return n.toString();\r\n\r\n    str = coeffToString(n.c);\r\n\r\n    str = e <= TO_EXP_NEG || e >= TO_EXP_POS\r\n      ? toExponential(str, e)\r\n      : toFixedPoint(str, e, '0');\r\n\r\n    return n.s < 0 ? '-' + str : str;\r\n  }\r\n\r\n\r\n  // PROTOTYPE/INSTANCE METHODS\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the absolute value of this BigNumber.\r\n   */\r\n  P.absoluteValue = P.abs = function () {\r\n    var x = new BigNumber(this);\r\n    if (x.s < 0) x.s = 1;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return\r\n   *   1 if the value of this BigNumber is greater than the value of BigNumber(y, b),\r\n   *   -1 if the value of this BigNumber is less than the value of BigNumber(y, b),\r\n   *   0 if they have the same value,\r\n   *   or null if the value of either is NaN.\r\n   */\r\n  P.comparedTo = function (y, b) {\r\n    return compare(this, new BigNumber(y, b));\r\n  };\r\n\r\n\r\n  /*\r\n   * If dp is undefined or null or true or false, return the number of decimal places of the\r\n   * value of this BigNumber, or null if the value of this BigNumber is Infinity or NaN.\r\n   *\r\n   * Otherwise, if dp is a number, return a new BigNumber whose value is the value of this\r\n   * BigNumber rounded to a maximum of dp decimal places using rounding mode rm, or\r\n   * ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * [dp] {number} Decimal places: integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.decimalPlaces = P.dp = function (dp, rm) {\r\n    var c, n, v,\r\n      x = this;\r\n\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      if (rm == null) rm = ROUNDING_MODE;\r\n      else intCheck(rm, 0, 8);\r\n\r\n      return round(new BigNumber(x), dp + x.e + 1, rm);\r\n    }\r\n\r\n    if (!(c = x.c)) return null;\r\n    n = ((v = c.length - 1) - bitFloor(this.e / LOG_BASE)) * LOG_BASE;\r\n\r\n    // Subtract the number of trailing zeros of the last number.\r\n    if (v = c[v]) for (; v % 10 == 0; v /= 10, n--);\r\n    if (n < 0) n = 0;\r\n\r\n    return n;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n / 0 = I\r\n   *  n / N = N\r\n   *  n / I = 0\r\n   *  0 / n = 0\r\n   *  0 / 0 = N\r\n   *  0 / N = N\r\n   *  0 / I = 0\r\n   *  N / n = N\r\n   *  N / 0 = N\r\n   *  N / N = N\r\n   *  N / I = N\r\n   *  I / n = I\r\n   *  I / 0 = I\r\n   *  I / N = N\r\n   *  I / I = N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber divided by the value of\r\n   * BigNumber(y, b), rounded according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   */\r\n  P.dividedBy = P.div = function (y, b) {\r\n    return div(this, new BigNumber(y, b), DECIMAL_PLACES, ROUNDING_MODE);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the integer part of dividing the value of this\r\n   * BigNumber by the value of BigNumber(y, b).\r\n   */\r\n  P.dividedToIntegerBy = P.idiv = function (y, b) {\r\n    return div(this, new BigNumber(y, b), 0, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a BigNumber whose value is the value of this BigNumber exponentiated by n.\r\n   *\r\n   * If m is present, return the result modulo m.\r\n   * If n is negative round according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   * If POW_PRECISION is non-zero and m is not present, round to POW_PRECISION using ROUNDING_MODE.\r\n   *\r\n   * The modular power operation works efficiently when x, n, and m are integers, otherwise it\r\n   * is equivalent to calculating x.exponentiatedBy(n).modulo(m) with a POW_PRECISION of 0.\r\n   *\r\n   * n {number|string|BigNumber} The exponent. An integer.\r\n   * [m] {number|string|BigNumber} The modulus.\r\n   *\r\n   * '[BigNumber Error] Exponent not an integer: {n}'\r\n   */\r\n  P.exponentiatedBy = P.pow = function (n, m) {\r\n    var half, isModExp, i, k, more, nIsBig, nIsNeg, nIsOdd, y,\r\n      x = this;\r\n\r\n    n = new BigNumber(n);\r\n\r\n    // Allow NaN and Infinity, but not other non-integers.\r\n    if (n.c && !n.isInteger()) {\r\n      throw Error\r\n        (bignumberError + 'Exponent not an integer: ' + valueOf(n));\r\n    }\r\n\r\n    if (m != null) m = new BigNumber(m);\r\n\r\n    // Exponent of MAX_SAFE_INTEGER is 15.\r\n    nIsBig = n.e > 14;\r\n\r\n    // If x is NaN, Infinity, 0 or 1, or n is Infinity, NaN or 0.\r\n    if (!x.c || !x.c[0] || x.c[0] == 1 && !x.e && x.c.length == 1 || !n.c || !n.c[0]) {\r\n\r\n      // The sign of the result of pow when x is negative depends on the evenness of n.\r\n      // If +n overflows to Infinity, the evenness of n would be not be known.\r\n      y = new BigNumber(Math.pow(+valueOf(x), nIsBig ? n.s * (2 - isOdd(n)) : +valueOf(n)));\r\n      return m ? y.mod(m) : y;\r\n    }\r\n\r\n    nIsNeg = n.s < 0;\r\n\r\n    if (m) {\r\n\r\n      // x % m returns NaN if abs(m) is zero, or m is NaN.\r\n      if (m.c ? !m.c[0] : !m.s) return new BigNumber(NaN);\r\n\r\n      isModExp = !nIsNeg && x.isInteger() && m.isInteger();\r\n\r\n      if (isModExp) x = x.mod(m);\r\n\r\n    // Overflow to Infinity: >=2**1e10 or >=1.0000024**1e15.\r\n    // Underflow to 0: <=0.79**1e10 or <=0.9999975**1e15.\r\n    } else if (n.e > 9 && (x.e > 0 || x.e < -1 || (x.e == 0\r\n      // [1, 240000000]\r\n      ? x.c[0] > 1 || nIsBig && x.c[1] >= 24e7\r\n      // [80000000000000]  [99999750000000]\r\n      : x.c[0] < 8e13 || nIsBig && x.c[0] <= 9999975e7))) {\r\n\r\n      // If x is negative and n is odd, k = -0, else k = 0.\r\n      k = x.s < 0 && isOdd(n) ? -0 : 0;\r\n\r\n      // If x >= 1, k = Infinity.\r\n      if (x.e > -1) k = 1 / k;\r\n\r\n      // If n is negative return 0, else return Infinity.\r\n      return new BigNumber(nIsNeg ? 1 / k : k);\r\n\r\n    } else if (POW_PRECISION) {\r\n\r\n      // Truncating each coefficient array to a length of k after each multiplication\r\n      // equates to truncating significant digits to POW_PRECISION + [28, 41],\r\n      // i.e. there will be a minimum of 28 guard digits retained.\r\n      k = mathceil(POW_PRECISION / LOG_BASE + 2);\r\n    }\r\n\r\n    if (nIsBig) {\r\n      half = new BigNumber(0.5);\r\n      if (nIsNeg) n.s = 1;\r\n      nIsOdd = isOdd(n);\r\n    } else {\r\n      i = Math.abs(+valueOf(n));\r\n      nIsOdd = i % 2;\r\n    }\r\n\r\n    y = new BigNumber(ONE);\r\n\r\n    // Performs 54 loop iterations for n of 9007199254740991.\r\n    for (; ;) {\r\n\r\n      if (nIsOdd) {\r\n        y = y.times(x);\r\n        if (!y.c) break;\r\n\r\n        if (k) {\r\n          if (y.c.length > k) y.c.length = k;\r\n        } else if (isModExp) {\r\n          y = y.mod(m);    //y = y.minus(div(y, m, 0, MODULO_MODE).times(m));\r\n        }\r\n      }\r\n\r\n      if (i) {\r\n        i = mathfloor(i / 2);\r\n        if (i === 0) break;\r\n        nIsOdd = i % 2;\r\n      } else {\r\n        n = n.times(half);\r\n        round(n, n.e + 1, 1);\r\n\r\n        if (n.e > 14) {\r\n          nIsOdd = isOdd(n);\r\n        } else {\r\n          i = +valueOf(n);\r\n          if (i === 0) break;\r\n          nIsOdd = i % 2;\r\n        }\r\n      }\r\n\r\n      x = x.times(x);\r\n\r\n      if (k) {\r\n        if (x.c && x.c.length > k) x.c.length = k;\r\n      } else if (isModExp) {\r\n        x = x.mod(m);    //x = x.minus(div(x, m, 0, MODULO_MODE).times(m));\r\n      }\r\n    }\r\n\r\n    if (isModExp) return y;\r\n    if (nIsNeg) y = ONE.div(y);\r\n\r\n    return m ? y.mod(m) : k ? round(y, POW_PRECISION, ROUNDING_MODE, more) : y;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber rounded to an integer\r\n   * using rounding mode rm, or ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {rm}'\r\n   */\r\n  P.integerValue = function (rm) {\r\n    var n = new BigNumber(this);\r\n    if (rm == null) rm = ROUNDING_MODE;\r\n    else intCheck(rm, 0, 8);\r\n    return round(n, n.e + 1, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is equal to the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isEqualTo = P.eq = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) === 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is a finite number, otherwise return false.\r\n   */\r\n  P.isFinite = function () {\r\n    return !!this.c;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is greater than the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isGreaterThan = P.gt = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is greater than or equal to the value of\r\n   * BigNumber(y, b), otherwise return false.\r\n   */\r\n  P.isGreaterThanOrEqualTo = P.gte = function (y, b) {\r\n    return (b = compare(this, new BigNumber(y, b))) === 1 || b === 0;\r\n\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is an integer, otherwise return false.\r\n   */\r\n  P.isInteger = function () {\r\n    return !!this.c && bitFloor(this.e / LOG_BASE) > this.c.length - 2;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is less than the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isLessThan = P.lt = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is less than or equal to the value of\r\n   * BigNumber(y, b), otherwise return false.\r\n   */\r\n  P.isLessThanOrEqualTo = P.lte = function (y, b) {\r\n    return (b = compare(this, new BigNumber(y, b))) === -1 || b === 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is NaN, otherwise return false.\r\n   */\r\n  P.isNaN = function () {\r\n    return !this.s;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is negative, otherwise return false.\r\n   */\r\n  P.isNegative = function () {\r\n    return this.s < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is positive, otherwise return false.\r\n   */\r\n  P.isPositive = function () {\r\n    return this.s > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is 0 or -0, otherwise return false.\r\n   */\r\n  P.isZero = function () {\r\n    return !!this.c && this.c[0] == 0;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n - 0 = n\r\n   *  n - N = N\r\n   *  n - I = -I\r\n   *  0 - n = -n\r\n   *  0 - 0 = 0\r\n   *  0 - N = N\r\n   *  0 - I = -I\r\n   *  N - n = N\r\n   *  N - 0 = N\r\n   *  N - N = N\r\n   *  N - I = N\r\n   *  I - n = I\r\n   *  I - 0 = I\r\n   *  I - N = N\r\n   *  I - I = N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber minus the value of\r\n   * BigNumber(y, b).\r\n   */\r\n  P.minus = function (y, b) {\r\n    var i, j, t, xLTy,\r\n      x = this,\r\n      a = x.s;\r\n\r\n    y = new BigNumber(y, b);\r\n    b = y.s;\r\n\r\n    // Either NaN?\r\n    if (!a || !b) return new BigNumber(NaN);\r\n\r\n    // Signs differ?\r\n    if (a != b) {\r\n      y.s = -b;\r\n      return x.plus(y);\r\n    }\r\n\r\n    var xe = x.e / LOG_BASE,\r\n      ye = y.e / LOG_BASE,\r\n      xc = x.c,\r\n      yc = y.c;\r\n\r\n    if (!xe || !ye) {\r\n\r\n      // Either Infinity?\r\n      if (!xc || !yc) return xc ? (y.s = -b, y) : new BigNumber(yc ? x : NaN);\r\n\r\n      // Either zero?\r\n      if (!xc[0] || !yc[0]) {\r\n\r\n        // Return y if y is non-zero, x if x is non-zero, or zero if both are zero.\r\n        return yc[0] ? (y.s = -b, y) : new BigNumber(xc[0] ? x :\r\n\r\n         // IEEE 754 (2008) 6.3: n - n = -0 when rounding to -Infinity\r\n         ROUNDING_MODE == 3 ? -0 : 0);\r\n      }\r\n    }\r\n\r\n    xe = bitFloor(xe);\r\n    ye = bitFloor(ye);\r\n    xc = xc.slice();\r\n\r\n    // Determine which is the bigger number.\r\n    if (a = xe - ye) {\r\n\r\n      if (xLTy = a < 0) {\r\n        a = -a;\r\n        t = xc;\r\n      } else {\r\n        ye = xe;\r\n        t = yc;\r\n      }\r\n\r\n      t.reverse();\r\n\r\n      // Prepend zeros to equalise exponents.\r\n      for (b = a; b--; t.push(0));\r\n      t.reverse();\r\n    } else {\r\n\r\n      // Exponents equal. Check digit by digit.\r\n      j = (xLTy = (a = xc.length) < (b = yc.length)) ? a : b;\r\n\r\n      for (a = b = 0; b < j; b++) {\r\n\r\n        if (xc[b] != yc[b]) {\r\n          xLTy = xc[b] < yc[b];\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    // x < y? Point xc to the array of the bigger number.\r\n    if (xLTy) {\r\n      t = xc;\r\n      xc = yc;\r\n      yc = t;\r\n      y.s = -y.s;\r\n    }\r\n\r\n    b = (j = yc.length) - (i = xc.length);\r\n\r\n    // Append zeros to xc if shorter.\r\n    // No need to add zeros to yc if shorter as subtract only needs to start at yc.length.\r\n    if (b > 0) for (; b--; xc[i++] = 0);\r\n    b = BASE - 1;\r\n\r\n    // Subtract yc from xc.\r\n    for (; j > a;) {\r\n\r\n      if (xc[--j] < yc[j]) {\r\n        for (i = j; i && !xc[--i]; xc[i] = b);\r\n        --xc[i];\r\n        xc[j] += BASE;\r\n      }\r\n\r\n      xc[j] -= yc[j];\r\n    }\r\n\r\n    // Remove leading zeros and adjust exponent accordingly.\r\n    for (; xc[0] == 0; xc.splice(0, 1), --ye);\r\n\r\n    // Zero?\r\n    if (!xc[0]) {\r\n\r\n      // Following IEEE 754 (2008) 6.3,\r\n      // n - n = +0  but  n - n = -0  when rounding towards -Infinity.\r\n      y.s = ROUNDING_MODE == 3 ? -1 : 1;\r\n      y.c = [y.e = 0];\r\n      return y;\r\n    }\r\n\r\n    // No need to check for Infinity as +x - +y != Infinity && -x - -y != Infinity\r\n    // for finite x and y.\r\n    return normalise(y, xc, ye);\r\n  };\r\n\r\n\r\n  /*\r\n   *   n % 0 =  N\r\n   *   n % N =  N\r\n   *   n % I =  n\r\n   *   0 % n =  0\r\n   *  -0 % n = -0\r\n   *   0 % 0 =  N\r\n   *   0 % N =  N\r\n   *   0 % I =  0\r\n   *   N % n =  N\r\n   *   N % 0 =  N\r\n   *   N % N =  N\r\n   *   N % I =  N\r\n   *   I % n =  N\r\n   *   I % 0 =  N\r\n   *   I % N =  N\r\n   *   I % I =  N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber modulo the value of\r\n   * BigNumber(y, b). The result depends on the value of MODULO_MODE.\r\n   */\r\n  P.modulo = P.mod = function (y, b) {\r\n    var q, s,\r\n      x = this;\r\n\r\n    y = new BigNumber(y, b);\r\n\r\n    // Return NaN if x is Infinity or NaN, or y is NaN or zero.\r\n    if (!x.c || !y.s || y.c && !y.c[0]) {\r\n      return new BigNumber(NaN);\r\n\r\n    // Return x if y is Infinity or x is zero.\r\n    } else if (!y.c || x.c && !x.c[0]) {\r\n      return new BigNumber(x);\r\n    }\r\n\r\n    if (MODULO_MODE == 9) {\r\n\r\n      // Euclidian division: q = sign(y) * floor(x / abs(y))\r\n      // r = x - qy    where  0 <= r < abs(y)\r\n      s = y.s;\r\n      y.s = 1;\r\n      q = div(x, y, 0, 3);\r\n      y.s = s;\r\n      q.s *= s;\r\n    } else {\r\n      q = div(x, y, 0, MODULO_MODE);\r\n    }\r\n\r\n    y = x.minus(q.times(y));\r\n\r\n    // To match JavaScript %, ensure sign of zero is sign of dividend.\r\n    if (!y.c[0] && MODULO_MODE == 1) y.s = x.s;\r\n\r\n    return y;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n * 0 = 0\r\n   *  n * N = N\r\n   *  n * I = I\r\n   *  0 * n = 0\r\n   *  0 * 0 = 0\r\n   *  0 * N = N\r\n   *  0 * I = N\r\n   *  N * n = N\r\n   *  N * 0 = N\r\n   *  N * N = N\r\n   *  N * I = N\r\n   *  I * n = I\r\n   *  I * 0 = N\r\n   *  I * N = N\r\n   *  I * I = I\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber multiplied by the value\r\n   * of BigNumber(y, b).\r\n   */\r\n  P.multipliedBy = P.times = function (y, b) {\r\n    var c, e, i, j, k, m, xcL, xlo, xhi, ycL, ylo, yhi, zc,\r\n      base, sqrtBase,\r\n      x = this,\r\n      xc = x.c,\r\n      yc = (y = new BigNumber(y, b)).c;\r\n\r\n    // Either NaN, Infinity or 0?\r\n    if (!xc || !yc || !xc[0] || !yc[0]) {\r\n\r\n      // Return NaN if either is NaN, or one is 0 and the other is Infinity.\r\n      if (!x.s || !y.s || xc && !xc[0] && !yc || yc && !yc[0] && !xc) {\r\n        y.c = y.e = y.s = null;\r\n      } else {\r\n        y.s *= x.s;\r\n\r\n        // Return Infinity if either is Infinity.\r\n        if (!xc || !yc) {\r\n          y.c = y.e = null;\r\n\r\n        // Return 0 if either is 0.\r\n        } else {\r\n          y.c = [0];\r\n          y.e = 0;\r\n        }\r\n      }\r\n\r\n      return y;\r\n    }\r\n\r\n    e = bitFloor(x.e / LOG_BASE) + bitFloor(y.e / LOG_BASE);\r\n    y.s *= x.s;\r\n    xcL = xc.length;\r\n    ycL = yc.length;\r\n\r\n    // Ensure xc points to longer array and xcL to its length.\r\n    if (xcL < ycL) {\r\n      zc = xc;\r\n      xc = yc;\r\n      yc = zc;\r\n      i = xcL;\r\n      xcL = ycL;\r\n      ycL = i;\r\n    }\r\n\r\n    // Initialise the result array with zeros.\r\n    for (i = xcL + ycL, zc = []; i--; zc.push(0));\r\n\r\n    base = BASE;\r\n    sqrtBase = SQRT_BASE;\r\n\r\n    for (i = ycL; --i >= 0;) {\r\n      c = 0;\r\n      ylo = yc[i] % sqrtBase;\r\n      yhi = yc[i] / sqrtBase | 0;\r\n\r\n      for (k = xcL, j = i + k; j > i;) {\r\n        xlo = xc[--k] % sqrtBase;\r\n        xhi = xc[k] / sqrtBase | 0;\r\n        m = yhi * xlo + xhi * ylo;\r\n        xlo = ylo * xlo + ((m % sqrtBase) * sqrtBase) + zc[j] + c;\r\n        c = (xlo / base | 0) + (m / sqrtBase | 0) + yhi * xhi;\r\n        zc[j--] = xlo % base;\r\n      }\r\n\r\n      zc[j] = c;\r\n    }\r\n\r\n    if (c) {\r\n      ++e;\r\n    } else {\r\n      zc.splice(0, 1);\r\n    }\r\n\r\n    return normalise(y, zc, e);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber negated,\r\n   * i.e. multiplied by -1.\r\n   */\r\n  P.negated = function () {\r\n    var x = new BigNumber(this);\r\n    x.s = -x.s || null;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n + 0 = n\r\n   *  n + N = N\r\n   *  n + I = I\r\n   *  0 + n = n\r\n   *  0 + 0 = 0\r\n   *  0 + N = N\r\n   *  0 + I = I\r\n   *  N + n = N\r\n   *  N + 0 = N\r\n   *  N + N = N\r\n   *  N + I = N\r\n   *  I + n = I\r\n   *  I + 0 = I\r\n   *  I + N = N\r\n   *  I + I = I\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber plus the value of\r\n   * BigNumber(y, b).\r\n   */\r\n  P.plus = function (y, b) {\r\n    var t,\r\n      x = this,\r\n      a = x.s;\r\n\r\n    y = new BigNumber(y, b);\r\n    b = y.s;\r\n\r\n    // Either NaN?\r\n    if (!a || !b) return new BigNumber(NaN);\r\n\r\n    // Signs differ?\r\n     if (a != b) {\r\n      y.s = -b;\r\n      return x.minus(y);\r\n    }\r\n\r\n    var xe = x.e / LOG_BASE,\r\n      ye = y.e / LOG_BASE,\r\n      xc = x.c,\r\n      yc = y.c;\r\n\r\n    if (!xe || !ye) {\r\n\r\n      // Return Infinity if either Infinity.\r\n      if (!xc || !yc) return new BigNumber(a / 0);\r\n\r\n      // Either zero?\r\n      // Return y if y is non-zero, x if x is non-zero, or zero if both are zero.\r\n      if (!xc[0] || !yc[0]) return yc[0] ? y : new BigNumber(xc[0] ? x : a * 0);\r\n    }\r\n\r\n    xe = bitFloor(xe);\r\n    ye = bitFloor(ye);\r\n    xc = xc.slice();\r\n\r\n    // Prepend zeros to equalise exponents. Faster to use reverse then do unshifts.\r\n    if (a = xe - ye) {\r\n      if (a > 0) {\r\n        ye = xe;\r\n        t = yc;\r\n      } else {\r\n        a = -a;\r\n        t = xc;\r\n      }\r\n\r\n      t.reverse();\r\n      for (; a--; t.push(0));\r\n      t.reverse();\r\n    }\r\n\r\n    a = xc.length;\r\n    b = yc.length;\r\n\r\n    // Point xc to the longer array, and b to the shorter length.\r\n    if (a - b < 0) {\r\n      t = yc;\r\n      yc = xc;\r\n      xc = t;\r\n      b = a;\r\n    }\r\n\r\n    // Only start adding at yc.length - 1 as the further digits of xc can be ignored.\r\n    for (a = 0; b;) {\r\n      a = (xc[--b] = xc[b] + yc[b] + a) / BASE | 0;\r\n      xc[b] = BASE === xc[b] ? 0 : xc[b] % BASE;\r\n    }\r\n\r\n    if (a) {\r\n      xc = [a].concat(xc);\r\n      ++ye;\r\n    }\r\n\r\n    // No need to check for zero, as +x + +y != 0 && -x + -y != 0\r\n    // ye = MAX_EXP + 1 possible\r\n    return normalise(y, xc, ye);\r\n  };\r\n\r\n\r\n  /*\r\n   * If sd is undefined or null or true or false, return the number of significant digits of\r\n   * the value of this BigNumber, or null if the value of this BigNumber is Infinity or NaN.\r\n   * If sd is true include integer-part trailing zeros in the count.\r\n   *\r\n   * Otherwise, if sd is a number, return a new BigNumber whose value is the value of this\r\n   * BigNumber rounded to a maximum of sd significant digits using rounding mode rm, or\r\n   * ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * sd {number|boolean} number: significant digits: integer, 1 to MAX inclusive.\r\n   *                     boolean: whether to count integer-part trailing zeros: true or false.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'\r\n   */\r\n  P.precision = P.sd = function (sd, rm) {\r\n    var c, n, v,\r\n      x = this;\r\n\r\n    if (sd != null && sd !== !!sd) {\r\n      intCheck(sd, 1, MAX);\r\n      if (rm == null) rm = ROUNDING_MODE;\r\n      else intCheck(rm, 0, 8);\r\n\r\n      return round(new BigNumber(x), sd, rm);\r\n    }\r\n\r\n    if (!(c = x.c)) return null;\r\n    v = c.length - 1;\r\n    n = v * LOG_BASE + 1;\r\n\r\n    if (v = c[v]) {\r\n\r\n      // Subtract the number of trailing zeros of the last element.\r\n      for (; v % 10 == 0; v /= 10, n--);\r\n\r\n      // Add the number of digits of the first element.\r\n      for (v = c[0]; v >= 10; v /= 10, n++);\r\n    }\r\n\r\n    if (sd && x.e + 1 > n) n = x.e + 1;\r\n\r\n    return n;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber shifted by k places\r\n   * (powers of 10). Shift to the right if n > 0, and to the left if n < 0.\r\n   *\r\n   * k {number} Integer, -MAX_SAFE_INTEGER to MAX_SAFE_INTEGER inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {k}'\r\n   */\r\n  P.shiftedBy = function (k) {\r\n    intCheck(k, -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER);\r\n    return this.times('1e' + k);\r\n  };\r\n\r\n\r\n  /*\r\n   *  sqrt(-n) =  N\r\n   *  sqrt(N) =  N\r\n   *  sqrt(-I) =  N\r\n   *  sqrt(I) =  I\r\n   *  sqrt(0) =  0\r\n   *  sqrt(-0) = -0\r\n   *\r\n   * Return a new BigNumber whose value is the square root of the value of this BigNumber,\r\n   * rounded according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   */\r\n  P.squareRoot = P.sqrt = function () {\r\n    var m, n, r, rep, t,\r\n      x = this,\r\n      c = x.c,\r\n      s = x.s,\r\n      e = x.e,\r\n      dp = DECIMAL_PLACES + 4,\r\n      half = new BigNumber('0.5');\r\n\r\n    // Negative/NaN/Infinity/zero?\r\n    if (s !== 1 || !c || !c[0]) {\r\n      return new BigNumber(!s || s < 0 && (!c || c[0]) ? NaN : c ? x : 1 / 0);\r\n    }\r\n\r\n    // Initial estimate.\r\n    s = Math.sqrt(+valueOf(x));\r\n\r\n    // Math.sqrt underflow/overflow?\r\n    // Pass x to Math.sqrt as integer, then adjust the exponent of the result.\r\n    if (s == 0 || s == 1 / 0) {\r\n      n = coeffToString(c);\r\n      if ((n.length + e) % 2 == 0) n += '0';\r\n      s = Math.sqrt(+n);\r\n      e = bitFloor((e + 1) / 2) - (e < 0 || e % 2);\r\n\r\n      if (s == 1 / 0) {\r\n        n = '5e' + e;\r\n      } else {\r\n        n = s.toExponential();\r\n        n = n.slice(0, n.indexOf('e') + 1) + e;\r\n      }\r\n\r\n      r = new BigNumber(n);\r\n    } else {\r\n      r = new BigNumber(s + '');\r\n    }\r\n\r\n    // Check for zero.\r\n    // r could be zero if MIN_EXP is changed after the this value was created.\r\n    // This would cause a division by zero (x/t) and hence Infinity below, which would cause\r\n    // coeffToString to throw.\r\n    if (r.c[0]) {\r\n      e = r.e;\r\n      s = e + dp;\r\n      if (s < 3) s = 0;\r\n\r\n      // Newton-Raphson iteration.\r\n      for (; ;) {\r\n        t = r;\r\n        r = half.times(t.plus(div(x, t, dp, 1)));\r\n\r\n        if (coeffToString(t.c).slice(0, s) === (n = coeffToString(r.c)).slice(0, s)) {\r\n\r\n          // The exponent of r may here be one less than the final result exponent,\r\n          // e.g 0.0009999 (e-4) --> 0.001 (e-3), so adjust s so the rounding digits\r\n          // are indexed correctly.\r\n          if (r.e < e) --s;\r\n          n = n.slice(s - 3, s + 1);\r\n\r\n          // The 4th rounding digit may be in error by -1 so if the 4 rounding digits\r\n          // are 9999 or 4999 (i.e. approaching a rounding boundary) continue the\r\n          // iteration.\r\n          if (n == '9999' || !rep && n == '4999') {\r\n\r\n            // On the first iteration only, check to see if rounding up gives the\r\n            // exact result as the nines may infinitely repeat.\r\n            if (!rep) {\r\n              round(t, t.e + DECIMAL_PLACES + 2, 0);\r\n\r\n              if (t.times(t).eq(x)) {\r\n                r = t;\r\n                break;\r\n              }\r\n            }\r\n\r\n            dp += 4;\r\n            s += 4;\r\n            rep = 1;\r\n          } else {\r\n\r\n            // If rounding digits are null, 0{0,4} or 50{0,3}, check for exact\r\n            // result. If not, then there are further digits and m will be truthy.\r\n            if (!+n || !+n.slice(1) && n.charAt(0) == '5') {\r\n\r\n              // Truncate to the first rounding digit.\r\n              round(r, r.e + DECIMAL_PLACES + 2, 1);\r\n              m = !r.times(r).eq(x);\r\n            }\r\n\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return round(r, r.e + DECIMAL_PLACES + 1, ROUNDING_MODE, m);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in exponential notation and\r\n   * rounded using ROUNDING_MODE to dp fixed decimal places.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.toExponential = function (dp, rm) {\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      dp++;\r\n    }\r\n    return format(this, dp, rm, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in fixed-point notation rounding\r\n   * to dp fixed decimal places using rounding mode rm, or ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * Note: as with JavaScript's number type, (-0).toFixed(0) is '0',\r\n   * but e.g. (-0.00001).toFixed(0) is '-0'.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.toFixed = function (dp, rm) {\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      dp = dp + this.e + 1;\r\n    }\r\n    return format(this, dp, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in fixed-point notation rounded\r\n   * using rm or ROUNDING_MODE to dp decimal places, and formatted according to the properties\r\n   * of the format or FORMAT object (see BigNumber.set).\r\n   *\r\n   * The formatting object may contain some or all of the properties shown below.\r\n   *\r\n   * FORMAT = {\r\n   *   prefix: '',\r\n   *   groupSize: 3,\r\n   *   secondaryGroupSize: 0,\r\n   *   groupSeparator: ',',\r\n   *   decimalSeparator: '.',\r\n   *   fractionGroupSize: 0,\r\n   *   fractionGroupSeparator: '\\xA0',      // non-breaking space\r\n   *   suffix: ''\r\n   * };\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   * [format] {object} Formatting options. See FORMAT pbject above.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   * '[BigNumber Error] Argument not an object: {format}'\r\n   */\r\n  P.toFormat = function (dp, rm, format) {\r\n    var str,\r\n      x = this;\r\n\r\n    if (format == null) {\r\n      if (dp != null && rm && typeof rm == 'object') {\r\n        format = rm;\r\n        rm = null;\r\n      } else if (dp && typeof dp == 'object') {\r\n        format = dp;\r\n        dp = rm = null;\r\n      } else {\r\n        format = FORMAT;\r\n      }\r\n    } else if (typeof format != 'object') {\r\n      throw Error\r\n        (bignumberError + 'Argument not an object: ' + format);\r\n    }\r\n\r\n    str = x.toFixed(dp, rm);\r\n\r\n    if (x.c) {\r\n      var i,\r\n        arr = str.split('.'),\r\n        g1 = +format.groupSize,\r\n        g2 = +format.secondaryGroupSize,\r\n        groupSeparator = format.groupSeparator || '',\r\n        intPart = arr[0],\r\n        fractionPart = arr[1],\r\n        isNeg = x.s < 0,\r\n        intDigits = isNeg ? intPart.slice(1) : intPart,\r\n        len = intDigits.length;\r\n\r\n      if (g2) {\r\n        i = g1;\r\n        g1 = g2;\r\n        g2 = i;\r\n        len -= i;\r\n      }\r\n\r\n      if (g1 > 0 && len > 0) {\r\n        i = len % g1 || g1;\r\n        intPart = intDigits.substr(0, i);\r\n        for (; i < len; i += g1) intPart += groupSeparator + intDigits.substr(i, g1);\r\n        if (g2 > 0) intPart += groupSeparator + intDigits.slice(i);\r\n        if (isNeg) intPart = '-' + intPart;\r\n      }\r\n\r\n      str = fractionPart\r\n       ? intPart + (format.decimalSeparator || '') + ((g2 = +format.fractionGroupSize)\r\n        ? fractionPart.replace(new RegExp('\\\\d{' + g2 + '}\\\\B', 'g'),\r\n         '$&' + (format.fractionGroupSeparator || ''))\r\n        : fractionPart)\r\n       : intPart;\r\n    }\r\n\r\n    return (format.prefix || '') + str + (format.suffix || '');\r\n  };\r\n\r\n\r\n  /*\r\n   * Return an array of two BigNumbers representing the value of this BigNumber as a simple\r\n   * fraction with an integer numerator and an integer denominator.\r\n   * The denominator will be a positive non-zero value less than or equal to the specified\r\n   * maximum denominator. If a maximum denominator is not specified, the denominator will be\r\n   * the lowest value necessary to represent the number exactly.\r\n   *\r\n   * [md] {number|string|BigNumber} Integer >= 1, or Infinity. The maximum denominator.\r\n   *\r\n   * '[BigNumber Error] Argument {not an integer|out of range} : {md}'\r\n   */\r\n  P.toFraction = function (md) {\r\n    var d, d0, d1, d2, e, exp, n, n0, n1, q, r, s,\r\n      x = this,\r\n      xc = x.c;\r\n\r\n    if (md != null) {\r\n      n = new BigNumber(md);\r\n\r\n      // Throw if md is less than one or is not an integer, unless it is Infinity.\r\n      if (!n.isInteger() && (n.c || n.s !== 1) || n.lt(ONE)) {\r\n        throw Error\r\n          (bignumberError + 'Argument ' +\r\n            (n.isInteger() ? 'out of range: ' : 'not an integer: ') + valueOf(n));\r\n      }\r\n    }\r\n\r\n    if (!xc) return new BigNumber(x);\r\n\r\n    d = new BigNumber(ONE);\r\n    n1 = d0 = new BigNumber(ONE);\r\n    d1 = n0 = new BigNumber(ONE);\r\n    s = coeffToString(xc);\r\n\r\n    // Determine initial denominator.\r\n    // d is a power of 10 and the minimum max denominator that specifies the value exactly.\r\n    e = d.e = s.length - x.e - 1;\r\n    d.c[0] = POWS_TEN[(exp = e % LOG_BASE) < 0 ? LOG_BASE + exp : exp];\r\n    md = !md || n.comparedTo(d) > 0 ? (e > 0 ? d : n1) : n;\r\n\r\n    exp = MAX_EXP;\r\n    MAX_EXP = 1 / 0;\r\n    n = new BigNumber(s);\r\n\r\n    // n0 = d1 = 0\r\n    n0.c[0] = 0;\r\n\r\n    for (; ;)  {\r\n      q = div(n, d, 0, 1);\r\n      d2 = d0.plus(q.times(d1));\r\n      if (d2.comparedTo(md) == 1) break;\r\n      d0 = d1;\r\n      d1 = d2;\r\n      n1 = n0.plus(q.times(d2 = n1));\r\n      n0 = d2;\r\n      d = n.minus(q.times(d2 = d));\r\n      n = d2;\r\n    }\r\n\r\n    d2 = div(md.minus(d0), d1, 0, 1);\r\n    n0 = n0.plus(d2.times(n1));\r\n    d0 = d0.plus(d2.times(d1));\r\n    n0.s = n1.s = x.s;\r\n    e = e * 2;\r\n\r\n    // Determine which fraction is closer to x, n0/d0 or n1/d1\r\n    r = div(n1, d1, e, ROUNDING_MODE).minus(x).abs().comparedTo(\r\n        div(n0, d0, e, ROUNDING_MODE).minus(x).abs()) < 1 ? [n1, d1] : [n0, d0];\r\n\r\n    MAX_EXP = exp;\r\n\r\n    return r;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return the value of this BigNumber converted to a number primitive.\r\n   */\r\n  P.toNumber = function () {\r\n    return +valueOf(this);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber rounded to sd significant digits\r\n   * using rounding mode rm or ROUNDING_MODE. If sd is less than the number of digits\r\n   * necessary to represent the integer part of the value in fixed-point notation, then use\r\n   * exponential notation.\r\n   *\r\n   * [sd] {number} Significant digits. Integer, 1 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'\r\n   */\r\n  P.toPrecision = function (sd, rm) {\r\n    if (sd != null) intCheck(sd, 1, MAX);\r\n    return format(this, sd, rm, 2);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in base b, or base 10 if b is\r\n   * omitted. If a base is specified, including base 10, round according to DECIMAL_PLACES and\r\n   * ROUNDING_MODE. If a base is not specified, and this BigNumber has a positive exponent\r\n   * that is equal to or greater than TO_EXP_POS, or a negative exponent equal to or less than\r\n   * TO_EXP_NEG, return exponential notation.\r\n   *\r\n   * [b] {number} Integer, 2 to ALPHABET.length inclusive.\r\n   *\r\n   * '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'\r\n   */\r\n  P.toString = function (b) {\r\n    var str,\r\n      n = this,\r\n      s = n.s,\r\n      e = n.e;\r\n\r\n    // Infinity or NaN?\r\n    if (e === null) {\r\n      if (s) {\r\n        str = 'Infinity';\r\n        if (s < 0) str = '-' + str;\r\n      } else {\r\n        str = 'NaN';\r\n      }\r\n    } else {\r\n      if (b == null) {\r\n        str = e <= TO_EXP_NEG || e >= TO_EXP_POS\r\n         ? toExponential(coeffToString(n.c), e)\r\n         : toFixedPoint(coeffToString(n.c), e, '0');\r\n      } else if (b === 10 && alphabetHasNormalDecimalDigits) {\r\n        n = round(new BigNumber(n), DECIMAL_PLACES + e + 1, ROUNDING_MODE);\r\n        str = toFixedPoint(coeffToString(n.c), n.e, '0');\r\n      } else {\r\n        intCheck(b, 2, ALPHABET.length, 'Base');\r\n        str = convertBase(toFixedPoint(coeffToString(n.c), e, '0'), 10, b, s, true);\r\n      }\r\n\r\n      if (s < 0 && n.c[0]) str = '-' + str;\r\n    }\r\n\r\n    return str;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return as toString, but do not accept a base argument, and include the minus sign for\r\n   * negative zero.\r\n   */\r\n  P.valueOf = P.toJSON = function () {\r\n    return valueOf(this);\r\n  };\r\n\r\n\r\n  P._isBigNumber = true;\r\n\r\n  P[Symbol.toStringTag] = 'BigNumber';\r\n\r\n  // Node.js v10.12.0+\r\n  P[Symbol.for('nodejs.util.inspect.custom')] = P.valueOf;\r\n\r\n  if (configObject != null) BigNumber.set(configObject);\r\n\r\n  return BigNumber;\r\n}\r\n\r\n\r\n// PRIVATE HELPER FUNCTIONS\r\n\r\n// These functions don't need access to variables,\r\n// e.g. DECIMAL_PLACES, in the scope of the `clone` function above.\r\n\r\n\r\nfunction bitFloor(n) {\r\n  var i = n | 0;\r\n  return n > 0 || n === i ? i : i - 1;\r\n}\r\n\r\n\r\n// Return a coefficient array as a string of base 10 digits.\r\nfunction coeffToString(a) {\r\n  var s, z,\r\n    i = 1,\r\n    j = a.length,\r\n    r = a[0] + '';\r\n\r\n  for (; i < j;) {\r\n    s = a[i++] + '';\r\n    z = LOG_BASE - s.length;\r\n    for (; z--; s = '0' + s);\r\n    r += s;\r\n  }\r\n\r\n  // Determine trailing zeros.\r\n  for (j = r.length; r.charCodeAt(--j) === 48;);\r\n\r\n  return r.slice(0, j + 1 || 1);\r\n}\r\n\r\n\r\n// Compare the value of BigNumbers x and y.\r\nfunction compare(x, y) {\r\n  var a, b,\r\n    xc = x.c,\r\n    yc = y.c,\r\n    i = x.s,\r\n    j = y.s,\r\n    k = x.e,\r\n    l = y.e;\r\n\r\n  // Either NaN?\r\n  if (!i || !j) return null;\r\n\r\n  a = xc && !xc[0];\r\n  b = yc && !yc[0];\r\n\r\n  // Either zero?\r\n  if (a || b) return a ? b ? 0 : -j : i;\r\n\r\n  // Signs differ?\r\n  if (i != j) return i;\r\n\r\n  a = i < 0;\r\n  b = k == l;\r\n\r\n  // Either Infinity?\r\n  if (!xc || !yc) return b ? 0 : !xc ^ a ? 1 : -1;\r\n\r\n  // Compare exponents.\r\n  if (!b) return k > l ^ a ? 1 : -1;\r\n\r\n  j = (k = xc.length) < (l = yc.length) ? k : l;\r\n\r\n  // Compare digit by digit.\r\n  for (i = 0; i < j; i++) if (xc[i] != yc[i]) return xc[i] > yc[i] ^ a ? 1 : -1;\r\n\r\n  // Compare lengths.\r\n  return k == l ? 0 : k > l ^ a ? 1 : -1;\r\n}\r\n\r\n\r\n/*\r\n * Check that n is a primitive number, an integer, and in range, otherwise throw.\r\n */\r\nfunction intCheck(n, min, max, name) {\r\n  if (n < min || n > max || n !== mathfloor(n)) {\r\n    throw Error\r\n     (bignumberError + (name || 'Argument') + (typeof n == 'number'\r\n       ? n < min || n > max ? ' out of range: ' : ' not an integer: '\r\n       : ' not a primitive number: ') + String(n));\r\n  }\r\n}\r\n\r\n\r\n// Assumes finite n.\r\nfunction isOdd(n) {\r\n  var k = n.c.length - 1;\r\n  return bitFloor(n.e / LOG_BASE) == k && n.c[k] % 2 != 0;\r\n}\r\n\r\n\r\nfunction toExponential(str, e) {\r\n  return (str.length > 1 ? str.charAt(0) + '.' + str.slice(1) : str) +\r\n   (e < 0 ? 'e' : 'e+') + e;\r\n}\r\n\r\n\r\nfunction toFixedPoint(str, e, z) {\r\n  var len, zs;\r\n\r\n  // Negative exponent?\r\n  if (e < 0) {\r\n\r\n    // Prepend zeros.\r\n    for (zs = z + '.'; ++e; zs += z);\r\n    str = zs + str;\r\n\r\n  // Positive exponent\r\n  } else {\r\n    len = str.length;\r\n\r\n    // Append zeros.\r\n    if (++e > len) {\r\n      for (zs = z, e -= len; --e; zs += z);\r\n      str += zs;\r\n    } else if (e < len) {\r\n      str = str.slice(0, e) + '.' + str.slice(e);\r\n    }\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\n\r\n// EXPORT\r\n\r\n\r\nexport var BigNumber = clone();\r\n\r\nexport default BigNumber;\r\n","// src/index.ts\nvar SplayTreeNode = class {\n  key;\n  left = null;\n  right = null;\n  constructor(key) {\n    this.key = key;\n  }\n};\nvar SplayTreeSetNode = class extends SplayTreeNode {\n  constructor(key) {\n    super(key);\n  }\n};\nvar SplayTreeMapNode = class _SplayTreeMapNode extends SplayTreeNode {\n  value;\n  constructor(key, value) {\n    super(key);\n    this.value = value;\n  }\n  replaceValue(value) {\n    const node = new _SplayTreeMapNode(this.key, value);\n    node.left = this.left;\n    node.right = this.right;\n    return node;\n  }\n};\nvar SplayTree = class {\n  size = 0;\n  modificationCount = 0;\n  splayCount = 0;\n  splay(key) {\n    const root = this.root;\n    if (root == null) {\n      this.compare(key, key);\n      return -1;\n    }\n    let right = null;\n    let newTreeRight = null;\n    let left = null;\n    let newTreeLeft = null;\n    let current = root;\n    const compare = this.compare;\n    let comp;\n    while (true) {\n      comp = compare(current.key, key);\n      if (comp > 0) {\n        let currentLeft = current.left;\n        if (currentLeft == null) break;\n        comp = compare(currentLeft.key, key);\n        if (comp > 0) {\n          current.left = currentLeft.right;\n          currentLeft.right = current;\n          current = currentLeft;\n          currentLeft = current.left;\n          if (currentLeft == null) break;\n        }\n        if (right == null) {\n          newTreeRight = current;\n        } else {\n          right.left = current;\n        }\n        right = current;\n        current = currentLeft;\n      } else if (comp < 0) {\n        let currentRight = current.right;\n        if (currentRight == null) break;\n        comp = compare(currentRight.key, key);\n        if (comp < 0) {\n          current.right = currentRight.left;\n          currentRight.left = current;\n          current = currentRight;\n          currentRight = current.right;\n          if (currentRight == null) break;\n        }\n        if (left == null) {\n          newTreeLeft = current;\n        } else {\n          left.right = current;\n        }\n        left = current;\n        current = currentRight;\n      } else {\n        break;\n      }\n    }\n    if (left != null) {\n      left.right = current.left;\n      current.left = newTreeLeft;\n    }\n    if (right != null) {\n      right.left = current.right;\n      current.right = newTreeRight;\n    }\n    if (this.root !== current) {\n      this.root = current;\n      this.splayCount++;\n    }\n    return comp;\n  }\n  splayMin(node) {\n    let current = node;\n    let nextLeft = current.left;\n    while (nextLeft != null) {\n      const left = nextLeft;\n      current.left = left.right;\n      left.right = current;\n      current = left;\n      nextLeft = current.left;\n    }\n    return current;\n  }\n  splayMax(node) {\n    let current = node;\n    let nextRight = current.right;\n    while (nextRight != null) {\n      const right = nextRight;\n      current.right = right.left;\n      right.left = current;\n      current = right;\n      nextRight = current.right;\n    }\n    return current;\n  }\n  _delete(key) {\n    if (this.root == null) return null;\n    const comp = this.splay(key);\n    if (comp != 0) return null;\n    let root = this.root;\n    const result = root;\n    const left = root.left;\n    this.size--;\n    if (left == null) {\n      this.root = root.right;\n    } else {\n      const right = root.right;\n      root = this.splayMax(left);\n      root.right = right;\n      this.root = root;\n    }\n    this.modificationCount++;\n    return result;\n  }\n  addNewRoot(node, comp) {\n    this.size++;\n    this.modificationCount++;\n    const root = this.root;\n    if (root == null) {\n      this.root = node;\n      return;\n    }\n    if (comp < 0) {\n      node.left = root;\n      node.right = root.right;\n      root.right = null;\n    } else {\n      node.right = root;\n      node.left = root.left;\n      root.left = null;\n    }\n    this.root = node;\n  }\n  _first() {\n    const root = this.root;\n    if (root == null) return null;\n    this.root = this.splayMin(root);\n    return this.root;\n  }\n  _last() {\n    const root = this.root;\n    if (root == null) return null;\n    this.root = this.splayMax(root);\n    return this.root;\n  }\n  clear() {\n    this.root = null;\n    this.size = 0;\n    this.modificationCount++;\n  }\n  has(key) {\n    return this.validKey(key) && this.splay(key) == 0;\n  }\n  defaultCompare() {\n    return (a, b) => a < b ? -1 : a > b ? 1 : 0;\n  }\n  wrap() {\n    return {\n      getRoot: () => {\n        return this.root;\n      },\n      setRoot: (root) => {\n        this.root = root;\n      },\n      getSize: () => {\n        return this.size;\n      },\n      getModificationCount: () => {\n        return this.modificationCount;\n      },\n      getSplayCount: () => {\n        return this.splayCount;\n      },\n      setSplayCount: (count) => {\n        this.splayCount = count;\n      },\n      splay: (key) => {\n        return this.splay(key);\n      },\n      has: (key) => {\n        return this.has(key);\n      }\n    };\n  }\n};\nvar SplayTreeMap = class extends SplayTree {\n  root = null;\n  compare;\n  validKey;\n  constructor(compare, isValidKey) {\n    super();\n    this.compare = compare ?? this.defaultCompare();\n    this.validKey = isValidKey ?? ((a) => a != null && a != void 0);\n  }\n  delete(key) {\n    if (!this.validKey(key)) return false;\n    return this._delete(key) != null;\n  }\n  forEach(f) {\n    const nodes = new SplayTreeMapEntryIterableIterator(this.wrap());\n    let result;\n    while (result = nodes.next(), !result.done) {\n      f(result.value[1], result.value[0], this);\n    }\n  }\n  get(key) {\n    if (!this.validKey(key)) return void 0;\n    if (this.root != null) {\n      const comp = this.splay(key);\n      if (comp == 0) {\n        return this.root.value;\n      }\n    }\n    return void 0;\n  }\n  hasValue(value) {\n    const initialSplayCount = this.splayCount;\n    const visit = (node) => {\n      while (node != null) {\n        if (node.value == value) return true;\n        if (initialSplayCount != this.splayCount) {\n          throw \"Concurrent modification during iteration.\";\n        }\n        if (node.right != null && visit(node.right)) {\n          return true;\n        }\n        node = node.left;\n      }\n      return false;\n    };\n    return visit(this.root);\n  }\n  set(key, value) {\n    const comp = this.splay(key);\n    if (comp == 0) {\n      this.root = this.root.replaceValue(value);\n      this.splayCount += 1;\n      return this;\n    }\n    this.addNewRoot(new SplayTreeMapNode(key, value), comp);\n    return this;\n  }\n  setAll(other) {\n    other.forEach((value, key) => {\n      this.set(key, value);\n    });\n  }\n  setIfAbsent(key, ifAbsent) {\n    let comp = this.splay(key);\n    if (comp == 0) {\n      return this.root.value;\n    }\n    const modificationCount = this.modificationCount;\n    const splayCount = this.splayCount;\n    const value = ifAbsent();\n    if (modificationCount != this.modificationCount) {\n      throw \"Concurrent modification during iteration.\";\n    }\n    if (splayCount != this.splayCount) {\n      comp = this.splay(key);\n    }\n    this.addNewRoot(new SplayTreeMapNode(key, value), comp);\n    return value;\n  }\n  isEmpty() {\n    return this.root == null;\n  }\n  isNotEmpty() {\n    return !this.isEmpty();\n  }\n  firstKey() {\n    if (this.root == null) return null;\n    return this._first().key;\n  }\n  lastKey() {\n    if (this.root == null) return null;\n    return this._last().key;\n  }\n  lastKeyBefore(key) {\n    if (key == null) throw \"Invalid arguments(s)\";\n    if (this.root == null) return null;\n    const comp = this.splay(key);\n    if (comp < 0) return this.root.key;\n    let node = this.root.left;\n    if (node == null) return null;\n    let nodeRight = node.right;\n    while (nodeRight != null) {\n      node = nodeRight;\n      nodeRight = node.right;\n    }\n    return node.key;\n  }\n  firstKeyAfter(key) {\n    if (key == null) throw \"Invalid arguments(s)\";\n    if (this.root == null) return null;\n    const comp = this.splay(key);\n    if (comp > 0) return this.root.key;\n    let node = this.root.right;\n    if (node == null) return null;\n    let nodeLeft = node.left;\n    while (nodeLeft != null) {\n      node = nodeLeft;\n      nodeLeft = node.left;\n    }\n    return node.key;\n  }\n  update(key, update, ifAbsent) {\n    let comp = this.splay(key);\n    if (comp == 0) {\n      const modificationCount = this.modificationCount;\n      const splayCount = this.splayCount;\n      const newValue = update(this.root.value);\n      if (modificationCount != this.modificationCount) {\n        throw \"Concurrent modification during iteration.\";\n      }\n      if (splayCount != this.splayCount) {\n        this.splay(key);\n      }\n      this.root = this.root.replaceValue(newValue);\n      this.splayCount += 1;\n      return newValue;\n    }\n    if (ifAbsent != null) {\n      const modificationCount = this.modificationCount;\n      const splayCount = this.splayCount;\n      const newValue = ifAbsent();\n      if (modificationCount != this.modificationCount) {\n        throw \"Concurrent modification during iteration.\";\n      }\n      if (splayCount != this.splayCount) {\n        comp = this.splay(key);\n      }\n      this.addNewRoot(new SplayTreeMapNode(key, newValue), comp);\n      return newValue;\n    }\n    throw \"Invalid argument (key): Key not in map.\";\n  }\n  updateAll(update) {\n    const root = this.root;\n    if (root == null) return;\n    const iterator = new SplayTreeMapEntryIterableIterator(this.wrap());\n    let node;\n    while (node = iterator.next(), !node.done) {\n      const newValue = update(...node.value);\n      iterator.replaceValue(newValue);\n    }\n  }\n  keys() {\n    return new SplayTreeKeyIterableIterator(this.wrap());\n  }\n  values() {\n    return new SplayTreeValueIterableIterator(this.wrap());\n  }\n  entries() {\n    return this[Symbol.iterator]();\n  }\n  [Symbol.iterator]() {\n    return new SplayTreeMapEntryIterableIterator(this.wrap());\n  }\n  [Symbol.toStringTag] = \"[object Map]\";\n};\nvar SplayTreeSet = class _SplayTreeSet extends SplayTree {\n  root = null;\n  compare;\n  validKey;\n  constructor(compare, isValidKey) {\n    super();\n    this.compare = compare ?? this.defaultCompare();\n    this.validKey = isValidKey ?? ((v) => v != null && v != void 0);\n  }\n  delete(element) {\n    if (!this.validKey(element)) return false;\n    return this._delete(element) != null;\n  }\n  deleteAll(elements) {\n    for (const element of elements) {\n      this.delete(element);\n    }\n  }\n  forEach(f) {\n    const nodes = this[Symbol.iterator]();\n    let result;\n    while (result = nodes.next(), !result.done) {\n      f(result.value, result.value, this);\n    }\n  }\n  add(element) {\n    const compare = this.splay(element);\n    if (compare != 0) this.addNewRoot(new SplayTreeSetNode(element), compare);\n    return this;\n  }\n  addAndReturn(element) {\n    const compare = this.splay(element);\n    if (compare != 0) this.addNewRoot(new SplayTreeSetNode(element), compare);\n    return this.root.key;\n  }\n  addAll(elements) {\n    for (const element of elements) {\n      this.add(element);\n    }\n  }\n  isEmpty() {\n    return this.root == null;\n  }\n  isNotEmpty() {\n    return this.root != null;\n  }\n  single() {\n    if (this.size == 0) throw \"Bad state: No element\";\n    if (this.size > 1) throw \"Bad state: Too many element\";\n    return this.root.key;\n  }\n  first() {\n    if (this.size == 0) throw \"Bad state: No element\";\n    return this._first().key;\n  }\n  last() {\n    if (this.size == 0) throw \"Bad state: No element\";\n    return this._last().key;\n  }\n  lastBefore(element) {\n    if (element == null) throw \"Invalid arguments(s)\";\n    if (this.root == null) return null;\n    const comp = this.splay(element);\n    if (comp < 0) return this.root.key;\n    let node = this.root.left;\n    if (node == null) return null;\n    let nodeRight = node.right;\n    while (nodeRight != null) {\n      node = nodeRight;\n      nodeRight = node.right;\n    }\n    return node.key;\n  }\n  firstAfter(element) {\n    if (element == null) throw \"Invalid arguments(s)\";\n    if (this.root == null) return null;\n    const comp = this.splay(element);\n    if (comp > 0) return this.root.key;\n    let node = this.root.right;\n    if (node == null) return null;\n    let nodeLeft = node.left;\n    while (nodeLeft != null) {\n      node = nodeLeft;\n      nodeLeft = node.left;\n    }\n    return node.key;\n  }\n  retainAll(elements) {\n    const retainSet = new _SplayTreeSet(this.compare, this.validKey);\n    const modificationCount = this.modificationCount;\n    for (const object of elements) {\n      if (modificationCount != this.modificationCount) {\n        throw \"Concurrent modification during iteration.\";\n      }\n      if (this.validKey(object) && this.splay(object) == 0) {\n        retainSet.add(this.root.key);\n      }\n    }\n    if (retainSet.size != this.size) {\n      this.root = retainSet.root;\n      this.size = retainSet.size;\n      this.modificationCount++;\n    }\n  }\n  lookup(object) {\n    if (!this.validKey(object)) return null;\n    const comp = this.splay(object);\n    if (comp != 0) return null;\n    return this.root.key;\n  }\n  intersection(other) {\n    const result = new _SplayTreeSet(this.compare, this.validKey);\n    for (const element of this) {\n      if (other.has(element)) result.add(element);\n    }\n    return result;\n  }\n  difference(other) {\n    const result = new _SplayTreeSet(this.compare, this.validKey);\n    for (const element of this) {\n      if (!other.has(element)) result.add(element);\n    }\n    return result;\n  }\n  union(other) {\n    const u = this.clone();\n    u.addAll(other);\n    return u;\n  }\n  clone() {\n    const set = new _SplayTreeSet(this.compare, this.validKey);\n    set.size = this.size;\n    set.root = this.copyNode(this.root);\n    return set;\n  }\n  copyNode(node) {\n    if (node == null) return null;\n    function copyChildren(node2, dest) {\n      let left;\n      let right;\n      do {\n        left = node2.left;\n        right = node2.right;\n        if (left != null) {\n          const newLeft = new SplayTreeSetNode(left.key);\n          dest.left = newLeft;\n          copyChildren(left, newLeft);\n        }\n        if (right != null) {\n          const newRight = new SplayTreeSetNode(right.key);\n          dest.right = newRight;\n          node2 = right;\n          dest = newRight;\n        }\n      } while (right != null);\n    }\n    const result = new SplayTreeSetNode(node.key);\n    copyChildren(node, result);\n    return result;\n  }\n  toSet() {\n    return this.clone();\n  }\n  entries() {\n    return new SplayTreeSetEntryIterableIterator(this.wrap());\n  }\n  keys() {\n    return this[Symbol.iterator]();\n  }\n  values() {\n    return this[Symbol.iterator]();\n  }\n  [Symbol.iterator]() {\n    return new SplayTreeKeyIterableIterator(this.wrap());\n  }\n  [Symbol.toStringTag] = \"[object Set]\";\n};\nvar SplayTreeIterableIterator = class {\n  tree;\n  path = new Array();\n  modificationCount = null;\n  splayCount;\n  constructor(tree) {\n    this.tree = tree;\n    this.splayCount = tree.getSplayCount();\n  }\n  [Symbol.iterator]() {\n    return this;\n  }\n  next() {\n    if (this.moveNext()) return { done: false, value: this.current() };\n    return { done: true, value: null };\n  }\n  current() {\n    if (!this.path.length) return null;\n    const node = this.path[this.path.length - 1];\n    return this.getValue(node);\n  }\n  rebuildPath(key) {\n    this.path.splice(0, this.path.length);\n    this.tree.splay(key);\n    this.path.push(this.tree.getRoot());\n    this.splayCount = this.tree.getSplayCount();\n  }\n  findLeftMostDescendent(node) {\n    while (node != null) {\n      this.path.push(node);\n      node = node.left;\n    }\n  }\n  moveNext() {\n    if (this.modificationCount != this.tree.getModificationCount()) {\n      if (this.modificationCount == null) {\n        this.modificationCount = this.tree.getModificationCount();\n        let node2 = this.tree.getRoot();\n        while (node2 != null) {\n          this.path.push(node2);\n          node2 = node2.left;\n        }\n        return this.path.length > 0;\n      }\n      throw \"Concurrent modification during iteration.\";\n    }\n    if (!this.path.length) return false;\n    if (this.splayCount != this.tree.getSplayCount()) {\n      this.rebuildPath(this.path[this.path.length - 1].key);\n    }\n    let node = this.path[this.path.length - 1];\n    let next = node.right;\n    if (next != null) {\n      while (next != null) {\n        this.path.push(next);\n        next = next.left;\n      }\n      return true;\n    }\n    this.path.pop();\n    while (this.path.length && this.path[this.path.length - 1].right === node) {\n      node = this.path.pop();\n    }\n    return this.path.length > 0;\n  }\n};\nvar SplayTreeKeyIterableIterator = class extends SplayTreeIterableIterator {\n  getValue(node) {\n    return node.key;\n  }\n};\nvar SplayTreeSetEntryIterableIterator = class extends SplayTreeIterableIterator {\n  getValue(node) {\n    return [node.key, node.key];\n  }\n};\nvar SplayTreeValueIterableIterator = class extends SplayTreeIterableIterator {\n  constructor(map) {\n    super(map);\n  }\n  getValue(node) {\n    return node.value;\n  }\n};\nvar SplayTreeMapEntryIterableIterator = class extends SplayTreeIterableIterator {\n  constructor(map) {\n    super(map);\n  }\n  getValue(node) {\n    return [node.key, node.value];\n  }\n  replaceValue(value) {\n    if (this.modificationCount != this.tree.getModificationCount()) {\n      throw \"Concurrent modification during iteration.\";\n    }\n    if (this.splayCount != this.tree.getSplayCount()) {\n      this.rebuildPath(this.path[this.path.length - 1].key);\n    }\n    const last = this.path.pop();\n    const newLast = last.replaceValue(value);\n    if (!this.path.length) {\n      this.tree.setRoot(newLast);\n    } else {\n      const parent = this.path[this.path.length - 1];\n      if (last === parent.left) {\n        parent.left = newLast;\n      } else {\n        parent.right = newLast;\n      }\n    }\n    this.path.push(newLast);\n    const count = this.tree.getSplayCount() + 1;\n    this.tree.setSplayCount(count);\n    this.splayCount = count;\n  }\n};\nexport {\n  SplayTreeMap,\n  SplayTreeSet\n};\n//# sourceMappingURL=index.js.map","// src/geom-in.ts\nimport BigNumber2 from \"bignumber.js\";\n\n// src/constant.ts\nvar constant_default = (x) => {\n  return () => {\n    return x;\n  };\n};\n\n// src/compare.ts\nvar compare_default = (eps) => {\n  const almostEqual = eps ? (a, b) => b.minus(a).abs().isLessThanOrEqualTo(eps) : constant_default(false);\n  return (a, b) => {\n    if (almostEqual(a, b)) return 0;\n    return a.comparedTo(b);\n  };\n};\n\n// src/orient.ts\nfunction orient_default(eps) {\n  const almostCollinear = eps ? (area2, ax, ay, cx, cy) => area2.exponentiatedBy(2).isLessThanOrEqualTo(\n    cx.minus(ax).exponentiatedBy(2).plus(cy.minus(ay).exponentiatedBy(2)).times(eps)\n  ) : constant_default(false);\n  return (a, b, c) => {\n    const ax = a.x, ay = a.y, cx = c.x, cy = c.y;\n    const area2 = ay.minus(cy).times(b.x.minus(cx)).minus(ax.minus(cx).times(b.y.minus(cy)));\n    if (almostCollinear(area2, ax, ay, cx, cy)) return 0;\n    return area2.comparedTo(0);\n  };\n}\n\n// src/snap.ts\nimport BigNumber from \"bignumber.js\";\nimport { SplayTreeSet } from \"splaytree-ts\";\n\n// src/identity.ts\nvar identity_default = (x) => {\n  return x;\n};\n\n// src/snap.ts\nvar snap_default = (eps) => {\n  if (eps) {\n    const xTree = new SplayTreeSet(compare_default(eps));\n    const yTree = new SplayTreeSet(compare_default(eps));\n    const snapCoord = (coord, tree) => {\n      return tree.addAndReturn(coord);\n    };\n    const snap = (v) => {\n      return {\n        x: snapCoord(v.x, xTree),\n        y: snapCoord(v.y, yTree)\n      };\n    };\n    snap({ x: new BigNumber(0), y: new BigNumber(0) });\n    return snap;\n  }\n  return identity_default;\n};\n\n// src/precision.ts\nvar set = (eps) => {\n  return {\n    set: (eps2) => {\n      precision = set(eps2);\n    },\n    reset: () => set(eps),\n    compare: compare_default(eps),\n    snap: snap_default(eps),\n    orient: orient_default(eps)\n  };\n};\nvar precision = set();\n\n// src/bbox.ts\nvar isInBbox = (bbox, point) => {\n  return bbox.ll.x.isLessThanOrEqualTo(point.x) && point.x.isLessThanOrEqualTo(bbox.ur.x) && bbox.ll.y.isLessThanOrEqualTo(point.y) && point.y.isLessThanOrEqualTo(bbox.ur.y);\n};\nvar getBboxOverlap = (b1, b2) => {\n  if (b2.ur.x.isLessThan(b1.ll.x) || b1.ur.x.isLessThan(b2.ll.x) || b2.ur.y.isLessThan(b1.ll.y) || b1.ur.y.isLessThan(b2.ll.y))\n    return null;\n  const lowerX = b1.ll.x.isLessThan(b2.ll.x) ? b2.ll.x : b1.ll.x;\n  const upperX = b1.ur.x.isLessThan(b2.ur.x) ? b1.ur.x : b2.ur.x;\n  const lowerY = b1.ll.y.isLessThan(b2.ll.y) ? b2.ll.y : b1.ll.y;\n  const upperY = b1.ur.y.isLessThan(b2.ur.y) ? b1.ur.y : b2.ur.y;\n  return { ll: { x: lowerX, y: lowerY }, ur: { x: upperX, y: upperY } };\n};\n\n// src/operation.ts\nimport { SplayTreeSet as SplayTreeSet3 } from \"splaytree-ts\";\n\n// src/vector.ts\nvar crossProduct = (a, b) => a.x.times(b.y).minus(a.y.times(b.x));\nvar dotProduct = (a, b) => a.x.times(b.x).plus(a.y.times(b.y));\nvar length = (v) => dotProduct(v, v).sqrt();\nvar sineOfAngle = (pShared, pBase, pAngle) => {\n  const vBase = { x: pBase.x.minus(pShared.x), y: pBase.y.minus(pShared.y) };\n  const vAngle = { x: pAngle.x.minus(pShared.x), y: pAngle.y.minus(pShared.y) };\n  return crossProduct(vAngle, vBase).div(length(vAngle)).div(length(vBase));\n};\nvar cosineOfAngle = (pShared, pBase, pAngle) => {\n  const vBase = { x: pBase.x.minus(pShared.x), y: pBase.y.minus(pShared.y) };\n  const vAngle = { x: pAngle.x.minus(pShared.x), y: pAngle.y.minus(pShared.y) };\n  return dotProduct(vAngle, vBase).div(length(vAngle)).div(length(vBase));\n};\nvar horizontalIntersection = (pt, v, y) => {\n  if (v.y.isZero()) return null;\n  return { x: pt.x.plus(v.x.div(v.y).times(y.minus(pt.y))), y };\n};\nvar verticalIntersection = (pt, v, x) => {\n  if (v.x.isZero()) return null;\n  return { x, y: pt.y.plus(v.y.div(v.x).times(x.minus(pt.x))) };\n};\nvar intersection = (pt1, v1, pt2, v2) => {\n  if (v1.x.isZero()) return verticalIntersection(pt2, v2, pt1.x);\n  if (v2.x.isZero()) return verticalIntersection(pt1, v1, pt2.x);\n  if (v1.y.isZero()) return horizontalIntersection(pt2, v2, pt1.y);\n  if (v2.y.isZero()) return horizontalIntersection(pt1, v1, pt2.y);\n  const kross = crossProduct(v1, v2);\n  if (kross.isZero()) return null;\n  const ve = { x: pt2.x.minus(pt1.x), y: pt2.y.minus(pt1.y) };\n  const d1 = crossProduct(ve, v1).div(kross);\n  const d2 = crossProduct(ve, v2).div(kross);\n  const x1 = pt1.x.plus(d2.times(v1.x)), x2 = pt2.x.plus(d1.times(v2.x));\n  const y1 = pt1.y.plus(d2.times(v1.y)), y2 = pt2.y.plus(d1.times(v2.y));\n  const x = x1.plus(x2).div(2);\n  const y = y1.plus(y2).div(2);\n  return { x, y };\n};\n\n// src/sweep-event.ts\nvar SweepEvent = class _SweepEvent {\n  point;\n  isLeft;\n  segment;\n  otherSE;\n  consumedBy;\n  // for ordering sweep events in the sweep event queue\n  static compare(a, b) {\n    const ptCmp = _SweepEvent.comparePoints(a.point, b.point);\n    if (ptCmp !== 0) return ptCmp;\n    if (a.point !== b.point) a.link(b);\n    if (a.isLeft !== b.isLeft) return a.isLeft ? 1 : -1;\n    return Segment.compare(a.segment, b.segment);\n  }\n  // for ordering points in sweep line order\n  static comparePoints(aPt, bPt) {\n    if (aPt.x.isLessThan(bPt.x)) return -1;\n    if (aPt.x.isGreaterThan(bPt.x)) return 1;\n    if (aPt.y.isLessThan(bPt.y)) return -1;\n    if (aPt.y.isGreaterThan(bPt.y)) return 1;\n    return 0;\n  }\n  // Warning: 'point' input will be modified and re-used (for performance)\n  constructor(point, isLeft) {\n    if (point.events === void 0) point.events = [this];\n    else point.events.push(this);\n    this.point = point;\n    this.isLeft = isLeft;\n  }\n  link(other) {\n    if (other.point === this.point) {\n      throw new Error(\"Tried to link already linked events\");\n    }\n    const otherEvents = other.point.events;\n    for (let i = 0, iMax = otherEvents.length; i < iMax; i++) {\n      const evt = otherEvents[i];\n      this.point.events.push(evt);\n      evt.point = this.point;\n    }\n    this.checkForConsuming();\n  }\n  /* Do a pass over our linked events and check to see if any pair\n   * of segments match, and should be consumed. */\n  checkForConsuming() {\n    const numEvents = this.point.events.length;\n    for (let i = 0; i < numEvents; i++) {\n      const evt1 = this.point.events[i];\n      if (evt1.segment.consumedBy !== void 0) continue;\n      for (let j = i + 1; j < numEvents; j++) {\n        const evt2 = this.point.events[j];\n        if (evt2.consumedBy !== void 0) continue;\n        if (evt1.otherSE.point.events !== evt2.otherSE.point.events) continue;\n        evt1.segment.consume(evt2.segment);\n      }\n    }\n  }\n  getAvailableLinkedEvents() {\n    const events = [];\n    for (let i = 0, iMax = this.point.events.length; i < iMax; i++) {\n      const evt = this.point.events[i];\n      if (evt !== this && !evt.segment.ringOut && evt.segment.isInResult()) {\n        events.push(evt);\n      }\n    }\n    return events;\n  }\n  /**\n   * Returns a comparator function for sorting linked events that will\n   * favor the event that will give us the smallest left-side angle.\n   * All ring construction starts as low as possible heading to the right,\n   * so by always turning left as sharp as possible we'll get polygons\n   * without uncessary loops & holes.\n   *\n   * The comparator function has a compute cache such that it avoids\n   * re-computing already-computed values.\n   */\n  getLeftmostComparator(baseEvent) {\n    const cache = /* @__PURE__ */ new Map();\n    const fillCache = (linkedEvent) => {\n      const nextEvent = linkedEvent.otherSE;\n      cache.set(linkedEvent, {\n        sine: sineOfAngle(this.point, baseEvent.point, nextEvent.point),\n        cosine: cosineOfAngle(this.point, baseEvent.point, nextEvent.point)\n      });\n    };\n    return (a, b) => {\n      if (!cache.has(a)) fillCache(a);\n      if (!cache.has(b)) fillCache(b);\n      const { sine: asine, cosine: acosine } = cache.get(a);\n      const { sine: bsine, cosine: bcosine } = cache.get(b);\n      if (asine.isGreaterThanOrEqualTo(0) && bsine.isGreaterThanOrEqualTo(0)) {\n        if (acosine.isLessThan(bcosine)) return 1;\n        if (acosine.isGreaterThan(bcosine)) return -1;\n        return 0;\n      }\n      if (asine.isLessThan(0) && bsine.isLessThan(0)) {\n        if (acosine.isLessThan(bcosine)) return -1;\n        if (acosine.isGreaterThan(bcosine)) return 1;\n        return 0;\n      }\n      if (bsine.isLessThan(asine)) return -1;\n      if (bsine.isGreaterThan(asine)) return 1;\n      return 0;\n    };\n  }\n};\n\n// src/geom-out.ts\nvar RingOut = class _RingOut {\n  events;\n  poly;\n  _isExteriorRing;\n  _enclosingRing;\n  /* Given the segments from the sweep line pass, compute & return a series\n   * of closed rings from all the segments marked to be part of the result */\n  static factory(allSegments) {\n    const ringsOut = [];\n    for (let i = 0, iMax = allSegments.length; i < iMax; i++) {\n      const segment = allSegments[i];\n      if (!segment.isInResult() || segment.ringOut) continue;\n      let prevEvent = null;\n      let event = segment.leftSE;\n      let nextEvent = segment.rightSE;\n      const events = [event];\n      const startingPoint = event.point;\n      const intersectionLEs = [];\n      while (true) {\n        prevEvent = event;\n        event = nextEvent;\n        events.push(event);\n        if (event.point === startingPoint) break;\n        while (true) {\n          const availableLEs = event.getAvailableLinkedEvents();\n          if (availableLEs.length === 0) {\n            const firstPt = events[0].point;\n            const lastPt = events[events.length - 1].point;\n            throw new Error(\n              `Unable to complete output ring starting at [${firstPt.x}, ${firstPt.y}]. Last matching segment found ends at [${lastPt.x}, ${lastPt.y}].`\n            );\n          }\n          if (availableLEs.length === 1) {\n            nextEvent = availableLEs[0].otherSE;\n            break;\n          }\n          let indexLE = null;\n          for (let j = 0, jMax = intersectionLEs.length; j < jMax; j++) {\n            if (intersectionLEs[j].point === event.point) {\n              indexLE = j;\n              break;\n            }\n          }\n          if (indexLE !== null) {\n            const intersectionLE = intersectionLEs.splice(indexLE)[0];\n            const ringEvents = events.splice(intersectionLE.index);\n            ringEvents.unshift(ringEvents[0].otherSE);\n            ringsOut.push(new _RingOut(ringEvents.reverse()));\n            continue;\n          }\n          intersectionLEs.push({\n            index: events.length,\n            point: event.point\n          });\n          const comparator = event.getLeftmostComparator(prevEvent);\n          nextEvent = availableLEs.sort(comparator)[0].otherSE;\n          break;\n        }\n      }\n      ringsOut.push(new _RingOut(events));\n    }\n    return ringsOut;\n  }\n  constructor(events) {\n    this.events = events;\n    for (let i = 0, iMax = events.length; i < iMax; i++) {\n      events[i].segment.ringOut = this;\n    }\n    this.poly = null;\n  }\n  getGeom() {\n    let prevPt = this.events[0].point;\n    const points = [prevPt];\n    for (let i = 1, iMax = this.events.length - 1; i < iMax; i++) {\n      const pt2 = this.events[i].point;\n      const nextPt2 = this.events[i + 1].point;\n      if (precision.orient(pt2, prevPt, nextPt2) === 0) continue;\n      points.push(pt2);\n      prevPt = pt2;\n    }\n    if (points.length === 1) return null;\n    const pt = points[0];\n    const nextPt = points[1];\n    if (precision.orient(pt, prevPt, nextPt) === 0) points.shift();\n    points.push(points[0]);\n    const step = this.isExteriorRing() ? 1 : -1;\n    const iStart = this.isExteriorRing() ? 0 : points.length - 1;\n    const iEnd = this.isExteriorRing() ? points.length : -1;\n    const orderedPoints = [];\n    for (let i = iStart; i != iEnd; i += step)\n      orderedPoints.push([points[i].x.toNumber(), points[i].y.toNumber()]);\n    return orderedPoints;\n  }\n  isExteriorRing() {\n    if (this._isExteriorRing === void 0) {\n      const enclosing = this.enclosingRing();\n      this._isExteriorRing = enclosing ? !enclosing.isExteriorRing() : true;\n    }\n    return this._isExteriorRing;\n  }\n  enclosingRing() {\n    if (this._enclosingRing === void 0) {\n      this._enclosingRing = this._calcEnclosingRing();\n    }\n    return this._enclosingRing;\n  }\n  /* Returns the ring that encloses this one, if any */\n  _calcEnclosingRing() {\n    let leftMostEvt = this.events[0];\n    for (let i = 1, iMax = this.events.length; i < iMax; i++) {\n      const evt = this.events[i];\n      if (SweepEvent.compare(leftMostEvt, evt) > 0) leftMostEvt = evt;\n    }\n    let prevSeg = leftMostEvt.segment.prevInResult();\n    let prevPrevSeg = prevSeg ? prevSeg.prevInResult() : null;\n    while (true) {\n      if (!prevSeg) return null;\n      if (!prevPrevSeg) return prevSeg.ringOut;\n      if (prevPrevSeg.ringOut !== prevSeg.ringOut) {\n        if (prevPrevSeg.ringOut?.enclosingRing() !== prevSeg.ringOut) {\n          return prevSeg.ringOut;\n        } else return prevSeg.ringOut?.enclosingRing();\n      }\n      prevSeg = prevPrevSeg.prevInResult();\n      prevPrevSeg = prevSeg ? prevSeg.prevInResult() : null;\n    }\n  }\n};\nvar PolyOut = class {\n  exteriorRing;\n  interiorRings;\n  constructor(exteriorRing) {\n    this.exteriorRing = exteriorRing;\n    exteriorRing.poly = this;\n    this.interiorRings = [];\n  }\n  addInterior(ring) {\n    this.interiorRings.push(ring);\n    ring.poly = this;\n  }\n  getGeom() {\n    const geom0 = this.exteriorRing.getGeom();\n    if (geom0 === null) return null;\n    const geom = [geom0];\n    for (let i = 0, iMax = this.interiorRings.length; i < iMax; i++) {\n      const ringGeom = this.interiorRings[i].getGeom();\n      if (ringGeom === null) continue;\n      geom.push(ringGeom);\n    }\n    return geom;\n  }\n};\nvar MultiPolyOut = class {\n  rings;\n  polys;\n  constructor(rings) {\n    this.rings = rings;\n    this.polys = this._composePolys(rings);\n  }\n  getGeom() {\n    const geom = [];\n    for (let i = 0, iMax = this.polys.length; i < iMax; i++) {\n      const polyGeom = this.polys[i].getGeom();\n      if (polyGeom === null) continue;\n      geom.push(polyGeom);\n    }\n    return geom;\n  }\n  _composePolys(rings) {\n    const polys = [];\n    for (let i = 0, iMax = rings.length; i < iMax; i++) {\n      const ring = rings[i];\n      if (ring.poly) continue;\n      if (ring.isExteriorRing()) polys.push(new PolyOut(ring));\n      else {\n        const enclosingRing = ring.enclosingRing();\n        if (!enclosingRing?.poly) polys.push(new PolyOut(enclosingRing));\n        enclosingRing?.poly?.addInterior(ring);\n      }\n    }\n    return polys;\n  }\n};\n\n// src/sweep-line.ts\nimport { SplayTreeSet as SplayTreeSet2 } from \"splaytree-ts\";\nvar SweepLine = class {\n  queue;\n  tree;\n  segments;\n  constructor(queue, comparator = Segment.compare) {\n    this.queue = queue;\n    this.tree = new SplayTreeSet2(comparator);\n    this.segments = [];\n  }\n  process(event) {\n    const segment = event.segment;\n    const newEvents = [];\n    if (event.consumedBy) {\n      if (event.isLeft) this.queue.delete(event.otherSE);\n      else this.tree.delete(segment);\n      return newEvents;\n    }\n    if (event.isLeft) this.tree.add(segment);\n    let prevSeg = segment;\n    let nextSeg = segment;\n    do {\n      prevSeg = this.tree.lastBefore(prevSeg);\n    } while (prevSeg != null && prevSeg.consumedBy != void 0);\n    do {\n      nextSeg = this.tree.firstAfter(nextSeg);\n    } while (nextSeg != null && nextSeg.consumedBy != void 0);\n    if (event.isLeft) {\n      let prevMySplitter = null;\n      if (prevSeg) {\n        const prevInter = prevSeg.getIntersection(segment);\n        if (prevInter !== null) {\n          if (!segment.isAnEndpoint(prevInter)) prevMySplitter = prevInter;\n          if (!prevSeg.isAnEndpoint(prevInter)) {\n            const newEventsFromSplit = this._splitSafely(prevSeg, prevInter);\n            for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n              newEvents.push(newEventsFromSplit[i]);\n            }\n          }\n        }\n      }\n      let nextMySplitter = null;\n      if (nextSeg) {\n        const nextInter = nextSeg.getIntersection(segment);\n        if (nextInter !== null) {\n          if (!segment.isAnEndpoint(nextInter)) nextMySplitter = nextInter;\n          if (!nextSeg.isAnEndpoint(nextInter)) {\n            const newEventsFromSplit = this._splitSafely(nextSeg, nextInter);\n            for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n              newEvents.push(newEventsFromSplit[i]);\n            }\n          }\n        }\n      }\n      if (prevMySplitter !== null || nextMySplitter !== null) {\n        let mySplitter = null;\n        if (prevMySplitter === null) mySplitter = nextMySplitter;\n        else if (nextMySplitter === null) mySplitter = prevMySplitter;\n        else {\n          const cmpSplitters = SweepEvent.comparePoints(\n            prevMySplitter,\n            nextMySplitter\n          );\n          mySplitter = cmpSplitters <= 0 ? prevMySplitter : nextMySplitter;\n        }\n        this.queue.delete(segment.rightSE);\n        newEvents.push(segment.rightSE);\n        const newEventsFromSplit = segment.split(mySplitter);\n        for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n          newEvents.push(newEventsFromSplit[i]);\n        }\n      }\n      if (newEvents.length > 0) {\n        this.tree.delete(segment);\n        newEvents.push(event);\n      } else {\n        this.segments.push(segment);\n        segment.prev = prevSeg;\n      }\n    } else {\n      if (prevSeg && nextSeg) {\n        const inter = prevSeg.getIntersection(nextSeg);\n        if (inter !== null) {\n          if (!prevSeg.isAnEndpoint(inter)) {\n            const newEventsFromSplit = this._splitSafely(prevSeg, inter);\n            for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n              newEvents.push(newEventsFromSplit[i]);\n            }\n          }\n          if (!nextSeg.isAnEndpoint(inter)) {\n            const newEventsFromSplit = this._splitSafely(nextSeg, inter);\n            for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n              newEvents.push(newEventsFromSplit[i]);\n            }\n          }\n        }\n      }\n      this.tree.delete(segment);\n    }\n    return newEvents;\n  }\n  /* Safely split a segment that is currently in the datastructures\n   * IE - a segment other than the one that is currently being processed. */\n  _splitSafely(seg, pt) {\n    this.tree.delete(seg);\n    const rightSE = seg.rightSE;\n    this.queue.delete(rightSE);\n    const newEvents = seg.split(pt);\n    newEvents.push(rightSE);\n    if (seg.consumedBy === void 0) this.tree.add(seg);\n    return newEvents;\n  }\n};\n\n// src/operation.ts\nvar Operation = class {\n  type;\n  numMultiPolys;\n  run(type, geom, moreGeoms) {\n    operation.type = type;\n    const multipolys = [new MultiPolyIn(geom, true)];\n    for (let i = 0, iMax = moreGeoms.length; i < iMax; i++) {\n      multipolys.push(new MultiPolyIn(moreGeoms[i], false));\n    }\n    operation.numMultiPolys = multipolys.length;\n    if (operation.type === \"difference\") {\n      const subject = multipolys[0];\n      let i = 1;\n      while (i < multipolys.length) {\n        if (getBboxOverlap(multipolys[i].bbox, subject.bbox) !== null) i++;\n        else multipolys.splice(i, 1);\n      }\n    }\n    if (operation.type === \"intersection\") {\n      for (let i = 0, iMax = multipolys.length; i < iMax; i++) {\n        const mpA = multipolys[i];\n        for (let j = i + 1, jMax = multipolys.length; j < jMax; j++) {\n          if (getBboxOverlap(mpA.bbox, multipolys[j].bbox) === null) return [];\n        }\n      }\n    }\n    const queue = new SplayTreeSet3(SweepEvent.compare);\n    for (let i = 0, iMax = multipolys.length; i < iMax; i++) {\n      const sweepEvents = multipolys[i].getSweepEvents();\n      for (let j = 0, jMax = sweepEvents.length; j < jMax; j++) {\n        queue.add(sweepEvents[j]);\n      }\n    }\n    const sweepLine = new SweepLine(queue);\n    let evt = null;\n    if (queue.size != 0) {\n      evt = queue.first();\n      queue.delete(evt);\n    }\n    while (evt) {\n      const newEvents = sweepLine.process(evt);\n      for (let i = 0, iMax = newEvents.length; i < iMax; i++) {\n        const evt2 = newEvents[i];\n        if (evt2.consumedBy === void 0) queue.add(evt2);\n      }\n      if (queue.size != 0) {\n        evt = queue.first();\n        queue.delete(evt);\n      } else {\n        evt = null;\n      }\n    }\n    precision.reset();\n    const ringsOut = RingOut.factory(sweepLine.segments);\n    const result = new MultiPolyOut(ringsOut);\n    return result.getGeom();\n  }\n};\nvar operation = new Operation();\nvar operation_default = operation;\n\n// src/segment.ts\nvar segmentId = 0;\nvar Segment = class _Segment {\n  id;\n  leftSE;\n  rightSE;\n  rings;\n  windings;\n  ringOut;\n  consumedBy;\n  prev;\n  _prevInResult;\n  _beforeState;\n  _afterState;\n  _isInResult;\n  /* This compare() function is for ordering segments in the sweep\n   * line tree, and does so according to the following criteria:\n   *\n   * Consider the vertical line that lies an infinestimal step to the\n   * right of the right-more of the two left endpoints of the input\n   * segments. Imagine slowly moving a point up from negative infinity\n   * in the increasing y direction. Which of the two segments will that\n   * point intersect first? That segment comes 'before' the other one.\n   *\n   * If neither segment would be intersected by such a line, (if one\n   * or more of the segments are vertical) then the line to be considered\n   * is directly on the right-more of the two left inputs.\n   */\n  static compare(a, b) {\n    const alx = a.leftSE.point.x;\n    const blx = b.leftSE.point.x;\n    const arx = a.rightSE.point.x;\n    const brx = b.rightSE.point.x;\n    if (brx.isLessThan(alx)) return 1;\n    if (arx.isLessThan(blx)) return -1;\n    const aly = a.leftSE.point.y;\n    const bly = b.leftSE.point.y;\n    const ary = a.rightSE.point.y;\n    const bry = b.rightSE.point.y;\n    if (alx.isLessThan(blx)) {\n      if (bly.isLessThan(aly) && bly.isLessThan(ary)) return 1;\n      if (bly.isGreaterThan(aly) && bly.isGreaterThan(ary)) return -1;\n      const aCmpBLeft = a.comparePoint(b.leftSE.point);\n      if (aCmpBLeft < 0) return 1;\n      if (aCmpBLeft > 0) return -1;\n      const bCmpARight = b.comparePoint(a.rightSE.point);\n      if (bCmpARight !== 0) return bCmpARight;\n      return -1;\n    }\n    if (alx.isGreaterThan(blx)) {\n      if (aly.isLessThan(bly) && aly.isLessThan(bry)) return -1;\n      if (aly.isGreaterThan(bly) && aly.isGreaterThan(bry)) return 1;\n      const bCmpALeft = b.comparePoint(a.leftSE.point);\n      if (bCmpALeft !== 0) return bCmpALeft;\n      const aCmpBRight = a.comparePoint(b.rightSE.point);\n      if (aCmpBRight < 0) return 1;\n      if (aCmpBRight > 0) return -1;\n      return 1;\n    }\n    if (aly.isLessThan(bly)) return -1;\n    if (aly.isGreaterThan(bly)) return 1;\n    if (arx.isLessThan(brx)) {\n      const bCmpARight = b.comparePoint(a.rightSE.point);\n      if (bCmpARight !== 0) return bCmpARight;\n    }\n    if (arx.isGreaterThan(brx)) {\n      const aCmpBRight = a.comparePoint(b.rightSE.point);\n      if (aCmpBRight < 0) return 1;\n      if (aCmpBRight > 0) return -1;\n    }\n    if (!arx.eq(brx)) {\n      const ay = ary.minus(aly);\n      const ax = arx.minus(alx);\n      const by = bry.minus(bly);\n      const bx = brx.minus(blx);\n      if (ay.isGreaterThan(ax) && by.isLessThan(bx)) return 1;\n      if (ay.isLessThan(ax) && by.isGreaterThan(bx)) return -1;\n    }\n    if (arx.isGreaterThan(brx)) return 1;\n    if (arx.isLessThan(brx)) return -1;\n    if (ary.isLessThan(bry)) return -1;\n    if (ary.isGreaterThan(bry)) return 1;\n    if (a.id < b.id) return -1;\n    if (a.id > b.id) return 1;\n    return 0;\n  }\n  /* Warning: a reference to ringWindings input will be stored,\n   *  and possibly will be later modified */\n  constructor(leftSE, rightSE, rings, windings) {\n    this.id = ++segmentId;\n    this.leftSE = leftSE;\n    leftSE.segment = this;\n    leftSE.otherSE = rightSE;\n    this.rightSE = rightSE;\n    rightSE.segment = this;\n    rightSE.otherSE = leftSE;\n    this.rings = rings;\n    this.windings = windings;\n  }\n  static fromRing(pt1, pt2, ring) {\n    let leftPt, rightPt, winding;\n    const cmpPts = SweepEvent.comparePoints(pt1, pt2);\n    if (cmpPts < 0) {\n      leftPt = pt1;\n      rightPt = pt2;\n      winding = 1;\n    } else if (cmpPts > 0) {\n      leftPt = pt2;\n      rightPt = pt1;\n      winding = -1;\n    } else\n      throw new Error(\n        `Tried to create degenerate segment at [${pt1.x}, ${pt1.y}]`\n      );\n    const leftSE = new SweepEvent(leftPt, true);\n    const rightSE = new SweepEvent(rightPt, false);\n    return new _Segment(leftSE, rightSE, [ring], [winding]);\n  }\n  /* When a segment is split, the rightSE is replaced with a new sweep event */\n  replaceRightSE(newRightSE) {\n    this.rightSE = newRightSE;\n    this.rightSE.segment = this;\n    this.rightSE.otherSE = this.leftSE;\n    this.leftSE.otherSE = this.rightSE;\n  }\n  bbox() {\n    const y1 = this.leftSE.point.y;\n    const y2 = this.rightSE.point.y;\n    return {\n      ll: { x: this.leftSE.point.x, y: y1.isLessThan(y2) ? y1 : y2 },\n      ur: { x: this.rightSE.point.x, y: y1.isGreaterThan(y2) ? y1 : y2 }\n    };\n  }\n  /* A vector from the left point to the right */\n  vector() {\n    return {\n      x: this.rightSE.point.x.minus(this.leftSE.point.x),\n      y: this.rightSE.point.y.minus(this.leftSE.point.y)\n    };\n  }\n  isAnEndpoint(pt) {\n    return pt.x.eq(this.leftSE.point.x) && pt.y.eq(this.leftSE.point.y) || pt.x.eq(this.rightSE.point.x) && pt.y.eq(this.rightSE.point.y);\n  }\n  /* Compare this segment with a point.\n   *\n   * A point P is considered to be colinear to a segment if there\n   * exists a distance D such that if we travel along the segment\n   * from one * endpoint towards the other a distance D, we find\n   * ourselves at point P.\n   *\n   * Return value indicates:\n   *\n   *   1: point lies above the segment (to the left of vertical)\n   *   0: point is colinear to segment\n   *  -1: point lies below the segment (to the right of vertical)\n   */\n  comparePoint(point) {\n    return precision.orient(this.leftSE.point, point, this.rightSE.point);\n  }\n  /**\n   * Given another segment, returns the first non-trivial intersection\n   * between the two segments (in terms of sweep line ordering), if it exists.\n   *\n   * A 'non-trivial' intersection is one that will cause one or both of the\n   * segments to be split(). As such, 'trivial' vs. 'non-trivial' intersection:\n   *\n   *   * endpoint of segA with endpoint of segB --> trivial\n   *   * endpoint of segA with point along segB --> non-trivial\n   *   * endpoint of segB with point along segA --> non-trivial\n   *   * point along segA with point along segB --> non-trivial\n   *\n   * If no non-trivial intersection exists, return null\n   * Else, return null.\n   */\n  getIntersection(other) {\n    const tBbox = this.bbox();\n    const oBbox = other.bbox();\n    const bboxOverlap = getBboxOverlap(tBbox, oBbox);\n    if (bboxOverlap === null) return null;\n    const tlp = this.leftSE.point;\n    const trp = this.rightSE.point;\n    const olp = other.leftSE.point;\n    const orp = other.rightSE.point;\n    const touchesOtherLSE = isInBbox(tBbox, olp) && this.comparePoint(olp) === 0;\n    const touchesThisLSE = isInBbox(oBbox, tlp) && other.comparePoint(tlp) === 0;\n    const touchesOtherRSE = isInBbox(tBbox, orp) && this.comparePoint(orp) === 0;\n    const touchesThisRSE = isInBbox(oBbox, trp) && other.comparePoint(trp) === 0;\n    if (touchesThisLSE && touchesOtherLSE) {\n      if (touchesThisRSE && !touchesOtherRSE) return trp;\n      if (!touchesThisRSE && touchesOtherRSE) return orp;\n      return null;\n    }\n    if (touchesThisLSE) {\n      if (touchesOtherRSE) {\n        if (tlp.x.eq(orp.x) && tlp.y.eq(orp.y)) return null;\n      }\n      return tlp;\n    }\n    if (touchesOtherLSE) {\n      if (touchesThisRSE) {\n        if (trp.x.eq(olp.x) && trp.y.eq(olp.y)) return null;\n      }\n      return olp;\n    }\n    if (touchesThisRSE && touchesOtherRSE) return null;\n    if (touchesThisRSE) return trp;\n    if (touchesOtherRSE) return orp;\n    const pt = intersection(tlp, this.vector(), olp, other.vector());\n    if (pt === null) return null;\n    if (!isInBbox(bboxOverlap, pt)) return null;\n    return precision.snap(pt);\n  }\n  /**\n   * Split the given segment into multiple segments on the given points.\n   *  * Each existing segment will retain its leftSE and a new rightSE will be\n   *    generated for it.\n   *  * A new segment will be generated which will adopt the original segment's\n   *    rightSE, and a new leftSE will be generated for it.\n   *  * If there are more than two points given to split on, new segments\n   *    in the middle will be generated with new leftSE and rightSE's.\n   *  * An array of the newly generated SweepEvents will be returned.\n   *\n   * Warning: input array of points is modified\n   */\n  split(point) {\n    const newEvents = [];\n    const alreadyLinked = point.events !== void 0;\n    const newLeftSE = new SweepEvent(point, true);\n    const newRightSE = new SweepEvent(point, false);\n    const oldRightSE = this.rightSE;\n    this.replaceRightSE(newRightSE);\n    newEvents.push(newRightSE);\n    newEvents.push(newLeftSE);\n    const newSeg = new _Segment(\n      newLeftSE,\n      oldRightSE,\n      this.rings.slice(),\n      this.windings.slice()\n    );\n    if (SweepEvent.comparePoints(newSeg.leftSE.point, newSeg.rightSE.point) > 0) {\n      newSeg.swapEvents();\n    }\n    if (SweepEvent.comparePoints(this.leftSE.point, this.rightSE.point) > 0) {\n      this.swapEvents();\n    }\n    if (alreadyLinked) {\n      newLeftSE.checkForConsuming();\n      newRightSE.checkForConsuming();\n    }\n    return newEvents;\n  }\n  /* Swap which event is left and right */\n  swapEvents() {\n    const tmpEvt = this.rightSE;\n    this.rightSE = this.leftSE;\n    this.leftSE = tmpEvt;\n    this.leftSE.isLeft = true;\n    this.rightSE.isLeft = false;\n    for (let i = 0, iMax = this.windings.length; i < iMax; i++) {\n      this.windings[i] *= -1;\n    }\n  }\n  /* Consume another segment. We take their rings under our wing\n   * and mark them as consumed. Use for perfectly overlapping segments */\n  consume(other) {\n    let consumer = this;\n    let consumee = other;\n    while (consumer.consumedBy) consumer = consumer.consumedBy;\n    while (consumee.consumedBy) consumee = consumee.consumedBy;\n    const cmp = _Segment.compare(consumer, consumee);\n    if (cmp === 0) return;\n    if (cmp > 0) {\n      const tmp = consumer;\n      consumer = consumee;\n      consumee = tmp;\n    }\n    if (consumer.prev === consumee) {\n      const tmp = consumer;\n      consumer = consumee;\n      consumee = tmp;\n    }\n    for (let i = 0, iMax = consumee.rings.length; i < iMax; i++) {\n      const ring = consumee.rings[i];\n      const winding = consumee.windings[i];\n      const index = consumer.rings.indexOf(ring);\n      if (index === -1) {\n        consumer.rings.push(ring);\n        consumer.windings.push(winding);\n      } else consumer.windings[index] += winding;\n    }\n    consumee.rings = null;\n    consumee.windings = null;\n    consumee.consumedBy = consumer;\n    consumee.leftSE.consumedBy = consumer.leftSE;\n    consumee.rightSE.consumedBy = consumer.rightSE;\n  }\n  /* The first segment previous segment chain that is in the result */\n  prevInResult() {\n    if (this._prevInResult !== void 0) return this._prevInResult;\n    if (!this.prev) this._prevInResult = null;\n    else if (this.prev.isInResult()) this._prevInResult = this.prev;\n    else this._prevInResult = this.prev.prevInResult();\n    return this._prevInResult;\n  }\n  beforeState() {\n    if (this._beforeState !== void 0) return this._beforeState;\n    if (!this.prev)\n      this._beforeState = {\n        rings: [],\n        windings: [],\n        multiPolys: []\n      };\n    else {\n      const seg = this.prev.consumedBy || this.prev;\n      this._beforeState = seg.afterState();\n    }\n    return this._beforeState;\n  }\n  afterState() {\n    if (this._afterState !== void 0) return this._afterState;\n    const beforeState = this.beforeState();\n    this._afterState = {\n      rings: beforeState.rings.slice(0),\n      windings: beforeState.windings.slice(0),\n      multiPolys: []\n    };\n    const ringsAfter = this._afterState.rings;\n    const windingsAfter = this._afterState.windings;\n    const mpsAfter = this._afterState.multiPolys;\n    for (let i = 0, iMax = this.rings.length; i < iMax; i++) {\n      const ring = this.rings[i];\n      const winding = this.windings[i];\n      const index = ringsAfter.indexOf(ring);\n      if (index === -1) {\n        ringsAfter.push(ring);\n        windingsAfter.push(winding);\n      } else windingsAfter[index] += winding;\n    }\n    const polysAfter = [];\n    const polysExclude = [];\n    for (let i = 0, iMax = ringsAfter.length; i < iMax; i++) {\n      if (windingsAfter[i] === 0) continue;\n      const ring = ringsAfter[i];\n      const poly = ring.poly;\n      if (polysExclude.indexOf(poly) !== -1) continue;\n      if (ring.isExterior) polysAfter.push(poly);\n      else {\n        if (polysExclude.indexOf(poly) === -1) polysExclude.push(poly);\n        const index = polysAfter.indexOf(ring.poly);\n        if (index !== -1) polysAfter.splice(index, 1);\n      }\n    }\n    for (let i = 0, iMax = polysAfter.length; i < iMax; i++) {\n      const mp = polysAfter[i].multiPoly;\n      if (mpsAfter.indexOf(mp) === -1) mpsAfter.push(mp);\n    }\n    return this._afterState;\n  }\n  /* Is this segment part of the final result? */\n  isInResult() {\n    if (this.consumedBy) return false;\n    if (this._isInResult !== void 0) return this._isInResult;\n    const mpsBefore = this.beforeState().multiPolys;\n    const mpsAfter = this.afterState().multiPolys;\n    switch (operation_default.type) {\n      case \"union\": {\n        const noBefores = mpsBefore.length === 0;\n        const noAfters = mpsAfter.length === 0;\n        this._isInResult = noBefores !== noAfters;\n        break;\n      }\n      case \"intersection\": {\n        let least;\n        let most;\n        if (mpsBefore.length < mpsAfter.length) {\n          least = mpsBefore.length;\n          most = mpsAfter.length;\n        } else {\n          least = mpsAfter.length;\n          most = mpsBefore.length;\n        }\n        this._isInResult = most === operation_default.numMultiPolys && least < most;\n        break;\n      }\n      case \"xor\": {\n        const diff = Math.abs(mpsBefore.length - mpsAfter.length);\n        this._isInResult = diff % 2 === 1;\n        break;\n      }\n      case \"difference\": {\n        const isJustSubject = (mps) => mps.length === 1 && mps[0].isSubject;\n        this._isInResult = isJustSubject(mpsBefore) !== isJustSubject(mpsAfter);\n        break;\n      }\n    }\n    return this._isInResult;\n  }\n};\n\n// src/geom-in.ts\nvar RingIn = class {\n  poly;\n  isExterior;\n  segments;\n  bbox;\n  constructor(geomRing, poly, isExterior) {\n    if (!Array.isArray(geomRing) || geomRing.length === 0) {\n      throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n    }\n    this.poly = poly;\n    this.isExterior = isExterior;\n    this.segments = [];\n    if (typeof geomRing[0][0] !== \"number\" || typeof geomRing[0][1] !== \"number\") {\n      throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n    }\n    const firstPoint = precision.snap({ x: new BigNumber2(geomRing[0][0]), y: new BigNumber2(geomRing[0][1]) });\n    this.bbox = {\n      ll: { x: firstPoint.x, y: firstPoint.y },\n      ur: { x: firstPoint.x, y: firstPoint.y }\n    };\n    let prevPoint = firstPoint;\n    for (let i = 1, iMax = geomRing.length; i < iMax; i++) {\n      if (typeof geomRing[i][0] !== \"number\" || typeof geomRing[i][1] !== \"number\") {\n        throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n      }\n      const point = precision.snap({ x: new BigNumber2(geomRing[i][0]), y: new BigNumber2(geomRing[i][1]) });\n      if (point.x.eq(prevPoint.x) && point.y.eq(prevPoint.y)) continue;\n      this.segments.push(Segment.fromRing(prevPoint, point, this));\n      if (point.x.isLessThan(this.bbox.ll.x)) this.bbox.ll.x = point.x;\n      if (point.y.isLessThan(this.bbox.ll.y)) this.bbox.ll.y = point.y;\n      if (point.x.isGreaterThan(this.bbox.ur.x)) this.bbox.ur.x = point.x;\n      if (point.y.isGreaterThan(this.bbox.ur.y)) this.bbox.ur.y = point.y;\n      prevPoint = point;\n    }\n    if (!firstPoint.x.eq(prevPoint.x) || !firstPoint.y.eq(prevPoint.y)) {\n      this.segments.push(Segment.fromRing(prevPoint, firstPoint, this));\n    }\n  }\n  getSweepEvents() {\n    const sweepEvents = [];\n    for (let i = 0, iMax = this.segments.length; i < iMax; i++) {\n      const segment = this.segments[i];\n      sweepEvents.push(segment.leftSE);\n      sweepEvents.push(segment.rightSE);\n    }\n    return sweepEvents;\n  }\n};\nvar PolyIn = class {\n  multiPoly;\n  exteriorRing;\n  interiorRings;\n  bbox;\n  constructor(geomPoly, multiPoly) {\n    if (!Array.isArray(geomPoly)) {\n      throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n    }\n    this.exteriorRing = new RingIn(geomPoly[0], this, true);\n    this.bbox = {\n      ll: { x: this.exteriorRing.bbox.ll.x, y: this.exteriorRing.bbox.ll.y },\n      ur: { x: this.exteriorRing.bbox.ur.x, y: this.exteriorRing.bbox.ur.y }\n    };\n    this.interiorRings = [];\n    for (let i = 1, iMax = geomPoly.length; i < iMax; i++) {\n      const ring = new RingIn(geomPoly[i], this, false);\n      if (ring.bbox.ll.x.isLessThan(this.bbox.ll.x)) this.bbox.ll.x = ring.bbox.ll.x;\n      if (ring.bbox.ll.y.isLessThan(this.bbox.ll.y)) this.bbox.ll.y = ring.bbox.ll.y;\n      if (ring.bbox.ur.x.isGreaterThan(this.bbox.ur.x)) this.bbox.ur.x = ring.bbox.ur.x;\n      if (ring.bbox.ur.y.isGreaterThan(this.bbox.ur.y)) this.bbox.ur.y = ring.bbox.ur.y;\n      this.interiorRings.push(ring);\n    }\n    this.multiPoly = multiPoly;\n  }\n  getSweepEvents() {\n    const sweepEvents = this.exteriorRing.getSweepEvents();\n    for (let i = 0, iMax = this.interiorRings.length; i < iMax; i++) {\n      const ringSweepEvents = this.interiorRings[i].getSweepEvents();\n      for (let j = 0, jMax = ringSweepEvents.length; j < jMax; j++) {\n        sweepEvents.push(ringSweepEvents[j]);\n      }\n    }\n    return sweepEvents;\n  }\n};\nvar MultiPolyIn = class {\n  isSubject;\n  polys;\n  bbox;\n  constructor(geom, isSubject) {\n    if (!Array.isArray(geom)) {\n      throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n    }\n    try {\n      if (typeof geom[0][0][0] === \"number\") geom = [geom];\n    } catch (ex) {\n    }\n    this.polys = [];\n    this.bbox = {\n      ll: { x: new BigNumber2(Number.POSITIVE_INFINITY), y: new BigNumber2(Number.POSITIVE_INFINITY) },\n      ur: { x: new BigNumber2(Number.NEGATIVE_INFINITY), y: new BigNumber2(Number.NEGATIVE_INFINITY) }\n    };\n    for (let i = 0, iMax = geom.length; i < iMax; i++) {\n      const poly = new PolyIn(geom[i], this);\n      if (poly.bbox.ll.x.isLessThan(this.bbox.ll.x)) this.bbox.ll.x = poly.bbox.ll.x;\n      if (poly.bbox.ll.y.isLessThan(this.bbox.ll.y)) this.bbox.ll.y = poly.bbox.ll.y;\n      if (poly.bbox.ur.x.isGreaterThan(this.bbox.ur.x)) this.bbox.ur.x = poly.bbox.ur.x;\n      if (poly.bbox.ur.y.isGreaterThan(this.bbox.ur.y)) this.bbox.ur.y = poly.bbox.ur.y;\n      this.polys.push(poly);\n    }\n    this.isSubject = isSubject;\n  }\n  getSweepEvents() {\n    const sweepEvents = [];\n    for (let i = 0, iMax = this.polys.length; i < iMax; i++) {\n      const polySweepEvents = this.polys[i].getSweepEvents();\n      for (let j = 0, jMax = polySweepEvents.length; j < jMax; j++) {\n        sweepEvents.push(polySweepEvents[j]);\n      }\n    }\n    return sweepEvents;\n  }\n};\n\n// src/index.ts\nvar union = (geom, ...moreGeoms) => operation_default.run(\"union\", geom, moreGeoms);\nvar intersection2 = (geom, ...moreGeoms) => operation_default.run(\"intersection\", geom, moreGeoms);\nvar xor = (geom, ...moreGeoms) => operation_default.run(\"xor\", geom, moreGeoms);\nvar difference = (geom, ...moreGeoms) => operation_default.run(\"difference\", geom, moreGeoms);\nvar setPrecision = precision.set;\nexport {\n  difference,\n  intersection2 as intersection,\n  setPrecision,\n  union,\n  xor\n};\n//# sourceMappingURL=index.js.map","// index.ts\nfunction clone(geojson) {\n  if (!geojson) {\n    throw new Error(\"geojson is required\");\n  }\n  switch (geojson.type) {\n    case \"Feature\":\n      return cloneFeature(geojson);\n    case \"FeatureCollection\":\n      return cloneFeatureCollection(geojson);\n    case \"Point\":\n    case \"LineString\":\n    case \"Polygon\":\n    case \"MultiPoint\":\n    case \"MultiLineString\":\n    case \"MultiPolygon\":\n    case \"GeometryCollection\":\n      return cloneGeometry(geojson);\n    default:\n      throw new Error(\"unknown GeoJSON type\");\n  }\n}\nfunction cloneFeature(geojson) {\n  const cloned = { type: \"Feature\" };\n  Object.keys(geojson).forEach((key) => {\n    switch (key) {\n      case \"type\":\n      case \"properties\":\n      case \"geometry\":\n        return;\n      default:\n        cloned[key] = geojson[key];\n    }\n  });\n  cloned.properties = cloneProperties(geojson.properties);\n  if (geojson.geometry == null) {\n    cloned.geometry = null;\n  } else {\n    cloned.geometry = cloneGeometry(geojson.geometry);\n  }\n  return cloned;\n}\nfunction cloneProperties(properties) {\n  const cloned = {};\n  if (!properties) {\n    return cloned;\n  }\n  Object.keys(properties).forEach((key) => {\n    const value = properties[key];\n    if (typeof value === \"object\") {\n      if (value === null) {\n        cloned[key] = null;\n      } else if (Array.isArray(value)) {\n        cloned[key] = value.map((item) => {\n          return item;\n        });\n      } else {\n        cloned[key] = cloneProperties(value);\n      }\n    } else {\n      cloned[key] = value;\n    }\n  });\n  return cloned;\n}\nfunction cloneFeatureCollection(geojson) {\n  const cloned = { type: \"FeatureCollection\" };\n  Object.keys(geojson).forEach((key) => {\n    switch (key) {\n      case \"type\":\n      case \"features\":\n        return;\n      default:\n        cloned[key] = geojson[key];\n    }\n  });\n  cloned.features = geojson.features.map((feature) => {\n    return cloneFeature(feature);\n  });\n  return cloned;\n}\nfunction cloneGeometry(geometry) {\n  const geom = { type: geometry.type };\n  if (geometry.bbox) {\n    geom.bbox = geometry.bbox;\n  }\n  if (geometry.type === \"GeometryCollection\") {\n    geom.geometries = geometry.geometries.map((g) => {\n      return cloneGeometry(g);\n    });\n    return geom;\n  }\n  geom.coordinates = deepSlice(geometry.coordinates);\n  return geom;\n}\nfunction deepSlice(coords) {\n  const cloned = coords;\n  if (typeof cloned[0] !== \"object\") {\n    return cloned.slice();\n  }\n  return cloned.map((coord) => {\n    return deepSlice(coord);\n  });\n}\nvar index_default = clone;\nexport {\n  clone,\n  cloneProperties,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { polygon as createPolygon, multiPolygon } from \"@turf/helpers\";\nimport * as polyclip from \"polyclip-ts\";\nimport { clone } from \"@turf/clone\";\nfunction mask(polygon, mask2, options) {\n  var _a;\n  const mutate = (_a = options == null ? void 0 : options.mutate) != null ? _a : false;\n  let maskTemplate = mask2;\n  if (mask2 && mutate === false) {\n    maskTemplate = clone(mask2);\n  }\n  const maskPolygon = createMask(maskTemplate);\n  let polygonOuters = null;\n  if (polygon.type === \"FeatureCollection\") {\n    polygonOuters = unionFc(polygon);\n  } else if (polygon.type === \"Feature\") {\n    polygonOuters = createGeomFromPolygonClippingOutput(\n      polyclip.union(polygon.geometry.coordinates)\n    );\n  } else {\n    polygonOuters = createGeomFromPolygonClippingOutput(\n      polyclip.union(polygon.coordinates)\n    );\n  }\n  polygonOuters.geometry.coordinates.forEach(function(contour) {\n    maskPolygon.geometry.coordinates.push(contour[0]);\n  });\n  return maskPolygon;\n}\nfunction unionFc(fc) {\n  const unioned = fc.features.length === 2 ? polyclip.union(\n    fc.features[0].geometry.coordinates,\n    fc.features[1].geometry.coordinates\n  ) : polyclip.union.apply(\n    polyclip,\n    fc.features.map(function(f) {\n      return f.geometry.coordinates;\n    })\n  );\n  return createGeomFromPolygonClippingOutput(unioned);\n}\nfunction createGeomFromPolygonClippingOutput(unioned) {\n  return multiPolygon(unioned);\n}\nfunction createMask(mask2) {\n  const world = [\n    [\n      [180, 90],\n      [-180, 90],\n      [-180, -90],\n      [180, -90],\n      [180, 90]\n    ]\n  ];\n  let coordinates = world;\n  if (mask2) {\n    if (mask2.type === \"Feature\") {\n      coordinates = mask2.geometry.coordinates;\n    } else {\n      coordinates = mask2.coordinates;\n    }\n  }\n  return createPolygon(coordinates);\n}\nvar index_default = mask;\nexport {\n  index_default as default,\n  mask\n};\n//# sourceMappingURL=index.js.map","<template>\n  <div class=\"map-container\">\n    <div ref=\"map\" class=\"map\">\n      <!-- this will be filled by OpenLayers -->\n      <TextControl :text=\"help\" :map=\"map\" />\n      <UserLocationControl :map=\"map\" :maxZoom=\"maxZoom\" />\n      <LayerControl :map=\"map\" :maxZoom=\"maxZoom\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport MapMixin from './MapMixin.js';\nimport LayerControl from './LayerControl.vue';\nimport TextControl from './TextControl.vue';\nimport UserLocationControl from './UserLocationControl.vue';\nimport {shiftKeyOnly} from 'ol/events/condition.js';\nimport ExtentInteraction from 'ol/interaction/Extent';\nimport { containsXY } from 'ol/extent';\nimport { transformExtent } from 'ol/proj';\nimport Style, { createDefaultStyle } from 'ol/style/Style';\nimport VectorSource from 'ol/source/Vector';\nimport GeoJSON from 'ol/format/GeoJSON';\nimport Fill from 'ol/style/Fill';\nimport VectorLayer from 'ol/layer/Vector';\nimport { toGeoJSON } from 'stac-js/src/geo.js';\nimport mask from '@turf/mask';\n\nexport default {\n  name: 'MapSelect',\n  components: {\n    LayerControl,\n    TextControl,\n    UserLocationControl\n  },\n  mixins: [\n    MapMixin\n  ],\n  props: {\n    stac: {\n      type: Object,\n      default: null\n    },\n    value: {\n      type: Array,\n      default: null\n    }\n  },\n  emits: ['input'],\n  data() {\n    return {\n      crs: 'EPSG:4326',\n      extent: this.value,\n      dragging: false\n    };\n  },\n  computed: {\n    ...mapState(['uiLanguage']),\n    projectedExtent() {\n      if (this.extent) {\n        return transformExtent(this.extent, this.crs, this.map.getView().getProjection());\n      }\n      return null;\n    },\n    help() {\n      return this.extent ? this.$t('mapping.bboxSelect.remove') : this.$t('mapping.bboxSelect.add');\n    }\n  },\n  watch: {\n    async stac() {\n      await this.initMap();\n    },\n    uiLanguage() {\n      \n    },\n  },\n  async mounted() {\n    await this.initMap();\n  },\n  methods: {\n    async initMap() {\n      this.map = null;\n\n      await this.createMap(this.$refs.map, this.stac, true);\n\n      // Add extent interaction for bbox selection\n      const condition = (event) => {\n        if (event.type === 'singleclick') {\n          if (!this.extent) {\n            let pixelSize = this.map.getSize().map(xy => xy * 0.2);\n            let extent = this.map.getView().calculateExtent(pixelSize);\n            let size = [\n              extent[2] - extent[0],\n              extent[3] - extent[1]\n            ];\n            let mouseExtent = [\n              event.coordinate[0] - size[0],\n              event.coordinate[1] - size[1],\n              event.coordinate[0] + size[0],\n              event.coordinate[1] + size[1],\n            ];\n            this.interaction.setExtent(mouseExtent);\n            return false;\n          }\n          else if (containsXY(this.projectedExtent, ...event.coordinate)) {\n            this.interaction.setExtent(null);\n            this.interaction.vertexOverlay_.getSource().clear();\n            this.interaction.vertexFeature_ = null;\n          }\n        }\n        else if (this.interaction.handlingDownUpSequence || this.interaction.snapToVertex_(event.pixel, event.map)) {\n          return true;\n        }\n        return shiftKeyOnly(event);\n      };\n      this.interaction = new ExtentInteraction({\n        extent: this.projectedExtent,\n        condition,\n        boxStyle: createDefaultStyle()\n      });\n      this.interaction.on('extentchanged', this.update);\n      this.map.addInteraction(this.interaction);\n  \n      if (this.stac) {\n        this.addMask(this.stac);\n      }\n\n      let extent;\n      if (this.projectedExtent) {\n        extent = this.projectedExtent;\n      }\n      else if (this.stac) {\n        const bbox = this.stac.getBoundingBox();\n        if (bbox) {\n          extent = transformExtent(bbox, this.crs, this.map.getView().getProjection());\n        }\n      }\n      if (extent) {\n        this.map.getView().fit(extent, { padding: [50,50,50,50], maxZoom: this.maxZoom });\n      }\n    },\n    addMask(stac) {\n      // Darken areas outside of the available area\n      if (!stac || typeof stac.toGeoJSON !== 'function') {\n        return;\n      }\n\n      const geojson = stac.toGeoJSON();\n      if (!geojson) {\n        return;\n      }\n\n      // Create a mask for the available area\n      const world = toGeoJSON([-180, -90, 180, 90]);\n      const masked = mask(geojson, world);\n\n      // Parse the GeoJSON\n      const features = new GeoJSON().readFeatures(masked, {\n        featureProjection: this.map.getView().getProjection(),\n      });\n\n      /// Add the mask layer, make it half-transparent\n      const maskLayer = new VectorLayer({\n        source: new VectorSource({ features }),\n        style: new Style({\n          fill: new Fill({\n            color: 'rgba(0, 0, 0, 0.5)',\n          }),\n        }),\n      });\n      this.map.addLayer(maskLayer);\n    },\n    fixX(x) {\n      return (x + 180) % 360 - 180;\n    },\n    fixY(y) {\n      return Math.max(-90, Math.min(90, y));\n    },\n    update(event) {\n      if (event.extent) {\n        this.extent = transformExtent(event.extent, this.map.getView().getProjection(), this.crs);\n        const extent = [\n          this.fixX(this.extent[0]),\n          this.fixY(this.extent[1]),\n          this.fixX(this.extent[2]),\n          this.fixY(this.extent[3])\n        ];\n        this.$emit('input', extent);\n      }\n      else {\n        this.extent = null;\n        this.$emit('input', null);\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import \"ol/ol.css\";\n</style>\n"],"names":["_sfc_main","ControlMixin","position","view","coords","fromLonLat","point","Point","error","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","$options","args","_ctx","_createVNode","_component_b_icon_pin_map_fill","ExtentEventType","ExtentEvent","Event","extent","Extent","PointerInteraction","options","always","VectorLayer","VectorSource","getDefaultExtentStyleFunction","getDefaultPointerStyleFunction","pixel","map","pixelCoordinate","sortByDistance","a","b","squaredDistanceToSegment","segments","getSegments","closestSegment","vertex","closestOnSegment","vertexPixel","coordinateDistance","pixel1","pixel2","squaredDist1","squaredCoordinateDistance","squaredDist2","dist","mapBrowserEvent","draggable","containsCoordinate","extentFeature","polygonFromExtent","Feature","createIfNotExists","vertexFeature","handled","MapBrowserEventType","getOpposingPoint","x_","y_","x","y","getPointHandler","getEdgeHandler","drag","getDragHandler","getArea","toUserExtent","style","createEditingStyle","feature","resolution","fixedPoint","boundingExtent","fixedP1","fixedP2","deltaX","deltaY","geom","properties","feat","polygon","coordinates","ring","j","multiPolygon","isNumeric","mathceil","mathfloor","bignumberError","tooManyDigits","BASE","LOG_BASE","MAX_SAFE_INTEGER","POWS_TEN","SQRT_BASE","MAX","clone","configObject","div","convertBase","parseNumeric","P","BigNumber","ONE","DECIMAL_PLACES","ROUNDING_MODE","TO_EXP_NEG","TO_EXP_POS","MIN_EXP","MAX_EXP","CRYPTO","MODULO_MODE","POW_PRECISION","FORMAT","ALPHABET","alphabetHasNormalDecimalDigits","v","alphabet","c","caseChanged","e","i","isNum","len","str","intCheck","round","obj","p","n","s","out","maxOrMin","pow2_53","random53bitInt","dp","k","rand","sum","decimal","toBaseOut","baseIn","baseOut","arr","arrL","sign","callerIsToString","d","r","xc","rm","toFixedPoint","coeffToString","multiply","base","m","temp","xlo","xhi","carry","klo","khi","compare","aL","bL","cmp","subtract","more","prod","prodL","q","qc","rem","remL","rem0","xi","xL","yc0","yL","yz","yc","bitFloor","format","id","c0","ne","toExponential","normalise","basePrefix","dotAfter","dotBefore","isInfinityOrNaN","whitespaceOrPlus","p1","p2","sd","ni","rd","pows10","valueOf","half","isModExp","nIsBig","nIsNeg","nIsOdd","isOdd","t","xLTy","xe","ye","xcL","ycL","ylo","yhi","zc","sqrtBase","rep","g1","g2","groupSeparator","intPart","fractionPart","isNeg","intDigits","md","d0","d1","d2","exp","n0","n1","z","l","min","max","name","zs","SplayTreeNode","key","SplayTreeSetNode","SplayTree","root","right","newTreeRight","left","newTreeLeft","current","comp","currentLeft","currentRight","node","nextLeft","nextRight","result","count","SplayTreeSet","_SplayTreeSet","isValidKey","element","elements","f","nodes","nodeRight","nodeLeft","retainSet","modificationCount","object","other","u","set","copyChildren","node2","dest","newLeft","newRight","SplayTreeSetEntryIterableIterator","SplayTreeKeyIterableIterator","SplayTreeIterableIterator","tree","next","constant_default","compare_default","eps","almostEqual","orient_default","almostCollinear","area2","ax","ay","cx","cy","identity_default","snap_default","xTree","yTree","snapCoord","coord","snap","eps2","precision","isInBbox","bbox","getBboxOverlap","b1","b2","lowerX","upperX","lowerY","upperY","crossProduct","dotProduct","length","sineOfAngle","pShared","pBase","pAngle","vBase","vAngle","cosineOfAngle","horizontalIntersection","pt","verticalIntersection","intersection","pt1","v1","pt2","v2","kross","ve","x1","x2","y1","y2","SweepEvent","_SweepEvent","ptCmp","Segment","aPt","bPt","isLeft","otherEvents","iMax","evt","numEvents","evt1","evt2","events","baseEvent","cache","fillCache","linkedEvent","nextEvent","asine","acosine","bsine","bcosine","RingOut","_RingOut","allSegments","ringsOut","segment","prevEvent","event","startingPoint","intersectionLEs","availableLEs","firstPt","lastPt","indexLE","jMax","intersectionLE","ringEvents","comparator","prevPt","points","nextPt2","nextPt","step","iStart","iEnd","orderedPoints","enclosing","leftMostEvt","prevSeg","prevPrevSeg","PolyOut","exteriorRing","geom0","ringGeom","MultiPolyOut","rings","polyGeom","polys","enclosingRing","SweepLine","queue","SplayTreeSet2","newEvents","nextSeg","prevMySplitter","prevInter","newEventsFromSplit","nextMySplitter","nextInter","mySplitter","inter","seg","rightSE","Operation","type","moreGeoms","operation","multipolys","MultiPolyIn","subject","mpA","SplayTreeSet3","sweepEvents","sweepLine","operation_default","segmentId","_Segment","alx","blx","arx","brx","aly","bly","ary","bry","aCmpBLeft","bCmpARight","bCmpALeft","aCmpBRight","by","bx","leftSE","windings","leftPt","rightPt","winding","cmpPts","newRightSE","tBbox","oBbox","bboxOverlap","tlp","trp","olp","orp","touchesOtherLSE","touchesThisLSE","touchesOtherRSE","touchesThisRSE","alreadyLinked","newLeftSE","oldRightSE","newSeg","tmpEvt","consumer","consumee","tmp","index","beforeState","ringsAfter","windingsAfter","mpsAfter","polysAfter","polysExclude","poly","mp","mpsBefore","noBefores","noAfters","least","most","diff","isJustSubject","mps","RingIn","geomRing","isExterior","firstPoint","BigNumber2","prevPoint","PolyIn","geomPoly","multiPoly","ringSweepEvents","isSubject","polySweepEvents","union","intersection2","xor","difference","setPrecision","geojson","cloneFeature","cloneFeatureCollection","cloneGeometry","cloned","cloneProperties","value","item","geometry","g","deepSlice","mask","mask2","_a","mutate","maskTemplate","maskPolygon","createMask","polygonOuters","unionFc","createGeomFromPolygonClippingOutput","polyclip.union","contour","fc","unioned","polyclip","createPolygon","index_default","LayerControl","TextControl","UserLocationControl","MapMixin","mapState","transformExtent","condition","containsXY","pixelSize","xy","size","mouseExtent","shiftKeyOnly","ExtentInteraction","createDefaultStyle","stac","world","toGeoJSON","masked","features","GeoJSON","maskLayer","Style","Fill","_hoisted_2","_component_TextControl","_component_UserLocationControl","_component_LayerControl"],"mappings":"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","x_google_ignoreList":[1,2,3,4,5,6,7]}