{"version":3,"file":"CardMixin-DMJ_B6k-.js","sources":["../../src/components/FileFormatsMixin.js","../../src/components/CardMixin.js"],"sourcesContent":["import Utils from '../utils';\nimport StacFieldsMixin from './StacFieldsMixin';\nimport { formatMediaType } from '@radiantearth/stac-fields/formatters';\n\nexport default {\n  mixins: [\n    StacFieldsMixin({ formatMediaType })\n  ],\n  computed: {\n    fileFormats() {\n      if (!this.data) {\n        return [];\n      }\n      let assets = [];\n      if ((this.data.isItem() || this.data.isCollection()) && Utils.isObject(this.data.assets)) {\n        assets = assets.concat(Object.values(this.data.assets));\n      }\n      if (this.data.isCollection() && Utils.isObject(this.data.item_assets)) {\n        assets = assets.concat(Object.values(this.data.item_assets));\n      }\n      \n      return assets\n        .filter(asset => Array.isArray(asset.roles) && asset.roles.includes('data') && typeof asset.type === 'string') // Look for data files\n        .map(asset => this.formatMediaType(asset.type, null, {shorten: true})) // Array shall only contain media types\n        .filter((v, i, a) => a.indexOf(v) === i) // Unique values\n        .sort((a, b) => a.localeCompare(b, undefined, { sensitivity: 'base' })); // Sort alphabetically\n    }\n  }\n};\n","import { mapState } from 'vuex';\nimport Utils from '../utils';\nimport { STAC } from 'stac-js';\n\nexport default {\n  props: {\n    showThumbnail: {\n      type: Boolean,\n      default: true\n    }\n  },\n  computed: {\n    ...mapState(['cardViewMode', 'crossOriginMedia', 'defaultThumbnailSize']),\n    isList() {\n      return this.data && !this.data.isItem() && this.cardViewMode === 'list';\n    },\n    hasImage() {\n      return this.showThumbnail && this.thumbnail;\n    },\n    thumbnail() {\n      if (this.data) {\n        let thumbnails = this.data.getThumbnails(true, 'thumbnail');\n        if (thumbnails.length > 0) {\n          let t = thumbnails[0];\n          let width, height;\n          const shape = t.getMetadata('proj:shape');\n          if (Array.isArray(shape) && shape.length === 2) {\n            [height, width] = shape;\n          }\n          else if (Array.isArray(this.defaultThumbnailSize) && this.defaultThumbnailSize.length === 2) {\n            [height, width] = this.defaultThumbnailSize;\n          }\n          return {\n            src: t.getAbsoluteUrl(),\n            alt: t.title,\n            crossorigin: this.crossOriginMedia,\n            width,\n            height,\n            placement: this.isList ? 'end' : 'top'\n          };\n        }\n      }\n      return null;\n    },\n    keywords() {\n      if (this.data) {\n        return this.data.getMetadata('keywords') || [];\n      }\n      return [];\n    },\n    isDeprecated() {\n      return this.data instanceof STAC && Boolean(this.data.getMetadata('deprecated'));\n    },\n    hasDescription() {\n      return this.data instanceof STAC && Utils.hasText(this.data.getMetadata('description'));\n    },\n    summarizeDescription() {\n      return this.hasDescription ? Utils.summarizeMd(this.data.getMetadata('description'), 300) : '';\n    }\n  }\n};\n"],"names":["FileFormatsMixin","StacFieldsMixin","formatMediaType","assets","Utils","asset","v","i","a","b","CardMixin","mapState","thumbnails","width","height","shape","STAC"],"mappings":"6IAIA,MAAAA,EAAe,CACb,OAAQ,CACNC,EAAgB,CAAA,gBAAEC,EAAAA,eAAe,CAAE,CACvC,EACE,SAAU,CACR,aAAc,CACZ,GAAI,CAAC,KAAK,KACR,MAAO,CAAA,EAET,IAAIC,EAAS,CAAA,EACb,OAAK,KAAK,KAAK,OAAM,GAAM,KAAK,KAAK,aAAY,IAAOC,EAAM,SAAS,KAAK,KAAK,MAAM,IACrFD,EAASA,EAAO,OAAO,OAAO,OAAO,KAAK,KAAK,MAAM,CAAC,GAEpD,KAAK,KAAK,gBAAkBC,EAAM,SAAS,KAAK,KAAK,WAAW,IAClED,EAASA,EAAO,OAAO,OAAO,OAAO,KAAK,KAAK,WAAW,CAAC,GAGtDA,EACJ,OAAOE,GAAS,MAAM,QAAQA,EAAM,KAAK,GAAKA,EAAM,MAAM,SAAS,MAAM,GAAK,OAAOA,EAAM,MAAS,QAAQ,EAC5G,IAAIA,GAAS,KAAK,gBAAgBA,EAAM,KAAM,KAAM,CAAC,QAAS,EAAI,CAAC,CAAC,EACpE,OAAO,CAACC,EAAGC,EAAGC,IAAMA,EAAE,QAAQF,CAAC,IAAMC,CAAC,EACtC,KAAK,CAACC,EAAGC,IAAMD,EAAE,cAAcC,EAAG,OAAW,CAAE,YAAa,MAAM,CAAE,CAAC,CAC1E,CACJ,CACA,ECxBAC,EAAe,CACb,MAAO,CACL,cAAe,CACb,KAAM,QACN,QAAS,EACf,CACA,EACE,SAAU,CACR,GAAGC,EAAS,CAAC,eAAgB,mBAAoB,sBAAsB,CAAC,EACxE,QAAS,CACP,OAAO,KAAK,MAAQ,CAAC,KAAK,KAAK,OAAM,GAAM,KAAK,eAAiB,MACnE,EACA,UAAW,CACT,OAAO,KAAK,eAAiB,KAAK,SACpC,EACA,WAAY,CACV,GAAI,KAAK,KAAM,CACb,IAAIC,EAAa,KAAK,KAAK,cAAc,GAAM,WAAW,EAC1D,GAAIA,EAAW,OAAS,EAAG,CACzB,IAAI,EAAIA,EAAW,CAAC,EAChBC,EAAOC,EACX,MAAMC,EAAQ,EAAE,YAAY,YAAY,EACxC,OAAI,MAAM,QAAQA,CAAK,GAAKA,EAAM,SAAW,EAC3C,CAACD,EAAQD,CAAK,EAAIE,EAEX,MAAM,QAAQ,KAAK,oBAAoB,GAAK,KAAK,qBAAqB,SAAW,IACxF,CAACD,EAAQD,CAAK,EAAI,KAAK,sBAElB,CACL,IAAK,EAAE,eAAc,EACrB,IAAK,EAAE,MACP,YAAa,KAAK,iBAClB,MAAAA,EACA,OAAAC,EACA,UAAW,KAAK,OAAS,MAAQ,KAC7C,CACQ,CACF,CACA,OAAO,IACT,EACA,UAAW,CACT,OAAI,KAAK,KACA,KAAK,KAAK,YAAY,UAAU,GAAK,CAAA,EAEvC,CAAA,CACT,EACA,cAAe,CACb,OAAO,KAAK,gBAAgBE,GAAQ,EAAQ,KAAK,KAAK,YAAY,YAAY,CAChF,EACA,gBAAiB,CACf,OAAO,KAAK,gBAAgBA,GAAQZ,EAAM,QAAQ,KAAK,KAAK,YAAY,aAAa,CAAC,CACxF,EACA,sBAAuB,CACrB,OAAO,KAAK,eAAiBA,EAAM,YAAY,KAAK,KAAK,YAAY,aAAa,EAAG,GAAG,EAAI,EAC9F,CACJ,CACA"}