{"version":3,"file":"FullscreenButton-C129tSaF.js","sources":["../../src/components/FullscreenButton.vue"],"sourcesContent":["<template>\n  <b-button\n    v-if=\"isSupported\" @click.prevent=\"toggleFullscreen\"\n    ref=\"button\" variant=\"dark\" class=\"fullscreen-button\" :title=\"title\"\n  >\n    <span v-show=\"isFullscreen\">{{ $t('fullscreen.exitLabel') }}</span>\n    <span v-show=\"!isFullscreen\">{{ $t('fullscreen.showLabel') }}</span>\n  </b-button>\n</template>\n\n<script>\nexport default {\n  name: 'FullscreenButton',\n  props: {\n    element: {\n      type: [Function, String, Object],\n      required: true\n    }\n  },\n  emits: ['changed'],\n  data() {\n    return {\n      isFullscreen: false,\n      doc: document,\n      node: null,\n      listener: this.onChange.bind(this)\n    };\n  },\n  computed: {\n    title() {\n      return this.isFullscreen ? this.$t('fullscreen.exit') : this.$t('fullscreen.show');\n    },\n    isSupported() {\n      return Boolean(this.node && this.doc.body.requestFullscreen && this.doc.fullscreenEnabled);\n    }\n  },\n  watch: {\n    element: {\n      immediate: true,\n      handler() {\n        this.update();\n      }\n    },\n    isFullscreen(active) {\n      if (active) {\n        this.doc.addEventListener('fullscreenchange', this.listener);\n      }\n      else {\n        this.doc.removeEventListener('fullscreenchange', this.listener);\n      }\n      this.node.classList.toggle('fullscreen', active);\n      this.$refs.button.$el.blur();\n      this.$emit('changed', active);\n    }\n  },\n  mounted() {\n    this.update();\n  },\n  beforeUnmount() {\n    this.forceClose();\n  },\n  methods: {\n    update() {\n      this.forceClose();\n      this.node = this.getElement();\n      if (this.node) {\n        this.doc = this.node.ownerDocument;\n      }\n    },\n    forceClose() {\n      if (this.isFullscreen) {\n        this.doc.exitFullscreen();\n      }\n    },\n    getElement() {\n      if (typeof this.element === 'string') {\n        return document.querySelector(this.element);\n      }\n      else if (typeof this.element === 'function') {\n        return this.element();\n      }\n      else {\n        return this.element;\n      }\n    },\n    onChange() {\n      if (this.isFullscreen && !this.doc.fullscreenElement) {\n        this.isFullscreen = false;\n      }\n    },\n    toggleFullscreen() {\n      if (!this.isSupported) {\n        return;\n      }\n      if (this.isFullscreen) {\n        this.doc.exitFullscreen()\n          .then(() => this.isFullscreen = false);\n      } else {\n        this.node.requestFullscreen()\n          .then(() => this.isFullscreen = true);\n      }\n    },\n  }\n};\n</script>\n\n<style lang=\"scss\">\n#stac-browser {\n  .fullscreen {\n    background-color: white;\n    overflow: auto;\n  }\n}\n</style>\n"],"names":["_sfc_main","active","$options","_createBlock","_component_b_button","_withDirectives","_createElementVNode","_ctx","$data"],"mappings":"oNAWA,MAAKA,EAAU,CACb,KAAM,mBACN,MAAO,CACL,QAAS,CACP,KAAM,CAAC,SAAU,OAAQ,MAAM,EAC/B,SAAU,EACZ,GAEF,MAAO,CAAC,SAAS,EACjB,MAAO,CACL,MAAO,CACL,aAAc,GACd,IAAK,SACL,KAAM,KACN,SAAU,KAAK,SAAS,KAAK,IAAI,EAErC,EACA,SAAU,CACR,OAAQ,CACN,OAAO,KAAK,aAAe,KAAK,GAAG,iBAAiB,EAAI,KAAK,GAAG,iBAAiB,CACnF,EACA,aAAc,CACZ,MAAO,GAAQ,KAAK,MAAQ,KAAK,IAAI,KAAK,mBAAqB,KAAK,IAAI,kBAC1E,GAEF,MAAO,CACL,QAAS,CACP,UAAW,GACX,SAAU,CACR,KAAK,OAAM,CACb,GAEF,aAAaC,EAAQ,CACfA,EACF,KAAK,IAAI,iBAAiB,mBAAoB,KAAK,QAAQ,EAG3D,KAAK,IAAI,oBAAoB,mBAAoB,KAAK,QAAQ,EAEhE,KAAK,KAAK,UAAU,OAAO,aAAcA,CAAM,EAC/C,KAAK,MAAM,OAAO,IAAI,KAAI,EAC1B,KAAK,MAAM,UAAWA,CAAM,CAC9B,GAEF,SAAU,CACR,KAAK,OAAM,CACb,EACA,eAAgB,CACd,KAAK,WAAU,CACjB,EACA,QAAS,CACP,QAAS,CACP,KAAK,WAAU,EACf,KAAK,KAAO,KAAK,WAAU,EACvB,KAAK,OACP,KAAK,IAAM,KAAK,KAAK,cAEzB,EACA,YAAa,CACP,KAAK,cACP,KAAK,IAAI,eAAc,CAE3B,EACA,YAAa,CACX,OAAI,OAAO,KAAK,SAAY,SACnB,SAAS,cAAc,KAAK,OAAO,EAEnC,OAAO,KAAK,SAAY,WACxB,KAAK,QAAO,EAGZ,KAAK,OAEhB,EACA,UAAW,CACL,KAAK,cAAgB,CAAC,KAAK,IAAI,oBACjC,KAAK,aAAe,GAExB,EACA,kBAAmB,CACZ,KAAK,cAGN,KAAK,aACP,KAAK,IAAI,eAAc,EACpB,KAAK,IAAM,KAAK,aAAe,EAAK,EAEvC,KAAK,KAAK,kBAAiB,EACxB,KAAK,IAAM,KAAK,aAAe,EAAI,EAE1C,CACF,CACF,2CArGUC,EAAA,iBADRC,EAMWC,EAAA,OALW,UAAeF,EAAA,iBAAgB,CAAA,SAAA,CAAA,EACnD,IAAI,SAAS,QAAQ,OAAO,MAAM,oBAAqB,MAAOA,EAAA,kBAE9D,IAAmE,CAAnEG,EAAAC,EAAmE,cAApCC,EAAA,GAAE,sBAAA,CAAA,EAAA,GAAA,EAAA,IAAnBC,EAAA,YAAY,qBAC1BH,EAAAC,EAAoE,cAApCC,EAAA,GAAE,sBAAA,CAAA,EAAA,GAAA,EAAA,KAAnBC,EAAA,YAAY"}