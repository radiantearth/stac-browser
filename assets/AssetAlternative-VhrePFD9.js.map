{"version":3,"mappings":";qgBAqBA,MAAKA,EAAU,CACb,KAAM,mBACN,WAAY,CACV,YAAAC,EACA,YAAAC,EACA,eAAgBC,EAAqB,IAAIC,EAAA,IAAE,OAAO,8BAAsB,wEAAC,GAE3E,OAAQ,CACNC,EAAgB,iBAAEC,kBAAiB,GAErC,MAAO,CACL,MAAO,CACL,KAAM,OACN,SAAU,IAEZ,gBAAiB,CACf,KAAM,QACN,QAAS,IAEX,MAAO,CACL,KAAM,QACN,QAAS,EACX,GAEF,MAAO,CAAC,MAAM,EACd,MAAO,CACL,MAAO,CACL,OAAQ,CAEN,OACA,QACA,cACA,OACA,QAEA,YACA,gBAEA,wBACA,qBACA,yBAEA,YACA,eAEA,YACA,gBACF,EAEJ,EACA,SAAU,CACR,SAAU,CACR,OAAO,KAAK,MAAM,WAAU,CAC9B,EACA,eAAgB,CACd,GAAI,MAAM,QAAQ,KAAK,MAAM,cAAc,CAAC,EAAG,CAC7C,MAAMC,EAAQ,IAAIC,EAAM,KAAK,KAAK,EAClC,OAAAD,EAAM,iBAAiB,EAAI,KAAK,eAAe,KAAK,KAAK,EAClDA,CACT,CACA,OAAO,KAAK,KACd,EACA,kBAAmB,CACjB,OAAI,KAAK,sBAAwB,CAAC,KAAK,uBAC9B,SAGA,QAEX,EACA,YAAa,CACX,OAAI,OAAO,KAAK,MAAM,MAAS,UAAY,KAAK,MAAM,KAAK,OAAS,EAC3D,KAAK,gBAAgB,KAAK,MAAM,IAAI,EAEtC,IACT,EACA,MAAO,CACL,OAAOE,EAAU,YAAY,KAAK,KAAK,CACzC,GAEF,QAAS,CACP,eAAeC,EAAK,CAClB,GAAIA,aAAeC,EAAe,CAChC,MAAMC,EAAOF,EAAI,YAAY,cAAc,EACrCG,EAAUH,EAAI,YAAY,iBAAiB,EACjD,GAAII,EAAM,KAAKF,CAAI,EAAI,GAAKE,EAAM,KAAKD,CAAO,EAAI,EAChD,OAAOD,EACJ,IAAIG,GAAOF,EAAQE,CAAG,CAAC,EACvB,OAAOA,GAAOD,EAAM,SAASC,CAAG,CAAC,CAExC,CACA,MAAO,EACT,EACA,MAAO,CACL,KAAK,MAAM,OAAQ,GAAG,SAAS,CACjC,CACF,CACF,EArHOC,EAAA,OAAM,mBAAmB,2BAGvB,MAAM,kGAHb,OAAAC,EAAA,EAAAC,EAOM,MAPNF,EAOM,CANJG,EAAuC,MAAnC,MAAM,OAAO,UAAQC,EAAA,uCACzBC,EAA8EC,EAAA,CAAjE,WAAS,KAAMC,EAAA,MAAQ,MAAOA,EAAA,MAAQ,OAAMH,EAAA,KAAO,KAAMA,EAAA,gEAC9CG,EAAA,MAAM,aAA9BN,IAAAC,EAEM,MAFNM,EAEM,CADJH,EAAwDI,EAAA,CAA1C,YAAaF,EAAA,MAAM,YAAa,iEAEhDF,EAAqHK,EAAA,CAArG,MAAM,OAAQ,KAAMN,EAAA,cAAgB,QAASA,EAAA,QAAU,aAAcO,EAAA,OAAQ,MAAM,GAAG,KAAK","names":["_sfc_main","Description","HrefActions","defineAsyncComponent","__vitePreload","StacFieldsMixin","formatMediaType","asset","Asset","AuthUtils","obj","STACReference","refs","schemes","Utils","ref","_hoisted_1","_openBlock","_createElementBlock","_createElementVNode","$options","_createVNode","_component_HrefActions","$props","_hoisted_3","_component_Description","_component_MetadataGroups","$data"],"ignoreList":[],"sources":["../../src/components/AssetAlternative.vue"],"sourcesContent":["<template>\n  <div class=\"asset-alternative\">\n    <h4 class=\"mb-4\" v-html=\"fileFormat\" />\n    <HrefActions isAsset :data=\"asset\" :shown=\"shown\" @show=\"show\" :auth=\"auth\" />\n    <div class=\"mt-4\" v-if=\"asset.description\">\n      <Description :description=\"asset.description\" compact />\n    </div>\n    <MetadataGroups class=\"mt-4\" :data=\"resolvedAsset\" :context=\"context\" :ignoreFields=\"ignore\" title=\"\" type=\"Asset\" />\n  </div>\n</template>\n\n<script>\nimport { defineAsyncComponent } from 'vue';\nimport { formatMediaType } from '@radiantearth/stac-fields/formatters';\nimport Description from './Description.vue';\nimport HrefActions from './HrefActions.vue';\nimport StacFieldsMixin from './StacFieldsMixin';\nimport AuthUtils from './auth/utils';\nimport Utils from '../utils';\nimport { Asset, STACReference } from 'stac-js';\n\nexport default {\n  name: 'AssetAlternative',\n  components: {\n    Description,\n    HrefActions,\n    MetadataGroups: defineAsyncComponent(() => import('./MetadataGroups.vue'))\n  },\n  mixins: [\n    StacFieldsMixin({ formatMediaType })\n  ],\n  props: {\n    asset: {\n      type: Object,\n      required: true\n    },\n    hasAlternatives: {\n      type: Boolean,\n      default: false\n    },\n    shown: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['show'],\n  data() {\n    return {\n      ignore: [\n        // Asset fields that are handled directly\n        'href',\n        'title',\n        'description',\n        'type',\n        'roles',\n        // Don't show these complex lists of coordinates: https://github.com/radiantearth/stac-browser/issues/141\n        'proj:bbox',\n        'proj:geometry',\n        // Don't show very specific options that can't be rendered nicely\n        'table:storage_options',\n        'xarray:open_kwargs',\n        'xarray:storage_options',\n        // Special handling for auth and storage\n        'auth:refs',\n        'storage:refs',\n        // Alternative Assets are displayed separately\n        'alternate',\n        'alternate:name',\n      ]\n    };\n  },\n  computed: {\n    context() {\n      return this.asset.getContext();\n    },\n    resolvedAsset() {\n      if (Array.isArray(this.asset['storage:refs'])) {\n        const asset = new Asset(this.asset);\n        asset['storage:schemes'] = this.resolveStorage(this.asset);\n        return asset;\n      }\n      return this.asset;\n    },\n    tileRendererType() {\n      if (this.buildTileUrlTemplate && !this.useTileLayerAsFallback) {\n        return 'server';\n      }\n      else {\n        return 'client';\n      }\n    },\n    fileFormat() {\n      if (typeof this.asset.type === \"string\" && this.asset.type.length > 0) {\n        return this.formatMediaType(this.asset.type);\n      }\n      return null;\n    },\n    auth() {\n      return AuthUtils.resolveAuth(this.asset);\n    }\n  },\n  methods: {\n    resolveStorage(obj) {\n      if (obj instanceof STACReference) {\n        const refs = obj.getMetadata('storage:refs');\n        const schemes = obj.getMetadata('storage:schemes');\n        if (Utils.size(refs) > 0 && Utils.size(schemes) > 0) {\n          return refs\n            .map(ref => schemes[ref])\n            .filter(ref => Utils.isObject(ref));\n        }\n      }\n      return [];\n    },\n    show() {\n      this.$emit('show', ...arguments);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.asset-alternative {\n  padding: 1rem;\n}\n</style>\n"],"file":"AssetAlternative-VhrePFD9.js"}