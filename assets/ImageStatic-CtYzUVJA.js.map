{"version":3,"file":"ImageStatic-CtYzUVJA.js","sources":["../../node_modules/ol/source/ImageStatic.js"],"sourcesContent":["/**\n * @module ol/source/ImageStatic\n */\n\nimport ImageWrapper, {decode} from '../Image.js';\nimport EventType from '../events/EventType.js';\nimport {intersects} from '../extent.js';\nimport {get as getProjection} from '../proj.js';\nimport ImageSource, {defaultImageLoadFunction} from './Image.js';\nimport {createLoader} from './static.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {import(\"../extent.js\").Extent} imageExtent Extent of the image in map coordinates.\n * This is the [left, bottom, right, top] map coordinates of your image.\n * @property {import(\"../Image.js\").LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {boolean} [interpolate=true] Use interpolated values when resampling.  By default,\n * linear interpolation is used when resampling.  Set to false to use the nearest neighbor instead.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Projection. Default is the view projection.\n * @property {string} url Image URL.\n */\n\n/**\n * @classdesc\n * A layer source for displaying a single, static image.\n * @api\n */\nclass Static extends ImageSource {\n  /**\n   * @param {Options} options ImageStatic options.\n   */\n  constructor(options) {\n    const crossOrigin =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    const /** @type {import(\"../Image.js\").LoadFunction} */ imageLoadFunction =\n        options.imageLoadFunction !== undefined\n          ? options.imageLoadFunction\n          : defaultImageLoadFunction;\n\n    super({\n      attributions: options.attributions,\n      interpolate: options.interpolate,\n      projection: getProjection(options.projection),\n    });\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.url_ = options.url;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.imageExtent_ = options.imageExtent;\n\n    /**\n     * @private\n     * @type {import(\"../Image.js\").default}\n     */\n    this.image = null;\n\n    this.image = new ImageWrapper(\n      this.imageExtent_,\n      undefined,\n      1,\n      createLoader({\n        url: options.url,\n        imageExtent: options.imageExtent,\n        crossOrigin,\n        load: (image, src) => {\n          this.image.setImage(image);\n          imageLoadFunction(this.image, src);\n          return decode(image);\n        },\n      }),\n    );\n\n    this.image.addEventListener(\n      EventType.CHANGE,\n      this.handleImageChange.bind(this),\n    );\n  }\n\n  /**\n   * Returns the image extent\n   * @return {import(\"../extent.js\").Extent} image extent.\n   * @api\n   */\n  getImageExtent() {\n    return this.imageExtent_;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../Image.js\").default} Single image.\n   * @override\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n    if (intersects(extent, this.image.getExtent())) {\n      return this.image;\n    }\n    return null;\n  }\n\n  /**\n   * Return the URL used for this image source.\n   * @return {string} URL.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n}\n\nexport default Static;\n"],"names":["Static","ImageSource","options","crossOrigin","imageLoadFunction","defaultImageLoadFunction","getProjection","ImageWrapper","createLoader","image","src","decode","EventType","extent","resolution","pixelRatio","projection","intersects"],"mappings":"8lBA+BA,MAAMA,UAAeC,CAAY,CAI/B,YAAYC,EAAS,CACnB,MAAMC,EACJD,EAAQ,cAAgB,OAAYA,EAAQ,YAAc,KAEJE,EACpDF,EAAQ,oBAAsB,OAC1BA,EAAQ,kBACRG,EAER,MAAM,CACJ,aAAcH,EAAQ,aACtB,YAAaA,EAAQ,YACrB,WAAYI,EAAcJ,EAAQ,UAAU,CAClD,CAAK,EAMD,KAAK,KAAOA,EAAQ,IAMpB,KAAK,aAAeA,EAAQ,YAM5B,KAAK,MAAQ,KAEb,KAAK,MAAQ,IAAIK,EACf,KAAK,aACL,OACA,EACAC,EAAa,CACX,IAAKN,EAAQ,IACb,YAAaA,EAAQ,YACrB,YAAAC,EACA,KAAM,CAACM,EAAOC,KACZ,KAAK,MAAM,SAASD,CAAK,EACzBL,EAAkB,KAAK,MAAOM,CAAG,EAC1BC,EAAOF,CAAK,EAE7B,CAAO,CACP,EAEI,KAAK,MAAM,iBACTG,EAAU,OACV,KAAK,kBAAkB,KAAK,IAAI,CACtC,CACE,CAOA,gBAAiB,CACf,OAAO,KAAK,YACd,CAUA,iBAAiBC,EAAQC,EAAYC,EAAYC,EAAY,CAC3D,OAAIC,EAAWJ,EAAQ,KAAK,MAAM,UAAS,CAAE,EACpC,KAAK,MAEP,IACT,CAOA,QAAS,CACP,OAAO,KAAK,IACd,CACF","x_google_ignoreList":[0]}