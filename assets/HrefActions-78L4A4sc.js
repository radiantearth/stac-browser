const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AuthSchemeItem-D_T3Xmtt.js","assets/BListGroupItem.vue_vue_type_script_setup_true_lang-J0Ydbiva-D3CP9RWR.js","assets/index-B3F0456b.js","assets/utils-BXWzvTjY.js","assets/_commonjsHelpers-CE1G-McA.js","assets/I18N-DlIXJTel.js","assets/index-BchvTk2E.css","assets/BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-D6r902T2.js","assets/ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--5aly-L7g.js","assets/AuthSchemeItem-CinCcr9j.css","assets/bootstrap-vue-next-CiVe3kwl.js","assets/BOffcanvas.vue_vue_type_script_setup_true_lang-BbXmU_5z-Dk7fMMoe.js","assets/BAccordion.vue_vue_type_script_setup_true_lang-Ccx3zW5a-Cb3i65Yt.js","assets/BTabs.vue_vue_type_script_setup_true_lang-CU4B0ph2-DJDzjcBC.js","assets/BCollapse.vue_vue_type_script_setup_true_lang-BUisG8-R-DkzwlOSo.js","assets/BTable.vue_vue_type_script_setup_true_lang-D6ymr5i1-BACfGE7d.js","assets/debounce-BHqBzJ1a-B8IcW8Id.js","assets/BCard.vue_vue_type_script_setup_true_lang-9RhyvL8I-B_mmN9UZ.js","assets/BCardText.vue_vue_type_script_setup_true_lang-SRGbviaO-8WlQVb0j.js","assets/BDropdownText.vue_vue_type_script_setup_true_lang-Cm6QYE9x-DFV6AuEs.js","assets/BForm.vue_vue_type_script_setup_true_lang-u44ElAm9-DzcuGq7V.js","assets/BFormSelect.vue_vue_type_script_setup_true_lang-djrVhugk-C6-PzWAZ.js","assets/useStateClass-BGbSLWFN-eI-Q6wqs.js","assets/BFormGroup.vue_vue_type_script_setup_true_lang-RIWLdYTY-DgU5XdT8.js","assets/BFormCheckboxGroup.vue_vue_type_script_setup_true_lang-Dx_mpGFE-DqSxmQei.js","assets/BFormRadioGroup.vue_vue_type_script_setup_true_lang-DaMHx4U3-DO3czC2y.js","assets/BFormInput.vue_vue_type_script_setup_true_lang-DRDhfD8d-CDvZgueb.js","assets/BInputGroupText.vue_vue_type_script_setup_true_lang-BBN5F0A4-PKEtzWBW.js","assets/CopyButton-DMhEjQZI.js"])))=>i.map(i=>d[i]);
import{a4 as T,n as r,B as p,y as l,cB as u,bk as q,cV as j,br as A,bs as N,bt as v,bu as P,bl as x,p as a,q as d,_ as Q,L as y,cW as G,G as n,H as f,K as g,v as k,cX as W,aY as Y,I as b,ax as B,F as J,b6 as X}from"./index-B3F0456b.js";import{a as K}from"./BListGroupItem.vue_vue_type_script_setup_true_lang-J0Ydbiva-D3CP9RWR.js";import Z from"./Description-zh1_Dd5Z.js";import{U as i,f as tt,A as et,q as st,d as C,r as rt,v as ot}from"./utils-BXWzvTjY.js";const it={viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"};function nt(e,t){return r(),p("svg",it,[...t[0]||(t[0]=[l("g",{fill:"currentColor"},[l("path",{d:"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"}),l("path",{d:"M8 5.5a2.5 2.5 0 1 0 0 5a2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0a3.5 3.5 0 0 1-7 0"})],-1)])])}const at=T({name:"bi-eye",render:nt}),lt={viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"};function ut(e,t){return r(),p("svg",lt,[...t[0]||(t[0]=[l("g",{fill:"currentColor"},[l("path",{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"}),l("path",{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"})],-1)])])}const ct=T({name:"bi-download",render:ut}),ht={viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"};function dt(e,t){return r(),p("svg",ht,[...t[0]||(t[0]=[l("g",{fill:"currentColor","fill-rule":"evenodd"},[l("path",{d:"M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5"}),l("path",{d:"M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0z"})],-1)])])}const S=T({name:"bi-box-arrow-up-right",render:dt});class E{constructor(t,s){this.id=t,this.component=s}get btnOptions(){let t;return this.uri instanceof i?t=this.uri.toString():typeof this.uri=="string"&&(t=this.uri),t?{href:t,target:"_blank"}:{}}get onClick(){return()=>{}}get uri(){return null}get show(){return!1}get icon(){return S}get text(){return u.global.t("open")}}class w extends E{constructor(t,s,c){super(c,s),this.asset=t}}const pt=["application/3dtiles+json"];let mt=class extends w{get show(){return this.component.isBrowserProtocol&&pt.includes(this.asset.type)}get uri(){let t=new i("https://sandcastle.cesium.com/standalone.html");const c={html:`
        <style> @import url(../templates/bucket.css); </style>
        <div id="cesiumContainer" class="fullSize"></div> 
      `,code:`
        const viewer = new Cesium.Viewer("cesiumContainer", {
          terrain: Cesium.Terrain.fromWorldTerrain(),
        });

        try {
          const tileset = await Cesium.Cesium3DTileset.fromUrl('${this.component.href}');
          viewer.scene.primitives.add(tileset);
          viewer.zoomTo(tileset);
        } catch (error) {
          console.log('Error loading tileset');
        } 
      `.replaceAll("        ","")},m=btoa(JSON.stringify(c));return t.addQuery("code",m),t}get text(){return u.global.t("actions.openIn",{service:"Cesium Sandcastle"})}};class ft extends w{get show(){return this.component.isBrowserProtocol&&(this.asset.type==="application/vnd.laszip+copc"||i(this.asset.href).filename()=="ept.json")}get uri(){let t=new i("https://viewer.copc.io");return t.addQuery("copc",this.component.href),t}get text(){return u.global.t("actions.openIn",{service:"copc.io"})}}const gt=["model/gltf-binary","model/gltf+json","application/fbx"],wt=["obj","ply","fbx","glb","gltf"];class _t extends w{get show(){const t=i(this.asset.href).suffix();return this.component.isBrowserProtocol&&(gt.includes(this.asset.type)||wt.some(s=>t===s))}get uri(){let t=new i("https://f3d.app/viewer");return t.addQuery("model",this.component.href),t=t.toString().replace("?","#"),t}get text(){return u.global.t("actions.openIn",{service:"f3d.app"})}}const yt=["model/gltf-binary","model/gltf+json","application/fbx"],bt=["obj","ply","fbx","glb","gltf","stl","usdz"];class vt extends w{get show(){const t=i(this.asset.href).suffix();return this.component.isBrowserProtocol&&(yt.includes(this.asset.type)||bt.some(s=>t===s))}get uri(){let t=new i("https://threepipe.org/examples/tweakpane-editor");return t.addQuery("model",this.component.href),t}get text(){return u.global.t("actions.openIn",{service:"ThreePipe"})}}class Pt extends w{get show(){return this.component.isBrowserProtocol&&tt==this.asset.type}get uri(){const t=new i("https://geojson.io"),s=encodeURIComponent(this.component.href);return t.fragment(`data=data:text/x-url,${s}`),t}get text(){return u.global.t("actions.openIn",{service:"geojson.io"})}}const xt=["application/vnd.pmtiles"];let Ct=class extends w{get show(){return this.component.isBrowserProtocol&&(xt.includes(this.asset.type)||i(this.asset.href).suffix()=="pmtiles")}get uri(){let t=new i("https://pmtiles.io/");return t.addQuery("url",this.component.href),t}get text(){return u.global.t("actions.openIn",{service:"Protomaps"})}};const Tt={Cesium:mt,CopcViewer:ft,F3D:_t,ThreePipe:vt,GeoJsonIo:Pt,Protomaps:Ct};class D extends E{constructor(t,s,c){super(c,s),this.link=t}get btnOptions(){let t=super.btnOptions;return t.rel=this.link.rel,t}}class At extends D{get show(){return this.link.rel==="3d-tiles"}get uri(){let t=new i("https://sandcastle.cesium.com/standalone.html");const c={html:`
        <style> @import url(../templates/bucket.css); </style>
        <div id="cesiumContainer" class="fullSize"></div> 
      `,code:`
        const viewer = new Cesium.Viewer("cesiumContainer", {
          terrain: Cesium.Terrain.fromWorldTerrain(),
        });

        try {
          const tileset = await Cesium.Cesium3DTileset.fromUrl('${this.link.href}');
          viewer.scene.primitives.add(tileset);
          viewer.zoomTo(tileset);
        } catch (error) {
          console.log('Error loading tileset');
        } 
      `.replaceAll("        ","")},m=btoa(JSON.stringify(c));return t.addQuery("code",m),t}get text(){return u.global.t("actions.openIn",{service:"Cesium Sandcastle"})}}class kt extends D{get show(){return this.link.rel==="pmtiles"}get uri(){let t=new i("https://pmtiles.io/");return t.addQuery("url",this.link.href),t}get text(){return u.global.t("actions.openIn",{service:"Protomaps"})}}const Bt={Cesium:At,Protomaps:kt};let St=0;const Et={name:"HrefActions",components:{AuthSchemeItem:v(()=>P(()=>import("./AuthSchemeItem-D_T3Xmtt.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),BPopover:v(()=>P(()=>import("./bootstrap-vue-next-CiVe3kwl.js"),__vite__mapDeps([10,2,3,4,5,6,11,12,13,14,7,8,15,16,17,18,19,20,21,22,23,24,25,26,27,1])).then(e=>e.BPopover)),CopyButton:v(()=>P(()=>import("./CopyButton-DMhEjQZI.js"),__vite__mapDeps([28,2,3,4,5,6]))),Description:Z},props:{data:{type:Object,required:!0},isAsset:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},size:{type:String,default:"md"},shown:{type:Boolean,default:!1},auth:{type:Array,default:()=>[]}},emits:["show"],data(){return{id:St++}},computed:{...N(["downloads","pathPrefix","requestHeaders","buildTileUrlTemplate","useTileLayerAsFallback"]),...A(["getRequestUrl"]),...A("auth",["isLoggedIn"]),loading(){return!!this.downloads[this.href]},requiresAuth(){return!this.isLoggedIn&&this.auth.length>0},tileRendererType(){return this.buildTileUrlTemplate&&!this.useTileLayerAsFallback?"server":"client"},actions(){return Object.entries(this.isAsset?Tt:Bt).map(([e,t])=>new t(this.data,this,e)).filter(e=>e.show)},canShow(){if(typeof this.data?.type!="string")return!1;if(this.tileRendererType==="server"&&rt.includes(this.data?.type))return!0;if(this.isBrowserProtocol){if(ot.includes(this.data?.type))return!0}else return!1;return!1},hasShowButton(){return this.isAsset&&this.canShow&&!this.shown},hasDownloadButton(){return this.isAsset&&this.isBrowserProtocol},downloadEvents(){return this.hasDownloadButton&&this.useAltDownloadMethod?{click:async e=>{e.preventDefault(),this.altDownload()}}:{}},downloadProps(){if(this.hasDownloadButton&&!this.useAltDownloadMethod){const e={href:this.href,target:"_blank"};return this.browserCanOpenFile||(e.download=C.assetFilename(this.data)),e}return{}},useAltDownloadMethod(){return!this.isBrowserProtocol||!window.isSecureContext?!1:typeof this.data.method=="string"&&this.data.method.toUpperCase()!=="GET"?!0:C.size(this.data.headers)>0||C.size(this.requestHeaders)>0},protocol(){if(typeof this.href=="string"&&this.href){let e=this.href.match(/^(\w+):\/\//);if(e)return e[1].toLowerCase()}return null},isBrowserProtocol(){return!this.protocol||st.includes(this.protocol)},isThumbnail(){return this.isAsset?this.data.isPreview()&&this.data.canBrowserDisplayImage():this.data.rel==="preview"&&this.data.canBrowserDisplayImage()},href(){return typeof this.data.href!="string"?null:this.getRequestUrl(this.data.getAbsoluteUrl())},assetWithHref(){const e=new et(this.data);return e.href=this.href,e},from(){return this.protocolName(this.protocol)},browserCanOpenFile(){if(this.useAltDownloadMethod)return!1;if(this.data.canBrowserDisplayImage())return!0;if(typeof this.data?.type=="string")switch(this.data.type.toLowerCase()){case"text/html":case"application/xhtml+xml":case"text/plain":case"application/pdf":return!0}return!1},buttonText(){if(this.browserCanOpenFile&&this.isBrowserProtocol)return this.$t("open");let e=!this.isBrowserProtocol&&this.from?"withSource":"generic";return this.$t(`assets.download.${e}`,{source:this.from})},copyButtonText(){let e=!this.isBrowserProtocol&&this.from?"withSource":"generic";return this.$t(`assets.copyUrl.${e}`,{source:this.from})}},methods:{async altDownload(){if(!window.isSecureContext){window.location.href=this.href;return}await this.$store.dispatch("altDownload",this.assetWithHref)},protocolName(e){if(typeof e!="string")return"";switch(e.toLowerCase()){case"s3":try{const s=`protocol.s3.${i(this.href).domain()}`;if(this.$te(s))return this.$t(s)}catch{}return this.$t("protocol.s3.default");case"abfs":case"abfss":return this.$t("protocol.azure");case"gcs":return this.$t("protocol.gcs");case"ftp":return this.$t("protocol.ftp");case"oss":return this.$t("protocol.oss");case"file":return this.$t("protocol.file")}return""},show(){this.$emit("show",this.assetWithHref)},handleAuthButton(){this.auth.length===1&&this.startAuth(this.auth[0])},async startAuth(e){if(j.isSupported(e,this.$store.state))await this.$store.dispatch("config",{authConfig:e}),await this.$store.dispatch("auth/requestLogin");else{const t=this.$t(`authentication.schemeTypes.${e.type}`,e),s=this.$t("authentication.unsupportedLong",{method:t});this.$store.commit("showGlobalError",{error:new Error(s),message:this.$t("authentication.unsupported")})}}}};function Dt(e,t,s,c,m,o){const I=G,_=Q,O=Y,$=S,L=ct,U=x("CopyButton"),R=at,M=X,z=x("AuthSchemeItem"),V=K,F=x("b-popover");return r(),p("div",null,[o.href?(r(),a(M,{key:0,class:"actions",vertical:s.vertical,size:s.size},{default:d(()=>[o.requiresAuth?(r(),a(_,{key:0,variant:"danger",tag:"a",tabindex:"0",id:`popover-href-${m.id}-btn`,onClick:o.handleAuthButton},{default:d(()=>[y(I),n(" "+f(e.$t("authentication.required")),1)]),_:1},8,["id","onClick"])):g("",!0),t[1]||(t[1]=n()),o.hasDownloadButton?(r(),a(_,k({key:1,disabled:o.requiresAuth,variant:"primary"},o.downloadProps,W(o.downloadEvents)),{default:d(()=>[o.loading?(r(),a(O,{key:0,small:"",variant:"light"})):o.browserCanOpenFile?(r(),a($,{key:1})):(r(),a(L,{key:2})),n(" "+f(o.buttonText),1)]),_:1},16,["disabled"])):g("",!0),t[2]||(t[2]=n()),y(U,{variant:"primary",copyText:o.href,title:o.href},{default:d(()=>[n(f(o.copyButtonText),1)]),_:1},8,["copyText","title"]),t[3]||(t[3]=n()),o.hasShowButton?(r(),a(_,{key:2,onClick:o.show,variant:"primary"},{default:d(()=>[y(R,{class:"me-1"}),t[0]||(t[0]=n()),o.isThumbnail?(r(),p(b,{key:0},[n(f(e.$t("assets.showThumbnail")),1)],64)):(r(),p(b,{key:1},[n(f(e.$t("assets.showOnMap")),1)],64))]),_:1},8,["onClick"])):g("",!0),t[4]||(t[4]=n()),(r(!0),p(b,null,B(o.actions,h=>(r(),a(_,k({key:h.id,variant:"primary"},{ref_for:!0},h.btnOptions,{onClick:h.onClick}),{default:d(()=>[h.icon?(r(),a(J(h.icon),{key:0,class:"me-1"})):g("",!0),n(" "+f(h.text),1)]),_:2},1040,["onClick"]))),128))]),_:1},8,["vertical","size"])):g("",!0),t[5]||(t[5]=n()),s.auth.length>1?(r(),a(F,{key:1,click:"",focus:"",id:`popover-href-${m.id}`,class:"href-auth-methods",target:`popover-href-${m.id}-btn`,title:e.$t("authentication.chooseMethod"),"teleport-to":"#stac-browser","boundary-padding":10},{default:d(()=>[y(V,null,{default:d(()=>[(r(!0),p(b,null,B(s.auth,(h,H)=>(r(),a(z,{key:H,method:h,onAuthenticate:o.startAuth},null,8,["method","onAuthenticate"]))),128))]),_:1})]),_:1},8,["id","target","title"])):g("",!0)])}const Mt=q(Et,[["render",Dt]]);export{Mt as H};
//# sourceMappingURL=HrefActions-78L4A4sc.js.map
