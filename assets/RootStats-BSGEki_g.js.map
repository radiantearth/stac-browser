{"version":3,"mappings":"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","names":["_sfc_main","defineAsyncComponent","Url","mapState","mapGetters","obj","uri","confClass","key","Utils","stats","entry","title","type","version","match","spec","v","specs","formatKey","_hoisted_1","_hoisted_3","_openBlock","_createElementBlock","$options","_createBlock","_component_Url","_ctx","_Fragment","_createElementVNode","_renderList","classes","group","conf","_component_b_badge","_createTextVNode","_toDisplayString","_createVNode","_component_StatsChart"],"ignoreList":[],"sources":["../../src/components/RootStats.vue"],"sourcesContent":["<template>\n  <div class=\"root-stats\">\n    <Url v-if=\"rootUrl\" id=\"stacUrl\" :url=\"rootUrl\" :label=\"$t('source.locatedAt')\" />\n    <template v-if=\"hasConformances\">\n      <h4>{{ $t('source.conformanceClasses') }}</h4>\n      <dl v-for=\"(classes, group) in conformances\" :key=\"group\">\n        <dt>{{ group }}</dt>\n        <dd>\n          <ul>\n            <li v-for=\"(conf, uri) in classes\" :key=\"uri\" :title=\"uri\">\n              {{ conf.title }}\n              <b-badge v-if=\"conf.version\" pill variant=\"secondary\" class=\"ms-1\">{{ conf.version }}</b-badge>\n            </li>\n          </ul>\n        </dd>\n      </dl>\n    </template>\n    <template v-if=\"stats\">\n      <h4>{{ $t('source.statistics') }}</h4>\n      <dl v-for=\"(group, key) in stats\" :key=\"key\">\n        <dt>\n          {{ group.label }}\n          <b-badge pill variant=\"primary\" class=\"ms-1\">{{ group.count }}</b-badge>\n          <b-badge v-if=\"group.version\" pill variant=\"secondary\" class=\"ms-1\">{{ group.version }}</b-badge>\n        </dt>\n        <dd class=\"charts\">\n          <StatsChart v-if=\"group.extensions\" type=\"extensions\" :data=\"group.extensions\" :count=\"group.count\" />\n          <StatsChart v-if=\"group.assets\" type=\"assets\" :data=\"group.assets\" :count=\"group.count\" />\n          <StatsChart v-if=\"!group.version && group.versions\" type=\"versions\" :data=\"group.versions\" :count=\"group.count\" />\n        </dd>\n      </dl>\n    </template>\n  </div>\n</template>\n\n<script>\nimport { formatKey } from \"@radiantearth/stac-fields/helper\";\nimport { mapGetters, mapState } from \"vuex\";\nimport Url from './Url.vue';\nimport Utils from \"../utils\";\nimport { defineAsyncComponent } from 'vue';\n\nexport default {\n  name: \"RootStats\",\n  components: {\n    StatsChart: defineAsyncComponent(() => import('./metadata/StatsChart.vue')),\n    Url\n  },\n  computed: {\n    ...mapState(['conformsTo']),\n    ...mapGetters(['root']),\n    rootUrl() {\n      return this.root ? this.root.getAbsoluteUrl() : null;\n    },\n    hasConformances() {\n      return Array.isArray(this.conformsTo) && this.conformsTo.length > 0;\n    },\n    conformances() {\n      if (!this.hasConformances) {\n        return null;\n      }\n      let obj = {\n        OGC: {},\n        STAC: {},\n        Other: {} \n      };\n      for(let uri of this.conformsTo) {\n        let confClass =  this.parseConformance(uri);\n        obj[confClass.type][uri] = confClass;\n      }\n      for (let key in obj) {\n        if (Utils.size(obj[key]) === 0) {\n          delete obj[key];\n        }\n      }\n      return obj;\n    },\n    stats() {\n      if (!this.root) {\n        return null;\n      }\n      let stats = {\n        'stats:catalogs': { label: this.$t('stacCatalog', 2) },\n        'stats:collections': { label: this.$t('stacCollection', 2) },\n        'stats:items': { label: this.$t('stacItem', 2) }\n      };\n      for (let key in stats) {\n        if (Utils.isObject(this.root[key])) {\n          let entry = Object.assign(stats[key], this.root[key]);\n          if (Utils.size(entry['versions']) === 1) {\n            entry.version = Object.keys(entry['versions'])[0];\n            delete entry.versions;\n          }\n        }\n        else {\n          delete stats[key];\n        }\n      }\n      return Utils.size(stats) > 0 ? stats : null;\n    }\n  },\n  methods: {\n    parseConformance(uri) {\n      let title = uri;\n      let type = 'Other';\n      let version = null;\n      if (uri.startsWith('http://www.opengis.net/spec/')) {\n        type = 'OGC';\n        let match = uri.match(/^http:\\/\\/www\\.opengis\\.net\\/spec\\/([^/]+)\\/([^/]+)\\/conf\\/(.+)$/);\n        if (match) {\n          let [, spec, v, confClass] = match;\n          version = v;\n          let specs = spec.split('-');\n          if (specs.length === 3 && specs[0] === 'ogcapi') {\n            spec = `OGC API - ${formatKey(specs[1])} - Part ${specs[2]}`;\n          }\n          else if (spec === 'cql2') {\n            spec = 'CQL2';\n          }\n          else {\n            spec = formatKey(spec);\n          }\n          confClass = formatKey(confClass);\n          title = `${spec} - ${confClass}`;\n        }\n      }\n      else if (uri.startsWith('https://api.stacspec.org/')) {\n        type = 'STAC';\n\n        let match = uri.match(/^https?:\\/\\/api\\.stacspec\\.org\\/([^/]+)\\/([^/#]+)(?:#(.+))?$/);\n        if (match) {\n          version = match[1];\n          title = formatKey(match[2]);\n          if (match[3]) {\n            title += ' - ' + formatKey(match[3]);\n          }\n        }\n      }\n\n      return { type, title, version };\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../theme/variables.scss\";\n\n#stac-browser .root-stats {\n  h4 {\n    margin-top: $block-margin;\n  }\n\n  .charts .chart {\n    max-height: 300px;\n  }\n  .metadata .card {\n    margin-top: 0;\n  }\n  .metadata .card-columns {\n    column-count: 1;\n  }\n}\n</style>\n"],"file":"RootStats-BSGEki_g.js"}