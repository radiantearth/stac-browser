const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AnonymizedNotice-BtimJt5F.js","assets/index-4V-ffF_e.js","assets/utils-BXWzvTjY.js","assets/_commonjsHelpers-CE1G-McA.js","assets/I18N-DlIXJTel.js","assets/index-BchvTk2E.css","assets/Assets-B89QYVcy.js","assets/BAccordion.vue_vue_type_script_setup_true_lang-Ccx3zW5a-BzTAQl7g.js","assets/BTabs.vue_vue_type_script_setup_true_lang-CU4B0ph2-C3M5meNs.js","assets/BCollapse.vue_vue_type_script_setup_true_lang-BUisG8-R-BlgZthnG.js","assets/CollectionLink-CxZ7_dix.js","assets/Catalogs-uqrWHiGY.js","assets/BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-DT4U9cv3.js","assets/ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--B1-KiooU.js","assets/CardMixin-DMJ_B6k-.js","assets/formatters-CAYh_mzR.js","assets/helper-DO3U350M.js","assets/datatypes-XrFOh23H.js","assets/BCard.vue_vue_type_script_setup_true_lang-9RhyvL8I-gB4qpKUU.js","assets/BCardText.vue_vue_type_script_setup_true_lang-SRGbviaO-C7vVGdSM.js","assets/Loading-DNWIspeX.js","assets/Loading-BLYcl2tz.css","assets/Catalogs-BHomv16X.css","assets/DeprecationNotice-BmMFyM1p.js","assets/Description-CgLomT9X.js","assets/Description-BJNSZaWm.css","assets/Items-CjbyvRC-.js","assets/BrowseMixin-BS7cLncV.js","assets/DeprecationNotice-D31shaCs.css","assets/Keywords-CgVBYLgx.js","assets/Keywords-LHIkcT_2.css","assets/LinkList-dkPRTJoM.js","assets/HrefActions-DFR6pulB.js","assets/BListGroupItem.vue_vue_type_script_setup_true_lang-J0Ydbiva-BSUvV67k.js","assets/HrefActions-DeDG8trG.css","assets/index-jH8Vpgf7.js","assets/index.esm-aL1O-Kk3.js","assets/util-CAA-4cq9.js","assets/interface-B5vJloJq.js","assets/helper-CaHhXSPV.js","assets/LinkList-CJUlTDX0.css","assets/MapView-D5tb0UHZ.js","assets/GeoJSON-BlyzYhKz.js","assets/BFormRadioGroup.vue_vue_type_script_setup_true_lang-DaMHx4U3-CVtNDUBO.js","assets/useStateClass-BGbSLWFN-lMazZNQ7.js","assets/GeoJSON-Bh2emOAl.css","assets/WMTSCapabilities-D62if1ZG.js","assets/Image-C83KNzFT.js","assets/ImageLayer-Bn5NP1Zc.js","assets/BaseImage-FD9vmS44.js","assets/Tile-CC6tm9EA.js","assets/TileLayer-D-h0laqG.js","assets/DataTile-uej8eNh4.js","assets/Tile-lMrQctYw.js","assets/Tile-BrHfHitc.js","assets/common-0gNrjJbx.js","assets/TileRange-2Tc-Ry00.js","assets/LRUCache-CwUIRQIv.js","assets/tilecoord-DYaQ6NdW.js","assets/BaseTile-UnyspG_X.js","assets/TileProperty-BF4LcWSy.js","assets/VectorTile-UyqE-kwB.js","assets/WebGLTile-83Cf7Pmu.js","assets/compileUtil-l9W4qAYP.js","assets/mat4-CeypvY8Z.js","assets/ImageStatic-CtYzUVJA.js","assets/Image-0ePVgDVk.js","assets/resolution-CU8ppKQ3.js","assets/common-9rOs42pz.js","assets/static-CmzYI4cw.js","assets/TileJSON-D4FoPpxN.js","assets/net-tq6Ez6OH.js","assets/Tile-8IayXPne.js","assets/TileGrid-D2Qra4XP.js","assets/tileurlfunction-CsB_e4FB.js","assets/uri-BxyrIhx_.js","assets/TileImage-BzZFQQFS.js","assets/UrlTile-CxpuZoX4.js","assets/TileEventType-CTN_nmJ7.js","assets/TileWMS-De67mf9Z.js","assets/wms-0jfoL_hc.js","assets/VectorTile-DXttuOY-.js","assets/WMTS-CXsdUK2K.js","assets/XYZ-Cb21ydvC.js","assets/DataTile-Dra_RFvC.js","assets/MVT-gazGN73t.js","assets/index-BAmG4Bsb.js","assets/geotiff-B5OvkZPi.js","assets/__vite-browser-external-B1O5LaIO.js","assets/MapView-eDbLtyS8.css","assets/MetadataGroups-C9A_ZV6U.js","assets/MetadataGroups-DSbVrFW-.css","assets/Providers-BMRL160U.js","assets/Providers-UMkVmba1.css","assets/Thumbnails-ChCpsgeV.js","assets/Thumbnails-C5KZNdih.css"])))=>i.map(i=>d[i]);
import{bk as O,n as o,B as _,y as A,C as ue,G as n,H as M,A as W,d as T,br as R,bs as z,bp as S,bw as Q,cB as G,bl as a,L as m,q as d,b4 as q,p as r,K as l,b1 as J,bt as u,bu as h,v as he,cr as ce,b7 as fe,F as ge}from"./index-4V-ffF_e.js";import{b as X}from"./BCard.vue_vue_type_script_setup_true_lang-9RhyvL8I-gB4qpKUU.js";import{_ as Y,a as Z}from"./BTabs.vue_vue_type_script_setup_true_lang-CU4B0ph2-C3M5meNs.js";import x from"./Description-CgLomT9X.js";import{d as y,l as ye,U as be}from"./utils-BXWzvTjY.js";import{C as ke}from"./Catalogs-uqrWHiGY.js";import Ae from"./Items-CjbyvRC-.js";import{S as Le,f as K}from"./formatters-CAYh_mzR.js";import{B as we}from"./BrowseMixin-BS7cLncV.js";const ve=T({name:"ReadMore",props:{lines:{type:Number,default:3},text:{type:String,default:"Read more"},textLess:{type:String,default:"Read less"}},data(){return{readmore:!1,expanded:!1,inMaxRange:!1}},mounted(){const e=this.getLineHeight(this.$refs.to);this.lines&&this.$refs.to.style.setProperty("--nlines",this.lines);let t=2;this.lines>12?t=4:this.lines>6&&(t=3),this.$refs.ht.style.setProperty("--nlines",t),setTimeout(()=>{if(!this.$refs.to||!this.$refs.ht)return;this.readmore=this.$refs.to.offsetHeight<this.$refs.to.scrollHeight;const s=(this.lines+1)*e;this.$refs.to.scrollHeight<=s&&(this.inMaxRange=!0),this.$refs.to.style.setProperty("--lineHeight",e+"px"),this.$refs.ht.style.setProperty("--lineHeight",e+"px")})},methods:{toggle(){this.expanded?(this.$refs.to.style.removeProperty("max-height"),this.expanded=!1):(this.expanded=!0,this.$refs.to.style.setProperty("max-height",this.$refs.to.scrollHeight+"px"))},getLineHeight(e){let t=document.createElement(e.children[0].nodeName);const s=getComputedStyle(e.children[0]);t.setAttribute("style","position:absolute;left:-999em;margin:0px;padding:0px;font-family:"+s.fontFamily+";font-size:"+s.fontSize),t.innerHTML="test",t=document.body.appendChild(t);const i=t.clientHeight;return t.parentNode.removeChild(t),i}}}),$e={ref:"to",class:"text-overflow-content"},_e={ref:"ht",class:"hide-text"},Ie={class:"read-more-button"};function Me(e,t,s,i,p,f){return o(),_("div",{class:W(["text-overflow",{expanded:e.expanded,"no-overflow":e.inMaxRange}])},[A("div",$e,[ue(e.$slots,"default",{},void 0,!0)],512),t[1]||(t[1]=n()),A("div",_e,null,512),t[2]||(t[2]=n()),A("div",{onClick:t[0]||(t[0]=(...c)=>e.toggle&&e.toggle(...c)),class:"button-read-more"},[A("div",Ie,[A("span",null,M(e.expanded?e.textLess:e.text),1)])])],2)}const ee=O(ve,[["render",Me],["__scopeId","data-v-4361f5e9"]]),te=T({data(){return{tab:null,shownOnMap:[],selectedAssets:[]}},computed:{...z(["showThumbnailsAsAssets"]),...R(["data"]),hasAssets(){return this.assets.length>0},assets(){if(!this.data)return[];let e=this.data.getAssets();return this.showThumbnailsAsAssets||(e=e.filter(t=>!this.thumbnails.includes(t))),e},hasThumbnails(){return this.thumbnails.length>0},thumbnails(){return this.data?this.data.getThumbnails():[]},additionalLinks(){return this.data?this.data.getLinksWithOtherRels(ye).filter(e=>e.rel!=="preview"||!e.canBrowserDisplayImage()):[]},selectedReferences(){return this.tab===0?this.shownOnMap:this.thumbnails}},methods:{showAsset(e){this.thumbnails.find(t=>t.getAbsoluteUrl()===e.getAbsoluteUrl())?this.tab=1:(this.tab=0,this.selectedAssets=[e]),this.$refs.tabs&&y.scrollTo(this.$refs.tabs.$el)},dataChanged(e){Array.isArray(e)?this.shownOnMap=e:this.shownOnMap=[]},handleEmptyMap(){this.hasThumbnails&&(this.tab=1)}}}),se={computed:{isDeprecated(){return!!this.data.getMetadata("deprecated")},showDeprecation(){return this.isDeprecated||this.latestLink||this.successorLink||this.predecessorLink},latestLink(){return this.data.getStacLinkWithRel("latest-version")},successorLink(){const e=this.data.getStacLinkWithRel("successor-version");return e&&this.latestLink&&e.href===this.latestLink.href?null:e},predecessorLink(){return!this.isDeprecated&&this.data.getStacLinkWithRel("predecessor-version")}}};function ie(e,t){let s=t.getters.toBrowserPath(e),i=be(window.location.origin.toString());return t.state.historyMode==="hash"?(i.path(t.state.pathPrefix),i.fragment(s)):i.path(y.removeTrailingSlash(t.state.pathPrefix)+s),i.toString()}function oe(e,t){Array.isArray(t)&&t.length>=4&&(e.spatialCoverage={"@type":"Place",geo:{"@type":"GeoShape",box:(t||[]).join(" ")}})}function ne(e){return Array.isArray(e)&&e.length===2&&(typeof e[0]=="string"||typeof e[1]=="string")?e.map(t=>t||"..").join("/"):null}function ae(e){return y.size(e.assets)>0?Object.values(e.assets).map(t=>({"@type":"DataDownload",contentUrl:y.toAbsolute(t.href,e.getAbsoluteUrl()),encodingFormat:t.type,name:t.title})):[]}function P(e,t,s,i="DataCatalog"){return e.map(p=>{let f,c;p instanceof S?(f=Q(p),c=p.getAbsoluteUrl()):(f=p.title,c=y.toAbsolute(p.href,t.getAbsoluteUrl()));let b={"@type":i,name:f,url:ie(c,s),isBasedOn:c};return i==="Dataset"&&(b.description=re(p,s)),b})}function D(e,t){return e.filter(s=>y.isObject(s)&&Array.isArray(s.roles)&&s.roles.includes(t)).map(s=>({"@type":"Organization",name:s.name,description:s.description,url:s.url,email:s.email||s.mail}))}function re(e,t){let s,i;if(e instanceof S?(s=e.isItem()?"Item":e.type,i=e.collection):y.isObject(e)&&e.rel==="item"&&(s="Item"),s){let p=G.global.t(`stac${s}`,1),f=G.global.t("in",{catalog:i||t.catalogTitle});return`SpatioTemporal Asset Catalog (STAC)
${p} - ${e.id} ${f}`}}function le(e,t,s){let i=Q(e),p=e.getAbsoluteUrl(),f=ie(p,s),c=e.getMetadata("language")?.code,b=e.getThumbnails(!0),L;b.length>0&&(L=b[0].getAbsoluteUrl());let g=e.getMetadata("license");g&&g!=="proprietary"&&g!=="various"&&g!=="other"?g=`https://spdx.org/licenses/${g}.html`:g=e.getLinkWithRel("license")?.href,g&&(g=y.toAbsolute(g,e.getAbsoluteUrl()));let w=e.getMetadata("providers"),I,k,v,$;return y.size(w)>0&&(I=D(w,"licensor"),k=D(w,"producer"),v=D(w,"host"),$=D(w,"processor")),{"@context":"https://schema.org/","@type":t,name:i,description:e.getMetadata("description")||re(e,s),citation:e.getMetadata("sci:citation"),identifier:e.getMetadata("sci:doi")||e.id,keywords:e.getMetadata("keywords"),license:g,url:f,isBasedOn:p,dateCreated:e.getMetadata("created"),dateModified:e.getMetadata("updated"),datePublished:e.getMetadata("published"),expires:e.getMetadata("expires"),inLanguage:c,thumbnailUrl:L,version:e.getMetadata("version"),image:L,copyrightHolder:I,producer:k,provider:v,creator:$}}function Ce(e,t,s){if(!(e instanceof S))return null;t=t.filter(p=>y.isObject(p)),t.length>1&&(t=t.filter((p,f)=>t.findIndex(c=>c.isBasedOn===p.isBasedOn)!==f));let i=le(e,"DataCatalog",s);return e.isCollection()&&(e.extent?.temporal?.interval.length>0&&(i.temporalCoverage=ne(e.extent.temporal.interval[0])),e.extent?.spatial?.bbox.length>0&&oe(i,e.extent.spatial.bbox[0]),i.associatedMedia=ae(e)),i.hasPart=P(s.getters.catalogs,e,s),i.dataset=P(s.getters.items,e,s,"Dataset"),i.isPartOf=P(t,e,s),i}function Te(e,t,s){if(!(e instanceof S))return null;t=t.filter(c=>y.isObject(c));let i=le(e,"Dataset",s);i.includedInDataCatalog=P(t,e,s);let p=e.getMetadata("start_datetime"),f=e.getMetadata("end_datetime");return p||f?i.temporalCoverage=ne([p,f]):i.temporalCoverage=e.getMetadata("datetime"),oe(i,e.bbox),i.distribution=ae(e),i}function de(e,t){let s="schema-org",i=e.getElementById(s);i||(i=e.createElement("script"),i.type="application/ld+json",i.id=s,e.head.appendChild(i)),i.innerText=JSON.stringify(t)}const Ee=T({name:"Item",components:{BTab:Z,BTabs:Y,BCard:X,AnonymizedNotice:u(()=>h(()=>import("./AnonymizedNotice-BtimJt5F.js"),__vite__mapDeps([0,1,2,3,4,5]))),Assets:u(()=>h(()=>import("./Assets-B89QYVcy.js"),__vite__mapDeps([6,1,2,3,4,5,7,8,9]))),CollectionLink:u(()=>h(()=>import("./CollectionLink-CxZ7_dix.js"),__vite__mapDeps([10,11,1,2,3,4,5,12,13,14,15,16,17,18,19,20,21,22]))),Description:x,DeprecationNotice:u(()=>h(()=>import("./DeprecationNotice-BmMFyM1p.js"),__vite__mapDeps([23,1,2,3,4,5,24,25,18,8,11,12,13,14,15,16,17,19,20,21,22,26,9,27,28]))),Keywords:u(()=>h(()=>import("./Keywords-CgVBYLgx.js"),__vite__mapDeps([29,12,1,2,3,4,5,13,30]))),LinkList:u(()=>h(()=>import("./LinkList-dkPRTJoM.js"),__vite__mapDeps([31,1,2,3,4,5,32,33,24,25,34,35,15,16,17,36,37,38,39,40]))),MapView:u(()=>h(()=>import("./MapView-D5tb0UHZ.js"),__vite__mapDeps([41,1,2,3,4,5,42,43,44,13,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89]))),MetadataGroups:u(()=>h(()=>import("./MetadataGroups-C9A_ZV6U.js").then(e=>e.M),__vite__mapDeps([90,1,2,3,4,5,19,35,15,16,17,36,37,38,18,91]))),Providers:u(()=>h(()=>import("./Providers-BMRL160U.js").then(e=>e.a),__vite__mapDeps([92,1,2,3,4,5,33,12,13,7,8,9,93]))),ReadMore:ee,Thumbnails:u(()=>h(()=>import("./Thumbnails-ChCpsgeV.js"),__vite__mapDeps([94,1,2,3,4,5,95])))},mixins:[te,se],data(){return{ignoredMetadataFields:["description","keywords","providers","title","deprecated","proj:bbox","proj:geometry","auth:schemes","anon:warning"]}},computed:{...z(["data","url"]),...R(["collectionLink","parentLink"])},watch:{data:{immediate:!0,handler(e){try{let t=Te(e,[this.collectionLink,this.parentLink],this.$store);de(document,t)}catch(t){console.error(t)}}}}}),De={class:"mb-4"},Pe={class:"intro"},Oe={key:0};function Re(e,t,s,i,p,f){const c=a("MapView"),b=a("b-tab"),L=a("Thumbnails"),g=a("b-tabs"),w=a("b-card"),I=a("Assets"),k=a("LinkList"),v=q,$=a("DeprecationNotice"),V=a("AnonymizedNotice"),E=a("Description"),B=a("ReadMore"),F=a("Keywords"),N=a("CollectionLink"),C=a("Providers"),j=a("MetadataGroups"),H=J;return o(),_("div",{class:"item",key:e.data.id},[m(H,null,{default:d(()=>[m(v,{class:"left"},{default:d(()=>[A("section",De,[m(w,{"no-body":"",class:"maps-preview"},{default:d(()=>[m(g,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=U=>e.tab=U),ref:"tabs",card:"",pills:"",vertical:"",end:""},{default:d(()=>[m(b,{title:e.$t("map"),"no-body":""},{default:d(()=>[m(c,{stac:e.data,assets:e.selectedAssets,onChanged:e.dataChanged,onEmpty:e.handleEmptyMap},null,8,["stac","assets","onChanged","onEmpty"])]),_:1},8,["title"]),t[1]||(t[1]=n()),e.hasThumbnails?(o(),r(b,{key:0,title:e.$t("thumbnails"),"no-body":""},{default:d(()=>[m(L,{thumbnails:e.thumbnails},null,8,["thumbnails"])]),_:1},8,["title"])):l("",!0)]),_:1},8,["modelValue"])]),_:1})]),t[2]||(t[2]=n()),e.hasAssets?(o(),r(I,{key:0,assets:e.assets,context:e.data,shown:e.selectedReferences,onShowAsset:e.showAsset},null,8,["assets","context","shown","onShowAsset"])):l("",!0),t[3]||(t[3]=n()),e.additionalLinks.length>0?(o(),r(k,{key:1,title:e.$t("additionalResources"),links:e.additionalLinks,context:e.data},null,8,["title","links","context"])):l("",!0)]),_:1}),t[11]||(t[11]=n()),m(v,{class:"right"},{default:d(()=>[A("section",Pe,[e.data.properties.description?(o(),_("h2",Oe,M(e.$t("description")),1)):l("",!0),t[4]||(t[4]=n()),e.showDeprecation?(o(),r($,{key:1,data:e.data},null,8,["data"])):l("",!0),t[5]||(t[5]=n()),e.data.properties["anon:warning"]?(o(),r(V,{key:2,warning:e.data.properties["anon:warning"]},null,8,["warning"])):l("",!0),t[6]||(t[6]=n()),e.data.properties.description?(o(),r(B,{key:3,lines:10,text:e.$t("read.more"),"text-less":e.$t("read.less")},{default:d(()=>[m(E,{description:e.data.properties.description},null,8,["description"])]),_:1},8,["text","text-less"])):l("",!0),t[7]||(t[7]=n()),Array.isArray(e.data.properties.keywords)&&e.data.properties.keywords.length>0?(o(),r(F,{key:4,keywords:e.data.properties.keywords,class:"mb-3"},null,8,["keywords"])):l("",!0)]),t[8]||(t[8]=n()),e.collectionLink?(o(),r(N,{key:0,link:e.collectionLink},null,8,["link"])):l("",!0),t[9]||(t[9]=n()),e.data.properties.providers?(o(),r(C,{key:1,providers:e.data.properties.providers},null,8,["providers"])):l("",!0),t[10]||(t[10]=n()),m(j,{data:e.data,type:"Item",ignoreFields:e.ignoredMetadataFields},null,8,["data","ignoreFields"])]),_:1})]),_:1})])}const Se=O(Ee,[["render",Re]]),Ve=T({name:"Catalog",components:{BTab:Z,BTabs:Y,BCard:X,AnonymizedNotice:u(()=>h(()=>import("./AnonymizedNotice-BtimJt5F.js"),__vite__mapDeps([0,1,2,3,4,5]))),Assets:u(()=>h(()=>import("./Assets-B89QYVcy.js"),__vite__mapDeps([6,1,2,3,4,5,7,8,9]))),Catalogs:ke,CollectionLink:u(()=>h(()=>import("./CollectionLink-CxZ7_dix.js"),__vite__mapDeps([10,11,1,2,3,4,5,12,13,14,15,16,17,18,19,20,21,22]))),DeprecationNotice:u(()=>h(()=>import("./DeprecationNotice-BmMFyM1p.js"),__vite__mapDeps([23,1,2,3,4,5,24,25,18,8,11,12,13,14,15,16,17,19,20,21,22,26,9,27,28]))),Description:x,Items:Ae,Keywords:u(()=>h(()=>import("./Keywords-CgVBYLgx.js"),__vite__mapDeps([29,12,1,2,3,4,5,13,30]))),LinkList:u(()=>h(()=>import("./LinkList-dkPRTJoM.js"),__vite__mapDeps([31,1,2,3,4,5,32,33,24,25,34,35,15,16,17,36,37,38,39,40]))),MapView:u(()=>h(()=>import("./MapView-D5tb0UHZ.js"),__vite__mapDeps([41,1,2,3,4,5,42,43,44,13,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89]))),MetadataGroups:u(()=>h(()=>import("./MetadataGroups-C9A_ZV6U.js").then(e=>e.M),__vite__mapDeps([90,1,2,3,4,5,19,35,15,16,17,36,37,38,18,91]))),Providers:u(()=>h(()=>import("./Providers-BMRL160U.js").then(e=>e.a),__vite__mapDeps([92,1,2,3,4,5,33,12,13,7,8,9,93]))),ReadMore:ee,Thumbnails:u(()=>h(()=>import("./Thumbnails-ChCpsgeV.js"),__vite__mapDeps([94,1,2,3,4,5,95])))},mixins:[te,Le({formatLicense:K.formatLicense,formatTemporalExtents:K.formatTemporalExtents}),se],data(){return{filters:{},ignoredMetadataFields:["stac_version","stac_extensions","id","type","title","description","keywords","providers","license","extent","summaries","links","assets","item_assets","proj:bbox","proj:geometry","conformsTo","deprecated","anon:warning","stats:catalogs","stats:collections","stats:items","auth:schemes","stac_browser"]}},computed:{...z(["data","url","apiItems","apiItemsLink","apiItemsPagination","apiItemsNumberMatched","nextCollectionsLink","stateQueryParameters"]),...R(["catalogs","collectionLink","isCollection","items","getApiItemsLoading","parentLink","rootLink"]),cssStacType(){return y.hasText(this.data?.type)?this.data?.type.toLowerCase():null},showFilters(){return!!this.stateQueryParameters.itemFilterOpen},linkPosition(){return this.additionalLinks.length===0?null:this.isCollection||!this.hasThumbnails?"right":"left"},apiItemsLoading(){return this.getApiItemsLoading(this.data)},licenses(){return this.data.license?this.formatLicense(this.data.license,null,null,this.data):null},providers(){let e=[];return Array.isArray(this.data.providers)&&this.data.providers.length>0?e=this.data.providers:this.isCollection&&y.isObject(this.data.summaries)&&Array.isArray(this.data.summaries.providers)&&(e=this.data.summaries.providers),e.length>0?e:null},temporalExtents(){if(this.isCollection&&this.data.extent.temporal.interval.length>0){let e=this.data.extent.temporal.interval;return e.length>1&&(e=e.slice(1)),this.formatTemporalExtents(e)}return null},hasItemAssets(){return this.itemAssets.length>0},itemAssets(){return!this.data||!y.isObject(this.data.item_assets)?[]:Object.values(this.data.item_assets)},itemPages(){let e=Object.assign({},this.apiItemsPagination);return!e.first&&this.data&&this.apiItemsLink&&this.apiItemsLink.rel!=="items"&&(e.first=y.addFiltersToLink(this.data.getApiItemsLink(),this.filters)),e},isApi(){return!!this.apiItemsLink},hasItems(){return this.items.length>0||this.isApi},hasCatalogs(){return this.catalogs.length>0},mapData(){const e={};if(this.selectedAssets.length>0)e.assets=this.selectedAssets;else{const t=this.items.filter(s=>s.type==="Feature");t.length>0&&(e.children=new ce({type:"FeatureCollection",features:t}))}return e}},watch:{data:{immediate:!0,handler(e){try{let t=Ce(e,[this.parentLink,this.rootLink],this.$store);de(document,t)}catch(t){console.error(t)}}}},methods:{filtersShown(e){this.$store.commit("updateState",{type:"itemFilterOpen",value:e?1:null})},loadMoreCollections(){this.$store.dispatch("loadNextApiCollections",{show:!0})},async paginateItems(e){try{await this.$store.dispatch("loadApiItems",{link:e,show:!0,filters:this.filters})}catch(t){this.$store.commit("showGlobalError",{error:t,message:this.$t("errors.loadItems")})}},async filterItems(e,t){this.filters=e,t&&this.$store.commit("resetApiItems",this.data.getApiItemsLink());try{await this.$store.dispatch("loadApiItems",{link:this.data.getApiItemsLink(),show:!0,filters:e})}catch(s){let i=t?this.$t("errors.loadItems"):this.$t("errors.loadFilteredItems");this.$store.commit("showGlobalError",{error:s,message:i})}}}}),Be={class:"intro"},Fe={key:5,class:"metadata mb-4"},Ne=["innerHTML"],je=["innerHTML"],He={key:0,class:"mb-4"};function Ue(e,t,s,i,p,f){const c=a("DeprecationNotice"),b=a("AnonymizedNotice"),L=a("Description"),g=a("ReadMore"),w=a("Keywords"),I=a("CollectionLink"),k=q,v=J,$=a("LinkList"),V=a("MapView"),E=a("b-tab"),B=a("Thumbnails"),F=a("b-tabs"),N=a("b-card"),C=a("Assets"),j=a("Providers"),H=a("MetadataGroups"),U=a("Catalogs"),me=a("Items");return o(),_("div",{class:W({cc:!0,[e.cssStacType]:!0,empty:!e.hasCatalogs&&!e.hasItems}),key:e.data.id},[m(v,null,{default:d(()=>[m(k,{class:"meta"},{default:d(()=>[A("section",Be,[A("h2",null,M(e.$t("description")),1),t[4]||(t[4]=n()),e.showDeprecation?(o(),r(c,{key:0,data:e.data},null,8,["data"])):l("",!0),t[5]||(t[5]=n()),e.data["anon:warning"]?(o(),r(b,{key:1,warning:e.data["anon:warning"]},null,8,["warning"])):l("",!0),t[6]||(t[6]=n()),e.data.description?(o(),r(g,{key:2,lines:10,text:e.$t("read.more"),"text-less":e.$t("read.less")},{default:d(()=>[m(L,{description:e.data.description},null,8,["description"])]),_:1},8,["text","text-less"])):l("",!0),t[7]||(t[7]=n()),Array.isArray(e.data.keywords)&&e.data.keywords.length>0?(o(),r(w,{key:3,keywords:e.data.keywords,class:"mb-3"},null,8,["keywords"])):l("",!0),t[8]||(t[8]=n()),e.collectionLink?(o(),r(I,{key:4,link:e.collectionLink},null,8,["link"])):l("",!0),t[9]||(t[9]=n()),e.isCollection?(o(),_("section",Fe,[e.licenses?(o(),r(v,{key:0},{default:d(()=>[m(k,{md:"4",class:"label"},{default:d(()=>[n(M(e.$t("catalog.license")),1)]),_:1}),t[1]||(t[1]=n()),m(k,{md:"8",class:"value"},{default:d(()=>[A("span",{innerHTML:e.licenses},null,8,Ne)]),_:1})]),_:1})):l("",!0),t[3]||(t[3]=n()),e.temporalExtents?(o(),r(v,{key:1},{default:d(()=>[m(k,{md:"4",class:"label"},{default:d(()=>[n(M(e.$t("catalog.temporalExtent")),1)]),_:1}),t[2]||(t[2]=n()),m(k,{md:"8",class:"value"},{default:d(()=>[A("span",{innerHTML:e.temporalExtents},null,8,je)]),_:1})]),_:1})):l("",!0)])):l("",!0),t[10]||(t[10]=n()),e.linkPosition==="left"?(o(),r($,{key:6,title:e.$t("additionalResources"),links:e.additionalLinks,context:e.data},null,8,["title","links","context"])):l("",!0)]),t[12]||(t[12]=n()),e.isCollection||e.hasThumbnails?(o(),_("section",He,[m(N,{"no-body":"",class:"maps-preview"},{default:d(()=>[m(F,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=pe=>e.tab=pe),ref:"tabs",pills:"",card:"",vertical:"",end:""},{default:d(()=>[e.isCollection?(o(),r(E,{key:0,title:e.$t("map"),"no-body":""},{default:d(()=>[m(V,he({stac:e.data},e.mapData,{onChanged:e.dataChanged,onEmpty:e.handleEmptyMap,onfocusOnly:"",popover:""}),null,16,["stac","onChanged","onEmpty"])]),_:1},8,["title"])):l("",!0),t[11]||(t[11]=n()),e.hasThumbnails?(o(),r(E,{key:1,title:e.$t("thumbnails"),"no-body":""},{default:d(()=>[m(B,{thumbnails:e.thumbnails},null,8,["thumbnails"])]),_:1},8,["title"])):l("",!0)]),_:1},8,["modelValue"])]),_:1})])):l("",!0),t[13]||(t[13]=n()),e.hasAssets?(o(),r(C,{key:1,assets:e.assets,context:e.data,shown:e.selectedReferences,onShowAsset:e.showAsset},null,8,["assets","context","shown","onShowAsset"])):l("",!0),t[14]||(t[14]=n()),e.hasItemAssets&&!e.hasItems?(o(),r(C,{key:2,assets:e.itemAssets,context:e.data,definition:!0},null,8,["assets","context"])):l("",!0),t[15]||(t[15]=n()),e.providers?(o(),r(j,{key:3,providers:e.providers},null,8,["providers"])):l("",!0),t[16]||(t[16]=n()),m(H,{class:"mb-4",type:e.data.type,data:e.data,ignoreFields:e.ignoredMetadataFields},null,8,["type","data","ignoreFields"]),t[17]||(t[17]=n()),e.linkPosition==="right"?(o(),r($,{key:4,title:e.$t("additionalResources"),links:e.additionalLinks,context:e.data},null,8,["title","links","context"])):l("",!0)]),_:1}),t[19]||(t[19]=n()),e.hasCatalogs?(o(),r(k,{key:0,class:"catalogs-container"},{default:d(()=>[m(U,{catalogs:e.catalogs,hasMore:!!e.nextCollectionsLink,onLoadMore:e.loadMoreCollections},null,8,["catalogs","hasMore","onLoadMore"])]),_:1})):l("",!0),t[20]||(t[20]=n()),e.hasItems||e.hasItemAssets?(o(),r(k,{key:1,class:"items-container"},{default:d(()=>[m(me,{stac:e.data,items:e.items,api:e.isApi,showFilters:e.showFilters,apiFilters:e.filters,pagination:e.itemPages,loading:e.apiItemsLoading,count:e.apiItemsNumberMatched,onPaginate:e.paginateItems,onFilterItems:e.filterItems,onFiltersShown:e.filtersShown},null,8,["stac","items","api","showFilters","apiFilters","pagination","loading","count","onPaginate","onFilterItems","onFiltersShown"]),t[18]||(t[18]=n()),e.hasItemAssets?(o(),r(C,{key:0,assets:e.itemAssets,context:e.data,definition:!0},null,8,["assets","context"])):l("",!0)]),_:1})):l("",!0)]),_:1})],2)}const ze=O(Ve,[["render",Ue]]),Ge=T({name:"Browse",components:{Catalog:ze,Item:Se},mixins:[we],computed:{...R(["isItem"]),component(){return this.isItem?"Item":"Catalog"}}}),Ke={class:"browse d-flex flex-column"};function We(e,t,s,i,p,f){const c=fe,b=a("ErrorAlert"),L=a("Loading");return o(),_("main",Ke,[!e.allowExternalAccess&&e.isExternal?(o(),r(c,{key:0,show:""},{default:d(()=>[n(M(e.$t("errors.noExternalAccess")),1)]),_:1})):e.error?(o(),r(b,{key:1,url:e.url,description:e.errorDescription,id:e.errorId},null,8,["url","description","id"])):e.loading?(o(),r(L,{key:2,stretch:""})):(o(),r(ge(e.component),{key:3}))])}const Qe=O(Ge,[["render",We]]),it=Object.freeze(Object.defineProperty({__proto__:null,default:Qe},Symbol.toStringTag,{value:"Module"}));export{it as B,se as D};
//# sourceMappingURL=Browse-BAGHSpuJ.js.map
