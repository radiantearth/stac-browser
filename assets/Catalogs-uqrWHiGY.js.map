{"version":3,"mappings":"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","names":["_sfc_main","BCard","BCardBody","BCardFooter","BCardImg","BCardText","BCardTitle","StacLink","defineAsyncComponent","__vitePreload","FileFormatsMixin","CardMixin","StacFieldsMixin","formatTemporalExtent","mapState","mapGetters","classes","extent","visible","STAC","_hoisted_1","_createBlock","_component_b_card","$options","_ctx","_createElementVNode","_openBlock","_component_b_card_img","_mergeProps","_createVNode","_component_b_card_body","_component_b_card_title","_component_StacLink","$props","_component_b_card_text","_component_b_badge","_createElementBlock","_Fragment","_renderList","format","_createTextVNode","_component_Keywords","_hoisted_2","_component_b_card_footer","_renderSlot","selectedValue","_component_b_button_group","_component_b_button","_component_b_icon_bricks","_toDisplayString","_component_b_icon_list_task","defineComponent","Catalog","Loading","ViewButtons","link","catalog","stac","catalogs","keyword","haystack","Utils","collator","a","b","getDisplayTitle","keywords","cardViewMode","placement","count","_hoisted_4","_component_ViewButtons","$event","_component_SortButtons","_hoisted_3","_component_SearchBox","_component_multiselect","_component_Pagination","_component_b_alert","_component_Loading","_component_Catalog","_withCtx","data"],"ignoreList":[],"sources":["../../src/components/Catalog.vue","../../src/components/ViewButtons.vue","../../src/components/Catalogs.vue"],"sourcesContent":["<template>\n  <b-card no-body :class=\"classes\" v-visible.400=\"load\" :img-placement=\"isList ? 'end' : undefined\">\n    <div class=\"card-img-wrapper\">\n      <b-card-img v-if=\"hasImage\" class=\"thumbnail\" v-bind=\"thumbnail\" lazy />\n    </div>\n    <b-card-body>\n      <b-card-title>\n        <StacLink :data=\"[data, catalog]\" class=\"stretched-link\" />\n      </b-card-title>\n      <b-card-text v-if=\"fileFormats.length > 0 || hasDescription || isDeprecated\" class=\"intro\">\n        <b-badge v-if=\"isDeprecated\" variant=\"warning\" class=\"me-1 mt-1 deprecated\">{{ $t('deprecated') }}</b-badge>\n        <b-badge v-for=\"format in fileFormats\" :key=\"format\" variant=\"secondary\" class=\"me-1 mt-1 fileformat\">{{ format }}</b-badge>\n        {{ summarizeDescription }}\n      </b-card-text>\n      <Keywords v-if=\"showKeywordsInCatalogCards && keywords.length > 0\" :keywords=\"keywords\" variant=\"primary\" />\n      <b-card-text v-if=\"temporalExtent\" class=\"datetime\"><small v-html=\"temporalExtent\" /></b-card-text>\n    </b-card-body>\n    <b-card-footer>\n      <slot name=\"footer\" :data=\"data\" />\n    </b-card-footer>\n  </b-card>\n</template>\n\n<script>\nimport { defineAsyncComponent } from 'vue';\nimport { mapState, mapGetters } from 'vuex';\nimport FileFormatsMixin from './FileFormatsMixin';\nimport StacFieldsMixin from './StacFieldsMixin';\nimport CardMixin from './CardMixin';\nimport StacLink from './StacLink.vue';\nimport { STAC } from 'stac-js';\nimport { formatTemporalExtent } from '@radiantearth/stac-fields/formatters';\nimport { BCard, BCardBody, BCardFooter, BCardImg, BCardText, BCardTitle } from 'bootstrap-vue-next';\n\nexport default {\n  name: 'Catalog',\n  components: {\n    BCard,\n    BCardBody,\n    BCardFooter,\n    BCardImg,\n    BCardText,\n    BCardTitle,\n    StacLink,\n    Keywords: defineAsyncComponent(() => import('./Keywords.vue'))\n  },\n  mixins: [\n    FileFormatsMixin,\n    CardMixin,\n    StacFieldsMixin({ formatTemporalExtent })\n  ],\n  props: {\n    catalog: {\n      type: Object,\n      required: true\n    }\n  },\n  computed: {\n    ...mapState(['showKeywordsInCatalogCards']),\n    ...mapGetters(['getStac']),\n    classes() {\n      let classes = ['catalog-card'];\n      if (!this.data) {\n        classes.push('queued');\n      }\n      if (this.data && this.data.deprecated) {\n        classes.push('deprecated');\n      }\n      if (this.hasImage) {\n        classes.push('has-thumbnail');\n      }\n      return classes;\n    },\n    data() {\n      return this.getStac(this.catalog);\n    },\n    temporalExtent() {\n      if (this.data?.isCollection() && this.data.extent?.temporal?.interval.length > 0) {\n        let extent = this.data.extent.temporal.interval[0];\n        if (Array.isArray(extent) && (typeof extent[0] === 'string' || typeof extent[1] === 'string')) {\n          return this.formatTemporalExtent(this.data.extent.temporal.interval[0], true);\n        }\n      }\n      return null;\n    }\n  },\n  methods: {\n    load(visible) {\n      if (this.catalog instanceof STAC) {\n        return;\n      }\n      this.$store.commit(visible ? 'queue' : 'unqueue', this.catalog.getAbsoluteUrl());\n    }\n  }\n};\n</script>\n","<template>\n  <b-button-group :title=\"$t('view.title')\" size=\"sm\">\n    <b-button @click=\"toggle('cards')\" :title=\"$t('view.tiles.title')\" variant=\"outline-primary\" :pressed=\"modelValue === 'cards'\">\n      <b-icon-bricks /> <span class=\"button-label\">{{ $t('view.tiles.label') }}</span>\n    </b-button>\n    <b-button @click=\"toggle('list')\" :title=\"$t('view.list.title')\" variant=\"outline-primary\" :pressed=\"modelValue === 'list'\">\n      <b-icon-list-task /> <span class=\"button-label\">{{ $t('view.list.label') }}</span>\n    </b-button>\n  </b-button-group>\n</template>\n\n<script>\n\nexport default {\n  name: \"ViewButtons\",\n  props: {\n    modelValue: {\n      type: String,\n      default: 'cards'\n    }\n  },\n  emits: ['update:modelValue'],\n  methods: {\n    toggle(selectedValue) {\n      if(this.modelValue !== selectedValue) {\n        this.$emit('update:modelValue', selectedValue);\n      }\n    }\n  }\n};\n</script>\n","<template>\n  <section class=\"catalogs mb-4\">\n    <header>\n      <h2 class=\"title me-2\">{{ title }}</h2>\n      <b-badge v-if=\"catalogCount !== null\" pill variant=\"secondary\" class=\"me-4\">{{ catalogCount }}</b-badge>\n      <ViewButtons v-if=\"!hideControls\" class=\"me-2\" v-model=\"view\" />\n      <SortButtons v-if=\"!hideControls && isComplete && catalogs.length > 1\" v-model=\"sort\" />\n    </header>\n    <section v-if=\"!hideControls && isComplete && catalogs.length > 1\" class=\"catalog-filter mb-2\">\n      <SearchBox v-model=\"searchTerm\" :placeholder=\"filterPlaceholder\" />\n      <multiselect\n        v-if=\"allKeywords.length > 0\"\n        v-model=\"selectedKeywords\"\n        :options=\"allKeywords\"\n        :multiple=\"true\"\n        :placeholder=\"$t('multiselect.keywordsPlaceholder')\"\n        :select-label=\"$t('multiselect.selectLabel')\"\n        :selected-label=\"$t('multiselect.selectedLabel')\"\n        :deselect-label=\"$t('multiselect.deselectLabel')\"\n        :limit-text=\"limitText\"\n      />\n    </section>\n    <Pagination v-if=\"showPagination\" ref=\"topPagination\" class=\"mb-3\" :pagination=\"pagination\" placement=\"top\" @paginate=\"paginate\" />\n    <b-alert v-if=\"hasSearchCritera && catalogView.length === 0\" variant=\"warning\" class=\"mt-2\" show>{{ $t('catalogs.noMatches') }}</b-alert>\n    <section class=\"list\">\n      <Loading v-if=\"loading\" fill top />\n      <div :class=\"view === 'list' ? 'card-list' : 'card-grid'\">\n        <Catalog v-for=\"catalog in catalogView\" :catalog=\"catalog\" :key=\"catalog.href\">\n          <template #footer=\"{data}\">\n            <slot name=\"catalogFooter\" :data=\"data\" />\n          </template>\n        </Catalog>\n      </div>\n    </section>\n    <Pagination v-if=\"showPagination\" class=\"mb-3\" :pagination=\"pagination\" @paginate=\"paginate\" />\n    <b-button v-else-if=\"hasMore\" @click=\"loadMore\" variant=\"primary\" v-visible.300=\"loadMore\">{{ $t('catalogs.loadMore') }}</b-button>\n  </section>\n</template>\n\n<script>\nimport { mapGetters, mapState } from 'vuex';\nimport { defineComponent, defineAsyncComponent } from 'vue';\n\nimport Catalog from './Catalog.vue';\nimport Loading from './Loading.vue';\nimport { getDisplayTitle } from '../models/stac';\nimport { STAC } from 'stac-js';\nimport ViewButtons from './ViewButtons.vue';\nimport Utils from '../utils';\n\nexport default defineComponent({\n  name: \"Catalogs\",\n  components: {\n    Catalog,\n    Loading,\n    Multiselect: defineAsyncComponent(() => import('vue-multiselect')),\n    Pagination: defineAsyncComponent(() => import('./Pagination.vue')),\n    SearchBox: defineAsyncComponent(() => import('./SearchBox.vue')),\n    SortButtons: defineAsyncComponent(() => import('./SortButtons.vue')),\n    ViewButtons\n  },\n  props: {\n    catalogs: {\n      type: Array,\n      required: true\n    },\n    collectionsOnly: {\n      type: Boolean,\n      required: false\n    },\n    enforceCards: {\n      type: Boolean,\n      default: false\n    },\n    hideControls: {\n      type: Boolean,\n      default: false\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    hasMore: {\n      type: Boolean,\n      default: false\n    },\n    apiFilters: {\n      type: Object,\n      default: () => ({})\n    },\n    pagination: {\n      type: Object,\n      default: () => ({})\n    },\n    count: {\n      type: Number,\n      default: null\n    }\n  },\n  emits: ['loadMore', 'paginate'],\n  data() {\n    return {\n      searchTerm: '',\n      sort: 0,\n      selectedKeywords: []\n    };\n  },\n  computed: {\n    ...mapState(['cardViewSort', 'uiLanguage']),\n    ...mapGetters(['getStac']),\n    catalogCount() {\n      if (this.catalogs.length !== this.catalogView.length) {\n        return this.catalogView.length + '/' + this.catalogs.length;\n      }\n      else if (this.count !== null) {\n        return this.count;\n      }\n      else if (this.isComplete) {\n        return this.catalogs.length;\n      }\n      return null;\n    },\n    title() {\n      if (this.collectionsOnly) {\n        return this.$t('stacCollection', this.catalogs.length );\n      }\n      else {\n        return this.$t('stacCatalog', this.catalogs.length );\n      }\n    },\n    isComplete() {\n      return !this.hasMore && !this.showPagination;\n    },\n    filterPlaceholder() {\n      return this.isComplete ? this.$t('catalogs.filterByTitleAndMore') : this.$t('catalogs.filterByTitle');\n    },\n    showPagination() {\n      // Check whether any pagination links are available\n      return Object.values(this.pagination).some(link => !!link);\n    },\n    allCatalogs() {\n      return this.catalogs.map(catalog => {\n          let stac = this.getStac(catalog);\n          return stac ? stac : catalog;\n      });\n    },\n    hasSearchCritera() {\n      return this.searchTerm || this.selectedKeywords.length > 0;\n    },\n    catalogView() {\n      if (this.hasMore) {\n        return this.catalogs;\n      }\n      // Filter\n      let catalogs = this.allCatalogs;\n      if (this.hasSearchCritera) {\n        catalogs = catalogs.filter(catalog => {\n          if (this.selectedKeywords.length > 0 && catalog instanceof STAC && Array.isArray(catalog.keywords)) {\n            let hasKeywords = this.selectedKeywords.every(keyword => catalog.keywords.includes(keyword));\n            if (!hasKeywords) {\n              return false;\n            }\n          }\n          if (this.searchTerm) {\n            let haystack = [ catalog.title ];\n            if (catalog instanceof STAC && this.isComplete) {\n              haystack.push(catalog.id);\n              if (Array.isArray(catalog.keywords)) {\n                haystack = haystack.concat(catalog.keywords);\n              }\n            }\n            return Utils.search(this.searchTerm, haystack);\n          }\n          return true;\n        });\n      }\n      // Sort\n      if (!this.hasMore && !this.apiFilters.sortby && this.sort !== 0) {\n        const collator = new Intl.Collator(this.uiLanguage);\n        catalogs = catalogs.slice(0).sort((a,b) => collator.compare(getDisplayTitle(a), getDisplayTitle(b)));\n        if (this.sort === -1) {\n          catalogs = catalogs.reverse();\n        }\n      }\n      return catalogs;\n    },\n    allKeywords() {\n      if (!this.isComplete) {\n        return [];\n      }\n      let keywords = [];\n      for(let catalog of this.allCatalogs) {\n        if (catalog instanceof STAC && Array.isArray(catalog.keywords)) {\n          for(let keyword of catalog.keywords) {\n            if (!keywords.includes(keyword)) {\n              keywords.push(keyword);\n            }\n          }\n        }\n      }\n      return keywords.sort();\n    },\n    view: {\n      get() {\n        if (this.enforceCards) {\n          return 'cards';\n        }\n        return this.$store.state.cardViewMode;\n      },\n      async set(cardViewMode) {\n        if (this.enforceCards) {\n          return;\n        }\n        await this.$store.dispatch('config', { cardViewMode });\n      }\n    }\n  },\n  created() {\n    this.sort = Utils.convertHumanizedSortOrder(this.cardViewSort);\n  },\n  methods: {\n    loadMore(visible = true) {\n      if (visible) {\n        // Disable sorting if pagination is/was active as otherwise the order of elements\n        // may change unexpectedly after the last page has been loaded.\n        this.sort = 0;\n        this.$emit('loadMore');\n      }\n    },\n    paginate(link, placement) {\n      if (placement === 'bottom' && this.$refs.topPagination) {\n        Utils.scrollTo(this.$refs.topPagination.$el);\n      }\n      this.$emit('paginate', link);\n    },\n    limitText(count) {\n      return this.$t(\"multiselect.andMore\", {count});\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.catalog-filter {\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 0.25rem;\n  margin-bottom: 0.25rem;\n  gap: 1rem;\n  align-items: stretch;\n\n  > * {\n    flex-grow: 1;\n    flex-basis: 300px;\n    min-width: 300px;\n  }\n}\n</style>\n"],"file":"Catalogs-uqrWHiGY.js"}