import{r as D,a as E}from"./formatters-CAYh_mzR.js";import{r as P}from"./helper-DO3U350M.js";import{r as U}from"./I18N-DlIXJTel.js";import{r as z}from"./datatypes-XrFOh23H.js";var S,K;function J(){if(K)return S;K=1;const p=D(),l=P(),C=U(),A=z(),F=E();function g(e,r,m,u,i){let b={};for(let o in r){let t;try{let c=o.split(/:(.*)/);c.length===1&&c.unshift(i);let f=c[0];if(typeof u=="function"&&!u(o,[o]))continue;t=r[o];let n=p.getSpecification(o,m);n.ext&&(f=n.ext);let O=!1;m==="summaries"&&n.listWithKeys&&Array.isArray(t)&&t.length>0&&(t=t[0],O=!0);let j=null,$=[];if(l.isObject(n.items)){let a=t;n.listWithKeys&&(a=Object.values(a));let d=[];Array.isArray(a)?d=l.keysFromListOfObjects(a):l.isObject(a)&&(d=Object.keys(a)),j={},$=n.itemOrder.filter(s=>d.includes(s)),d.forEach(s=>{typeof n.items[s]>"u"?(j[s]={label:l.formatKey(s),explain:s},$.push(s)):(j[s]=Object.assign({},n.items[s]),j[s].label=h(s,n.items[s]))})}let y;if(m==="summaries")if(!O&&l.isObject(t))if(typeof t.minimum<"u"&&typeof t.maximum<"u"){const a=d=>x(d,o,e,r,n,u,[o]);t.minimum===t.maximum?y=a(t.minimum):t.minimum===null?y=`< ${a(t.maximum)}`:t.maximum===null?y=`> ${a(t.minimum)}`:y=`${a(t.minimum)} â€“ ${a(t.maximum)}`}else y=A.object(t);else if(p.externalRenderer&&j){let a=O?Object.assign({},t):t.slice(0);for(let d in a){let s=l.isObject(a[d])?{}:[];for(let L in j)s[L]=x(a[d][L],L,e,r,j[L]);a[d]=s}}else Array.isArray(t)?y=l.toList(t,!n.custom&&!n.items,a=>x(a,o,e,r,n)):console.warn(`Invalid summary value: ${t}`);typeof y>"u"&&(y=x(t,o,e,r,n,u,[o])),l.isObject(b[f])||(b[f]={extension:f,label:q(f),properties:{}}),b[f].properties[o]={label:h(o,n),value:t,formatted:y,items:j,itemOrder:$,spec:n}}catch(c){console.error(`Field '${o}' with value '${t}' resulted in an error`,c)}}return Object.values(b).sort((o,t)=>C.collator.compare(o.extension,t.extension))}function R(e,r,m=null,u=""){return g(r,e,"assets",m,u)}function w(e,r,m=null,u=""){return g(r,e,"links",m,u)}function W(e,r,m=null,u=""){return g(r,e,"providers",m,u)}function I(e,r=null,m=""){return g(e,e.summaries,"summaries",r,m)}function _(e,r=null,m=""){return g(e,e,"collection",r,m)}function N(e,r=null,m=""){return g(e,e,"catalog",r,m)}function V(e,r=null,m=""){return g(e,e.properties,"metadata",r,m)}function x(e,r,m=null,u=null,i=null,b=null,o=[]){if(l.isObject(i)||(i=p.getSpecification(r)),typeof i.format=="string"){let t=F[`format${i.format}`];return t||console.warn(`Formatter '${i.format}' not available.`),t(e,r,i,m,u)}else{if(typeof i.formatter=="function")return i.formatter(e,r,i,m,u);if(l.isObject(i.mapping)){let t=String(e);return typeof i.mapping[t]<"u"?e=i.mapping[t]:typeof i.mapping[t.toLowerCase()]<"u"?e=i.mapping[t.toLowerCase()]:typeof i.mapping[t.toUpperCase()]<"u"&&(e=i.mapping[t.toUpperCase()]),A.format(l.t(e),i.unit)}else{if(e===null&&i.null)return A.null(i.null);if(Array.isArray(e)){let t=(c,f)=>x(c,r,m,u,i,b,o.concat([f]));return typeof b=="function"&&o.length>0&&(e=e.filter((c,f)=>b(o[0],o.concat([f])))),p.externalRenderer&&(i.custom||i.items)?e.map(t):l.toList(e,!1,t)}else if(l.isObject(e)){let t=f=>l.isObject(i.items)?i.listWithKeys?{items:i.items,itemOrder:i.itemOrder}:i.items[f]:l.isObject(i.properties)?i.properties[f]:{},c=(f,n,O)=>x(f,n,m,O,t(n),b,o.concat([n]));if(p.externalRenderer&&(i.custom||i.items||i.properties)){let f={};for(let n in e)typeof b=="function"&&o.length>0&&!b(o[0],o.concat([n]))||(f[n]=c(e[n],n,e));return f}else{let f=O=>h(O,t(O)),n=i.listWithKeys?[]:i.itemOrder;return l.toObject(e,c,f,n,b,o)}}else return A.format(e,i.unit)}}}function h(e,r=null){if(l.isObject(r)||(r=p.getSpecification(e)),l.isObject(r)&&typeof r.label=="string"){if(typeof r.explain=="string")return r.explain.match(/^https?:\/\//i)?l.toLink(r.explain,l.t(r.label),"about"):l.abbrev(l.t(r.label),l.t(r.explain));if(typeof r.label=="string")return l.t(r.label)}return l.formatKey(e)}function q(e){return h(e,p.getExtension(e))}return S={format:x,label:h,extension:q,formatCatalog:N,formatCollection:_,formatSummaries:I,formatItemProperties:V,formatAsset:R,formatLink:w,formatProvider:W,formatGrouped:g},S}export{J as r};
//# sourceMappingURL=interface-B5vJloJq.js.map
