{"version":3,"file":"SelectDataSource-VeFF-3lh.js","sources":["../../src/views/SelectDataSource.vue"],"sourcesContent":["<template>\n  <main class=\"select-data-source\">\n    <b-form @submit.prevent=\"go\">\n      <b-form-group\n        id=\"select\" :label=\"$t('index.specifyCatalog')\" label-for=\"url\"\n        :invalid-feedback=\"error\" :state=\"valid\"\n        class=\"mb-3\"\n      >\n        <b-form-input \n          id=\"url\" \n          type=\"url\" \n          :model-value=\"url\" \n          @update:model-value=\"setUrl\"\n          placeholder=\"https://...\"\n        />\n      </b-form-group>\n      <b-button type=\"submit\" variant=\"primary\">{{ $t('index.load') }}</b-button>\n    </b-form>\n    <hr v-if=\"stacIndex.length > 0\">\n    <b-form-group v-if=\"stacIndex.length > 0\" class=\"stac-index\">\n      <template #label>\n        <i18n-t keypath=\"index.selectStacIndex\" tag=\"span\" scope=\"global\">\n          <template #stacIndex>\n            <a href=\"https://stacindex.org\" target=\"_blank\">STAC Index</a>\n          </template>\n        </i18n-t>\n      </template>\n      <b-list-group> \n        <template v-for=\"catalog in stacIndex\" :key=\"catalog.id\">\n          <b-list-group-item\n            v-if=\"show(catalog)\" button\n            :active=\"url === catalog.url\"\n            @click=\"open(catalog.url)\"\n          >\n            <div class=\"d-flex justify-content-between align-items-baseline mb-1\">\n              <strong>{{ catalog.title }}</strong>\n              <b-badge v-if=\"catalog.isApi\" variant=\"danger\">{{ $t('index.api') }}</b-badge>\n              <b-badge v-else variant=\"success\">{{ $t('index.catalog') }}</b-badge>\n            </div>\n            <Description :description=\"catalog.summary\" compact />\n          </b-list-group-item>\n        </template>\n      </b-list-group>\n    </b-form-group>\n  </main>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport { defineComponent } from 'vue';\nimport Description from '../components/Description.vue';\nimport Utils from '../utils';\nimport axios from \"axios\";\n\nexport default defineComponent({\n  name: \"SelectDataSource\",\n  components: {\n    Description\n  },\n  data() {\n    return {\n      url: '',\n      stacIndex: []\n    };\n  },\n  computed: {\n    ...mapGetters(['toBrowserPath']),\n    valid() {\n      if (this.url.length === 0) {\n        return null;\n      }\n      return !this.error;\n    },\n    error() {\n      if (!this.url) {\n        return null;\n      }\n      try {\n        let url = new URL(this.url);\n        if (!url.protocol) {\n          return this.$t('index.urlMissingProtocol');\n        }\n        else if (!url.host) {\n          return this.$t('index.urlMissingHost');\n        }\n        return null;\n      } catch (error) {\n        return this.$t('index.urlInvalid', { error: error.message });\n      }\n    }\n  },\n  async created() {\n    // Reset loaded STAC catalog\n    this.$store.commit('resetCatalog', true);\n    // Load entries from STAC Index\n    try {\n      let response = await axios.get('https://stacindex.org/api/catalogs');\n      if(Array.isArray(response.data)) {\n        this.stacIndex = response.data;\n      }\n    } catch (error) {\n      console.error('Failed to load STAC Index:', error);\n    }\n  },\n  methods: {\n    show(catalog) {\n      if (catalog.access === 'private') {\n        return false;\n      }\n      else if(!this.url) {\n        return true;\n      }\n\n      return Utils.search(this.url, [catalog.title, catalog.url]);\n    },\n    setUrl(url) {\n      this.url = url;\n    },\n    open(url) {\n      this.url = url;\n      this.go();\n    },\n    go() {\n      if (this.url) {\n        this.$router.push(this.toBrowserPath(this.url));  // Vue Router navigation\n      }\n    }\n  }\n});\n</script>\n\n<style lang=\"scss\">\n@import '../theme/variables.scss';\n\n#stac-browser .select-data-source {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  overflow: hidden;\n\n  hr {\n    width: 100%;\n  }\n\n  .stac-index {\n    margin: 0;\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    overflow: hidden;\n\n    > div {\n      display: flex;\n      flex-direction: column;\n      flex: 1;\n      overflow: auto;\n      border-radius: $border-radius;\n\n      .list-group {\n        width: 100%;\n\n        .list-group-item {\n          border: 0;\n          border-bottom: 1px solid rgba(0,0,0,.125);\n        }\n\n        .active .styled-description a {\n          color: white;\n        }\n      }\n    }\n  }\n}\n</style>\n"],"names":["_sfc_main","defineComponent","Description","mapGetters","url","error","response","axios","catalog","Utils","_hoisted_1","_hoisted_3","_openBlock","_createElementBlock","_createVNode","_component_b_form","_ctx","_component_b_form_group","_component_b_form_input","_component_b_button","_hoisted_2","_createBlock","_component_i18n_t","_cache","_createElementVNode","_component_b_list_group","_Fragment","_renderList","_component_b_list_group_item","$event","_toDisplayString","_component_b_badge","_component_Description"],"mappings":"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"}