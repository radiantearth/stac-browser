import{g as A}from"./_commonjsHelpers-CE1G-McA.js";function R(b,s){for(var a=0;a<s.length;a++){const i=s[a];if(typeof i!="string"&&!Array.isArray(i)){for(const c in i)if(c!=="default"&&!(c in b)){const w=Object.getOwnPropertyDescriptor(i,c);w&&Object.defineProperty(b,c,w.get?w:{enumerable:!0,get:()=>i[c]})}}}return Object.freeze(Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}))}var T={exports:{}};var L;function O(){return L||(L=1,(function(b){((s,a)=>{b.exports=a()})("streamSaver",()=>{const s=typeof window=="object"?window:this;s.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let a=null,i=!1;const c=n=>{try{n()}catch{}},w=s.WebStreamsPolyfill||{},v=s.isSecureContext;let f=/constructor/i.test(s.HTMLElement)||!!s.safari||!!s.WebKitPoint;const y=v||"MozAppearance"in document.documentElement.style?"iframe":"navigate",d={createWriteStream:P,WritableStream:s.WritableStream||w.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function E(n){if(!n)throw new Error("meh");const e=document.createElement("iframe");return e.hidden=!0,e.src=n,e.loaded=!1,e.name="iframe",e.isIframe=!0,e.postMessage=(...l)=>e.contentWindow.postMessage(...l),e.addEventListener("load",()=>{e.loaded=!0},{once:!0}),document.body.appendChild(e),e}function W(n){const e="width=200,height=100",l=document.createDocumentFragment(),r={frame:s.open(n,"popup",e),loaded:!1,isIframe:!1,isPopup:!0,remove(){r.frame.close()},addEventListener(...t){l.addEventListener(...t)},dispatchEvent(...t){l.dispatchEvent(...t)},removeEventListener(...t){l.removeEventListener(...t)},postMessage(...t){r.frame.postMessage(...t)}},u=t=>{t.source===r.frame&&(r.loaded=!0,s.removeEventListener("message",u),r.dispatchEvent(new Event("load")))};return s.addEventListener("message",u),r}try{new Response(new ReadableStream),v&&!("serviceWorker"in navigator)&&(f=!0)}catch{f=!0}c(()=>{const{readable:n}=new TransformStream,e=new MessageChannel;e.port1.postMessage(n,[n]),e.port1.close(),e.port2.close(),i=!0,Object.defineProperty(d,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})});function x(){a||(a=v&&!1 in document.documentElement.style?E(d.mitm):W(d.mitm))}function P(n,e,l){let r={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},u=0,t=null,o=null,S=null;if(Number.isFinite(e)?([l,e]=[e,l],console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),r.size=l,r.writableStrategy=e):e&&e.highWaterMark?(console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),r.size=l,r.writableStrategy=e):r=e||{},!f){x(),o=new MessageChannel,n=encodeURIComponent(n.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const m={transferringReadable:i,pathname:r.pathname||Math.random().toString().slice(-6)+"/"+n,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+n}};r.size&&(m.headers["Content-Length"]=r.size);const g=[m,"*",[o.port2]];if(i){const p=y==="iframe"?void 0:{transform(M,U){if(!(M instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");u+=M.length,U.enqueue(M),t&&(location.href=t,t=null)},flush(){t&&(location.href=t)}};S=new d.TransformStream(p,r.writableStrategy,r.readableStrategy);const j=S.readable;o.port1.postMessage({readableStream:j},[j])}o.port1.onmessage=p=>{p.data.download?y==="navigate"?(a.remove(),a=null,u?location.href=p.data.download:t=p.data.download):(a.isPopup&&(a.remove(),a=null,y==="iframe"&&E(d.mitm)),E(p.data.download)):p.data.abort&&(h=[],o.port1.postMessage("abort"),o.port1.onmessage=null,o.port1.close(),o.port2.close(),o=null)},a.loaded?a.postMessage(...g):a.addEventListener("load",()=>{a.postMessage(...g)},{once:!0})}let h=[];return!f&&S&&S.writable||new d.WritableStream({write(m){if(!(m instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");if(f){h.push(m);return}o.port1.postMessage(m),u+=m.length,t&&(location.href=t,t=null)},close(){if(f){const m=new Blob(h,{type:"application/octet-stream; charset=utf-8"}),g=document.createElement("a");g.href=URL.createObjectURL(m),g.download=n,g.click()}else o.port1.postMessage("end")},abort(){h=[],o.port1.postMessage("abort"),o.port1.onmessage=null,o.port1.close(),o.port2.close(),o=null}},r.writableStrategy)}return d})})(T)),T.exports}var C=O();const D=A(C),_=R({__proto__:null,default:D},[C]);export{_ as S};
//# sourceMappingURL=StreamSaver-CKXy_aoG.js.map
