const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Keywords-DYyl7fGy.js","assets/BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-D6r902T2.js","assets/index-B3F0456b.js","assets/utils-BXWzvTjY.js","assets/_commonjsHelpers-CE1G-McA.js","assets/I18N-DlIXJTel.js","assets/index-BchvTk2E.css","assets/ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--5aly-L7g.js","assets/Keywords-LHIkcT_2.css","assets/vue-multiselect.esm-D_BGxxkS.js","assets/Pagination-CBlp7q0i.js","assets/SearchBox-Ck1zFv4w.js","assets/BFormInput.vue_vue_type_script_setup_true_lang-DRDhfD8d-CDvZgueb.js","assets/useStateClass-BGbSLWFN-eI-Q6wqs.js","assets/debounce-BHqBzJ1a-B8IcW8Id.js","assets/SearchBox-B16Gz3jK.css","assets/SortButtons-DsAkHCm-.js"])))=>i.map(i=>d[i]);
import{bk as P,cF as G,bl as r,bx as H,x as E,n as s,p as o,q as i,y as d,v as J,K as n,G as a,L as p,H as c,B as v,I as K,ax as O,C as D,A as I,bp as V,br as F,bs as q,bt as w,bu as C,a4 as j,_ as R,b6 as Q,b7 as W,d as X,bw as A}from"./index-B3F0456b.js";import{_ as U}from"./BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-D6r902T2.js";import{F as Y,C as Z}from"./CardMixin-lz_3YEkE.js";import{S as x,f as ee}from"./formatters-4oPpTn9A.js";import{d as T}from"./utils-BXWzvTjY.js";import{c as te,a as ae,f as se,g as oe,b as le}from"./BCard.vue_vue_type_script_setup_true_lang-9RhyvL8I-B_mmN9UZ.js";import{_ as re}from"./BCardText.vue_vue_type_script_setup_true_lang-SRGbviaO-8WlQVb0j.js";import{L as ie}from"./Loading-By1YVxZb.js";const ne={name:"Catalog",components:{BCard:le,BCardBody:oe,BCardFooter:se,BCardImg:ae,BCardText:re,BCardTitle:te,StacLink:G,Keywords:w(()=>C(()=>import("./Keywords-DYyl7fGy.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])))},mixins:[Y,Z,x({formatTemporalExtent:ee.formatTemporalExtent})],props:{catalog:{type:Object,required:!0}},computed:{...q(["showKeywordsInCatalogCards"]),...F(["getStac"]),classes(){let e=["catalog-card"];return this.data||e.push("queued"),this.data&&this.data.deprecated&&e.push("deprecated"),this.hasImage&&e.push("has-thumbnail"),e},data(){return this.getStac(this.catalog)},temporalExtent(){if(this.data?.isCollection()&&this.data.extent?.temporal?.interval.length>0){let e=this.data.extent.temporal.interval[0];if(Array.isArray(e)&&(typeof e[0]=="string"||typeof e[1]=="string"))return this.formatTemporalExtent(this.data.extent.temporal.interval[0],!0)}return null}},methods:{load(e){this.catalog instanceof V||this.$store.commit(e?"queue":"unqueue",this.catalog.getAbsoluteUrl())}}},de={class:"card-img-wrapper"},ue=["innerHTML"];function me(e,t,l,h,L,u){const b=r("b-card-img"),f=r("StacLink"),_=r("b-card-title"),g=U,y=r("b-card-text"),$=r("Keywords"),M=r("b-card-body"),B=r("b-card-footer"),z=r("b-card"),S=H("visible");return E((s(),o(z,{"no-body":"",class:I(u.classes),"img-placement":e.isList?"end":void 0},{default:i(()=>[d("div",de,[e.hasImage?(s(),o(b,J({key:0,class:"thumbnail"},e.thumbnail,{lazy:""}),null,16)):n("",!0)]),t[4]||(t[4]=a()),p(M,null,{default:i(()=>[p(_,null,{default:i(()=>[p(f,{data:[u.data,l.catalog],class:"stretched-link"},null,8,["data"])]),_:1}),t[1]||(t[1]=a()),e.fileFormats.length>0||e.hasDescription||e.isDeprecated?(s(),o(y,{key:0,class:"intro"},{default:i(()=>[e.isDeprecated?(s(),o(g,{key:0,variant:"warning",class:"me-1 mt-1 deprecated"},{default:i(()=>[a(c(e.$t("deprecated")),1)]),_:1})):n("",!0),t[0]||(t[0]=a()),(s(!0),v(K,null,O(e.fileFormats,k=>(s(),o(g,{key:k,variant:"secondary",class:"me-1 mt-1 fileformat"},{default:i(()=>[a(c(k),1)]),_:2},1024))),128)),a(" "+c(e.summarizeDescription),1)]),_:1})):n("",!0),t[2]||(t[2]=a()),e.showKeywordsInCatalogCards&&e.keywords.length>0?(s(),o($,{key:1,keywords:e.keywords,variant:"primary"},null,8,["keywords"])):n("",!0),t[3]||(t[3]=a()),u.temporalExtent?(s(),o(y,{key:2,class:"datetime"},{default:i(()=>[d("small",{innerHTML:u.temporalExtent},null,8,ue)]),_:1})):n("",!0)]),_:1}),t[5]||(t[5]=a()),p(B,null,{default:i(()=>[D(e.$slots,"footer",{data:u.data})]),_:3})]),_:3},8,["class","img-placement"])),[[S,u.load,void 0,{400:!0}]])}const pe=P(ne,[["render",me]]),ce={viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"};function he(e,t){return s(),v("svg",ce,[...t[0]||(t[0]=[d("g",{fill:"currentColor"},[d("path",{"fill-rule":"evenodd",d:"M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5zM3 3H2v1h1z"}),d("path",{d:"M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1z"}),d("path",{"fill-rule":"evenodd",d:"M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5zM2 7h1v1H2zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm1 .5H2v1h1z"})],-1)])])}const fe=j({name:"bi-list-task",render:he}),ge={viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"};function ye(e,t){return s(),v("svg",ge,[...t[0]||(t[0]=[d("path",{fill:"currentColor",d:"M0 .5A.5.5 0 0 1 .5 0h15a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H14v2h1.5a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H14v2h1.5a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5H.5a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5H2v-2H.5a.5.5 0 0 1-.5-.5v-3A.5.5 0 0 1 .5 6H2V4H.5a.5.5 0 0 1-.5-.5zM3 4v2h4.5V4zm5.5 0v2H13V4zM3 10v2h4.5v-2zm5.5 0v2H13v-2zM1 1v2h3.5V1zm4.5 0v2h5V1zm6 0v2H15V1zM1 7v2h3.5V7zm4.5 0v2h5V7zm6 0v2H15V7zM1 13v2h3.5v-2zm4.5 0v2h5v-2zm6 0v2H15v-2z"},null,-1)])])}const ve=j({name:"bi-bricks",render:ye}),be={name:"ViewButtons",props:{modelValue:{type:String,default:"cards"}},emits:["update:modelValue"],methods:{toggle(e){this.modelValue!==e&&this.$emit("update:modelValue",e)}}},_e={class:"button-label"},we={class:"button-label"};function Ce(e,t,l,h,L,u){const b=ve,f=R,_=fe,g=Q;return s(),o(g,{title:e.$t("view.title"),size:"sm"},{default:i(()=>[p(f,{onClick:t[0]||(t[0]=y=>u.toggle("cards")),title:e.$t("view.tiles.title"),variant:"outline-primary",pressed:l.modelValue==="cards"},{default:i(()=>[p(b),t[2]||(t[2]=a()),d("span",_e,c(e.$t("view.tiles.label")),1)]),_:1},8,["title","pressed"]),t[4]||(t[4]=a()),p(f,{onClick:t[1]||(t[1]=y=>u.toggle("list")),title:e.$t("view.list.title"),variant:"outline-primary",pressed:l.modelValue==="list"},{default:i(()=>[p(_),t[3]||(t[3]=a()),d("span",we,c(e.$t("view.list.label")),1)]),_:1},8,["title","pressed"])]),_:1},8,["title"])}const $e=P(be,[["render",Ce]]),ke=X({name:"Catalogs",components:{Catalog:pe,Loading:ie,Multiselect:w(()=>C(()=>import("./vue-multiselect.esm-D_BGxxkS.js"),__vite__mapDeps([9,2,3,4,5,6]))),Pagination:w(()=>C(()=>import("./Pagination-CBlp7q0i.js"),__vite__mapDeps([10,2,3,4,5,6]))),SearchBox:w(()=>C(()=>import("./SearchBox-Ck1zFv4w.js"),__vite__mapDeps([11,12,2,3,4,5,6,13,14,15]))),SortButtons:w(()=>C(()=>import("./SortButtons-DsAkHCm-.js"),__vite__mapDeps([16,2,3,4,5,6]))),ViewButtons:$e},props:{catalogs:{type:Array,required:!0},collectionsOnly:{type:Boolean,required:!1},enforceCards:{type:Boolean,default:!1},hideControls:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!1},apiFilters:{type:Object,default:()=>({})},pagination:{type:Object,default:()=>({})},count:{type:Number,default:null}},emits:["loadMore","paginate"],data(){return{searchTerm:"",sort:0,selectedKeywords:[]}},computed:{...q(["cardViewSort","uiLanguage"]),...F(["getStac"]),catalogCount(){return this.catalogs.length!==this.catalogView.length?this.catalogView.length+"/"+this.catalogs.length:this.count!==null?this.count:this.isComplete?this.catalogs.length:null},title(){return this.collectionsOnly?this.$t("stacCollection",this.catalogs.length):this.$t("stacCatalog",this.catalogs.length)},isComplete(){return!this.hasMore&&!this.showPagination},filterPlaceholder(){return this.isComplete?this.$t("catalogs.filterByTitleAndMore"):this.$t("catalogs.filterByTitle")},showPagination(){return Object.values(this.pagination).some(e=>!!e)},allCatalogs(){return this.catalogs.map(e=>{let t=this.getStac(e);return t||e})},hasSearchCritera(){return this.searchTerm||this.selectedKeywords.length>0},catalogView(){if(this.hasMore)return this.catalogs;let e=this.allCatalogs;if(this.hasSearchCritera&&(e=e.filter(t=>{if(this.selectedKeywords.length>0&&t instanceof V&&Array.isArray(t.keywords)&&!this.selectedKeywords.every(h=>t.keywords.includes(h)))return!1;if(this.searchTerm){let l=[t.title];return t instanceof V&&this.isComplete&&(l.push(t.id),Array.isArray(t.keywords)&&(l=l.concat(t.keywords))),T.search(this.searchTerm,l)}return!0})),!this.hasMore&&!this.apiFilters.sortby&&this.sort!==0){const t=new Intl.Collator(this.uiLanguage);e=e.slice(0).sort((l,h)=>t.compare(A(l),A(h))),this.sort===-1&&(e=e.reverse())}return e},allKeywords(){if(!this.isComplete)return[];let e=[];for(let t of this.allCatalogs)if(t instanceof V&&Array.isArray(t.keywords))for(let l of t.keywords)e.includes(l)||e.push(l);return e.sort()},view:{get(){return this.enforceCards?"cards":this.$store.state.cardViewMode},async set(e){this.enforceCards||await this.$store.dispatch("config",{cardViewMode:e})}}},created(){this.sort=T.convertHumanizedSortOrder(this.cardViewSort)},methods:{loadMore(e=!0){e&&(this.sort=0,this.$emit("loadMore"))},paginate(e,t){t==="bottom"&&this.$refs.topPagination&&T.scrollTo(this.$refs.topPagination.$el),this.$emit("paginate",e)},limitText(e){return this.$t("multiselect.andMore",{count:e})}}}),Ve={class:"catalogs mb-4"},Me={class:"title me-2"},Be={key:0,class:"catalog-filter mb-2"},ze={class:"list"};function Se(e,t,l,h,L,u){const b=U,f=r("ViewButtons"),_=r("SortButtons"),g=r("SearchBox"),y=r("multiselect"),$=r("Pagination"),M=W,B=r("Loading"),z=r("Catalog"),S=R,k=H("visible");return s(),v("section",Ve,[d("header",null,[d("h2",Me,c(e.title),1),t[4]||(t[4]=a()),e.catalogCount!==null?(s(),o(b,{key:0,pill:"",variant:"secondary",class:"me-4"},{default:i(()=>[a(c(e.catalogCount),1)]),_:1})):n("",!0),t[5]||(t[5]=a()),e.hideControls?n("",!0):(s(),o(f,{key:1,class:"me-2",modelValue:e.view,"onUpdate:modelValue":t[0]||(t[0]=m=>e.view=m)},null,8,["modelValue"])),t[6]||(t[6]=a()),!e.hideControls&&e.isComplete&&e.catalogs.length>1?(s(),o(_,{key:2,modelValue:e.sort,"onUpdate:modelValue":t[1]||(t[1]=m=>e.sort=m)},null,8,["modelValue"])):n("",!0)]),t[9]||(t[9]=a()),!e.hideControls&&e.isComplete&&e.catalogs.length>1?(s(),v("section",Be,[p(g,{modelValue:e.searchTerm,"onUpdate:modelValue":t[2]||(t[2]=m=>e.searchTerm=m),placeholder:e.filterPlaceholder},null,8,["modelValue","placeholder"]),t[7]||(t[7]=a()),e.allKeywords.length>0?(s(),o(y,{key:0,modelValue:e.selectedKeywords,"onUpdate:modelValue":t[3]||(t[3]=m=>e.selectedKeywords=m),options:e.allKeywords,multiple:!0,placeholder:e.$t("multiselect.keywordsPlaceholder"),"select-label":e.$t("multiselect.selectLabel"),"selected-label":e.$t("multiselect.selectedLabel"),"deselect-label":e.$t("multiselect.deselectLabel"),"limit-text":e.limitText},null,8,["modelValue","options","placeholder","select-label","selected-label","deselect-label","limit-text"])):n("",!0)])):n("",!0),t[10]||(t[10]=a()),e.showPagination?(s(),o($,{key:1,ref:"topPagination",class:"mb-3",pagination:e.pagination,placement:"top",onPaginate:e.paginate},null,8,["pagination","onPaginate"])):n("",!0),t[11]||(t[11]=a()),e.hasSearchCritera&&e.catalogView.length===0?(s(),o(M,{key:2,variant:"warning",class:"mt-2",show:""},{default:i(()=>[a(c(e.$t("catalogs.noMatches")),1)]),_:1})):n("",!0),t[12]||(t[12]=a()),d("section",ze,[e.loading?(s(),o(B,{key:0,fill:"",top:""})):n("",!0),t[8]||(t[8]=a()),d("div",{class:I(e.view==="list"?"card-list":"card-grid")},[(s(!0),v(K,null,O(e.catalogView,m=>(s(),o(z,{catalog:m,key:m.href},{footer:i(({data:N})=>[D(e.$slots,"catalogFooter",{data:N},void 0,!0)]),_:3},8,["catalog"]))),128))],2)]),t[13]||(t[13]=a()),e.showPagination?(s(),o($,{key:3,class:"mb-3",pagination:e.pagination,onPaginate:e.paginate},null,8,["pagination","onPaginate"])):e.hasMore?E((s(),o(S,{key:4,onClick:e.loadMore,variant:"primary"},{default:i(()=>[a(c(e.$t("catalogs.loadMore")),1)]),_:1},8,["onClick"])),[[k,e.loadMore,void 0,{300:!0}]]):n("",!0)])}const Te=P(ke,[["render",Se],["__scopeId","data-v-fa4f7fff"]]),Ie=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"}));export{Te as C,pe as a,Ie as b};
//# sourceMappingURL=Catalogs-C2K_aDkR.js.map
