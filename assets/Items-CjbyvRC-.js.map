{"version":3,"mappings":"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","names":["_sfc_main","defineComponent","StacLink","BCard","BCardImg","BCardBody","BCardText","BCardTitle","defineAsyncComponent","__vitePreload","FileFormatsMixin","CardMixin","mapState","mapGetters","formatTemporalExtent","formatTimestamp","visible","STAC","_hoisted_1","_createBlock","_component_b_card","_normalizeClass","_ctx","_createElementVNode","_openBlock","_component_b_card_img","_mergeProps","_createVNode","_component_b_card_body","_component_b_card_title","_component_StacLink","_component_b_card_text","_component_b_badge","_createElementBlock","_Fragment","_renderList","format","_component_Keywords","Item","n","Loading","BCollapse","filter","Utils","items","collator","a","b","getDisplayTitle","link","value","reset","placement","_hoisted_2","_hoisted_3","_toDisplayString","_component_SortButtons","$event","_component_Pagination","_component_b_button","_component_b_icon_filter","_createTextVNode","_component_b_collapse","_component_SearchFilter","_component_Loading","_hoisted_4","item","_component_Item","_component_b_alert"],"ignoreList":[],"sources":["../../src/components/Item.vue","../../src/components/Items.vue"],"sourcesContent":["<template>\n  <b-card no-body class=\"item-card\" :class=\"classes\" v-visible.400=\"load\">\n    <div class=\"card-img-wrapper\">\n      <b-card-img v-if=\"hasImage\" class=\"thumbnail\" v-bind=\"thumbnail\" lazy />\n    </div>\n    <b-card-body>\n      <b-card-title>\n        <StacLink :data=\"[data, item]\" class=\"stretched-link\" />\n      </b-card-title>\n      <b-card-text v-if=\"fileFormats.length > 0 || hasDescription || isDeprecated\" class=\"intro\">\n        <b-badge v-if=\"isDeprecated\" variant=\"warning\" class=\"me-1 mt-1 deprecated\">{{ $t('deprecated') }}</b-badge>\n        <b-badge v-for=\"format in fileFormats\" :key=\"format\" variant=\"secondary\" class=\"me-1 mt-1 fileformat\">{{ format }}</b-badge>\n        <template v-if=\"hasDescription\">{{ summarizeDescription }}</template>\n      </b-card-text>\n      <Keywords v-if=\"showKeywordsInItemCards && keywords.length > 0\" :keywords=\"keywords\" variant=\"primary\" />\n      <b-card-text><small class=\"datetime\" v-html=\"displayTime\" /></b-card-text>\n    </b-card-body>\n  </b-card>\n</template>\n\n<script>\nimport { defineComponent, defineAsyncComponent } from 'vue';\nimport { mapState, mapGetters } from 'vuex';\n\nimport FileFormatsMixin from './FileFormatsMixin';\nimport CardMixin from './CardMixin';\nimport StacLink from './StacLink.vue';\nimport { STAC } from 'stac-js';\nimport { formatTemporalExtent, formatTimestamp } from '@radiantearth/stac-fields/formatters';\nimport { BCard, BCardBody, BCardText, BCardTitle, BCardImg } from 'bootstrap-vue-next';\n\nexport default defineComponent({\n  name: 'Item',\n  components: {\n    StacLink,\n    BCard,\n    BCardImg,\n    BCardBody,\n    BCardText,\n    BCardTitle,\n    Keywords: defineAsyncComponent(() => import('./Keywords.vue'))\n  },\n  mixins: [\n    FileFormatsMixin,\n    CardMixin\n  ],\n  props: {\n    item: {\n      type: Object,\n      required: true\n    }\n  },\n  computed: {\n    ...mapState(['showKeywordsInItemCards']),\n    ...mapGetters(['getStac']),\n    data() {\n      return this.getStac(this.item);\n    },\n    classes() {\n      return {\n        queued: !this.data,\n        deprecated: this.isDeprecated,\n        description: this.hasDescription\n      };\n    },\n    extent() {\n      if (this.data && (this.data.properties.start_datetime || this.data.properties.end_datetime)) {\n        return [this.data.properties.start_datetime, this.data.properties.end_datetime];\n      }\n      return null;\n    },\n    displayTime() {\n      if (this.extent) {\n        return formatTemporalExtent(this.extent);\n      }\n      else if (this.data && this.data.properties.datetime) {\n        return formatTimestamp(this.data.properties.datetime);\n      }\n      else {\n        return this.$t('items.noTime');\n      }\n    },\n  },\n  methods: {\n    load(visible) {\n      if (this.item instanceof STAC) {\n        return;\n      }\n      this.$store.commit(visible ? 'queue' : 'unqueue', this.item.getAbsoluteUrl());\n    }\n  }\n});\n</script>\n","<template>\n  <section class=\"items mb-4\">\n    <header>\n      <h2 class=\"title me-2\">{{ $t('stacItem', items.length ) }}</h2>\n      <b-badge v-if=\"itemCount !== null\" pill variant=\"secondary\" class=\"me-4\">{{ itemCount }}</b-badge>\n      <SortButtons v-if=\"!api && items.length > 1\" v-model=\"sort\" />\n    </header>\n\n    <Pagination\n      v-if=\"showPagination\" ref=\"topPagination\" class=\"mb-3\" :class=\"{'me-3': allowFilter}\"\n      :pagination=\"pagination\" placement=\"top\" @paginate=\"paginate\"\n    />\n    <template v-if=\"allowFilter\">\n      <b-button v-if=\"api\" class=\"mb-3\" v-b-toggle.itemFilter :variant=\"hasFilters && !filtersOpen ? 'primary' : 'outline-primary'\">\n        <b-icon-filter />\n        {{ filtersOpen ? $t('items.hideFilter') : $t('items.showFilter') }}\n        <b-badge v-if=\"hasFilters && !filtersOpen\" variant=\"dark\">{{ filterCount }}</b-badge>\n      </b-button>\n      <b-collapse id=\"itemFilter\" v-model=\"filtersOpen\">\n        <SearchFilter\n          type=\"Items\"\n          :title=\"$t('items.filter')\" :parent=\"stac\"\n          :value=\"apiFilters\" @input=\"emitFilter\"\n        />\n      </b-collapse>\n    </template>\n\n    <section class=\"list\">\n      <Loading v-if=\"loading\" fill top />\n      <div v-if=\"chunkedItems.length > 0\" class=\"card-grid\">\n        <Item v-for=\"item in chunkedItems\" :item=\"item\" :key=\"item.href\" />\n      </div>\n      <b-alert v-else :variant=\"hasFilters ? 'warning' : 'info'\" show>\n        <template v-if=\"hasFilters\">{{ $t('search.noItemsFound') }}</template>\n        <template v-else>{{ $t('items.noneAvailableForCollection') }}</template>\n      </b-alert>\n    </section>\n\n    <Pagination v-if=\"showPagination\" class=\"mb-3\" :pagination=\"pagination\" @paginate=\"paginate\" />\n    <b-button v-else-if=\"hasMore\" @click=\"showMore\" variant=\"primary\" v-visible.300=\"showMore\">{{ $t('showMore') }}</b-button>\n  </section>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { BCollapse } from 'bootstrap-vue-next';\nimport { defineComponent, defineAsyncComponent } from 'vue';\n\nimport Utils from '../utils';\nimport Item from './Item.vue';\nimport Loading from './Loading.vue';\nimport { getDisplayTitle } from '../models/stac';\n\nexport default defineComponent({\n  name: \"Items\",\n  components: {\n    Item,\n    SearchFilter: defineAsyncComponent(() => import('./SearchFilter.vue')),\n    Loading,\n    Pagination: defineAsyncComponent(() => import('./Pagination.vue')),\n    BCollapse,\n    SortButtons: defineAsyncComponent(() => import('./SortButtons.vue'))\n  },\n  props: {\n    items: {\n      type: Array,\n      required: true\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    stac: {\n      type: Object,\n      required: true\n    },\n    api: {\n      type: Boolean,\n      default: false\n    },\n    allowFilter: {\n      type: Boolean,\n      default: true\n    },\n    showFilters: {\n      type: Boolean,\n      default: false\n    },\n    apiFilters: {\n      type: Object,\n      default: () => ({})\n    },\n    pagination: {\n      type: Object,\n      default: () => ({})\n    },\n    chunkSize: {\n      type: Number,\n      default: 90\n    },\n    count: {\n      type: Number,\n      default: null\n    }\n  },\n  emits: ['filtersShown', 'filterItems', 'paginate'],\n  data() {\n    return {\n      shownItems: this.chunkSize,\n      filtersOpen: this.showFilters,\n      sort: 0\n    };\n  },\n  computed: {\n    ...mapState(['cardViewSort', 'uiLanguage']),\n    itemCount() {\n      if (this.count !== null) {\n        return this.count;\n      }\n      else if (!this.api && this.items.length > 0) {\n        return this.items.length;\n      }\n      return null;\n    },\n    hasMore() {\n      return this.items.length > this.shownItems;\n    },\n    filterCount() {\n      return Object.values(this.apiFilters).filter(filter => !(filter === null || Utils.size(filter) === 0)).length;\n    },\n    hasFilters() {\n      return this.filterCount > 0;\n    },\n    chunkedItems() {\n      let items = this.items;\n      if (!this.apiFilters.sortby && this.sort !== 0) {\n        const collator = new Intl.Collator(this.uiLanguage);\n        items = items.slice(0).sort((a,b) => collator.compare(getDisplayTitle(a), getDisplayTitle(b)));\n        if (this.sort === -1) {\n          items = items.reverse();\n        }\n      }\n      if (!this.api && this.items.length > this.chunkSize) {\n        return items.slice(0, this.shownItems);\n      }\n      else {\n        return items;\n      }\n    },\n    showPagination() {\n      if (this.api) {\n        if (this.hasFilters) {\n          return true;\n        }\n        else if (this.items.length > 0) {\n          // Check whether any pagination links are available\n          return Object.values(this.pagination).some(link => !!link);\n        }\n      }\n      return false;\n    }\n  },\n  watch: {\n    showFilters() {\n      this.filter = this.showFilters;\n    },\n    filtersOpen() {\n      this.$emit('filtersShown', this.filtersOpen);\n    }\n  },\n  created() {\n    this.sort = Utils.convertHumanizedSortOrder(this.cardViewSort);\n  },\n  mounted() {\n    if (this.showFilters) {\n      setTimeout(() => Utils.scrollTo(this.$el), 250);\n    }\n  },\n  methods: {\n    emitFilter(value, reset) {\n      this.$emit('filterItems', value, reset);\n    },\n    showMore() {\n      this.shownItems += this.chunkSize;\n    },\n    paginate(link, placement) {\n      if (placement === 'bottom' && this.$refs.topPagination) {\n        Utils.scrollTo(this.$refs.topPagination.$el);\n      }\n      this.$emit('paginate', link);\n    }\n  }\n});\n</script>\n"],"file":"Items-CjbyvRC-.js"}