{"version":3,"mappings":"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","names":["ActionPlugin","id","component","href","URI","BIconBoxArrowUpRight","i18n","AssetActionPlugin","asset","OGC3DTILES_SUPPORTED_TYPES","uri","code_payload","code_str","CopcViewer","F3D_SUPPORTED_TYPES","F3D_SUPPORTED_FILEEXTS","F3D","suffix","ext","THREEPIPE_SUPPORTED_TYPES","THREEPIPE_SUPPORTED_FILEEXTS","ThreePipe","GeoJsonIo","geojsonMediaType","encoded","PROTOMAPS_SUPPORTED_TYPES","AssetActions","Cesium","Protomaps","LinkActionPlugin","link","obj","LinkActions","i","_sfc_main","defineAsyncComponent","__vitePreload","m","Description","mapState","mapGetters","plugin","imageMediaTypes","mapMediaTypes","event","props","Utils","match","browserProtocols","data","Asset","where","protocol","key","method","AuthUtils","name","message","_createElementBlock","$options","_createBlock","_component_b_button_group","$props","_component_b_button","$data","_createVNode","_component_b_icon_lock","_createTextVNode","_ctx","_openBlock","_mergeProps","_toHandlers","_component_b_spinner","_component_b_icon_box_arrow_up_right","_component_b_icon_download","_component_CopyButton","_component_b_icon_eye","_Fragment","_renderList","action","_resolveDynamicComponent","_toDisplayString","_component_b_popover","_component_b_list_group","_component_AuthSchemeItem"],"ignoreList":[],"sources":["../../src/actions/ActionPlugin.js","../../src/actions/AssetActionPlugin.js","../../src/actions/assets/Cesium.js","../../src/actions/assets/CopcViewer.js","../../src/actions/assets/F3D.js","../../src/actions/assets/ThreePipe.js","../../src/actions/assets/GeoJsonIo.js","../../src/actions/assets/Protomaps.js","../../assetActions.config.js","../../src/actions/LinkActionPlugin.js","../../src/actions/links/Cesium.js","../../src/actions/links/Protomaps.js","../../linkActions.config.js","../../src/components/HrefActions.vue"],"sourcesContent":["import URI from 'urijs';\nimport i18n from \"../i18n\";\nimport BIconBoxArrowUpRight from '~icons/bi/box-arrow-up-right';\n\nexport default class ActionPlugin {\n\n  constructor(id, component) {\n    this.id = id;\n    this.component = component;\n  }\n\n  get btnOptions() {\n    let href;\n    if (this.uri instanceof URI) {\n      href = this.uri.toString();\n    }\n    else if (typeof this.uri === 'string') {\n      href = this.uri;\n    }\n    if (href) {\n      return {\n        href,\n        target: '_blank'\n      };\n    }\n    return {};\n  }\n\n  get onClick() {\n    return () => {};\n  }\n\n  get uri() {\n    return null;\n  }\n\n  get show() {\n    return false;\n  }\n\n  get icon() {\n    return BIconBoxArrowUpRight;\n  }\n\n  get text() {\n  return i18n.global.t('open');\n  }\n\n}\n","import ActionPlugin from './ActionPlugin';\n\nexport default class AssetActionPlugin extends ActionPlugin {\n\n  constructor(asset, component, id) {\n    super(id, component);\n    this.asset = asset;\n  }\n\n}\n","import AssetActionPlugin from \"../AssetActionPlugin\";\nimport URI from 'urijs';\nimport i18n from \"../../i18n\";\n\n// See mime types discussion for 3d-tiles here and there\n// https://github.com/opengeospatial/ogcapi-3d-geovolumes/issues/13\nconst OGC3DTILES_SUPPORTED_TYPES = [\n  // 'application/json',\n  'application/3dtiles+json',\n];\n\nexport default class Cesium extends AssetActionPlugin {\n\n  get show() {\n    return this.component.isBrowserProtocol && OGC3DTILES_SUPPORTED_TYPES.includes(this.asset.type);\n  }\n\n  get uri() {\n    // https://sandcastle.cesium.com/standalone.html vs https://sandcastle.cesium.com/index.html\n    let uri = new URI(\"https://sandcastle.cesium.com/standalone.html\");\n    const tileset_url = this.component.href;\n    const code_payload = {\n      html: `\n        <style> @import url(../templates/bucket.css); </style>\n        <div id=\"cesiumContainer\" class=\"fullSize\"></div> \n      `, \n      code: `\n        const viewer = new Cesium.Viewer(\"cesiumContainer\", {\n          terrain: Cesium.Terrain.fromWorldTerrain(),\n        });\n\n        try {\n          const tileset = await Cesium.Cesium3DTileset.fromUrl('${tileset_url}');\n          viewer.scene.primitives.add(tileset);\n          viewer.zoomTo(tileset);\n        } catch (error) {\n          console.log('Error loading tileset');\n        } \n      `.replaceAll('        ', '')\n    };\n    const code_str = btoa(JSON.stringify(code_payload));\n    uri.addQuery('code', code_str);\n    return uri;\n  }\n\n  get text() {\n    return i18n.global.t('actions.openIn', {service: 'Cesium Sandcastle'});\n  }\n\n}","import AssetActionPlugin from \"../AssetActionPlugin\";\nimport URI from 'urijs';\nimport i18n from \"../../i18n\";\n\nexport default class CopcViewer extends AssetActionPlugin {\n\n  get show() {\n    return this.component.isBrowserProtocol && (\n      this.asset.type === 'application/vnd.laszip+copc'\n      ||  URI(this.asset.href).filename() == 'ept.json'\n    );\n  }\n\n  get uri() {\n    let uri = new URI(\"https://viewer.copc.io\");\n    uri.addQuery('copc', this.component.href);\n    return uri;\n  }\n\n  get text() {\n    return i18n.global.t('actions.openIn', {service: 'copc.io'});\n  }\n\n}","import AssetActionPlugin from \"../AssetActionPlugin\";\nimport URI from 'urijs';\nimport i18n from \"../../i18n\";\n\n// obj & ply files are usually with mime-type text/plain \nconst F3D_SUPPORTED_TYPES = [\n  'model/gltf-binary', \n  'model/gltf+json',\n  'application/fbx',\n];\n// below is usually text/plain\nconst F3D_SUPPORTED_FILEEXTS = ['obj', 'ply', 'fbx', 'glb', 'gltf'];\nexport default class F3D extends AssetActionPlugin {\n\n  get show() {\n    const suffix = URI(this.asset.href).suffix();\n    return this.component.isBrowserProtocol && (\n      F3D_SUPPORTED_TYPES.includes(this.asset.type)\n      || F3D_SUPPORTED_FILEEXTS.some(ext => (suffix === ext))\n    );\n  }\n\n  get uri() {\n    // `https://f3d.app/web/#model=${modelUrl}` see PR merged for parsing model url and extension:\n    // https://github.com/f3d-app/f3d/pull/1596\n    // Could enforce extension to help f3d.app determine the mesh type and loader to use\n    let uri = new URI(\"https://f3d.app/viewer\");\n    uri.addQuery(\"model\", this.component.href); \n    uri = uri.toString().replace('?', '#');\n    return uri;\n  }\n\n  get text() {\n    return i18n.global.t('actions.openIn', {service: 'f3d.app'});\n  }\n\n}\n","import AssetActionPlugin from \"../AssetActionPlugin\";\nimport URI from 'urijs';\nimport i18n from \"../../i18n\";\n\n// obj & ply files are usually with mime-type text/plain \nconst THREEPIPE_SUPPORTED_TYPES = [\n  'model/gltf-binary', \n  'model/gltf+json',\n  'application/fbx',\n];\n// below is usually text/plain\nconst THREEPIPE_SUPPORTED_FILEEXTS = ['obj', 'ply', 'fbx', 'glb', 'gltf', 'stl', 'usdz'];\nexport default class ThreePipe extends AssetActionPlugin {\n\n  get show() {\n    const suffix = URI(this.asset.href).suffix();\n    return this.component.isBrowserProtocol && (\n      THREEPIPE_SUPPORTED_TYPES.includes(this.asset.type)\n      || THREEPIPE_SUPPORTED_FILEEXTS.some(ext => (suffix === ext))\n    );\n  }\n\n  get uri() {\n    let uri = new URI(\"https://threepipe.org/examples/tweakpane-editor\");\n    uri.addQuery(\"model\", this.component.href); \n    return uri;\n  }\n\n\n  get text() {\n    return i18n.global.t('actions.openIn', {service: 'ThreePipe'});\n  }\n\n}","import AssetActionPlugin from \"../AssetActionPlugin\";\nimport { geojsonMediaType } from \"../../utils\";\nimport URI from 'urijs';\nimport i18n from \"../../i18n\";\n\nexport default class GeoJsonIo extends AssetActionPlugin {\n\n  get show() {\n    return this.component.isBrowserProtocol && geojsonMediaType == this.asset.type;\n  }\n\n  get uri() {\n    // Docs: https://github.com/mapbox/geojson.io/blob/main/API.md\n    const uri = new URI(\"https://geojson.io\");\n    const encoded = encodeURIComponent(this.component.href);\n    uri.fragment(`data=data:text/x-url,${encoded}`);\n    return uri;\n  }\n\n  get text() {\n    return i18n.global.t('actions.openIn', {service: 'geojson.io'});\n  }\n\n}\n","import AssetActionPlugin from \"../AssetActionPlugin\";\nimport URI from 'urijs';\nimport i18n from \"../../i18n\";\n\n// obj & ply files are usually with mime-type text/plain \nconst PROTOMAPS_SUPPORTED_TYPES = [\n  'application/vnd.pmtiles',\n];\n\nexport default class Protomaps extends AssetActionPlugin {\n\n  get show() {\n    // Rather check if .pmtiles substring present in this.asset.href or simply this.component.filename.endsWith('pmtiles')\n    return this.component.isBrowserProtocol && (\n      PROTOMAPS_SUPPORTED_TYPES.includes(this.asset.type)\n      ||  URI(this.asset.href).suffix() == 'pmtiles'\n    );\n  }\n\n  get uri() {\n    let uri = new URI(\"https://pmtiles.io/\");\n    uri.addQuery(\"url\", this.component.href); // returns the URI instance for chaining\n    return uri;\n  }\n\n  get text() {\n    return i18n.global.t('actions.openIn', {service: 'Protomaps'});\n  }\n\n}","//import Felt from './src/actions/assets/Felt.js';\nimport Cesium from './src/actions/assets/Cesium.js';\nimport CopcViewer from './src/actions/assets/CopcViewer.js';\nimport F3D from './src/actions/assets/F3D.js';\nimport ThreePipe from './src/actions/assets/ThreePipe.js';\nimport GeoJsonIo from './src/actions/assets/GeoJsonIo.js';\n// import NASA_AMMOS_3DTiles from './src/actions/assets/NASA_AMMOS_3DTiles.js';\n// import Geoparquet from './src/actions/assets/Geoparquet.js';\n// import Potree from './src/actions/assets/Potree.js';\nimport Protomaps from './src/actions/assets/Protomaps.js';\n\nexport default {\n  //Felt\n  Cesium,\n  CopcViewer,\n  F3D,\n  ThreePipe,\n  GeoJsonIo,\n  // Potree,\n  Protomaps,\n};\n","import ActionPlugin from './ActionPlugin';\n\nexport default class LinkActionPlugin extends ActionPlugin {\n\n  constructor(link, component, id) {\n    super(id, component);\n    this.link = link;\n  }\n\n  get btnOptions() {\n    let obj = super.btnOptions;\n    obj.rel = this.link.rel;\n    return obj;\n  }\n\n}","import LinkActionPlugin from \"../LinkActionPlugin\";\nimport URI from 'urijs';\nimport i18n from \"../../i18n\";\n\nexport default class Cesium extends LinkActionPlugin {\n\n  get show() {\n    return this.link.rel === '3d-tiles';\n  }\n\n  get uri() {\n    // https://sandcastle.cesium.com/standalone.html vs https://sandcastle.cesium.com/index.html\n    let uri = new URI(\"https://sandcastle.cesium.com/standalone.html\");\n    const tileset_url = this.link.href;\n    const code_payload = {\n      html: `\n        <style> @import url(../templates/bucket.css); </style>\n        <div id=\"cesiumContainer\" class=\"fullSize\"></div> \n      `, \n      code: `\n        const viewer = new Cesium.Viewer(\"cesiumContainer\", {\n          terrain: Cesium.Terrain.fromWorldTerrain(),\n        });\n\n        try {\n          const tileset = await Cesium.Cesium3DTileset.fromUrl('${tileset_url}');\n          viewer.scene.primitives.add(tileset);\n          viewer.zoomTo(tileset);\n        } catch (error) {\n          console.log('Error loading tileset');\n        } \n      `.replaceAll('        ', '')\n    };\n    const code_str = btoa(JSON.stringify(code_payload));\n    uri.addQuery('code', code_str);\n    return uri;\n  }\n\n  get text() {\n    return i18n.global.t('actions.openIn', {service: 'Cesium Sandcastle'});\n  }\n\n}","import LinkActionPlugin from \"../LinkActionPlugin\";\nimport URI from 'urijs';\nimport i18n from \"../../i18n\";\n\nexport default class Protomaps extends LinkActionPlugin {\n\n  get show() {\n    return this.link.rel === 'pmtiles'; \n    // could also check if this.link.type === \"application/vnd.pmtiles\" \n  }\n\n  get uri() {\n    let uri = new URI(\"https://pmtiles.io/\");\n    uri.addQuery(\"url\", this.link.href); \n    return uri;\n  }\n\n  get text() {\n    return i18n.global.t('actions.openIn', {service: 'Protomaps'});\n  }\n\n}","// import Felt from './src/actions/links/Felt.js';\n// import NASA_AMMOS_3DTiles from './src/actions/links/NASA_AMMOS_3DTiles.js';\nimport Cesium from './src/actions/links/Cesium.js';\nimport Protomaps from './src/actions/links/Protomaps.js';\n\nexport default {\n    // Felt, \n    Cesium, \n    Protomaps\n};","<template>\n  <div>\n    <b-button-group class=\"actions\" :vertical=\"vertical\" :size=\"size\" v-if=\"href\">\n      <b-button variant=\"danger\" v-if=\"requiresAuth\" tag=\"a\" tabindex=\"0\" :id=\"`popover-href-${id}-btn`\" @click=\"handleAuthButton\">\n        <b-icon-lock /> {{ $t('authentication.required') }}\n      </b-button>\n      <b-button v-if=\"hasDownloadButton\" :disabled=\"requiresAuth\" variant=\"primary\" v-bind=\"downloadProps\" v-on=\"downloadEvents\">\n        <b-spinner v-if=\"loading\" small variant=\"light\" />\n        <b-icon-box-arrow-up-right v-else-if=\"browserCanOpenFile\" />\n        <b-icon-download v-else />\n        {{ buttonText }}\n      </b-button>\n      <CopyButton variant=\"primary\" :copyText=\"href\" :title=\"href\">\n        {{ copyButtonText }}\n      </CopyButton>\n      <b-button v-if=\"hasShowButton\" @click=\"show\" variant=\"primary\">\n        <b-icon-eye class=\"me-1\" />\n        <template v-if=\"isThumbnail\">{{ $t('assets.showThumbnail') }}</template>\n        <template v-else>{{ $t('assets.showOnMap') }}</template>\n      </b-button>\n      <b-button v-for=\"action of actions\" :key=\"action.id\" variant=\"primary\" v-bind=\"action.btnOptions\" @click=\"action.onClick\">\n        <component v-if=\"action.icon\" :is=\"action.icon\" class=\"me-1\" />\n        {{ action.text }}\n      </b-button>\n    </b-button-group>\n\n    <b-popover\n      v-if=\"auth.length > 1\" click focus\n      :id=\"`popover-href-${id}`\" class=\"href-auth-methods\" :target=\"`popover-href-${id}-btn`\"\n      :title=\"$t('authentication.chooseMethod')\" teleport-to=\"#stac-browser\" :boundary-padding=\"10\"\n    >\n      <b-list-group>\n        <AuthSchemeItem v-for=\"(method, i) in auth\" :key=\"i\" :method=\"method\" @authenticate=\"startAuth\" />\n      </b-list-group>\n    </b-popover>\n  </div>\n</template>\n\n\n<script>\nimport { defineAsyncComponent } from 'vue';\n\nimport Description from './Description.vue';\nimport Utils, { imageMediaTypes, mapMediaTypes } from '../utils';\nimport { mapGetters, mapState } from 'vuex';\nimport AssetActions from '../../assetActions.config';\nimport LinkActions from '../../linkActions.config';\nimport URI from 'urijs';\nimport AuthUtils from './auth/utils';\nimport { Asset } from 'stac-js';\nimport { browserProtocols } from 'stac-js/src/http';\n\nlet i = 0;\n\nexport default {\n  name: 'HrefActions',\n  components: {\n    AuthSchemeItem: defineAsyncComponent(() => import('./AuthSchemeItem.vue')),\n    BPopover: defineAsyncComponent(() => import('bootstrap-vue-next').then(m => m.BPopover)),\n    CopyButton: defineAsyncComponent(() => import('./CopyButton.vue')),\n    Description,\n  },\n  props: {\n    data: {\n      type: Object,\n      required: true\n    },\n    isAsset: {\n      type: Boolean,\n      default: false\n    },\n    vertical: {\n      type: Boolean,\n      default: false\n    },\n    size: {\n      type: String,\n      default: 'md'\n    },\n    shown: {\n      type: Boolean,\n      default: false\n    },\n    auth: {\n      type: Array,\n      default: () => ([])\n    }\n  },\n  emits: ['show'],\n  data() {\n    return {\n      id: i++\n    };\n  },\n  computed: {\n    ...mapState(['downloads', 'pathPrefix', 'requestHeaders', 'buildTileUrlTemplate', 'useTileLayerAsFallback']),\n    ...mapGetters(['getRequestUrl']),\n    ...mapGetters('auth', ['isLoggedIn']),\n    loading() {\n      return Boolean(this.downloads[this.href]);\n    },\n    requiresAuth() {\n      return !this.isLoggedIn && this.auth.length > 0;\n    },\n    tileRendererType() {\n      if (this.buildTileUrlTemplate && !this.useTileLayerAsFallback) {\n        return 'server';\n      }\n      else {\n        return 'client';\n      }\n    },\n    actions() {\n      return Object.entries(this.isAsset ? AssetActions : LinkActions)\n        .map(([id, plugin]) => new plugin(this.data, this, id))\n        .filter(plugin => plugin.show);\n    },\n    canShow() {\n      // We need to know the type, otherwise we don't even try to show it\n      if (typeof this.data?.type !== 'string') {\n        return false;\n      }\n      // If the tile renderer is a tile server, we can't really know what it supports so we pass all images\n      else if (this.tileRendererType === 'server' && imageMediaTypes.includes(this.data?.type)) {\n        return true;\n      }\n      // Only http(s) links and relative links are supported\n      else if (!this.isBrowserProtocol) {\n        return false;\n      }\n      // Otherwise, all images that a browser can read are supported + GeoJSON\n      else if (mapMediaTypes.includes(this.data?.type)) {\n        return true;\n      }\n      return false;\n    },\n    hasShowButton() {\n      return this.isAsset && this.canShow && !this.shown;\n    },\n    hasDownloadButton() {\n      return this.isAsset && this.isBrowserProtocol;\n    },\n    downloadEvents() {\n      if (this.hasDownloadButton && this.useAltDownloadMethod) {\n        return {\n          click: async (event) => {\n            event.preventDefault();\n            this.altDownload();\n          }\n        };\n      }\n      return {};\n    },\n    downloadProps() {\n      if (this.hasDownloadButton && !this.useAltDownloadMethod) {\n        const props = {\n          href: this.href,\n          target: '_blank',\n        };\n        if (!this.browserCanOpenFile) {\n          props.download = Utils.assetFilename(this.data);\n        }\n        return props;\n      }\n      return {};\n    },\n    useAltDownloadMethod() {\n      if (!this.isBrowserProtocol || !window.isSecureContext) {\n        return false;\n      }\n      else if (typeof this.data.method === 'string' && this.data.method.toUpperCase() !== 'GET') {\n        return true;\n      }\n      else if (Utils.size(this.data.headers) > 0 || Utils.size(this.requestHeaders) > 0) {\n        return true;\n      }\n      return false;\n    },\n    protocol() {\n      if (typeof this.href === 'string') {\n        if (this.href) {\n          let match = this.href.match(/^(\\w+):\\/\\//);\n          if (match) {\n            return match[1].toLowerCase();\n          }\n        }\n      }\n      return null;\n    },\n    isBrowserProtocol() {\n      return !this.protocol || browserProtocols.includes(this.protocol);\n    },\n    isThumbnail() {\n      if (this.isAsset) {\n        return this.data.isPreview() && this.data.canBrowserDisplayImage();\n      }\n      else {\n        return this.data.rel === 'preview' && this.data.canBrowserDisplayImage();\n      }\n    },\n    href() {\n      if (typeof this.data.href !== 'string') {\n        return null;\n      }\n      return this.getRequestUrl(this.data.getAbsoluteUrl());\n    },\n    assetWithHref() {\n      // Override asset href with absolute URL\n      // Clone asset so that we can change the href\n      const data = new Asset(this.data);\n      data.href = this.href;\n      return data;\n    },\n    from() {\n      return this.protocolName(this.protocol);\n    },\n    browserCanOpenFile() {\n      if (this.useAltDownloadMethod)  {\n        return false;\n      }\n      if (this.data.canBrowserDisplayImage()) {\n        return true;\n      }\n      else if (typeof this.data?.type === 'string') {\n        switch(this.data.type.toLowerCase()) {\n          case 'text/html':\n          case 'application/xhtml+xml':\n          case 'text/plain':\n          case 'application/pdf':\n            return true;\n        }\n      }\n      return false;\n    },\n    buttonText() {\n      if (this.browserCanOpenFile && this.isBrowserProtocol) {\n        return this.$t('open');\n      }\n      let where = (!this.isBrowserProtocol && this.from) ? 'withSource' : 'generic';\n      return this.$t(`assets.download.${where}`, {source: this.from});\n    },\n    copyButtonText() {\n      let where = (!this.isBrowserProtocol && this.from) ? 'withSource' : 'generic';\n      return this.$t(`assets.copyUrl.${where}`, {source: this.from});\n    }\n  },\n  methods: {\n    async altDownload() {\n      if (!window.isSecureContext) {\n        window.location.href = this.href;\n        return;\n      }\n\n      await this.$store.dispatch('altDownload', this.assetWithHref);\n    },\n    protocolName(protocol) {\n      if (typeof protocol !== 'string') {\n        return '';\n      }\n      switch(protocol.toLowerCase()) {\n        case 's3':\n          try {\n            const parsed = URI(this.href);\n            const key = `protocol.s3.${parsed.domain()}`;\n            if (this.$te(key)) {\n              return this.$t(key);\n            }\n          } catch {\n            // Fall back to the default\n          }\n          return this.$t('protocol.s3.default');\n        case 'abfs':\n        case 'abfss':\n          return this.$t('protocol.azure');\n        case 'gcs':\n          return this.$t('protocol.gcs');\n        case 'ftp':\n          return this.$t('protocol.ftp');\n        case 'oss':\n          return this.$t('protocol.oss');\n        case 'file':\n          return this.$t('protocol.file');\n      }\n      return '';\n    },\n    show() {\n      // todo: can we use data.getAbsoluteUrl in all places where we handle the event in favor of the cloning/updating here?\n      this.$emit('show', this.assetWithHref);\n    },\n    handleAuthButton() {\n      if (this.auth.length === 1) {\n        this.startAuth(this.auth[0]);\n      }\n    },\n    async startAuth(method) {\n      if (AuthUtils.isSupported(method, this.$store.state)) {\n        await this.$store.dispatch('config', { authConfig: method });\n        await this.$store.dispatch('auth/requestLogin');\n      }\n      else {\n        const name = this.$t(`authentication.schemeTypes.${method.type}`, method);\n        const message = this.$t('authentication.unsupportedLong', {method: name});\n        this.$store.commit('showGlobalError', {\n          error: new Error(message),\n          message: this.$t('authentication.unsupported')\n        });\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n#stac-browser .href-auth-methods .popover-body {\n  padding: 0;\n}\n</style>\n"],"file":"HrefActions-DFR6pulB.js"}