const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/validation-CiSbgQph.js","assets/_commonjsHelpers-CE1G-McA.js","assets/validation-DVQ8QZsd.js","assets/index-BQX9bATH.js","assets/validation-9ZeZG1zi.js","assets/validation-CE4ir67K.js","assets/index-D0D7xk0L.js","assets/validation-D7WjSp3z.js","assets/validation-CUGyQHUE.js","assets/validation-P3YPSCcq.js","assets/validation-TxEYvk0q.js","assets/index-BbgC0TIi.js","assets/validation-Dt9cZO2X.js","assets/validation-BV0VYDqP.js","assets/validation-Rn2y5VW-.js","assets/validation-CVGEBccJ.js","assets/index-1lWbbbYH.js","assets/validation-DCvCByxZ.js","assets/validation-C18g3LOX.js","assets/validation-Dn2D4kZ0.js","assets/validation-BghDFfkk.js","assets/index-BkiipJk1.js","assets/validation-Dl8EFMul.js","assets/validation-DPB_sgdd.js"])))=>i.map(i=>d[i]);
import{bk as w,bl as f,n as a,p as l,q as i,L as d,F as C,G as r,H as n,K as E,B as c,I as R,ax as V,b7 as L,y as $,b4 as O,b1 as I,d as D,bp as T,cA as B,bu as s,bs as S}from"./index-4V-ffF_e.js";import{v as F}from"./index-CdcEDzr0.js";import{B as H}from"./BrowseMixin-BS7cLncV.js";import{d as N,U as q}from"./utils-BXWzvTjY.js";import{a as G}from"./BCardText.vue_vue_type_script_setup_true_lang-SRGbviaO-C7vVGdSM.js";import{a as M,_ as U}from"./BListGroupItem.vue_vue_type_script_setup_true_lang-J0Ydbiva-BSUvV67k.js";import{_ as W}from"./BBadge.vue_vue_type_script_setup_true_lang-D9DEOOtU-DT4U9cv3.js";import{e as z,b as K}from"./BCard.vue_vue_type_script_setup_true_lang-9RhyvL8I-gB4qpKUU.js";import"./I18N-DlIXJTel.js";import"./_commonjsHelpers-CE1G-McA.js";import"./util-CAA-4cq9.js";import"./Loading-DNWIspeX.js";import"./ConditionalWrapper.vue_vue_type_script_lang-IX_NpHH--B1-KiooU.js";const j=/\/(v?\d+\.\d+[^/]+)(\/|$)/,Z={name:"ValidationResult",components:{BCard:K,BCardHeader:z},props:{id:{type:String,required:!0},errors:{type:Array,required:!0},warnings:{type:Array,default:null},locale:{type:Function,default:null},context:{type:Object,required:!0}},computed:{titleComponent(){return this.isCore?"span":"code"},localizedErrors(){if(typeof this.locale!="function")return this.errors;const e=this.errors.map(t=>Object.assign({},t));return this.locale(e),e.map((t,u)=>typeof t.keyword>"u"?this.errors[u]:t)},hasWarnings(){return Array.isArray(this.warnings)&&this.warnings.length>0},isCore(){return this.id==="core"},type(){switch(this.context.type){case"Feature":return this.$t("stacItem",1);case"Catalog":return this.$t("stacCatalog",1);case"Collection":return this.$t("stacCollection",1);default:return this.context.type}},name(){return this.isCore?this.type:this.id.startsWith("https://stac-extensions.github.io/")?q(this.id).directory().replace(j,"/").replace(/\//g," ").trim():this.id.replace(/^\w+:\/\//,"").replace(/(\.github\.io|raw\.githubusercontent\.com)\/?/,"").replace(/\/json-schema/,"").replace(/\/[^/]+\.json$/,"").replace(j,"")},version(){if(this.isCore)return this.context.version;let e=this.id.match(j);return e?e[1]:null}},methods:{makeAjvErrorMessage(e){let t=e.message;if(N.isObject(e.params)&&Object.keys(e.params).length>0){let u=Object.entries(e.params).map(([y,A])=>{let o;const _=`source.validationParams.${y}`;return this.$te(_)?o=this.$t(_):o=y.replace(/([^A-Z]+)([A-Z])/g,"$1 $2").toLowerCase(),`${o}: ${A}`}).join(", ");t+=` (${u})`}return e.instancePath?`${e.instancePath} ${t}`:e.schemaPath?this.$t("messageForSchemaError",{message:t,schemaPath:e.schemaPath}):t||String(e)}}};function J(e,t,u,y,A,o){const _=W,v=f("b-card-header"),g=U,m=M,b=f("b-card");return a(),l(b,{"no-body":""},{default:i(()=>[d(v,null,{default:i(()=>[(a(),l(C(o.titleComponent),{class:"name me-1",title:u.id},{default:i(()=>[r(n(o.name),1)]),_:1},8,["title"])),t[0]||(t[0]=r()),o.version?(a(),l(_,{key:0,variant:"primary ms-1"},{default:i(()=>[r(n(o.version),1)]),_:1})):E("",!0),t[1]||(t[1]=r()),o.isCore?E("",!0):(a(),l(_,{key:1,variant:"dark ms-1"},{default:i(()=>[r(n(e.$t("source.extension")),1)]),_:1}))]),_:1}),t[4]||(t[4]=r()),d(m,{flush:""},{default:i(()=>[u.errors.length>0?(a(!0),c(R,{key:0},V(o.localizedErrors,(p,h)=>(a(),l(g,{key:h,variant:"danger"},{default:i(()=>[r(n(o.makeAjvErrorMessage(p)),1)]),_:2},1024))),128)):E("",!0),t[2]||(t[2]=r()),o.hasWarnings?(a(!0),c(R,{key:1},V(u.warnings,(p,h)=>(a(),l(g,{key:h,variant:"warning"},{default:i(()=>[r(n(o.makeAjvErrorMessage(p)),1)]),_:2},1024))),128)):E("",!0),t[3]||(t[3]=r()),u.errors.length===0&&!o.hasWarnings?(a(),l(g,{key:2,variant:"success"},{default:i(()=>[r(n(e.$t("source.valid")),1)]),_:1})):E("",!0)]),_:1})]),_:1})}const X=w(Z,[["render",J]]),Q=D({name:"Validation",components:{BCardGroup:G,ValidationResult:X},mixins:[H],props:{path:{type:String,required:!0}},data(){return{working:!0,report:null,internalError:null,locale:null}},computed:{...S(["data","uiLanguage"]),variant(){return this.report&&this.report.valid?"success":"danger"}},watch:{data:{immediate:!0,async handler(){await this.validate()}},uiLanguage:{immediate:!0,async handler(e){if(!e)return;const t=(await B(Object.assign({"../locales/ar/validation.js":()=>s(()=>import("./validation-CiSbgQph.js"),__vite__mapDeps([0,1])),"../locales/de-CH/validation.js":()=>s(()=>import("./validation-DVQ8QZsd.js"),__vite__mapDeps([2,3,1])),"../locales/de/validation.js":()=>s(()=>import("./validation-9ZeZG1zi.js"),__vite__mapDeps([4,3,1])),"../locales/en-GB/validation.js":()=>s(()=>import("./validation-CE4ir67K.js"),__vite__mapDeps([5,6,1])),"../locales/en-US/validation.js":()=>s(()=>import("./validation-D7WjSp3z.js"),__vite__mapDeps([7,6,1])),"../locales/en/validation.js":()=>s(()=>import("./validation-CUGyQHUE.js"),__vite__mapDeps([8,6,1])),"../locales/es/validation.js":()=>s(()=>import("./validation-P3YPSCcq.js"),__vite__mapDeps([9,1])),"../locales/fr-CA/validation.js":()=>s(()=>import("./validation-TxEYvk0q.js"),__vite__mapDeps([10,11,1])),"../locales/fr-CH/validation.js":()=>s(()=>import("./validation-Dt9cZO2X.js"),__vite__mapDeps([12,11,1])),"../locales/fr/validation.js":()=>s(()=>import("./validation-BV0VYDqP.js"),__vite__mapDeps([13,11,1])),"../locales/id/validation.js":()=>s(()=>import("./validation-Rn2y5VW-.js"),__vite__mapDeps([14,1])),"../locales/it-CH/validation.js":()=>s(()=>import("./validation-CVGEBccJ.js"),__vite__mapDeps([15,16,1])),"../locales/it/validation.js":()=>s(()=>import("./validation-DCvCByxZ.js"),__vite__mapDeps([17,16,1])),"../locales/ja/validation.js":()=>s(()=>import("./validation-C18g3LOX.js"),__vite__mapDeps([18,1])),"../locales/pl/validation.js":()=>s(()=>import("./validation-Dn2D4kZ0.js"),__vite__mapDeps([19,1])),"../locales/pt-BR/validation.js":()=>s(()=>import("./validation-BghDFfkk.js"),__vite__mapDeps([20,21,1])),"../locales/pt/validation.js":()=>s(()=>import("./validation-Dl8EFMul.js"),__vite__mapDeps([22,21,1])),"../locales/ro/validation.js":()=>s(()=>import("./validation-DPB_sgdd.js"),__vite__mapDeps([23,6,1]))}),`../locales/${e}/validation.js`,4)).default;t instanceof Promise?this.locale=(await t).default:this.locale=t}}},methods:{async validate(){if(this.working=!0,this.report=null,this.data instanceof T)try{const e=this.data._original||this.data.toJSON();this.report=await F(e,{})}catch(e){this.internalError=e}finally{this.working=!1}}}}),Y={class:"validation d-flex flex-column"},x={key:4},ee={key:0,class:"text-success"},te={key:1,class:"text-danger"};function re(e,t,u,y,A,o){const _=L,v=f("ErrorAlert"),g=f("Loading"),m=O,b=I,p=f("ValidationResult"),h=f("b-card-group");return a(),c("main",Y,[!e.allowExternalAccess&&e.isExternal?(a(),l(_,{key:0,show:""},{default:i(()=>[r(n(e.$t("errors.noExternalAccess")),1)]),_:1})):e.error?(a(),l(v,{key:1,url:e.url,description:e.errorDescription,id:e.errorId},null,8,["url","description","id"])):e.internalError?(a(),l(v,{key:2,url:e.url,description:e.internalError.message},null,8,["url","description"])):e.loading||e.working?(a(),l(g,{key:3,stretch:""})):e.report?(a(),c("section",x,[$("h2",null,n(e.$t("source.validationReport.title")),1),t[3]||(t[3]=r()),d(_,{variant:"info",show:""},{default:i(()=>[r(n(e.$t("source.validationReport.disclaimer")),1)]),_:1}),t[4]||(t[4]=r()),d(b,{class:"stac-id"},{default:i(()=>[d(m,{cols:"4"},{default:i(()=>[r(n(e.$t("source.id")),1)]),_:1}),t[0]||(t[0]=r()),d(m,null,{default:i(()=>[$("code",null,n(e.report.id),1)]),_:1})]),_:1}),t[5]||(t[5]=r()),d(b,{class:"result"},{default:i(()=>[d(m,{cols:"4"},{default:i(()=>[r(n(e.$t("source.validationReport.result")),1)]),_:1}),t[1]||(t[1]=r()),d(m,null,{default:i(()=>[e.report.valid?(a(),c("span",ee,n(e.$t("source.valid")),1)):(a(),c("span",te,n(e.$t("source.invalid")),1))]),_:1})]),_:1}),t[6]||(t[6]=r()),t[7]||(t[7]=$("hr",{class:"my-4"},null,-1)),t[8]||(t[8]=r()),d(h,{class:"results",columns:""},{default:i(()=>[d(p,{id:"core",errors:e.report.results.core,warnings:e.report.messages,locale:e.locale,context:e.report},null,8,["errors","warnings","locale","context"]),t[2]||(t[2]=r()),(a(!0),c(R,null,V(e.report.results.extensions,(P,k)=>(a(),l(p,{key:k,id:k,errors:P,locale:e.locale,context:e.report},null,8,["id","errors","locale","context"]))),128))]),_:1})])):(a(),l(v,{key:5,description:e.$t("errors.default")},null,8,["description"]))])}const ve=w(Q,[["render",re],["__scopeId","data-v-74924425"]]);export{ve as default};
//# sourceMappingURL=Validation-CSwCG1Bx.js.map
